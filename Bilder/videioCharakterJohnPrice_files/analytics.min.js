/*!! Core Analytics v6.13.2 - Copyright (c) 2015-2022 NRK */
this.CA6=this.CA6||{},this.CA6["statistics/analytics"]=function(){"use strict";function e(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}var n;function t(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.filter((function(e){return e})).forEach((function(n){Object.keys(n).forEach((function(t){return e[t]=n[t]}))})),e}n=function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(r){function o(){}function a(n,t,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=r.write?r.write(t,n):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in a)a[s]&&(c+="; "+s,!0!==a[s]&&(c+="="+a[s].split(";")[0]));return document.cookie=n+"="+t+c}}function i(e,t){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],i=0;i<a.length;i++){var c=a[i].split("="),s=c.slice(1).join("=");t||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var d=n(c[0]);if(s=(r.read||r)(s,d)||n(s),t)try{s=JSON.parse(s)}catch(e){}if(o[d]=s,e===d)break}catch(e){}}return e?o[e]:o}}return o.set=a,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(n,t){a(n,"",e(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}((function(){}))},n();var r,o=function(){if("undefined"==typeof window)return function(){return null};var e=window.Element.prototype,n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return function(t,r){if(e.closest)return t.closest(r);for(var o=t;o;o=o.parentElement)if(n.call(o,r))return o;return null}}();function a(e){return e.split("://").pop().replace(/^www\./,"")}!function(e){e.contentId="dimension1",e.title="dimension2",e.year="dimension3",e.month="dimension4",e.day="dimension5",e.parentId="dimension10"}(r||(r={}));var i="https://www.google-analytics.com/collect",c="https://nrk-recommendations.appspot.com/collectPersonalEvent";return function(n){function s(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];try{window.ga.apply(window,e(["".concat(n.uuid,".").concat(t)],r,!1))}catch(e){throw e}}function d(){var e=window.ga.getByName(n.uuid),t=e.get("sendHitTask");e.set("sendHitTask",(function(e){var r=Number(Boolean(n.get("userId"))),o=Number(r&&"1"===e.get("dimension9")),a=e.get("hitPayload").replace(/(^|&)cd[89]=[^&]*/g,"");if(e.set("dimension8",String(r),!0),e.set("dimension9",String(o),!0),e.set("hitPayload","".concat(a,"&cd8=").concat(r,"&cd9=").concat(o),!0),o){var i=n.get("userId"),s="".concat(e.get("hitPayload"),"&nrkUserId=").concat(encodeURIComponent(i));if(navigator.sendBeacon)navigator.sendBeacon(c,s);else{var d=new window.XMLHttpRequest;d.open("POST",c,!0),d.send(s)}n.log('Sending personalization task with user "'.concat(i,'" to ').concat(c,":\n").concat(s))}t(e)}))}function u(e,n,r){var o=["eventCategory","eventAction","eventLabel","eventValue","nonInteraction"],a={dimension9:"event.personalization"===r?"1":"0"},i={};Array.isArray(e.ga)&&(e.ga=e.ga.reduce((function(e,n,r){return"object"==typeof n?t(e,n):e[o[r]]=n,e}),{})),Object.keys(e.ga).forEach((function(n){-1===o.indexOf(n)?i[n]=e.ga[n]:a[n]=e.ga[n]}));var c=parseInt(a.eventValue,10);a.eventCategory?a.eventAction?"eventValue"in a&&isNaN(c)?n("error",new Error("Please provide a value as a number: ".concat(JSON.stringify(a.eventValue)))):(l({ga:i}),s("send","event",a)):n("error",new Error("Please provide an action as a string")):n("error",new Error("Please provide a category as a string"))}function l(e){var o,i=e.ga||{},c=e.publishDate&&new Date(e.publishDate.toString());for(var d in c&&(isNaN(c.valueOf())?n("error",new Error("publishDate is an InvalidDate. Check formatting")):(i[r.year]=c.getFullYear(),i[r.month]=c.getMonth()+1,i[r.day]=c.getDate())),e.referrer&&(i.dimension6=a((o=e.referrer,t(document.createElement("a"),{href:o})).hostname),i.dimension7=a(e.referrer)),e){var u=r[d];u&&(i[u]=String(e[d]))}s("set",i)}document.querySelector('link[href="'.concat(i,'"]'))||document.head.appendChild(t(document.createElement("link"),{rel:"preconnect",href:i,crossOrigin:!0})),document.querySelector('link[href="'.concat(c,'"]'))||document.head.appendChild(t(document.createElement("link"),{rel:"preconnect",href:c,crossOrigin:!0})),document.addEventListener("click",(function(e){var t;e.target&&e.target instanceof HTMLElement&&(t=n.contains(o(e.target,"[data-ga-category]"))||void 0);if(t){var r=t.hasAttribute("data-ga-value")&&parseInt(t.getAttribute("data-ga-value"),10),a={eventCategory:t.getAttribute("data-ga-category"),eventAction:t.getAttribute("data-ga-action"),eventLabel:t.getAttribute("data-ga-label")};r&&(a.eventValue=r),n("event",{ga:a})}})),n.set("gaEmit",s),n.on("initialize",(function(e){window.ga||(window.ga=function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=Math.round(window.performance.timeOrigin)||window.performance.timing.navigationStart);t={src:"https://www.google-analytics.com/analytics".concat(n.debug?"_debug":"",".js"),crossorigin:!1},o=t.src,a=t.onload,i=void 0===a?Function.prototype:a,c=t.crossorigin,u=void 0===c||c,l=t.nomodule,g=void 0!==l&&l,p=t.defer,f=void 0!==p&&p,m=t.type,v=document.querySelector('script[src="'.concat(o,'"]'))||document.createElement("script"),h=v.queue=v.queue||[],h.length?h.push(i):v.parentNode?i(v):(h.push(i),v.async=!0,v.onload=function(){return h.splice(0).forEach((function(e){return e(v)}))},v.setAttribute("src",o),u&&-1===o.indexOf("//localhost")&&v.setAttribute("crossorigin","anonymous"),g&&(v.noModule=!0),f&&(v.defer=!0),m&&(v.type=m),document.head.appendChild(v));var t,o,a,i,c,u,l,g,p,f,m,v,h;var w={name:n.uuid,trackingId:e.ga,cookieDomain:"auto"},y={anonymizeIp:!0,forceSSL:!0,transport:"beacon"};if(!w.trackingId)return void n("error",new Error("Please provide a Google Analytics trackingId"));e.parentId&&(y[r.parentId]=e.parentId);e.clientId&&(w.clientId=e.clientId);n.set("gaTrackingId",w.trackingId),window.ga("create",w),window.ga(d),s("set",y)})),n.on("context",l),n.on("pageview",(function(e){void 0===e&&(e={});e.ga||(e.ga={});e.contentId||n.log("You should provide a contentId when sending pageviews");if(e.page&&"/"!==e.page[0])return void n("error",new Error("The page parameter must be a string beginning with /"));e.userId&&n.set("userId",e.userId);e.ga.title=e.title||document.title,e.ga.page=e.page||document.location.pathname+document.location.search,e.ga.hostname=a(e.hostname||document.location.hostname),e.referrer=e.referrer||document.referrer,l(e),s("send","pageview",{dimension9:"1"})})),n.on("event",u),n.on("event.personalization",u)}}();
//# sourceMappingURL=analytics.min.js.map
