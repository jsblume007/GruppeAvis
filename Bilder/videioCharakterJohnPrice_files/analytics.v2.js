/** medietall.no - 607d77e46bf6b242026472c2_generation4_20250130T1428 - Kilkaya AS - Copyright 2025 - Config:medietallno */
(()=>{"use strict";function e(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var t=0;function i(e){return"__private_"+t+++"_"+e}var s=i("k5a"),a=i("hookAbleEvents"),r=i("delayEventCnt"),n=i("currHref"),o=i("prevHref"),l=i("hookMap"),h=i("callBacks"),d=i("lastClickTime"),u=i("clickTTL"),c=i("exitType"),w=i("forceDOMContentLoaded"),f=i("initUrls"),p=i("getLocationHref"),g=i("isNewUrl"),b=i("addSPASupport"),y=i("handleSPATransition"),m=i("calcExitType"),k=i("handleEvent"),P=i("execDelayHook"),O=i("execHook"),_=i("execute"),j=i("runDebug"),D=i("eventDebug");class S{constructor(t){Object.defineProperty(this,D,{value:q}),Object.defineProperty(this,j,{value:U}),Object.defineProperty(this,_,{value:N}),Object.defineProperty(this,O,{value:R}),Object.defineProperty(this,P,{value:I}),Object.defineProperty(this,k,{value:F}),Object.defineProperty(this,m,{value:x}),Object.defineProperty(this,y,{value:E}),Object.defineProperty(this,b,{value:L}),Object.defineProperty(this,g,{value:A}),Object.defineProperty(this,p,{value:M}),Object.defineProperty(this,f,{value:T}),Object.defineProperty(this,w,{value:C}),Object.defineProperty(this,s,{writable:!0,value:null}),Object.defineProperty(this,a,{writable:!0,value:{ready:[],active:[],hidden:[],pageView:[],click:[],exit:[],scroll:[],activity:[],spa:[]}}),Object.defineProperty(this,r,{writable:!0,value:0}),Object.defineProperty(this,n,{writable:!0,value:location.href}),Object.defineProperty(this,o,{writable:!0,value:null}),Object.defineProperty(this,l,{writable:!0,value:{blur:{hooks:["hidden"]},hidden:{hooks:["hidden"]},active:{hooks:["active"]},focus:{hooks:["active"]},loading:{hooks:["pageView"]},interactive:{hooks:["pageView","ready"]},complete:{hooks:["pageView","ready"]},DOMContentLoaded:{hooks:["pageView","ready"]},pageshow:{hooks:["pageView","ready"]},click:{hooks:["click"]},pagehide:{hooks:["exit"]},scroll:{hooks:["scroll","activity"],delay:!0},mousemove:{hooks:["activity"],delay:!0},mousedown:{hooks:["click"],delay:!1},mouseup:{hooks:["activity"],delay:!0},touchstart:{hooks:["activity"],delay:!0},touchend:{hooks:["activity"],delay:!0},keyup:{hooks:["activity"],delay:!0},keydown:{hooks:["activity"],delay:!0},spa:{hooks:["spa"]},prerenderingchange:{hooks:["pageView","ready"]}}}),Object.defineProperty(this,h,{writable:!0,value:{interactive:[],load:[],loaded:[],click:[]}}),Object.defineProperty(this,d,{writable:!0,value:0}),Object.defineProperty(this,u,{writable:!0,value:301}),Object.defineProperty(this,c,{writable:!0,value:"exit"}),e(this,s)[s]=t,e(this,f)[f](),t.cfg&&t.cfg.clickTTL&&t.cfg.clickTTL>e(this,u)[u]&&(e(this,u)[u]=t.cfg.clickTTL,e(this,s)[s].speaker.say("Click TTL: "+e(this,u)[u],"listener")),e(this,s)[s].element.addEventListener("DOMContentLoaded",e(this,k)[k].bind(this),!0),e(this,s)[s].element.addEventListener("prerenderingchange",e(this,k)[k].bind(this),!0),e(this,s)[s].element.addEventListener("readystatechange",e(this,k)[k].bind(this),!0),e(this,s)[s].element.addEventListener("visibilitychange",e(this,k)[k].bind(this),!0),e(this,s)[s].element.addEventListener("click",e(this,k)[k].bind(this),!1),e(this,s)[s].element.addEventListener("scroll",e(this,k)[k].bind(this),!1),e(this,s)[s].element.addEventListener("mousemove",e(this,k)[k].bind(this),!0),e(this,s)[s].element.addEventListener("mousedown",e(this,k)[k].bind(this),!0),window.addEventListener("pageshow",e(this,k)[k].bind(this),!0),window.addEventListener("pagehide",e(this,k)[k].bind(this),{capture:!0}),window.addEventListener("blur",e(this,k)[k].bind(this),!0),window.addEventListener("focus",e(this,k)[k].bind(this),!0),e(this,b)[b]()}postInitialize(){if(!document.readyState||"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState)setTimeout(function(){e(this,w)[w]()}.bind(this),500);else{e(this,s)[s].speaker.say("postInitialize firing DOMContentLoaded:"+document.readyState+" "+document.prerendering);try{e(this,w)[w]()}catch(t){console.log("Error creating event[1]: "+t.toString()),setTimeout(function(){e(this,w)[w]()}.bind(this),500)}}}getCurrentUrl(){return e(this,n)[n]}getPrevUrl(){return e(this,o)[o]}fireHook(t){if(e(this,l)[l][t])try{var i=document.createEvent("Event");i.initEvent(t,!0,!0),e(this,O)[O](t,i)}catch(e){console.log("Could not run fireHook on '"+t+"': "+e.toString())}}addHook(t,i,s=!1){"activity"!=t&&"spa"!=t||(s=!0),e(this,a)[a][t].push({callBack:i,done:!1,reuse:s})}getExitType(){return e(this,c)[c]}}function C(){if(!document.prerendering)try{var t=document.createEvent("Event");t.initEvent("DOMContentLoaded",!0,!0),e(this,O)[O]("DOMContentLoaded",t)}catch(e){console.log("Could not run forced event: "+e.toString())}}function T(){e(this,n)[n]=e(this,p)[p](),e(this,o)[o]=null}function M(){let t=location.href;return e(this,s)[s].cfg.pageData.SPA&&(e(this,s)[s].cfg.pageData.SPA.ignoreAnchor&&!0===e(this,s)[s].cfg.pageData.SPA.ignoreAnchor&&(t=t.replace(/\#[^&]+/,"")),e(this,s)[s].cfg.pageData.SPA.ignoreQSP&&!0===e(this,s)[s].cfg.pageData.SPA.ignoreQSP&&(t=t.replace(/[\#\?\&].+/,""))),t.replace(/\/*$/,"")}function A(){var t=e(this,p)[p]();return e(this,n)[n]!==t&&(e(this,o)[o]=e(this,n)[n],e(this,n)[n]=t,!0)}function L(){e(this,s)[s].cfg.pageData&&e(this,s)[s].cfg.pageData.SPA&&(e(this,s)[s].cfg.pageData.SPA.customEvent&&""!==e(this,s)[s].cfg.pageData.SPA.customEvent?(e(this,s)[s].speaker.say("Setting up SPA with customEvent: "+e(this,s)[s].cfg.pageData.SPA.customEvent,"listener"),e(this,s)[s].element.addEventListener(e(this,s)[s].cfg.pageData.SPA.customEvent,(t=>{e(this,s)[s].speaker.say("GOT SPA Event: "+e(this,n)[n]+" vs "+location.href+" "+e(this,d)[d]+" "+t.timeStamp),(e(this,g)[g]()||e(this,s)[s].cfg.pageData.SPA.forcedSPA)&&(e(this,m)[m](t.timeStamp),e(this,y)[y](!0))}),!0)):"MutationObserver"in window?new MutationObserver(function(t){if(e(this,s)[s].cfg.pageData.SPA.triggers&&""!=e(this,s)[s].cfg.pageData.SPA.triggers){for(var i=0;i<t.length;i++)if(t[i].target&&t[i].target.tagName){let r=[];if("head"==t[i].target.tagName.toLowerCase()&&t[i].addedNodes.length>0)for(let e=0;e<t[i].addedNodes.length;e++)"meta"==t[i].addedNodes[e].tagName.toLowerCase()&&r.push(t[i].addedNodes[e]);else"meta"==t[i].target.tagName.toLowerCase()&&r.push(t[i].target);for(let t=0;t<r.length;t++){var a=r[t].getAttribute("property");null==a&&(a=r[t].getAttribute("name")),a&&""!=a&&null!==a.match(new RegExp(e(this,s)[s].cfg.pageData.SPA.triggers))&&(e(this,s)[s].speaker.say('SPA mutation: got a match: "'+a+'" matched with: "'+e(this,s)[s].cfg.pageData.SPA.triggers+'"'),e(this,y)[y]())}}}else e(this,y)[y]()}.bind(this)).observe(document.documentElement||document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0}):this.addHook("activity",function(t){window.requestIdleCallback((()=>{e(this,y)[y]()}))}.bind(this),!0))}function E(t=!1){(e(this,g)[g]()||t)&&setTimeout(function(){e(this,s)[s].cfg.pageData.SPA&&!1!==e(this,s)[s].cfg.pageData.SPA.metaData?e(this,s)[s].pageData.reRead():e(this,s)[s].pageData.setField("url",e(this,n)[n]),e(this,s)[s].resetRequestId(),e(this,O)[O]("spa",new CustomEvent("spa",{detail:{sourceUrl:e(this,o)[o],targetUrl:e(this,n)[n]}}),!0)}.bind(this),e(this,s)[s].cfg.pageData.SPA&&e(this,s)[s].cfg.pageData.SPA.delayEvent&&e(this,s)[s].cfg.pageData.SPA.delayEvent>0?1e3*e(this,s)[s].cfg.pageData.SPA.delayEvent:1)}function x(t){e(this,d)[d]>0&&t>0&&t>=e(this,d)[d]&&t-e(this,d)[d]<=e(this,u)[u]?e(this,c)[c]="click":e(this,c)[c]="exit"}function F(t){if(!document.prerendering)switch(t.type){case"pagehide":e(this,m)[m](t.timeStamp),e(this,O)[O](t.type,t);break;case"readystatechange":let i=t.target.readyState;void 0!==e(this,l)[l][i]&&e(this,O)[O](i,t),"complete"==t.target.readyState&&(e(this,_)[_]("interactive",t),e(this,_)[_]("loaded",t));break;case"pageshow":e(this,O)[O](t.type,t,t.persisted);break;case"visibilitychange":e(this,O)[O]("visible"===document.visibilityState?"active":"hidden",t,!0);break;case"click":case"mousedown":if("click"==t.type&&e(this,d)[d]>0&&e(this,d)[d]>=t.timeStamp-e(this,u)[u])return void e(this,s)[s].speaker.say("event is click and we just did a mousedown event on this click","listener");e(this,d)[d]=t.timeStamp,e(this,m)[m](t.timeStamp),e(this,O)[O](t.type,t);break;case"DOMContentLoaded":case"mousemove":case"mouseup":case"scroll":case"beforeunload":case"blur":case"focus":case"prerenderingchange":e(this,l)[l][t.type].delay?(e(this,r)[r]++,setTimeout(e(this,P)[P].bind(this,t.type,t,e(this,r)[r]),100)):e(this,O)[O](t.type,t);break;default:e(this,s)[s].speaker.say("Don't know how to handle this event: "+t.type)}}function I(t,i,s){s===e(this,r)[r]&&e(this,O)[O](i.type,i)}function R(t,i,r=!1){if(e(this,s)[s].speaker.say("Got hook: "+t,"listener"),void 0!==e(this,l)[l][t]){"pageView"!==e(this,l)[l][t]&&"spa"!==e(this,l)[l][t]||this.k5a.resetRequestId();for(var n=0;n<e(this,l)[l][t].hooks.length;n++){let h=e(this,l)[l][t].hooks[n];for(var o=0;o<e(this,a)[a][h].length;o++)if(0==e(this,a)[a][h][o].done||1==r)try{e(this,a)[a][h][o].callBack(i),e(this,a)[a][h][o].reuse||(e(this,a)[a][h][o].done=!0)}catch(t){e(this,s)[s].speaker.say("Could not execute callback....."+t.toString(),"listener")}else e(this,s)[s].speaker.say("["+i.type+"]Hook already done: "+h,"listener");e(this,s)[s].logger.fire(h,i.source||"js",i.type)}}else e(this,s)[s].speaker.say("undefined hook: "+t,"listener")}function N(t,i){for(var s=0;s<e(this,h)[h][t].length;s++)0==e(this,h)[h][t][s].done&&(e(this,h)[h][t][s].callback(i),e(this,h)[h][t][s].done=!0)}function U(e){var t=document.getElementById("evtDebug");null===t&&((t=document.createElement("DIV")).id="evtDebug",t.style="background:grey;color:white;padding:5px;position:fixed;bottom:10px;right:10px;width:250px;min-height:30px;font-size:12px;opacity:0.85;",document.body.appendChild(t)),t.innerHTML+="<li>"+e.type+" "+document.visibilityState}function q(e){}function B(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var V=0;function H(e){return"__private_"+V+++"_"+e}var K=H("k5a"),z=H("prefix"),J=H("scopes"),Y=H("scopeFilter"),$=H("scopeFilterDev"),G=H("globalDebugMode"),Q=H("globalDevMode"),W=H("initModes"),Z=H("getCaller");class X{constructor(e="",t=null){return Object.defineProperty(this,Z,{value:te}),Object.defineProperty(this,W,{value:ee}),Object.defineProperty(this,K,{writable:!0,value:null}),Object.defineProperty(this,z,{writable:!0,value:"K5A"}),Object.defineProperty(this,J,{writable:!0,value:{}}),Object.defineProperty(this,Y,{writable:!0,value:null}),Object.defineProperty(this,$,{writable:!0,value:null}),Object.defineProperty(this,G,{writable:!0,value:!1}),Object.defineProperty(this,Q,{writable:!0,value:!1}),B(this,K)[K]=t,B(this,z)[z]=e||B(this,z)[z],B(this,W)[W](),this.newScope(B(this,z)[z].toLowerCase())}newScope(e,t=!1,i=!1){var s;return void 0===(null==(s=B(this,J)[J])?void 0:s[e])&&(B(this,J)[J][e]=new ne(this,e),B(this,J)[J][e].debugMode=t,B(this,J)[J][e].devMode=i,null!=B(this,Y)[Y]&&e.match(B(this,Y)[Y])&&(B(this,J)[J][e].debugMode=!0),null!=B(this,$)[$]&&e.match(B(this,$)[$])&&(B(this,J)[J][e].devMode=!0)),B(this,J)[J][e]}set debugMode(e=!0){this.globalDebugMode=e}get debugMode(){return B(this,G)[G]}set globalDebugMode(e=!0){B(this,G)[G]=e}get globalDebugMode(){return B(this,G)[G]}setPersistentDebugMode(e=!1,t=!1){if(B(this,K)[K])if(e){var i=t?2:1;B(this,K)[K].storage.setKey("dbg",i,3600),this.debugMode=!0,this.say("Persistent debug mode initialized","k5a")}else B(this,K)[K].storage.delKey("dbg")}checkPersistentDebugMode(){if(B(this,K)[K]&&B(this,K)[K].storage&&B(this,K)[K].storage.canStore()){var e=B(this,K)[K].storage.getKey("dbg");e&&(e>1?(this.globalDebugMode=!0,this.globalDevMode=!0):1===e&&(this.globalDebugMode=!0,this.globalDevMode=!1))}}_log(e,t="info",i=null,s=!1){var a,r,n;if(0==B(this,G)[G]&&null!=i&&(null==(null==(a=B(this,J)[J])?void 0:a[i])||0==B(this,J)[J][i].debugMode))return;let o="";if("object"==typeof e&&(void 0!==e.prefix&&(o=e.prefix),t=e.type,i=e.scope,e=e.message),"error"==t||B(this,G)[G]||null!=(r=B(this,J)[J])&&r[i]&&null!=(n=B(this,J)[J])&&n[i].debugMode){let s="font-weight:bold;color:#284352;",a={info:"blue",error:"red",warn:"orange"},r=B(this,z)[z]+(null!==i?"["+i+"]":"")+o;if("error"===t?console.error("%c"+r+": %c"+e,s,"color:"+a[t]):console.log("%c"+r+": %c"+e,s,"color:"+a[t]),B(this,Q)[Q]||null!=i&&B(this,J)[J][i].devMode){let e=B(this,Z)[Z]();console.log("%c"+r+": %c \\-> "+e,s,"color:"+a[t])}}}table(e,t=null){this._canLog(t)&&(console.table?console.table(e):console.debug(JSON.stringify(e)))}dump(e,t=null){this._canLog(t)&&(B(this,Q)[Q]||null!=t&&B(this,J)[J][t].devMode?console.trace(e):console.debug(e))}_canLog(e=null){var t;return(null!=e||0!=B(this,G)[G])&&(null==e||null!=(null==(t=B(this,J)[J])?void 0:t[e])&&0!=B(this,J)[J][e].debugMode||0!=B(this,G)[G])}}function ee(){if(location.href.indexOf("k5aDebug")>-1){let e=new URL(location.href),t=e.searchParams.get("k5aDebug");t&&(t.indexOf("|")>-1||t.length>=3)?B(this,Y)[Y]=new RegExp("^"+t.replace("*",".*")+"$","i"):"1"!==t&&"true"!==t||(B(this,G)[G]=!0,this._log("global debug mode ON","info"));let i=e.searchParams.get("k5aDebugDev");i&&(i.indexOf("|")>-1||i.length>=3)?B(this,$)[$]=new RegExp("^"+i.replace("*",".*")+"$","i"):"1"!==i&&"true"!==i||(B(this,Q)[Q]=!0,this._log("global debug devmode ON","info"))}}function te(){let e=((new Error).stack||"").split("\n");for(var t=1;t<e.length;t++)if(-1===e[t].indexOf("speaker")||t+1==e.length)return e[t].trim();return""}var ie=H("scope"),se=H("speaker"),ae=H("devMode"),re=H("debugMode");class ne{constructor(e,t,i=!1){Object.defineProperty(this,ie,{writable:!0,value:""}),Object.defineProperty(this,se,{writable:!0,value:null}),Object.defineProperty(this,ae,{writable:!0,value:!1}),Object.defineProperty(this,re,{writable:!0,value:!1}),B(this,se)[se]=e,B(this,ie)[ie]=t,B(this,ae)[ae]=i}set globalDebugMode(e=!0){B(this,se)[se].globalDebugMode=e}get globalDebugMode(){return B(this,se)[se].globalDebugMode}set debugMode(e=!0){B(this,re)[re]=e}get debugMode(){return B(this,re)[re]}get speaker(){return B(this,se)[se]}set devMode(e=!0){B(this,ae)[ae]=e,e&&this.info("Dev mode: ON")}get devMode(){return B(this,ae)[ae]}canLog(){return B(this,se)[se]._canLog(B(this,ie)[ie])}log(e){this.say(e)}say(e){B(this,se)[se]._log(e,"info",B(this,ie)[ie])}info(e){this.say(e)}error(e){B(this,se)[se]._log(e,"error",B(this,ie)[ie])}warn(e){B(this,se)[se]._log(e,"warn",B(this,ie)[ie])}table(e){this.say("Table dump"),B(this,se)[se].table(e,B(this,ie)[ie])}dump(e){this.say("Dump"),B(this,se)[se].dump(e,B(this,ie)[ie])}newScope(e,t=!1,i=!1){return B(this,se)[se].newScope(e,t,i)}extendScope(e){return B(this,se)[se].newScope(B(this,ie)[ie]+":"+e)}setPersistentDebugMode(e=!1,t=!1){return B(this,se)[se].setPersistentDebugMode(e,t)}checkPersistentDebugMode(){return B(this,se)[se].checkPersistentDebugMode()}}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},oe.apply(null,arguments)}function le(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var he=0;function de(e){return"__private_"+he+++"_"+e}var ue=de("k5a"),ce=de("data"),we=de("hookMap"),fe=de("loggerEnabled"),pe=de("useRateLimiter"),ge=de("reqCnt"),ve=de("reqLastCheckTime"),be=de("reqFastReqCnt"),ye=de("totalMaxRequest"),me=de("timeMaxRequest"),ke=de("timeRequestsCnt"),Pe=de("compileLogdata"),Oe=de("checkRateLimits");class _e{constructor(e){Object.defineProperty(this,Oe,{value:De}),Object.defineProperty(this,Pe,{value:je}),Object.defineProperty(this,ue,{writable:!0,value:null}),Object.defineProperty(this,ce,{writable:!0,value:{}}),Object.defineProperty(this,we,{writable:!0,value:{pageView:"p",click:"c",exit:"e",activity:"a",video:"v",nisa:"n"}}),Object.defineProperty(this,fe,{writable:!0,value:!0}),Object.defineProperty(this,pe,{writable:!0,value:!1}),Object.defineProperty(this,ge,{writable:!0,value:0}),Object.defineProperty(this,ve,{writable:!0,value:null}),Object.defineProperty(this,be,{writable:!0,value:0}),Object.defineProperty(this,ye,{writable:!0,value:1e3}),Object.defineProperty(this,me,{writable:!0,value:10}),Object.defineProperty(this,ke,{writable:!0,value:10}),le(this,ue)[ue]=e,void 0!==le(this,ue)[ue].cfg.rateLimiter&&(le(this,pe)[pe]=!!le(this,ue)[ue].cfg.rateLimiter.enabled,le(this,pe)[pe]&&le(this,ue)[ue].speaker.say("Using ratelimiter with these settings: "+JSON.stringify(le(this,ue)[ue].cfg.rateLimiter),"logger"),void 0!==le(this,ue)[ue].cfg.rateLimiter.maxRequests&&(le(this,ye)[ye]=le(this,ue)[ue].cfg.rateLimiter.maxRequests),void 0!==le(this,ue)[ue].cfg.rateLimiter.throttlingTime&&(le(this,me)[me]=le(this,ue)[ue].cfg.rateLimiter.throttlingTime),void 0!==le(this,ue)[ue].cfg.rateLimiter.throttlingCount&&(le(this,ke)[ke]=le(this,ue)[ue].cfg.rateLimiter.throttlingCount))}getLogCount(){return le(this,ge)[ge]}disable(){le(this,fe)[fe]=!1}enable(){le(this,fe)[fe]=!0}fireNow(e,t,i="js",s="c"){this.addData(e,t),this.fire(e,i,s)}addData(e,t){le(this,ue)[ue].speaker.say("adding data for: "+e,"logger"),le(this,ue)[ue].speaker.table(t,"logger"),void 0===le(this,ce)[ce][e]?le(this,ce)[ce][e]=t:le(this,ce)[ce][e]=oe({},le(this,ce)[ce][e],t)}fire(e,t="",i=""){if(void 0!==le(this,ce)[ce][e]){var s=le(this,ce)[ce][e];delete le(this,ce)[ce][e],void 0!==le(this,we)[we][e]&&(s.l=le(this,we)[we][e]),void 0!==s._h&&""!==s._h||(s._h=e),void 0!==s._s&&""!==s._s||(s._s=t),void 0!==s._l&&""!==s._l||(s._l=i),le(this,ge)[ge]++,s._c=le(this,ge)[ge],le(this,Oe)[Oe](),this.doLog(s)}}doLog(e){if(0==le(this,fe)[fe])return;let t=le(this,Pe)[Pe](e);le(this,ue)[ue].speaker.say("full send: "+t);try{if(navigator&&navigator.sendBeacon)return navigator.sendBeacon(t+"&_m=b",{});var i=(new Date).getTime();return(new Image).src=t+"&_m=i&_r="+i,!0}catch(e){console.error(e.toString())}}doPostLog(e){if(le(this,Oe)[Oe](),0!=le(this,fe)[fe])try{if(navigator&&navigator.sendBeacon){le(this,ge)[ge]++;var t=[];if(void 0===e.l)return console.error("Missing logType!"),!1;t.push("l="+e.l),["_h","_s","_l"].forEach((function(i,s){void 0===e[i]&&(e[i]=""),t.push(i+"="+e[i])})),t.push("_m=b"),t.push("_c="+le(this,ge)[ge]),e.i=le(this,ue)[ue].cfg.installationId,navigator.sendBeacon(le(this,ue)[ue].k5aServer+"p?i="+le(this,ue)[ue].cfg.installationId+"&"+t.join("&"),JSON.stringify(e))}}catch(e){console.error(e.toString())}}}function je(e){for(var t in e)e[t]instanceof Array&&(e[t]=e[t].join("|"));var i="";void 0!==e.l&&(i="&l="+e.l,delete e.l);var s=Object.keys(e).map((t=>t+"="+encodeURIComponent(e[t]))).join("&");return le(this,ue)[ue].k5aServer+"?i="+le(this,ue)[ue].cfg.installationId+i+"&"+s}function De(){if(le(this,pe)[pe]){if(null===le(this,ve)[ve])return void(le(this,ve)[ve]=parseInt((new Date).getTime()/1e3));let e=parseInt((new Date).getTime()/1e3);e-le(this,ve)[ve]<=le(this,me)[me]?(le(this,be)[be]++,le(this,be)[be]>=le(this,ke)[ke]&&(le(this,fe)[fe]?(le(this,ue)[ue].speaker.say("Throttling log requests, execeed limits with "+le(this,be)[be]+" of "+le(this,ke)[ke]+" the last "+le(this,me)[me]+" seconds","logger"),this.disable()):le(this,ue)[ue].speaker.say("Log requests is throttled, execeed limits with "+le(this,be)[be]+" of "+le(this,ke)[ke]+" the last "+le(this,me)[me]+" seconds","logger"))):(le(this,be)[be]=0,!1===le(this,fe)[fe]&&le(this,ge)[ge]<le(this,ye)[ye]&&(le(this,ue)[ue].speaker.say("Reenabling logging again","logger"),this.enable())),le(this,ve)[ve]=e,le(this,ge)[ge]>le(this,ye)[ye]&&le(this,ue)[ue].speaker.warn("This client execeded max total log requests - "+le(this,ge)[ge]+" of max "+le(this,ye)[ye],"logger")}}function Se(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ce=0;function Te(e){return"__private_"+Ce+++"_"+e}var Me=Te("url"),Ae=Te("k5a");class Le{constructor(e=null,t=null){Object.defineProperty(this,Me,{writable:!0,value:""}),Object.defineProperty(this,Ae,{writable:!0,value:null}),null!==e&&(null!==e.match(/^\/\//i)?e=location.protocol+"//"+e:null===e.match(/^https?\:\/+/i)&&(e="https://"+e));try{var i;Se(this,Me)[Me]=new URL(null!=(i=e)?i:location.href)}catch(t){var s;console.error("Invalid url given '"+(null!=(s=e)?s:location.href)+"' "+t.toString())}}get isLink(){return 0==Se(this,Me)[Me].href.toLowerCase().indexOf("http",0)}get domain(){return Se(this,Me)[Me].hostname.split(".").slice(-2).join(".")}get hash(){return Se(this,Me)[Me].hash}get host(){return Se(this,Me)[Me].host}get hostname(){return Se(this,Me)[Me].hostname}get href(){return Se(this,Me)[Me].href}get origin(){return Se(this,Me)[Me].origin}get password(){return Se(this,Me)[Me].password}get pathname(){return Se(this,Me)[Me].pathname}get port(){return Se(this,Me)[Me].port}get protocol(){return Se(this,Me)[Me].port}get search(){return Se(this,Me)[Me].search}get searchParams(){return Se(this,Me)[Me].searchParams}get clean(){return Se(this,Me)[Me].href.split(/[?#]/)[0]}get k5a(){var e;let t=Se(this,Me)[Me],i=null;try{var s,a;if(null==Se(this,Ae)[Ae]&&"undefined"!=typeof kilkaya&&null!=(s=kilkaya)&&null!=(s=s.cfg)&&null!=(s=s.url)&&s.rules&&(Se(this,Ae)[Ae]=kilkaya,i=Se(this,Ae)[Ae].speaker.newScope("k5aUrl"),i.say("k5a parsing url: "+t)),null!==Se(this,Ae)[Ae]&&null!=(a=Se(this,Ae)[Ae])&&null!=(a=a.cfg)&&null!=(a=a.url)&&a.rules){const e=Se(this,Ae)[Ae].cfg.url.rules,i=t.toString();for(let s=0;s<e.length;s++){let a=e[s].rule.replaceAll("/(?i)","");a=a.replace(/\/$/,"").replace(/^\//,"");let r=new RegExp(a,"i"),n=i.replace(r,e[s].replace);if(n!=i){t=new URL(n);break}}}}catch(e){console.error("Could not url parse url : |"+t+"| reason: "+e.toString())}return null==(e=i)||e.say("k5a url result: "+(t.hostname+t.pathname).replace(/\/+$/,"").replace(/\/+/,"/")),(t.hostname+t.pathname).replace(/\/+$/,"").replace(/\/+/,"/")}}function Ee(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var xe=0;function Fe(e){return"__private_"+xe+++"_"+e}var Ie=Fe("f"),Re=Fe("keyStrBase64"),Ne=Fe("keyStrUriSafe"),Ue=Fe("baseReverseDic");class qe{constructor(){Object.defineProperty(this,Ie,{writable:!0,value:String.fromCharCode}),Object.defineProperty(this,Re,{writable:!0,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}),Object.defineProperty(this,Ne,{writable:!0,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"}),Object.defineProperty(this,Ue,{writable:!0,value:{}})}getBaseValue(e,t){if(!Ee(this,Ue)[Ue][e]){Ee(this,Ue)[Ue][e]={};for(var i=0;i<e.length;i++)Ee(this,Ue)[Ue][e][e.charAt(i)]=i}return Ee(this,Ue)[Ue][e][t]}compressToBase64(e){if(null==e)return"";var t=this._compress(e,6,function(e){return Ee(this,Re)[Re].charAt(e)}.bind(this));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}}decompressFromBase64(e){return null==e?"":""==e?null:this._decompress(e.length,32,function(t){return getBaseValue(Ee(this,Re)[Re],e.charAt(t))}.bind(this))}compressToUTF16(e){return null==e?"":this._compress(e,15,function(e){return Ee(this,Ie)[Ie](e+32)}.bind(this))+" "}decompressFromUTF16(e){return null==e?"":""==e?null:this._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32}.bind(e))}compressToUint8Array(e){for(var t=this.compress(e),i=new Uint8Array(2*t.length),s=0,a=t.length;s<a;s++){var r=t.charCodeAt(s);i[2*s]=r>>>8,i[2*s+1]=r%256}return i}decompressFromUint8Array(e){if(null==e)return this.decompress(e);for(var t=new Array(e.length/2),i=0,s=t.length;i<s;i++)t[i]=256*e[2*i]+e[2*i+1];var a=[];return t.forEach(function(e){a.push(Ee(this,Ie)[Ie](e))}.bind(this)),this.decompress(a.join(""))}compressToEncodedURIComponent(e){return null==e?"":this._compress(e,6,function(e){return Ee(this,Ne)[Ne].charAt(e)}.bind(this))}decompressFromEncodedURIComponent(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),this._decompress(e.length,32,function(t){return getBaseValue(Ee(this,Ne)[Ne],e.charAt(t))}.bind(this)))}compress(e){return this._compress(e,16,function(e){return Ee(this,Ie)[Ie](e)}.bind(this))}_compress(e,t,i){if(null==e)return"";var s,a,r,n={},o={},l="",h="",d="",u=2,c=3,w=2,f=[],p=0,g=0;for(r=0;r<e.length;r+=1)if(l=e.charAt(r),Object.prototype.hasOwnProperty.call(n,l)||(n[l]=c++,o[l]=!0),h=d+l,Object.prototype.hasOwnProperty.call(n,h))d=h;else{if(Object.prototype.hasOwnProperty.call(o,d)){if(d.charCodeAt(0)<256){for(s=0;s<w;s++)p<<=1,g==t-1?(g=0,f.push(i(p)),p=0):g++;for(a=d.charCodeAt(0),s=0;s<8;s++)p=p<<1|1&a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a>>=1}else{for(a=1,s=0;s<w;s++)p=p<<1|a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a=0;for(a=d.charCodeAt(0),s=0;s<16;s++)p=p<<1|1&a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a>>=1}0==--u&&(u=Math.pow(2,w),w++),delete o[d]}else for(a=n[d],s=0;s<w;s++)p=p<<1|1&a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a>>=1;0==--u&&(u=Math.pow(2,w),w++),n[h]=c++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(o,d)){if(d.charCodeAt(0)<256){for(s=0;s<w;s++)p<<=1,g==t-1?(g=0,f.push(i(p)),p=0):g++;for(a=d.charCodeAt(0),s=0;s<8;s++)p=p<<1|1&a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a>>=1}else{for(a=1,s=0;s<w;s++)p=p<<1|a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a=0;for(a=d.charCodeAt(0),s=0;s<16;s++)p=p<<1|1&a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a>>=1}0==--u&&(u=Math.pow(2,w),w++),delete o[d]}else for(a=n[d],s=0;s<w;s++)p=p<<1|1&a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a>>=1;0==--u&&(u=Math.pow(2,w),w++)}for(a=2,s=0;s<w;s++)p=p<<1|1&a,g==t-1?(g=0,f.push(i(p)),p=0):g++,a>>=1;for(;;){if(p<<=1,g==t-1){f.push(i(p));break}g++}return f.join("")}decompress(e){return null==e?"":""==e?null:this._decompress(e.length,32768,function(t){return e.charCodeAt(t)}.bind(e))}_decompress(e,t,i){var s,a,r,n,o,l,h,d=[],u=4,c=4,w=3,f="",p=[],g={val:i(0),position:t,index:1};for(s=0;s<3;s+=1)d[s]=s;for(r=0,o=Math.pow(2,2),l=1;l!=o;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(n>0?1:0)*l,l<<=1;switch(r){case 0:for(r=0,o=Math.pow(2,8),l=1;l!=o;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(n>0?1:0)*l,l<<=1;h=Ee(this,Ie)[Ie](r);break;case 1:for(r=0,o=Math.pow(2,16),l=1;l!=o;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(n>0?1:0)*l,l<<=1;h=Ee(this,Ie)[Ie](r);break;case 2:return""}for(d[3]=h,a=h,p.push(h);;){if(g.index>e)return"";for(r=0,o=Math.pow(2,w),l=1;l!=o;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(n>0?1:0)*l,l<<=1;switch(h=r){case 0:for(r=0,o=Math.pow(2,8),l=1;l!=o;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(n>0?1:0)*l,l<<=1;d[c++]=Ee(this,Ie)[Ie](r),h=c-1,u--;break;case 1:for(r=0,o=Math.pow(2,16),l=1;l!=o;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(n>0?1:0)*l,l<<=1;d[c++]=Ee(this,Ie)[Ie](r),h=c-1,u--;break;case 2:return p.join("")}if(0==u&&(u=Math.pow(2,w),w++),d[h])f=d[h];else{if(h!==c)return null;f=a+a.charAt(0)}p.push(f),d[c++]=a+f.charAt(0),a=f,0==--u&&(u=Math.pow(2,w),w++)}}}function Be(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ve=0;function He(e){return"__private_"+Ve+++"_"+e}var Ke=He("storageName"),ze=He("storageMode"),Je=He("sameSite"),Ye=He("domain"),$e=He("canStore"),Ge=He("useBinary"),Qe=He("useBase64"),We=He("buckSize"),Ze=He("buckCnt"),Xe=He("dataSet"),et=He("k5a"),tt=He("checkStorage"),it=He("getData"),st=He("saveData"),at=He("getCookie"),rt=He("saveToCookie"),nt=He("resetCookie"),ot=He("setCookie");class lt{constructor(e,t="_k5a",i="cookie"){Object.defineProperty(this,ot,{value:pt}),Object.defineProperty(this,nt,{value:ft}),Object.defineProperty(this,rt,{value:wt}),Object.defineProperty(this,at,{value:ct}),Object.defineProperty(this,st,{value:ut}),Object.defineProperty(this,it,{value:dt}),Object.defineProperty(this,tt,{value:ht}),Object.defineProperty(this,Ke,{writable:!0,value:"_k5a"}),Object.defineProperty(this,ze,{writable:!0,value:"cookie"}),Object.defineProperty(this,Je,{writable:!0,value:"Strict"}),Object.defineProperty(this,Ye,{writable:!0,value:""}),Object.defineProperty(this,$e,{writable:!0,value:!1}),Object.defineProperty(this,Ge,{writable:!0,value:!1}),Object.defineProperty(this,Qe,{writable:!0,value:!1}),Object.defineProperty(this,We,{writable:!0,value:950}),Object.defineProperty(this,Ze,{writable:!0,value:4}),Object.defineProperty(this,Xe,{writable:!0,value:null}),Object.defineProperty(this,et,{writable:!0,value:null}),t!==Be(this,Ke)[Ke]&&""!==t?Be(this,Ke)[Ke]=t:void 0!==e&&void 0!==e.cfg.storage&&(void 0!==e.cfg.storage.name&&(Be(this,Ke)[Ke]=e.cfg.storage.name),void 0!==e.cfg.storage.type&&"localstorage"==e.cfg.storage.type&&(i="localstorage"),void 0!==e.cfg.storage.b64&&e.cfg.storage.b64&&(Be(this,Qe)[Qe]=!0,e.speaker.say("storage: b64 on")),void 0!==e.cfg.storage.compress&&e.cfg.storage.compress&&(Be(this,Ge)[Ge]=!0,e.speaker.say("storage: compress on"))),i!=Be(this,ze)[ze]&&(Be(this,ze)[ze]=i),Be(this,et)[et]=e;let s=new Le(location.href);Be(this,Ye)[Ye]=s.domain,Be(this,$e)[$e]=Be(this,tt)[tt](),e.speaker.say("Can store : "+(Be(this,$e)[$e]?"yes":"no")+" storageMode:"+Be(this,ze)[ze]),Be(this,$e)[$e]&&(Be(this,Xe)[Xe]=Be(this,it)[it]())}canStore(){return Be(this,$e)[$e]}get(){return Be(this,Xe)[Xe]}set(e){Be(this,Xe)[Xe]=e,Be(this,st)[st]()}getKey(e){return null==Be(this,Xe)[Xe]&&(Be(this,Xe)[Xe]=Be(this,it)[it]()),null!==Be(this,Xe)[Xe]&&void 0!==Be(this,Xe)[Xe][e]?Be(this,Xe)[Xe][e][1]>0&&parseInt((new Date).getTime()/1e3)>Be(this,Xe)[Xe][e][1]?(delete Be(this,Xe)[Xe][e],Be(this,st)[st](),null):Be(this,Xe)[Xe][e][0]:null}setKey(e,t,i=0){null==Be(this,Xe)[Xe]&&(Be(this,Xe)[Xe]=Be(this,it)[it]()),Be(this,Xe)[Xe][e]=[t,i>0?parseInt((new Date).getTime()/1e3)+i:0],Be(this,st)[st]()}delKey(e){null==Be(this,Xe)[Xe]&&(Be(this,Xe)[Xe]=Be(this,it)[it]());try{delete Be(this,Xe)[Xe][e]}catch(t){console.log("could not delete key: "+e)}Be(this,st)[st]()}delete(){try{"localstorage"==Be(this,ze)[ze]?localStorage.removeItem(Be(this,Ke)[Ke]):Be(this,nt)[nt]()}catch(e){return console.error("Could not delete "+Be(this,ze)[ze]+", reason: "+e.toString()),!1}return!0}}function ht(){var e=!1;if("cookie"===Be(this,ze)[ze]){if(navigator&&navigator.cookieEnabled&&(e=!0),!e){var t="__t"+(new Date).getTime();document.cookie=t+"=1",e=-1!==document.cookie.indexOf(t+"="),document.cookie=t+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}}else if("localstorage"===Be(this,ze)[ze]){e=!1;try{if("object"==(typeof window.localStorage).toLowerCase())try{const t="_k5a_storage_check_"+Be(this,et)[et].requestId;window.localStorage.setItem(t,null),window.localStorage.removeItem(t),e=!0}catch(t){e=!1}}catch(t){e=!1}}return e}function dt(){let e;if("localstorage"==Be(this,ze)[ze]){if(e=localStorage.getItem(Be(this,Ke)[Ke]),Be(this,Ge)[Ge]){let t=(new qe).decompress(e);null!==t&&(e=t)}}else if(e=Be(this,at)[at](Be(this,Ke)[Ke]),Be(this,Qe)[Qe]&&null!==e)try{e=decodeURIComponent(atob(e))}catch(e){console.error(e.toString())}if(null==e)return{};try{return JSON.parse(e)}catch(e){console.log("error in data: "+e.toString()),"localstorage"!==Be(this,ze)[ze]&&Be(this,nt)[nt]()}return{}}function ut(){let e=JSON.stringify(Be(this,Xe)[Xe]);"localstorage"==Be(this,ze)[ze]?(Be(this,Ge)[Ge]&&(e=(new qe).compress(e)),localStorage.setItem(Be(this,Ke)[Ke],e)):(Be(this,Qe)[Qe]&&(e=btoa(encodeURIComponent(e))),Be(this,rt)[rt](e))}function ct(e){let t="",i=0,s=!1,a=0;for(;(0===i||s)&&i<Be(this,Ze)[Ze];){let r=e+(i>0?i:"")+"=";if(document.cookie.length>0){let e=document.cookie.indexOf(r);if(-1!=e){e+=r.length;let n=document.cookie.indexOf(";",e);-1==n&&(n=document.cookie.length);let o=document.cookie.substring(e,n);if(o.length>0){if(0==i){let e=o.indexOf("@",0);a=o.substring(0,e),o=o.substr(e+1)}t+=o,s=!0}else s=!1}}i++}return t.length!=a?(console.error("Data is corrupt! - "+t.length+"vs"+a),Be(this,nt)[nt](),null):t.length>0?t:null}function wt(e){let t=new Date;t.setFullYear(t.getFullYear()+1),Be(this,nt)[nt]();let i=0,s=e.length+"@"+e.substr(i,Be(this,We)[We]);for(;s.length>0&&i<Be(this,Ze)[Ze];)try{Be(this,ot)[ot](i>0?Be(this,Ke)[Ke]+i:Be(this,Ke)[Ke],s,new Date(t),"/",Be(this,Ye)[Ye],Be(this,Je)[Je]),i++,s=e.substr(Be(this,We)[We]*i,Be(this,We)[We])}catch(e){console.debug(e.toString()),i=1e3}}function ft(){let e=new Date;e.setFullYear(e.getFullYear()-1);for(let t=0;t<4;t++)Be(this,ot)[ot](Be(this,Ke)[Ke]+(t>0?t:""),"",new Date(e),"/",Be(this,Ye)[Ye],Be(this,Je)[Je])}function pt(e,t,i,s,a,r,n){void 0===r&&(r="Lax"),"None"===r&&(n=!0);var o=e+"="+t+(i?"; Expires="+i.toGMTString():"")+(s?"; Path="+s:"")+(a?"; Domain="+a:"")+(r?"; SameSite="+r:"")+(n?"; Secure":"");document.cookie=o}function gt(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var vt=0;function bt(e){return"__private_"+vt+++"_"+e}var yt=bt("channel");class mt{constructor(e=!1,t="domDetection2"){if(Object.defineProperty(this,yt,{writable:!0,value:""}),"domDetection"==t){var i=document.createElement("div");i.style.cssText="position: fixed;top: 0;left: 0;bottom: 0;right: 0;",document.documentElement.insertBefore(i,document.documentElement.firstChild);var s={width:i.offsetWidth,height:i.offsetHeight};console.debug(s);var a=s.width;gt(this,yt)[yt]=a<600?"mobile":"desktop",e&&a>=600&&(/ipad|android|tablet|kindle|silk|nook\s+browser|msie.+touch|xoom\s+build/i.test(navigator.userAgent)||"macintel"===navigator.platform.toLowerCase()&&void 0!==navigator.standalone)&&(gt(this,yt)[yt]="tablet"),document.documentElement.removeChild(i)}else{var r=navigator.userAgent.toLowerCase();-1===r.indexOf("mobile")&&r.indexOf("android")>-1||/(tablet|ipad|playbook|silk|kindle|nook\s+browser|msie.+touch|xoom\s+build)/i.test(r)||"macintel"===navigator.platform.toLowerCase()&&void 0!==navigator.standalone?gt(this,yt)[yt]=e?"tablet":"desktop":/Mobile|iP(hone|od)|Android.*Mobile|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/i.test(r)?gt(this,yt)[yt]="mobile":gt(this,yt)[yt]="desktop"}}getChannel(){return gt(this,yt)[yt]}}function kt(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Pt=0;function Ot(e){return"__private_"+Pt+++"_"+e}var _t=Ot("wordcount");class jt{constructor(e,t){if(Object.defineProperty(this,_t,{writable:!0,value:0}),void 0!==t.wordCount)for(var i of Object.keys(t.wordCount.article))if("cl"==i)for(var s of Object.keys(t.wordCount.article[i]))for(var a=e.getElementsByClassName(s),r=0;r<a.length;r++)o=(o=a[r].textContent).replace(/\s+/g," "),1==t.wordCount.article.cl[s]?kt(this,_t)[_t]+=o.split(" ").length-1:kt(this,_t)[_t]-=o.split(" ").length-1;else if("el"==i)for(var n of Object.keys(t.wordCount.article[i]))for(a=e.getElementsByTagName(n),r=0;r<a.length;r++){var o;o=(o=a[r].textContent).replace(/\s+/g," "),1==t.wordCount.article.el[n]?kt(this,_t)[_t]+=o.split(" ").length-1:kt(this,_t)[_t]-=o.split(" ").length-1}}getWordcount(){return kt(this,_t)[_t]}}function Dt(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var St=0;function Ct(e){return"__private_"+St+++"_"+e}var Tt=Ct("paywallDetected");class Mt{constructor(e,t){if(Object.defineProperty(this,Tt,{writable:!0,value:""}),null!=e&&void 0!==t.paywall&&void 0!==t.paywall.auto&&t.paywall.auto){if(void 0===t.paywall.element)return console.error("Paywall: missing element configuration"),!1;e.querySelectorAll(t.paywall.element).length>0&&(Dt(this,Tt)[Tt]="hard")}}getPaywall(){return Dt(this,Tt)[Tt]}}function At(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Lt=0;function Et(e){return"__private_"+Lt+++"_"+e}var xt=Et("referer"),Ft=Et("qsps"),It=Et("special"),Rt=Et("getQSP");class Nt{constructor(e,t){var i;Object.defineProperty(this,Rt,{value:Ut}),Object.defineProperty(this,xt,{writable:!0,value:""}),Object.defineProperty(this,Ft,{writable:!0,value:["utm_source"]}),Object.defineProperty(this,It,{writable:!0,value:{"facebook.com":["fbclid"]}}),void 0!==t.referer&&(At(this,Ft)[Ft]=t.referer);for(var s=0;s<At(this,Ft)[Ft].length;s++)if(void 0!==At(this,Ft)[Ft][s]&&""!=At(this,Ft)[Ft][s]&&!1!==(n=At(this,Rt)[Rt](At(this,Ft)[Ft][s]))&&""!==n){At(this,xt)[xt]=n;break}let a=!1;if(null!=(i=document)&&i.referrer,null!==document.referrer.match(/instagram|facebook/i)&&(a=!0),""===At(this,xt)[xt]&&!a)for(var r of Object.keys(At(this,It)[It])){for(s=0;s<At(this,It)[It][r].length;s++){var n;if(!1!==(n=At(this,Rt)[Rt](At(this,It)[It][r][s]))){At(this,xt)[xt]=r;break}}if(""!==At(this,xt)[xt])break}""===At(this,xt)[xt]&&document.referrer&&""!==document.referrer&&(At(this,xt)[xt]=document.referrer),""===At(this,xt)[xt]&&(At(this,xt)[xt]="_")}getReferer(){return At(this,xt)[xt]}}function Ut(e){var t=e+"=",i=location.href.indexOf(t),s=-1;return i>-1&&(i+=t.length,-1==(s=location.href.indexOf("&",i))&&(s=location.href.indexOf("#",i)),s>-1?decodeURIComponent(location.href.substring(i,s)):decodeURIComponent(location.href.substr(i)))}function qt(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Bt=0;function Vt(e){return"__private_"+Bt+++"_"+e}var Ht=Vt("autoSection");class Kt{constructor(e,t){if(Object.defineProperty(this,Ht,{writable:!0,value:""}),void 0!==t.autoSection&&t.autoSection&&""!==e){var i=new URL(e).pathname.split("/");i.length>2&&""!==i[1]&&(qt(this,Ht)[Ht]=i[1].toLowerCase())}}getSection(){return qt(this,Ht)[Ht]}}class zt{getMostVisibleElement(e){var t=window.innerHeight,i=0,s=null;for(var a of Array.from(e)){var r=a.getBoundingClientRect(),n=r.bottom-r.top,o={top:r.top>=0&&r.top<t,bottom:r.bottom>0&&r.bottom<t},l=0;if(o.top&&o.bottom)l=n;else if(o.top)l=t-r.top;else if(o.bottom)l=r.bottom;else if(n>t&&r.top<0){var h=Math.abs(r.top);h<n&&(l=n-h)}l>i&&(i=l,s=a)}return s}}function Jt(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Yt=0;function $t(e){return"__private_"+Yt+++"_"+e}var Gt=$t("readK5AMeta"),Qt=$t("readLPMeta"),Wt=$t("readLDJson");class Zt{constructor(e,t){switch(Object.defineProperty(this,Wt,{value:ti}),Object.defineProperty(this,Qt,{value:ei}),Object.defineProperty(this,Gt,{value:Xt}),t){case"auto":!0!==Jt(this,Gt)[Gt](e)&&Jt(this,Qt)[Qt](e);break;case"LPMeta":Jt(this,Qt)[Qt](e);break;case"ld+json":Jt(this,Wt)[Wt](e,t);break;default:Jt(this,Gt)[Gt](e,t)}}}function Xt(e,t="k5aMeta"){if(void 0!==window[t]){for(var i=e.getFields(),s=Object.keys(window[t]),a=0;a<i.length;a++)if(void 0!==window[t][i[a]]&&null!==window[t][i[a]])e.setField(i[a],window[t][i[a]]);else{for(var r=!1,n=0;n<s.length;n++)if((s[n].toLowerCase()==i[a].toLowerCase()||"referrer"==s[n].toLowerCase()&&"referer"==i[a].toLowerCase())&&void 0!==window[t][s[n]]&&""!==window[t][s[n]]&&null!==window[t][s[n]]){e.setField(i[a],window[t][s[n]]),r=!0;break}r||e.delField(i[a])}return!0}return!1}function ei(e){if("undefined"!=typeof LPMeta){var t={url:"url",channel:"channel",image:"image",title:"title",section:"section",type:"type",tag:"tag",cTag:"cntTag",published_time:"publishtime",modified_time:"modifiedtime",paywalluser:"subscriber",paywall:"paid",wordcount:"wordcount",author:"author",conversion:"conversion",converted_user:"conversion",converteduser:"conversion"};for(var i in t)if(void 0!==LPMeta[i]&&""!==LPMeta[i])if("object"==typeof LPMeta[i])for(var s in LPMeta[i])e.setField(t[i],LPMeta[i][s].toLowerCase().trim());else e.setField(t[i],LPMeta[i]);return!0}return!1}function ti(e){var t=document.querySelector('script[type="application/ld+json"]');if(null!=t)var i=JSON.parse(t.innerText),s={mainEntityOfPage:{key:"@id",to:"url"},articleSection:"section",author:{key:"name",to:"author"},datePublished:"publishtime",dateModified:"modifiedtime",headline:"title",image:{key:"0",to:"image"},isAccessibleForFree:{to:"paid",auto:e=>"true"===e||!0===e||1===e?0:1},keywords:{to:"tag",auto:e=>{let t=e.split(/[\s\,\|]+/);return null!=t&&t.length&&t.length>0?t:[]}}};const a=function(e,t){return null!=t&&t.auto&&(t.auto,1)?t.auto(e):e};for(var r in s){var n,o;if(null!=i&&i[r])if(null!=(n=s[r])&&n.key&&null!=(o=i[r])&&o[s[r].key]&&""!==i[r][s[r].key])e.setField(s[r].to,a(i[r][s[r].key],s[r]));else if(""!==i[r]){var l;e.setField((null==(l=s[r])?void 0:l.to)||s[r],a(i[r],s[r]))}}}function ii(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var si=0;function ai(e){return"__private_"+si+++"_"+e}var ri=ai("domElement");class ni{constructor(e=null){Object.defineProperty(this,ri,{writable:!0,value:null}),ii(this,ri)[ri]=e}isTranslated(){return!!ii(this,ri)[ri].querySelector("html.translated-ltr, html.translated-rtl, ya-tr-span, *[_msttexthash]")}}class oi{static getCountable(e){const t=new Le(location.href);let i=t.searchParams;if(t.hash&&t.hash.length>1){const e=t.hash.replace("#","").split("&");for(let t=0;t<e.length;t++){const s=e[t].split("=");i.append(s[0],s[1]||"")}}let s={};return Object.keys(e).forEach((t=>{if(i.has(t))if(1===e[t]||!0===e[t])s[t]=1;else{var a,r;const n=(null==(a=e[t])?void 0:a.delim)||"|",o=i.get(t).split(n);if(null!=(r=e[t])&&r.rules)for(let i=0;i<o.length;i++)for(let a=0;a<e[t].rules.length;a++)if(null!==o[i].match(e[t].rules[a])){s[o[i]]=1;break}}})),Object.keys(s)}}function li(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var hi=0;function di(e){return"__private_"+hi+++"_"+e}var ui=di("k5a"),ci=di("pageElm"),wi=di("artElm"),fi=di("cfg"),pi=di("prefixes"),gi=di("pData"),vi=di("result"),bi=di("initFBIAData"),yi=di("runQSPTrackerData"),mi=di("initArticleElement"),ki=di("autoMeta"),Pi=di("convertField");class Oi{constructor(e,t=document,i=null){var s;if(Object.defineProperty(this,Pi,{value:Ci}),Object.defineProperty(this,ki,{value:Si}),Object.defineProperty(this,mi,{value:Di}),Object.defineProperty(this,yi,{value:ji}),Object.defineProperty(this,bi,{value:_i}),Object.defineProperty(this,ui,{writable:!0,value:null}),Object.defineProperty(this,ci,{writable:!0,value:null}),Object.defineProperty(this,wi,{writable:!0,value:null}),Object.defineProperty(this,fi,{writable:!0,value:{}}),Object.defineProperty(this,pi,{writable:!0,value:["k5a","kilkaya","og","lp"]}),Object.defineProperty(this,gi,{writable:!0,value:{url:{type:"url",auto:function(){return location.href},fields:["url"],param:"u",spaSafe:!1,isDefault:!0},referer:{type:"string",auto:function(){return new Nt(li(this,ci)[ci],li(this,fi)[fi]).getReferer()}.bind(this),forceAutoOnEmpty:!0,fields:["referer","referrer"],param:"r",spaSafe:!0,isDefault:!0},title:{type:"string",fields:["title"],param:"ptl",spaSafe:!1,isDefault:!0},section:{type:"string",fields:["section","article:section"],auto:function(){return new Kt(this.getField("url"),li(this,fi)[fi]).getSection()}.bind(this),param:"psn",spaSafe:!1,lc:!0,isDefault:!0},subsection:{type:"array",fields:["subsection","article:subsection"],param:"pssn",spaSafe:!1,lc:!0,isDefault:!0},type:{type:"string",fields:["type"],param:"ptp",spaSafe:!1,lc:!0,isDefault:!0},image:{type:"url",fields:["image","og:image:url"],param:"pig",spaSafe:!1,isDefault:!0},author:{type:"array",fields:["author","article:author"],param:"par",spaSafe:!1,lc:!0,isDefault:!0},tag:{type:"array",fields:["tag","article:tag"],param:"ptg",spaSafe:!1,lc:!0,isDefault:!0},cnttag:{type:"array",valueRule:/^[a-z0-9\_\-\:]+$/i,fields:["cntTag","article:cntTag"],param:"pctg",spaSafe:!1,lc:!0,isDefault:!0},contenttag:{type:"array",fields:["contentTag"],param:"pstg",spaSafe:!1,lc:!0,isDefault:!0},channel:{type:"string",fields:["channel"],auto:function(){return new mt(li(this,fi)[fi].cntTablet||!1).getChannel()}.bind(this),param:"c",spaSafe:!0,undeleteAble:!0,isDefault:!0},wordcount:{type:"int",fields:["wordcount"],auto:function(){return new jt(li(this,ci)[ci],li(this,fi)[fi]).getWordcount()}.bind(this),param:"pwct",spaSafe:!1,isDefault:!0},publishtime:{type:"datetime",fields:["published_time","article:published_time"],param:"ppt",spaSafe:!1,isDefault:!0},modifiedtime:{type:"datetime",fields:["modified_time","article:modified_time"],param:"pmt",spaSafe:!1,isDefault:!0},paywall:{type:"string",fields:["paywall"],auto:function(){return new Mt(li(this,wi)[wi],li(this,fi)[fi]).getPaywall()}.bind(this),param:"pw",spaSafe:!1,isDefault:!0},paid:{type:"boolean",fields:["paid"],auto:function(){if(li(this,fi)[fi].paywall&&li(this,fi)[fi].paywall.autoPaid&&("hard"==li(this,vi)[vi].paywall||"h"==li(this,vi)[vi].paywall))return!0}.bind(this),param:"pd",spaSafe:!1,isDefault:!0},login:{type:"boolean",fields:["login"],param:"ul",spaSafe:!0,isDefault:!0},subscriber:{type:"boolean",fields:["subscriber"],param:"sbs",spaSafe:!0,isDefault:!0},conversion:{type:"boolean",fields:["conversion"],param:"cs",spaSafe:!1,isDefault:!0},userid:{type:"string",fields:["userid","userId"],param:"",spaSafe:!0},subscriberid:{type:"string",fields:["subscriberid"],param:"sbid",spaSafe:!0},consent:{type:"boolean",fields:["consent"],param:"cst",auto:function(){return!0},spaSafe:!0},nopageview:{type:"boolean",fields:["nopageview","nopv"],param:"nopv",spaSafe:!1},locale:{type:"string",fields:["locale"],param:"lo",auto:function(){const e=li(this,ci)[ci].querySelector("html");if(void 0!==e&&e.hasAttribute("lang")){const t=e.getAttribute("lang");return""!=t&&t.length>1?t:""}}.bind(this),spaSafe:!1,lc:!0,isDefault:!0},userneed:{type:"string",fields:["userneed","article:userneed"],param:"un",spaSafe:!1,isDefault:!0},newsvalue:{type:"int",fields:["newsvalue"],param:"nw",spaSafe:!1,isDefault:!0},outdated:{type:"boolean",fields:["outdated"],param:"od",spaSafe:!1,isDefault:!0},freshness:{type:"int",fields:["freshness"],param:"fh",spaSafe:!1,isDefault:!0}}}),Object.defineProperty(this,vi,{writable:!0,value:{}}),li(this,ui)[ui]=e,li(this,ci)[ci]=t,li(this,fi)[fi]=i,void 0!==li(this,fi)[fi].customFields)for(var a in li(this,fi)[fi].customFields)void 0!==li(this,gi)[gi][a]?li(this,ui)[ui].speaker.error("Could not setup customField '"+a+"' - reason: field already exists"):(li(this,ui)[ui].speaker.say("Defining "+a+" as part of pageData"),li(this,gi)[gi][a.toLowerCase()]=li(this,fi)[fi].customFields[a]);for(var r in void 0!==li(this,fi)[fi].prefixes&&(li(this,pi)[pi]=li(this,fi)[fi].prefixes),li(this,wi)[wi]=li(this,mi)[mi](),li(this,gi)[gi])li(this,ki)[ki](r);void 0!==li(this,fi)[fi].skipFBIA&&1===li(this,fi)[fi].skipFBIA||"undefined"==typeof ia_document||li(this,bi)[bi](),void 0!==li(this,fi)[fi].qspTracker&&li(this,yi)[yi](),li(this,ui)[ui].speaker.say("Init pagedata read (before jsonMetaData)","pagedata"),li(this,ui)[ui].speaker.table(li(this,vi)[vi],"pagedata"),new Zt(this,null!=(s=li(this,fi)[fi].jsonMetaData)?s:"auto"),li(this,ui)[ui].speaker.say("Init pagedata read:","pagedata"),li(this,ui)[ui].speaker.table(li(this,vi)[vi],"pagedata")}getArticleElement(){return li(this,wi)[wi]===document||null==(null==this?void 0:li(this,wi)[wi])?document.body:li(this,wi)[wi]}reRead(){var e;li(this,ui)[ui].speaker.say("ReRead called","pagedata");var t,i=!(!li(this,fi)[fi].SPA||!li(this,fi)[fi].SPA.metaData);if(i&&li(this,fi)[fi].SPA&&"k5aMeta"==li(this,fi)[fi].SPA.metaData&&"undefined"!=typeof k5aMeta)return this.resetAll(),new Zt(this,null!=(t=li(this,fi)[fi].jsonMetaData)?t:"auto"),li(this,vi)[vi].url&&""!==li(this,vi)[vi].url||this.setField("url",li(this,gi)[gi].url.auto()),li(this,ui)[ui].speaker.say("Pagedata update - SPA (k5aMeta): "+location.href,"pagedata"),void li(this,ui)[ui].speaker.table(li(this,vi)[vi],"pagedata");let s=li(this,vi)[vi].url;var a=(new zt).getMostVisibleElement(document.querySelectorAll(li(this,fi)[fi].article));for(var r in a&&(li(this,wi)[wi]=a),li(this,gi)[gi])i||!i&&li(this,gi)[gi][r].spaSafe?li(this,ki)[ki](r):"url"==r?this.setField("url",location.href):li(this,vi)[vi][r]="";new Zt(this,null!=(e=li(this,fi)[fi].jsonMetaData)?e:"auto"),li(this,fi)[fi].SPA&&li(this,fi)[fi].SPA.skipConversion&&1==li(this,fi)[fi].SPA.skipConversion&&this.resetField("conversion"),this.setField("paywall",li(this,gi)[gi].paywall.auto()),this.setField("paid",li(this,gi)[gi].paid.auto()),""==this.getField("referer")&&this.setField("referer",s),li(this,ui)[ui].speaker.say("Pagedata update - SPA: "+location.href,"pagedata"),li(this,ui)[ui].speaker.table(li(this,vi)[vi],"pagedata")}setData(e){for(var t in e)this.setField(t,e[t])}setField(e,t){var i;if(null!=t){if("referrer"==(e=e.toLowerCase())&&(e="referer"),void 0!==li(this,fi)[fi].customParseMetaField&&"function"==typeof li(this,fi)[fi].customParseMetaField[e])try{t=li(this,fi)[fi].customParseMetaField[e](t)}catch(t){li(this,ui)[ui].speaker.error("Could not execute custom parse filed method for: "+e+" [field value: |"+v+"|]"),li(this,ui)[ui].speaker.error("Reason: "+t.toString())}if(void 0!==li(this,gi)[gi][e]&&""!==t)switch(li(this,gi)[gi][e].type){case"url":if(!li(this,fi)[fi].forceRealUrl&&""!=t&&"/"!=t||"url"!=e){var s=this.isUrl(t);if(!1===s)throw new Error("given url is not valid: "+t);li(this,vi)[vi][e]=s.trim()}else li(this,vi)[vi][e]=li(this,gi)[gi].url.auto();break;case"string":let i=(""+t).trim();void 0!==li(this,gi)[gi][e].lc&&li(this,gi)[gi][e].lc&&(i=i.toLowerCase()),li(this,vi)[vi][e]=i;break;case"array":if("object"==typeof t){for(var a in t)if(t.hasOwnProperty(a)&&void 0!==t[a]&&"undefined"!==t[a]&&null!==t[a]){let i=t[a].toString().trim();if(void 0!==li(this,gi)[gi][e].lc&&li(this,gi)[gi][e].lc&&(i=i.toLowerCase()),void 0!==li(this,gi)[gi][e].valueRule&&li(this,gi)[gi][e].valueRule&&i.match&&null==i.match(li(this,gi)[gi][e].valueRule))return void li(this,ui)[ui].speaker.error("Invalid value for "+e+" value: |"+i+"|");void 0===li(this,vi)[vi][e]||""===li(this,vi)[vi][e]?li(this,vi)[vi][e]=[i]:li(this,vi)[vi][e].includes(i)||li(this,vi)[vi][e].push(i)}}else if(void 0!==t&&"undefined"!==t&&null!==t){if(t=t.toString().trim(),void 0!==li(this,gi)[gi][e].lc&&li(this,gi)[gi][e].lc&&(t=t.toLowerCase()),void 0!==li(this,gi)[gi][e].valueRule&&li(this,gi)[gi][e].valueRule&&null==t.match(li(this,gi)[gi][e].valueRule))return void li(this,ui)[ui].speaker.error("Invalid value for "+e+" value: |"+t+"|");void 0===li(this,vi)[vi][e]||""===li(this,vi)[vi][e]?li(this,vi)[vi][e]=[t]:li(this,vi)[vi][e].includes(t)||li(this,vi)[vi][e].push(t)}break;case"boolean":li(this,vi)[vi][e]="true"==t||1==t||"yes"==t||"1"==t?1:0;break;case"int":var r=parseInt(t);isNaN(r)||(li(this,vi)[vi][e]=r);break;case"datetime":r=Date.parse(t),isNaN(r)||(li(this,vi)[vi][e]=t)}if(null!=(i=li(this,fi)[fi])&&i.postParseField)try{let t=li(this,fi)[fi].postParseField(e,li(this,vi)[vi][e]);null!==t&&(li(this,vi)[vi][e]=t)}catch(e){li(this,ui)[ui].speaker.error("Could not call postParseField: "+e.toString())}}}getField(e){return"domain"==e?new Le(this.getField("url")).domain:"hostname"==e?new Le(this.getField("url")).hostname:"k5aUrl"==e?new Le(this.getField("url")).k5a:(e=e.toLowerCase(),void 0!==li(this,gi)[gi][e]&&void 0!==li(this,vi)[vi][e]?li(this,vi)[vi][e]:void 0!==li(this,vi)[vi][e]&&""!=li(this,vi)[vi][e]||void 0===li(this,gi)[gi][e].auto?null:li(this,gi)[gi][e].auto()||null)}delField(e){return void 0!==li(this,gi)[gi][e]&&(void 0!==li(this,gi)[gi][e].forceAutoOnEmpty&&li(this,gi)[gi][e].forceAutoOnEmpty?li(this,vi)[vi][e]=li(this,gi)[gi][e].auto():void 0===li(this,vi)[vi][e]||void 0===li(this,gi)[gi][e].undeleteAble||li(this,gi)[gi][e].undeleteAble||delete li(this,vi)[vi][e],!0)}resetField(e){return!(void 0!==li(this,gi)[gi][e].undeleteAble&&li(this,gi)[gi][e].undeleteAble||void 0===li(this,gi)[gi][e]||void 0===li(this,vi)[vi][e]||(li(this,vi)[vi][e]="",0))}resetAll(){var e=li(this,vi)[vi].channel;li(this,vi)[vi]=[],li(this,vi)[vi].channel=e}getFields(){return Object.keys(li(this,gi)[gi])}getData(e=null){if(null!==e){let s={};for(let a=0;a<e.length;a++){var t,i;null!=(t=li(this,vi)[vi])&&t[e[a]]&&(s[e[a]]=null==(i=li(this,vi)[vi])?void 0:i[e[a]])}return s}return structuredClone(li(this,vi)[vi])}getFieldShortName(e){return void 0!==li(this,gi)[gi][e]&&void 0!==li(this,gi)[gi][e].param&&li(this,gi)[gi][e].param}getLogData(e=null){var t={};null===e&&(e=Object.keys(li(this,vi)[vi]));for(var i=0;i<e.length;i++)t[li(this,gi)[gi][e[i]].param]=li(this,vi)[vi][e[i]]?li(this,vi)[vi][e[i]]:"";return t}getDefaultFields(){let e=[];for(let t in li(this,gi)[gi])void 0!==li(this,gi)[gi][t].isDefault&&li(this,gi)[gi][t].isDefault&&e.push(t);return e}getDefaultData(){return this.getLogData(this.getDefaultFields())}isUrl(e){null!==e.match(/^\/\//i)?e=location.protocol+"//"+e:null===e.match(/^https?\:\/\//i)&&(e=location.protocol+"//"+location.hostname+e);try{var t=new URL(e,document.baseURI).href;t!==e&&(e=t)}catch(e){console.log(e.toString())}return(-1!==e.toLowerCase().indexOf("http://")||-1!==e.toLowerCase().indexOf("https://"))&&e}getMetaField(e,t=null){var i=li(this,ci)[ci].querySelectorAll('meta[property="'+e+'"],meta[name="'+e+'"]');if(i&&i.length>0){for(var s=[],a=0;a<i.length;a++)if(i[a].hasAttribute("content")){var r=i[a].getAttribute("content");if("boolean"===t)return"1"==r||1==r||"yes"==r;null!==r&&""!=r&&s.push(r)}if(s.length>0)return s}return null}isTranslated(){return new ni(li(this,ci)[ci]).isTranslated()}}function _i(){if("undefined"!=typeof ia_document){this.setField("url",ia_document.shareURL),this.setField("title",ia_document.title);var e=ia_document.referrer||"https://ia.facebook.com/";-1==e.indexOf("http")&&(e="https://"+e),this.setField("referer",e),this.setField("channel",this.getField("channel")+"_fbia")}}function ji(){const e=oi.getCountable(li(this,fi)[fi].qspTracker);if(e&&e.length>0)for(let t=0;t<e.length;t++)this.setField("cntTag",e[t])}function Di(){if(li(this,fi)[fi].article){var e=li(this,ci)[ci].querySelector(li(this,fi)[fi].article);if(null!==e)return e}return li(this,ci)[ci]}function Si(e){this.resetField(e),li(this,gi)[gi][e];for(var t=0;t<li(this,gi)[gi][e].fields.length;t++)for(var i=0;i<li(this,pi)[pi].length;i++){let n=-1==li(this,gi)[gi][e].fields[t].indexOf(":")?li(this,pi)[pi][i]+":"+li(this,gi)[gi][e].fields[t]:li(this,gi)[gi][e].fields[t];var s=li(this,ci)[ci].querySelectorAll('meta[property="'+n+'"i],meta[name="'+n+'"i]');if(s&&s.length>0)for(var a=0;a<s.length;a++){var r=s[a].getAttribute("content");if(null!==r&&""!=r&&("lp"==li(this,pi)[pi][i]&&(r=li(this,Pi)[Pi](li(this,pi)[pi][i],e,r)),""!==r&&(this.setField(e,r),void 0!==li(this,vi)[vi][e]&&"array"!=li(this,gi)[gi][e].type)))return}}void 0!==li(this,vi)[vi][e]&&""!=li(this,vi)[vi][e]||void 0===li(this,gi)[gi][e].auto||this.setField(e,li(this,gi)[gi][e].auto())}function Ci(e,t,i){if("lp"==e&&"paywall"==t){if("1"===i||"h"===i||"hard"===i)return this.setField("paid",!0),""}else{var s={lp:{paywall:{1:"hard",0:""}}};if(s[e]&&s[e][t]&&s[e][t][i])return s[e][t][i]}return i}class Ti{static isBot(e=null,t=[]){let i=e||window,s=["headless","bot","spider","scraper","bing","crawler","cxense","search","yandex","cookiebot","slurp","sogou","exabot","facebookexternalhit","facebookcatalog",...t],a=!1;var r;return null!=i&&i.navigator&&(null!=(r=i.navigator)&&r.userAgent&&null!==i.navigator.userAgent.match(new RegExp(s.join("|"),"i"))&&(a=!0),(i.navigator.webdriver||""===navigator.languages)&&(a=!0)),a}}function Mi(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ai=0;function Li(e){return"__private_"+Ai+++"_"+e}var Ei=Li("pingData"),xi=Li("asyncTTL"),Fi=Li("reqIdHistory");class Ii{constructor(e){this.k5a=null,Object.defineProperty(this,Ei,{writable:!0,value:{userActive:0,pings:[]}}),this.supportAsync=!1,Object.defineProperty(this,xi,{writable:!0,value:1e4}),Object.defineProperty(this,Fi,{writable:!0,value:[]}),this.k5a=e}addHook(e,t,i=!1){this.k5a.listener.addHook(e,t,i)}addUserActiveHook(e,t,i){this.k5a.listener.addUserActiveHook(e,t,i)}isAutoEnabled(e){return void 0===this.k5a.cfg.moduleCfg[e]||void 0===this.k5a.cfg.moduleCfg[e].autoDisabled||!0!==this.k5a.cfg.moduleCfg[e].autoDisabled}addAsyncData(e,t,i){var s=this.k5a.storage.getKey("as");null===s&&(s={}),void 0===s[e]&&(s[e]={}),void 0===s[e][t]&&(s[e][t]=[]),i._reqId=this.k5a.requestId,s[e][t].push(i),this.k5a.storage.setKey("as",s,Mi(this,xi)[xi])}getAsyncData(e){var t=this.k5a.storage.getKey("as");return null!==t&&void 0!==t[e]&&t[e]}runAsyncData(e,t,i=!1,s=!1){let a=this.k5a.requestId+"_"+e+"_"+t;if(Mi(this,Fi)[Fi].indexOf(a)>-1)return void this.k5a.speaker.say("as sync with id '"+a+"' already done!");Mi(this,Fi)[Fi].push(a);let r=this.k5a.storage.getKey("as"),n={};null!==r&&void 0!==r[e]&&(Object.keys(r).forEach((a=>{a===e?Object.keys(r[a]).forEach((o=>{if("*"===t||o===t)for(var l=0;l<r[e][o].length;l++)if(s||r[e][o][l]._reqId!==this.k5a.requestId)if(delete r[e][o][l]._reqId,i)try{var h=i(r[e][o][l]);!1!==h&&this.k5a.logger.fireNow(o,h,"storage")}catch(e){console.error(e.toString())}else this.k5a.logger.fireNow(o,r[e][o][l],"storage");else void 0===n[a]&&(n[a]={}),void 0===n[a][o]&&(n[a][o]=[]),n[a][o].push(r[e][o][l]),console.log("k5a: not running this AS data as we are on same requestId - "+r[e][o][l]._reqId+" vs k5a:"+this.k5a.requestId)})):Object.keys(r[a]).length>0&&(n[a]=r[a])})),Object.keys(n).length>0?this.k5a.storage.setKey("as",n,Mi(this,xi)[xi]):this.k5a.storage.delKey("as"))}say(e){this.k5a.speaker.say(e,this.constructor.name)}warn(e){this.k5a.speaker.warn(e,this.constructor.name)}error(e){this.k5a.speaker.error(e,this.constructor.name)}clearAsyncData(e){}keysToLowerCase(e){var t={};return Object.keys(e).forEach((i=>{t[i.toLowerCase()]=e[i]})),t}}function Ri(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Ii.moduleName="logmodule";var Ni=0;function Ui(e){return"__private_"+Ni+++"_"+e}var qi=Ui("pingInterval"),Bi=Ui("userTTL"),Vi=Ui("lastActive"),Hi=Ui("lastPing"),Ki=Ui("logData"),zi=Ui("intId"),Ji=Ui("activities"),Yi=Ui("stop"),$i=Ui("getTime");class Gi extends Ii{constructor(e){super(e),Object.defineProperty(this,$i,{value:Wi}),Object.defineProperty(this,Yi,{value:Qi}),Object.defineProperty(this,qi,{writable:!0,value:30}),Object.defineProperty(this,Bi,{writable:!0,value:60}),Object.defineProperty(this,Vi,{writable:!0,value:0}),Object.defineProperty(this,Hi,{writable:!0,value:0}),Object.defineProperty(this,Ki,{writable:!0,value:{}}),Object.defineProperty(this,zi,{writable:!0,value:!1}),Object.defineProperty(this,Ji,{writable:!0,value:[]}),Ri(this,Ki)[Ki]=this.k5a.pageData.getDefaultData(),Ri(this,Ki)[Ki].uid=this.k5a.user.getId(),Ri(this,Vi)[Vi]=Ri(this,$i)[$i](),this.addHook("activity",function(e){Ri(this,Vi)[Vi]=Ri(this,$i)[$i](),this.start()}.bind(this)),this.addHook("hidden",function(e){Ri(this,Yi)[Yi]()}.bind(this),!0),this.addHook("active",function(e){Ri(this,Vi)[Vi]=Ri(this,$i)[$i](),this.checkActivity()}.bind(this),!0)}start(){!1===Ri(this,zi)[zi]&&(Ri(this,zi)[zi]=setInterval(function(){this.checkActivity()}.bind(this),1e3*Ri(this,qi)[qi]))}checkActivity(){var e=Ri(this,$i)[$i]();if(!(0!==Ri(this,Hi)[Hi]&&e-Ri(this,Hi)[Hi]<Ri(this,qi)[qi])){for(var t=!1,i=[],s=0;s<Ri(this,Ji)[Ji].length;s++)try{var a=Ri(this,Ji)[Ji][s]();if(!1!==a&&(t=!0,Ri(this,Vi)[Vi]=Ri(this,$i)[$i](),"object"==typeof a&&a.length>0))for(s=0;s<a.length;s++){var r=Ri(this,Ki)[Ki];Object.keys(a[s]).forEach((e=>{r[e]=a[s][e]})),i.push(r)}}catch(e){console.error("Could not call callback: "+e.toString())}if(!t&&e-Ri(this,Vi)[Vi]<=Ri(this,Bi)[Bi]&&!1!==Ri(this,zi)[zi]&&(t=!0),t){for(void 0!==this.k5a.cfg.activeUsers&&1==this.k5a.cfg.activeUsers&&i.push(Ri(this,Ki)[Ki]),s=0;s<i.length;s++)this.k5a.logger.fireNow("activity",i[s],"js");Ri(this,Hi)[Hi]=e}else this.k5a.listener.fireHook("hidden"),Ri(this,Yi)[Yi]()}}addActivity(e){Ri(this,Ji)[Ji].push(e)}}function Qi(){clearInterval(Ri(this,zi)[zi]),Ri(this,zi)[zi]=!1}function Wi(){return parseInt((new Date).getTime()/1e3)}function Zi(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Xi=0;function es(e){return"__private_"+Xi+++"_"+e}var ts=es("length"),is=es("data"),ss=es("ttl"),as=es("defaultSessionTTL"),rs=es("wasNewSession"),ns=es("name"),os=es("store"),ls=es("cannotStore"),hs=es("UUID");class ds{constructor(e,t="u",i=16){if(Object.defineProperty(this,hs,{value:cs}),Object.defineProperty(this,ls,{value:us}),Object.defineProperty(this,ts,{writable:!0,value:16}),Object.defineProperty(this,is,{writable:!0,value:{}}),Object.defineProperty(this,ss,{writable:!0,value:9e4}),Object.defineProperty(this,as,{writable:!0,value:1800}),Object.defineProperty(this,rs,{writable:!0,value:!1}),this.k5a=null,Object.defineProperty(this,ns,{writable:!0,value:"u"}),Object.defineProperty(this,os,{writable:!0,value:null}),this.k5a=e,Zi(this,ts)[ts]=i,Zi(this,ns)[ns]=t,e.consent)if(this.k5a.storage.canStore()){if(Zi(this,is)[is]=this.k5a.storage.getKey(t),null!==Zi(this,is)[is]){var s,a;Zi(this,rs)[rs]=Zi(this,is)[is].ts+Zi(this,as)[as]<parseInt((new Date).getTime()/1e3),Zi(this,is)[is].ts=parseInt((new Date).getTime()/1e3),void 0!==(null==(s=Zi(this,is)[is])?void 0:s.c)&&!1!==Zi(this,is)[is].c||null==(a=this.k5a)||!a.pageData||(Zi(this,is)[is].c=this.k5a.pageData.getField("channel"))}else{var r;let e=!1;null!=(r=this.k5a)&&r.pageData&&(e=this.k5a.pageData.getField("channel")),Zi(this,rs)[rs]=!0,Zi(this,is)[is]={uid:Zi(this,hs)[hs](),c:e,ts:parseInt((new Date).getTime()/1e3)}}this.k5a.storage.setKey(Zi(this,ns)[ns],Zi(this,is)[is],Zi(this,ss)[ss])}else Zi(this,ls)[ls]();else Zi(this,ls)[ls]()}setId(e=""){return!(!this.k5a.consent||null===e.match(/^[a-zA-Z0-9\-\_\.]{4,128}$/)||(Zi(this,is)[is].uid=e,Zi(this,is)[is].ts=parseInt((new Date).getTime()/1e3),this.k5a.storage.setKey(Zi(this,ns)[ns],Zi(this,is)[is],Zi(this,ss)[ss]),0))}getId(){return Zi(this,is)[is].uid}getLastSeen(){return Zi(this,is)[is].ts}getChannel(){return Zi(this,is)[is].c}isNewSession(){return Zi(this,rs)[rs]}}function us(){this.k5a.storage.delete(),Zi(this,is)[is].uid="_",Zi(this,rs)[rs]=!1}function cs(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,i=[],s=0;s<Zi(this,ts)[ts];s++)i[s]=e[0|Math.random()*t];return i.join("")}function ws(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var fs=0;function ps(e){return"__private_"+fs+++"_"+e}var gs=ps("evtTypeMap"),vs=ps("storage"),bs=ps("ttlLimit"),ys=ps("storageFormatVersion"),ms=ps("cfg"),ks=ps("cleanUp"),Ps=ps("getStorageData"),Os=ps("getTSFromRelative"),_s=ps("tsIsExpired"),js=ps("getBaseTimeStamp"),Ds=ps("doUrl"),Ss=ps("setupConfig"),Cs=ps("hashIt");class Ts{constructor(e,t,i={}){Object.defineProperty(this,Cs,{value:Rs}),Object.defineProperty(this,Ss,{value:Is}),Object.defineProperty(this,Ds,{value:Fs}),Object.defineProperty(this,js,{value:xs}),Object.defineProperty(this,_s,{value:Es}),Object.defineProperty(this,Os,{value:Ls}),Object.defineProperty(this,Ps,{value:As}),Object.defineProperty(this,ks,{value:Ms}),Object.defineProperty(this,gs,{writable:!0,value:{visit:"v",seen:"s",when:"_"}}),Object.defineProperty(this,vs,{writable:!0,value:null}),this.profiler=null,Object.defineProperty(this,bs,{writable:!0,value:void 0}),Object.defineProperty(this,ys,{writable:!0,value:1}),Object.defineProperty(this,ms,{writable:!0,value:{track:{visit:["url"],seen:["url"]}}}),this.profiler=e,this._speaker=this.profiler._speaker.extendScope("vokaya"),ws(this,Ss)[Ss](i),ws(this,vs)[vs]=t,this._speaker.say(" - "+Ts.moduleName+" init - Current id: "+this.profiler.k5a.requestId+" "+location.href),ws(this,vs)[vs].canStore()&&(ws(this,bs)[bs]=parseInt((new Date).getTime()/1e3-ws(this,ms)[ms].ttl),ws(this,ks)[ks](),this.init())}init(){this._speaker.say("Vokaya is ready!"),this._speaker.say("Vokaya age is "+this.getAge()+" hour(s)")}deleteAll(){return ws(this,vs)[vs].delete()}_runTrackOn(e,t){var i,s;if(this._speaker.say("_runTrackOn: "+e+" "+(null==(i=ws(this,ms)[ms])?void 0:i.track[e])),null!=(s=ws(this,ms)[ms])&&s.track[e]){Array.isArray(t)||(t=[t]);const i=ws(this,gs)[gs][e];let s=ws(this,Ps)[Ps]();for(let h=0;h<t.length;h++)for(const d of null==(a=ws(this,ms)[ms])?void 0:a.track[e]){var a,r;if(void 0!==(null==(r=t[h])?void 0:r[d])&&""!==t[h][d]){const e=Array.isArray(t[h][d])?t[h][d]:[t[h][d]];let a=this.profiler.k5a.pageData.getFieldShortName(d);a||(a=d);for(let t=0;t<e.length;t++){var n,o,l;const r=ws(this,Cs)[Cs]("url"===d?ws(this,Ds)[Ds](e[t]):e[t]);void 0===(null==s?void 0:s[a])&&(s[a]={}),void 0===(null==(n=s[a])?void 0:n[r])&&(s[a][r]={[i]:0}),void 0===(null==(o=s[a][r])?void 0:o[i])&&(s[a][r][i]=0),s[a][r][i]++,null!=(l=s[a][r])&&l._&&s[a][r]._.length>0?(s[a][r]._.push(this.getTS()),s[a][r]._.length>2&&s[a][r]._.shift()):s[a][r]._=[this.getTS()]}}}ws(this,vs)[vs].set(s)}}get(e,t,i){var s;if("*"==e||null!=(s=ws(this,ms)[ms])&&s.track[e]){let s=ws(this,vs)[vs].get(),o=this.profiler.k5a.pageData.getFieldShortName(t);o||(o=t);const l=ws(this,Cs)[Cs]("url"===t?ws(this,Ds)[Ds](i):i);var a;if(void 0!==(null==s?void 0:s[o])&&void 0!==(null==(a=s[o])?void 0:a[l])){if("*"===e){let e={};for(const[t,i]of Object.entries(ws(this,gs)[gs])){var r;void 0!==(null==(r=s[o][l])?void 0:r[i])?e[t]="_"==i?s[o][l][i][0]:s[o][l][i]:e[t]=null}return e}{var n;const t=ws(this,gs)[gs][e];if(void 0!==(null==(n=s[o][l])?void 0:n[t]))return"_"==t?{[e]:s[o][l][t][0]}:{[e]:s[o][l][t]}}}return null}return this.profiler.warn("Unknown eventType: "+e),null}getAll(e,t){var i;if("*"==e||null!=(i=ws(this,ms)[ms])&&i.track[e]){let i=ws(this,Ps)[Ps](),s={};for(let a=0;a<t.length;a++){let r=this.profiler.k5a.pageData.getFieldShortName(t[a]);if(r||(r=t[a]),void 0!==(null==i?void 0:i[r]))if("*"===e)s[t[a]]=i[r];else{const n=ws(this,gs)[gs][e];s[t[a]]={};for(const[e,o]of Object.entries(i[r]))null!=o&&o[n]&&(s[t[a]][e]={[n]:o[n]})}}return s}return null}add(e,t){return this._runTrackOn(e,t)}getTrackFieldForEventType(e){var t;if(null!=(t=ws(this,ms)[ms])&&t.track[e])return ws(this,ms)[ms].track[e]}addKey(e,t){if("_t"==e)throw new Exception('key "_t" is reserved');let i=ws(this,Ps)[Ps]();i["#"+e]=[t,this.getTS()],ws(this,vs)[vs].set(i)}getKey(e){let t=ws(this,Ps)[Ps]();if(null!=t&&t["#"+e])return null==t?void 0:t["#"+e][0]}getFieldCount(e){let t=this.profiler.k5a.pageData.getFieldShortName(e);t||(t=e);let i=ws(this,Ps)[Ps]();return null!=i&&i[t]?(console.log("Has data!"),Object.keys(i[t]).length):null}getTS(e=null){return null==e&&(e=new Date),parseInt(e.getTime()/1e3)-ws(this,js)[js]()}isExpired(e,t){const i=ws(this,Os)[Os](e);return(new Date).getTime()/1e3-i>=t}seenBeforeToday(e){const t=ws(this,Os)[Os](e),i=e=>{const t=e.getMonth()+1,i=e.getDate();return parseInt(e.getFullYear()+""+(t<10?"0"+t:t)+(i<10?"0"+i:i))};let s=new Date;return s.setTime(1e3*t),!(i(s)<i(new Date))}getDateFromTS(e){const t=ws(this,Os)[Os](e),i=new Date;return i.setTime(1e3*t),i}getAge(){let e=ws(this,js)[js]();return parseInt((parseInt((new Date).getTime()/1e3)-e)/3600)}}function Ms(){this._speaker.say("Cleaning up storage");let e=ws(this,Ps)[Ps]();var t;if(this._speaker.canLog()&&this._speaker.say(JSON.stringify(e)),e)if(void 0===(null==(t=e)?void 0:t["#"])||e["#"]!==ws(this,ys)[ys])e={"#":ws(this,ys)[ys]};else for(const[t,i]of Object.entries(e))if("#"==t[0]&&null!=i&&i[1])ws(this,_s)[_s](i[1])&&(this._speaker.say("Deleting custom key: "+t),delete e[t]);else for(const[e,s]of Object.entries(i))if(null!=s&&s._){const a=s._.length>1?s._[1]:s._[0];ws(this,_s)[_s](a)&&(this._speaker.say("Deleting key: "+t+"."+e),delete i[e])}ws(this,vs)[vs].set(e),this._speaker.say("Cleaning up storage - done")}function As(){let e=ws(this,vs)[vs].get();return ws(this,js)[js](),e}function Ls(e){return ws(this,js)[js]()+e}function Es(e){return e+ws(this,js)[js]()<=ws(this,bs)[bs]}function xs(){let e=ws(this,vs)[vs].get();return null==(null==e?void 0:e._)&&(e._=parseInt((new Date).getTime()/1e3),ws(this,vs)[vs].set(e)),e._}function Fs(e){return new Le(e,this.profiler.k5a).k5a}function Is(e){for(const t of Object.keys(ws(this,ms)[ms]))void 0!==e[t]&&(ws(this,ms)[ms][t]=e[t])}function Rs(e){if(!ws(this,ms)[ms].useHash)return e;let t=0,i=0,s=e.length;for(;i<s;)t=(t<<5)-t+e.charCodeAt(i++)|0;return t+2147483647+1}function Ns(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Ts.moduleName="vokaya";var Us=0;function qs(e){return"__private_"+Us+++"_"+e}var Bs=qs("ektins"),Vs=qs("autoTrackVisitDone"),Hs=qs("hasConsent"),Ks=qs("cfg"),zs=qs("setupConfig"),Js=qs("setupEktins"),Ys=qs("runEktinEvent");class $s{constructor(e,t={}){Object.defineProperty(this,Ys,{value:Ws}),Object.defineProperty(this,Js,{value:Qs}),Object.defineProperty(this,zs,{value:Gs}),this.k5a=null,this._speaker=null,Object.defineProperty(this,Bs,{writable:!0,value:[]}),this.vokaya=null,Object.defineProperty(this,Vs,{writable:!0,value:!1}),Object.defineProperty(this,Hs,{writable:!0,value:!0}),Object.defineProperty(this,Ks,{writable:!0,value:{storageName:"_k5a_v",storageType:"localstorage",useHash:!1,ttl:604800}}),this.e=void 0,this.k5a=e,this._speaker=this.k5a.speaker.newScope("profiler"),this._speaker.say("I'm loading, with this config:"),Ns(this,zs)[zs](t),this._speaker.dump(Ns(this,Ks)[Ks]);let i=new lt(this.k5a,Ns(this,Ks)[Ks].storageName,Ns(this,Ks)[Ks].storageType);Ns(this,Hs)[Hs]=i.canStore(),this.k5a.consent&&Ns(this,Hs)[Hs]?(this.vokaya=new Ts(this,i,Ns(this,Ks)[Ks]),t.ektins&&Ns(this,Js)[Js](t.ektins),null!=t&&t.autoTrackVisit&&this.k5a.listener.addHook("pageView",(e=>{if(!Ns(this,Vs)[Vs]){Ns(this,Vs)[Vs]=!0;let e=this.k5a.pageData.getData(this.vokaya.getTrackFieldForEventType("visit"));this.addVisit(e)}}))):(i.canStore()&&new Ts(this,i,t).deleteAll(),Ns(this,Hs)[Hs]=!1,this._speaker.say("No consent is given, so will not profile."))}init(){if(Ns(this,Hs)[Hs]){null!==this.vokaya&&this.vokaya.init();for(const e of Object.keys(Ns(this,Bs)[Bs]))Ns(this,Bs)[Bs][e].init&&Ns(this,Bs)[Bs][e].init()}}addVisit(e){return!!Ns(this,Hs)[Hs]&&(Ns(this,Ys)[Ys]("visit",e),this.vokaya.add("visit",e))}getStats(e,t){return Ns(this,Hs)[Hs]?this.vokaya.get("*",e,t):null}getAllStats(e){return Ns(this,Hs)[Hs]?this.vokaya.getAll("*",e):null}getVisits(e,t){return Ns(this,Hs)[Hs]?this.vokaya.get("visit",e,t):null}getSeens(e,t){return Ns(this,Hs)[Hs]?this.vokaya.get("seen",e,t):null}onSeen(e){if(!Ns(this,Hs)[Hs])return null;Ns(this,Ys)[Ys]("seen",e),this.vokaya.add("seen",e)}canProfile(){return Ns(this,Hs)[Hs]}getData(e){return!!Ns(this,Hs)[Hs]&&this.vokaya.getData(e)}getEktin(e){var t;return null==(t=Ns(this,Bs)[Bs])?void 0:t[e]}}function Gs(e){for(const t of Object.keys(Ns(this,Ks)[Ks]))void 0!==e[t]&&(Ns(this,Ks)[Ks][t]=e[t])}function Qs(e){for(let t=0;t<e.length;t++)try{this._speaker.say("Setting up ektin: "+e[t].ektin.moduleName),Ns(this,Bs)[Bs][e[t].ektin.moduleName]=new e[t].ektin(this,e[t].ektin.moduleName,e[t].cfg||{})}catch(i){console.error("Could not setup ektin: "+e[t].ektin+" "+i.toString())}}function Ws(e,t){for(const i of Object.keys(Ns(this,Bs)[Bs]))try{Ns(this,Bs)[Bs][i].on(e,t)}catch(t){console.error("Could not run event: "+e+" on ektin: "+i),console.error(t.toString())}}class Zs{constructor(e,t,i={}){this._profiler=null,this._cfg={},this.pageDataMap={url:"u",section:"s",tag:"t"},this._profiler=e,this._cfg=i,this._speaker=this._profiler._speaker.extendScope("ektin:"+t),this._speaker.say(" - construct - Current id: "+this._profiler.k5a.requestId+" "+location.href)}init(){}on(e,t){switch(e.toLowerCase()){case"visit":return this.onVisit(t);case"click":return this.onClick(t);case"seen":return this.onSeen(t);case"exit":return this.onExit(t)}throw new Error("Unknown on Event given: "+e)}onVisit(e){return!0}onSeen(e){return!0}onClick(e){return!0}onExit(e){return!0}getStats(){return!1}}function Xs(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Zs.moduleName="ektin";var ea=0;function ta(e){return"__private_"+ea+++"_"+e}var ia=ta("sessionTTL"),sa=ta("stats"),aa=ta("initSession"),ra=ta("updateSession");class na extends Zs{constructor(...e){super(...e),Object.defineProperty(this,ra,{value:la}),Object.defineProperty(this,aa,{value:oa}),Object.defineProperty(this,ia,{writable:!0,value:1800}),Object.defineProperty(this,sa,{writable:!0,value:{newToday:!1,newSession:!1,sessionCount:0,evtCount:0}})}onVisit(e){this._speaker.say(na.moduleName+": I got onSeen event for url:"+e.url);let t=this._profiler.vokaya.getKey("sd");void 0===t?(t=Xs(this,aa)[aa](),this._profiler.vokaya.addKey("sd",t)):this._profiler.vokaya.addKey("sd",Xs(this,ra)[ra](t))}getStats(){return Xs(this,sa)[sa]}}function oa(){let e={i:this._profiler.vokaya.getTS(),l:this._profiler.vokaya.getTS(),c:1,e:1};return Xs(this,sa)[sa].newToday=!0,Xs(this,sa)[sa].newSession=!0,Xs(this,sa)[sa].sessionCount=e.c,Xs(this,sa)[sa].evtCount=e.e,e}function la(e){if(this._speaker.canLog()){const t=this._profiler.vokaya.getDateFromTS(e.i),i=this._profiler.vokaya.getDateFromTS(e.l),s=parseInt(((new Date).getTime()-i.getTime())/1e3),a=parseInt((i.getTime()-t.getTime())/1e3);this._speaker.log("Session start: "+t.toString()),this._speaker.log("Session last activity: "+s+"s, length: "+a+"s - date: "+i.toString())}return!1===this._profiler.vokaya.seenBeforeToday(e.l)?(this._speaker.log("New session initied for today"),e=Xs(this,aa)[aa](),Xs(this,sa)[sa].newToday=!0,Xs(this,sa)[sa].newSession=!0):(this._profiler.vokaya.isExpired(e.l,Xs(this,ia)[ia])&&(Xs(this,sa)[sa].newSession=!0,e.c++,e.e=0,this._speaker.log("New session initied, session count: "+e.sc)),e.l=this._profiler.vokaya.getTS(),e.e++),Xs(this,sa)[sa].sessionCount=e.c,Xs(this,sa)[sa].evtCount=e.e,e}function ha(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}na.moduleName="session";var da=0;function ua(e){return"__private_"+da+++"_"+e}var ca=ua("modules"),wa=ua("insId"),fa=ua("initializeModules"),pa=ua("setupApiMethods"),ga=ua("setupCustomCfg");class va{constructor(e,t=!1){var i;Object.defineProperty(this,ga,{value:ma}),Object.defineProperty(this,pa,{value:ya}),Object.defineProperty(this,fa,{value:ba}),this.cfg={},Object.defineProperty(this,ca,{writable:!0,value:{}}),this.speaker=null,this.logger=null,this.storage=null,this.k5aServer="//l.kilkaya.com/",Object.defineProperty(this,wa,{writable:!0,value:""}),this.element=document,this.pageData=null,this.user=null,this.consent=!0,this.requestId=(new Date).getTime(),this.cfg=e,["installationId","logServer","modules"].forEach((e=>{void 0===this.cfg[e]&&console.error("K5A: missing config option: '"+e+"'")})),void 0===this.cfg.moduleCfg&&(this.cfg.moduleCfg={}),void 0!==this.cfg.logServer&&(this.k5aServer=this.cfg.logServer),this.speaker=new X("k5a",this),this.speaker.globalDevMode=t,this.storage=new lt(this),this.speaker.checkPersistentDebugMode(),this.logger=new _e(this),this.pageData=new Oi(this,this.element,this.cfg.pageData||{}),this.listener=new S(this),this.consent=this.pageData.getField("consent"),!1===this.cfg.hasConsent&&(this.consent=!1),this.user=new ds(this),this.user.setId(this.pageData.getField("userId")||""),this.active=new Gi(this),null!=(i=this.cfg)&&i.profiler&&(this.profiler=new $s(this,this.cfg.profiler)),ha(this,ga)[ga](),ha(this,fa)[fa](),this.listener.postInitialize()}debugModeOn(){this.speaker.setPersistentDebugMode(!0)}debugModeOff(){this.speaker.setPersistentDebugMode(!1)}devModeOn(){this.speaker.setPersistentDebugMode(!0,!0)}devModeOff(){this.speaker.setPersistentDebugMode(!1)}set debugMode(e=!1){this.speaker.debugMode(e)}set debugUrl(e=!1){this.speaker.debugUrl(e)}disableLog(){this.logger.disable()}enableLog(){this.logger.enable()}resetRequestId(){this.requestId=(new Date).getTime()}}function ba(){for(var e=0;e<this.cfg.modules.length;e++){var t=this.cfg.modules[e].moduleName;this.speaker.say('Loading module "'+t+'"');try{var i;ha(this,ca)[ca][t]=new this.cfg.modules[e](this,null!=(i=this.cfg.moduleCfg[t])?i:{}),"function"==typeof ha(this,ca)[ca][t].apiMethods&&ha(this,pa)[pa](ha(this,ca)[ca][t].apiMethods())}catch(t){this.speaker.say('Could not load log module: "'+this.cfg.modules[e]+'", reason: '+t.toString())}}}function ya(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}function ma(){let e=["pageview","click","engagement","video"],t=this.pageData.getField("domain");if(void 0!==this.cfg){var i;let t=!1;if(void 0===this.cfg.disableRefresh&&(this.cfg.disableRefresh=!0),0!==this.cfg.disableRefresh&&!1!==this.cfg.disableRefresh){let e=["refresh","autoRefresh","noLog"];"object"==typeof this.cfg.disableRefresh&&this.cfg.disableRefresh.length>0&&(e=this.cfg.disableRefresh);for(const i of e)if(this.pageData.getMetaField("k5a:"+i,"boolean")){t=!0;break}t||null===location.href.match(new RegExp("[#?&](?:"+e.join("|")+")","i"))||(this.speaker.say("Disabled via url parameter"),t=!0)}null!=(i=this.cfg)&&i.disableBots&&!t&&Ti.isBot(window,this.cfg.disableBots.length>0?this.cfg.disableBots:void 0)&&(t=!0,this.speaker.say("Disabled via isBot check")),t&&e.forEach((e=>{void 0===this.cfg.moduleCfg[e]&&(this.cfg.moduleCfg[e]={}),this.cfg.moduleCfg[e].autoDisabled=!0,this.speaker.say("Module disabled via option: "+e)}))}"undefined"!=typeof k5aMeta&&Object.keys(k5aMeta).forEach((t=>{if(!0===k5aMeta[t]||1===k5aMeta[t]||"1"===k5aMeta[t]||"yes"===k5aMeta[t]){var i=t.substr(7).toLowerCase();e.includes(i)&&(this.speaker.say("Disabling "+i+" auto logging"),void 0===this.cfg.moduleCfg[i]?this.cfg.moduleCfg[i]={autoDisabled:!0}:this.cfg.moduleCfg[i].autoDisabled=!0)}})),e.forEach((e=>{void 0!==this.cfg.moduleCfg[e]&&void 0!==this.cfg.moduleCfg[e].disableFor&&this.cfg.moduleCfg[e].disableFor.includes(t)&&(this.speaker.say("Disabling "+e+' auto logging, "'+t+'" is banned in disableFor'),this.cfg.moduleCfg[e].autoDisabled=!0)}))}function ka(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Pa=0;function Oa(e){return"__private_"+Pa+++"_"+e}var _a=Oa("logData"),ja=Oa("frontpages"),Da=Oa("activityPWDone"),Sa=Oa("lastPVTime"),Ca=Oa("isOnFrontpage"),Ta=Oa("setupData");class Ma extends Ii{constructor(e){super(e),Object.defineProperty(this,Ta,{value:La}),Object.defineProperty(this,Ca,{value:Aa}),Object.defineProperty(this,_a,{writable:!0,value:{}}),Object.defineProperty(this,ja,{writable:!0,value:["www.aasavis.no","www.abcnyheter.no","www.adressa.no","www.aftenbladet.no","www.aftenposten.no","www.agderposten.no","www.aktivtrening.no","www.altaposten.no","www.altomfotball.no/element.do","www.alvdalmiv.no","www.amta.no","www.an.no","www.andalsnes-avis.no","www.ao.no","www.auraavis.no","www.austagderblad.no","www.av-avis.no","www.avisa-hordaland.no","www.avisa-st.no","www.avisa-valdres.no","www.avisenagder.no","www.ba.no","www.banett.no","www.bladet.no","www.blv.no","bo-bedre.no","www.bomlo-nytt.no","www.bt.no","www.budstikka.no","www.byas.no","www.bygdanytt.no","www.bygdebladet.no","www.bygdeposten.no","costume.no","www.dagbladet.no","www.dagen.no","www.dagsavisen.no","www.dalane-tidende.no","www.direktesport.no","www.diskusjon.no","www.dn.no","www.doktoronline.no","www.dolen.no","www.drangedalsposten.no","www.driva.no","www.dt.no","e24.no","www.eikerbladet.no","www.elbil24.no","www.enebakkavis.no","www.eub.no","www.f-b.no","www.finansavisen.no","www.finn.no","www.finnmarksposten.no","www.firda.no","www.firdaposten.no","www.firdatidend.no","www.fiskeribladet.no","www.fjordabladet.no","www.fjordingen.no","www.fjt.no","www.fjuken.no","www.folkebladet.no","forskning.no","www.fosna-folket.no","www.framtidinord.no","www.fremover.no","www.frostingen.no","www.fvn.no","www.gat.no","www.gbnett.no","www.gd.no","www.gdhytte.no","www.gjengangeren.no","www.glomdalen.no","www.godt.no","www.h-a.no","www.h-avis.no","www.ha-halden.no","www.hadeland.no","www.hallingdolen.no","www.hamar-dagblad.no","www.hardanger-folkeblad.no","www.hblad.no","www.helg.no","www.hf.no","www.hitra-froya.no","www.ht.no","www.hyttavaar.no","www.ialta.no","www.ifinnmark.no","www.ilevanger.no","www.inderoyningen.no","www.indre.no","www.innherred.no","www.intrafish.no","www.isandnessjoen.no","www.itromso.no","www.jarlsbergavis.no","www.jbl.no","www.kirkenesby.no","www.kk.no","www.klartale.no","klassekampen.no","www.klikk.no/index","www.klikk.no","www.kvasir.no","www.kode24.no","www.kv.no","forum.kvinneguiden.no","www.kvinnheringen.no","www.laagendalsposten.no","www.l-a.no","www.lister24.no","www.lierposten.no","www.lofot-tidende.no","www.lofotposten.no","www.lokal-avisa.no","www.lp.no","www.lyngdalsavis.no","www.midtnorskdebatt.no","www.mitthammerfest.no","www.mittjessheim.no","www.mittlillehammer.no","www.mittlillestrom.no","www.morenytt.no","www.morgenbladet.no","www.moss-avis.no","www.namdalsavisa.no","www.nationen.no","www.nettavisen.no","www.nidaros.no","www.noblad.no","www.nord24.no","www.norddalen.no","www.nordhordland.no","www.nordlys.no","www.nordnorskdebatt.no","www.nrk.no","nrkbeta.no","nrksuper.no","www.nt24.no","nye-troms.no","www.oa.no","www.oblad.no","www.op.no","www.opdalingen.no","www.osogfusa.no","www.ostlendingen.no","www.oyene.no","p3.no","www.pd.no","www.pent.no","www.r-a.no","www.rablad.no","www.ranablad.no","www.raumnes.no","www.rb.no","www.rbnett.no","www.retten.no","www.rha.no","www.ringblad.no","www.ringsaker-blad.no","www.sa.no","saltenposten.no","www.sandeavis.no","www.sandnesposten.no","www.sb.no","www.seher.no","www.setesdolen.no","www.smaalenene.no","www.smp.no","www.snasningen.no","www.sognavis.no","sol.no","www.solabladet.no","www.stangeavisa.no","www.startsida.no","www.startsiden.no","www.steinkjer-avisa.no","www.strandbuen.no","www.strilen.no","www.suldalsposten.no","www.sunnhordland.no","www.sunnmoringen.no","www.svelviksposten.no","www.t-a.no","www.ta.no","www.tb.no","www.tek.no","www.telen.no","www.tipster.no","www.tk.no","www.totenidag.no","trd.by","www.tromsoby.no","www.tronderbladet.no","www.tronderdebatt.no","www.tv2.no","www.tvedestrandsposten.no","www.tynsetingen.no","www.tysnesbladet.no","www.vaksdalposten.no","www.varden.no","www.varingen.no","www.venneslatidende.no","www.verdidebatt.no","www.vest24.no","www.vestbyavis.no","www.vestlandsnytt.no","www.vestnytt.no","www.vestviken24.no","www.vg3.no","www.vg2.no","www.vg.no","vgd.no","vglive.no","www.vgtv.no/hjem","www.vgtv.no","www.vi.no","www.vigga.no","www.vikebladet.no","www.vl.no","www.opp.no","www.nyss.no","www.mn24.no","www.steinkjer24.no","www.vol.no","www.vredens-gnag.no","www.vtb.no","ytringen.no"]}),Object.defineProperty(this,Da,{writable:!0,value:!1}),Object.defineProperty(this,Sa,{writable:!0,value:0}),"desktop"==this.k5a.pageData.getField("channel")&&this.addHook("activity",function(e){ka(this,Da)[Da]||(ka(this,Da)[Da]=!0,this.k5a.speaker.say("user is active"),ka(this,Ta)[Ta](),this.k5a.speaker.say("AY acitivty pageview...."),ka(this,_a)[_a].ul=0,ka(this,_a)[_a].sbs=0,ka(this,_a)[_a].ns=0,ka(this,_a)[_a].nopv=1,this.k5a.logger.fireNow("pageView",ka(this,_a)[_a],"activity","js"))}.bind(this)),this.addHook("pageView",function(e){ka(this,Ta)[Ta](),this.k5a.speaker.say("AY pageview...."),e.persisted&&(ka(this,_a)[_a].ns=0),this.k5a.logger.addData("pageView",ka(this,_a)[_a]),ka(this,Sa)[Sa]=(new Date).getTime()/1e3,ka(this,Da)[Da]=!1}.bind(this)),this.addHook("spa",function(e){var t=(new Date).getTime()/1e3-ka(this,Sa)[Sa];if(t<=1.5)return this.k5a.speaker.say("SPA event to soon after last pageview request - time:"+t+"s"),!1;this.k5a.pageData.reRead();var i=this.k5a.pageData.getLogData(["url","channel","type","section","subscriber","login"]),s=!1;for(var a in i)ka(this,_a)[_a][a]!==i[a]&&(ka(this,_a)[_a][a]=i[a],"u"==a&&(s=!0));(!s||this.k5a.cfg&&this.k5a.cfg.spaHref)&&(ka(this,_a)[_a].u=location.href,this.k5a.pageData.setField("url",location.href)),ka(this,Ta)[Ta](),ka(this,_a)[_a].ns=0,this.k5a.logger.fireNow("pageView",ka(this,_a)[_a],"spa"),ka(this,Sa)[Sa]=(new Date).getTime()/1e3}.bind(this),!0),this.k5a.logPageview=function(e){let t=this.k5a.pageData.getData();for(var i of Object.keys(e))this.k5a.pageData.setField(i,e[i]);ka(this,Ta)[Ta](),void 0!==e.nopv&&1==e.nopv&&(ka(this,_a)[_a].nopv=1),ka(this,_a)[_a].u===t.url&&Object.entries({subscriber:"sbs",login:"ul"}).forEach((([e,i])=>{void 0!==t[e]&&t[e]&&(ka(this,_a)[_a][i]=0)})),void 0!==e.new_session&&1===e.new_session||(ka(this,_a)[_a].ns=0),this.k5a.pageData.setData(t),this.k5a.logger.fireNow("pageView",ka(this,_a)[_a],"jsapi")}.bind(this)}apiMethods(){return{updateUser:function(e){return["subscriber","login"].forEach((t=>{void 0===e[t]&&(e[t]=0)})),e.ns=0,e.nopv=1,this.k5a.logPageview(e)}.bind(this)}}}function Aa(){var e=this.k5a.pageData.getField("url").match(/https?\:\/\/([^\?\;\#\&]+)/i);if(e&&e.length&&e.length>1){var t=e[1].replace(/\/$/,"");this.k5a.speaker.say("Checking if "+t+" is a frontpage!");for(var i=0;i<ka(this,ja)[ja].length;i++)if(t.toLowerCase()==ka(this,ja)[ja][i].toLowerCase())return this.k5a.speaker.say("MATCH: "+ka(this,ja)[ja][i]),!0}return!1}function La(){var e;ka(this,_a)[_a]=this.k5a.pageData.getLogData(["url","channel","type","section","subscriber","login","subscriberid","referer"]),ka(this,_a)[_a].lcid="na","undefined"!=typeof _MBLCID&&(ka(this,_a)[_a].lcid=_MBLCID);let t=["mblMeta","k5aMeta","LPMeta"];for(var i=0;i<t.length;i++)if(void 0!==window[t[i]]){var s=window[t[i]];void 0!==s.userid&&""!==s.userid&&(ka(this,_a)[_a].uid=s.userid,this.k5a.user.setId(ka(this,_a)[_a].uid)),void 0!==s.new_session&&""!==s.new_session&&(ka(this,_a)[_a].ns=1==s.new_session||"1"==s.new_session?1:0),void 0!==s.channel&&""!==s.channel&&(ka(this,_a)[_a].c=s.channel),void 0!==s.subscriberid&&s.subscriberid.trim().length>=8&&s.subscriberid.trim().length<=32&&(ka(this,_a)[_a].sbid=s.subscriberid);break}void 0!==ka(this,_a)[_a].uid&&""!=ka(this,_a)[_a].uid||(ka(this,_a)[_a].uid=this.k5a.user.getId()),void 0!==ka(this,_a)[_a].ns&&""!=ka(this,_a)[_a].ns||(ka(this,_a)[_a].ns=this.k5a.user.isNewSession()?1:0);let a=this.k5a.user.getChannel();var r;null!=(e=this.k5a.cfg)&&null!=(e=e.moduleCfg)&&null!=(e=e.mblpageview)&&e.lockChannel&&!1!==a&&void 0!==a&&a!==ka(this,_a)[_a].c&&(null!=(r=this.k5a.cfg)&&null!=(r=r.moduleCfg)&&null!=(r=r.mblpageview)&&r.unlockEavis&&ka(this,_a)[_a].c&&ka(this,_a)[_a].c.indexOf("eavis")>-1?console.log("Allowing changing from init channel to eavis channel: "+ka(this,_a)[_a].c+" user init channel: "+a):(console.log("Setting channel to init channel: "+a+", current channel:"+ka(this,_a)[_a].c),ka(this,_a)[_a]._oc=ka(this,_a)[_a].c,ka(this,_a)[_a].c=a))}if(!window.mblk5a){var Ea=location.href.indexOf("mblDebug")>-1;function Fa(e){for(var t=["mbl","k5a","LP","lp"],i=0;i<t.length;i++){Ia("meta lookup: "+t[i]+":"+e);var s=document.querySelector('meta[property="'+t[i].toLowerCase()+":"+e+'"]');if(null!==s&&s.hasAttribute("content"))return Ia("meta lookup -> "+t[i].toLowerCase()+":"+e+" = "+s.content),s.content;Ia("meta lookup -> "+t[i].toLowerCase()+":"+e+" = not found");var a=t[i]+"Meta";if(void 0!==window[t[i]+"Meta"]){if(void 0!==window[a][e])return Ia("found in meta object -> "+a+"."+e+" = "+window[a][e]),""+window[a][e]}else Ia("No such meta object: "+a)}return""}function Ia(e){Ea&&console.log("mbl: "+e)}if("undefined"!=typeof navigator&&void 0!==navigator.userAgent&&null===navigator.userAgent.match(/(bot|spider|scraper|bing|crawler|cxense|search|yandex)/i)&&-1==location.href.toLowerCase().indexOf("autorefresh")&&-1==location.href.toLowerCase().indexOf("refresh")&&-1==location.href.toLowerCase().indexOf("nolog=1")&&"1"!==Fa("autorefresh")&&"1"!==Fa("refresh")&&"1"!==Fa("nolog"))var xa=new va({installationId:"607d77e46bf6b242026472c2",logServer:"https://cl-eu5.k5a.io/",storage:{name:"__mbl"},modules:[Ma],moduleCfg:{mblpageview:{lockChannel:!0,unlockEavis:!0}},pageData:{prefixes:["mbl","k5a","lp","og"],cntTablet:1,skipFBIA:1,jsonMetaData:("undefined"!=typeof mblMeta?"mbl":"undefined"!=typeof k5aMeta?"k5a":"LP")+"Meta",SPA:{metaData:!1,viewTime:0,onlyOnce:!1}}},Ea);window.mblk5a=xa}})();