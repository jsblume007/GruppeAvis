function e(t){function i(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return e=function(e){this.s=e,this.n=e.next},e.prototype={s:null,n:null,next:function(){return i(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):i(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):i(t.apply(this.s,arguments))}},new e(t)}function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.apply(this,arguments)}function i(e,t){return t||(t=e.slice(0)),e.raw=t,e}"undefined"==typeof globalThis&&(window.globalThis=window);var n=0;function r(e){return"__private_"+n+++"_"+e}function s(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}function a(e,t){if(e===t)return!0;var i=l(e),n=l(t);return i===n&&("array"===i?function(e,t){var i=e.length,n=t.length;if(i!==n)return!1;for(var r=0;r<i;r++)if(!a(e[r],t[r]))return!1;return!0}(e,t):"object"===i?o(e,t):"date"===i?e.getTime()===t.getTime():"error"===i?!!(e.message===t.message)&&o(e,t):"nan"===i&&"nan"===n||e===t)}function o(e,t){var i=d(e),n=d(t);if(i.length!=n.length)return!1;for(var r of i){if(!a(e[r],t[r]))return!1}return!0}function l(e){var t=typeof e;return"object"===t?e instanceof Date?t="date":e instanceof Error?t="error":Array.isArray(e)?t="array":null===e&&(t="null"):"number"===t&&isNaN(e)&&(t="nan"),t}function d(e){var t=[];for(var i in e)"function"!=typeof e[i]&&t.push(i);return t}class h{constructor(){this._subscribers=new Set,this._reactiveProperties=[]}subscribe(e){if(!this._reactiveProperties.length){var t=Object.getOwnPropertyDescriptors(this);for(var i in t)if(!i.startsWith("_")){var{value:n}=t[i];this._defineReactiveProperty(i,n),this._reactiveProperties.push(i)}}this._subscribers.add(e);for(var r of this._reactiveProperties){void 0!==this["__"+r]&&e(r,void 0)}return()=>{this._subscribers.delete(e)}}toJSON(){var e={};for(var t of this._reactiveProperties)e[t]=this[t];return e}destroy(){this._subscribers.clear()}_defineReactiveProperty(e,t){var i="__"+e;this[i]=t,Object.defineProperty(this,e,{get(){return this[i]},set(t){var n=this[i];if(!a(n,t))for(var r of(this[i]=t,this._subscribers))r(e,n)},configurable:!0,enumerable:!0})}}var u={string:String,boolean:Boolean,number:Number,object:Object};function c(e){return e?"":null}function p(e,t){if(g(t)&&(t=function(e){return e instanceof Date?Date:Array.isArray(e)?Array:u[typeof e]||Object}(e)),t===Object||t===Array)try{return JSON.parse(e)}catch(e){return}else{if(t===Date)return new Date(e);if(t===Boolean)return null!==e;if(t===String)return null===e?void 0:e;if(t===Number)return null===e?void 0:Number(e)}return t(e)}function g(e){if(e!==String&&e!==Boolean&&e!==Number&&e!==Object&&e!==Array&&e!==Date&&e!==h){var t=typeof e;if("string"===t||"function"===t)return!0}return!1}var f,m=/[\t\n\r ]/,v=new Map;function y(){for(var[e,t]of v)S(e)&&(v.delete(e),t())}function b(){for(var e of(window.removeEventListener("DOMContentLoaded",b),clearInterval(f),f=void 0,v.values()))e();v.clear()}function S(e){for(var t=e;t&&t!==document.body;){var i=t.nextSibling;if(null!==i&&3===i.nodeType&&(null===i.textContent||m.test(i.textContent)))return!0;t=t.parentElement}return!1}var E=["accesskey","autocapitalize","class","contenteditable","contextmenu","dir","draggable","dropzone","id","itemprop","lang","slot","spellcheck","style","tabindex","title","translate"],T=!/param/.test((function(e){}));class w extends HTMLElement{static get reactiveAttributes(){return{}}static get reactiveProperties(){return{}}static get observedAttributes(){if(void 0===this._observedAttributes){for(var e in this._reactiveAttributes=this.reactiveAttributes,this._reactiveProperties=this.reactiveProperties,this._observedAttributes=[],"hidden"in this._reactiveAttributes||(this._reactiveAttributes.hidden=Boolean),"isConnected"in this._reactiveProperties||(this._reactiveProperties.isConnected=Boolean),this._reactiveAttributes){var t=e.toLowerCase();if(E.includes(t))throw Error('"'+t+'" is a reserved global attribute name and cannot be made reactive');var i=this._reactiveAttributes[e];if(i===h)throw Error("ReactiveState instances cannot be set as attributes");this._attributeToPropertyMap.set(t,e),this._observedAttributes.push(t),Object.defineProperty(this.prototype,e,this._getReactivePropertyDescription(e,i))}for(var n in this._reactiveProperties)Object.defineProperty(this.prototype,n,this._getReactivePropertyDescription(n,this._reactiveProperties[n]));Promise.resolve().then((()=>this.whenDefinedCallback()))}return this._observedAttributes}static whenDefinedCallback(){}static _getReactivePropertyDescription(e,t){return{get(){return this["__"+e]},set(t){this.propertyChangedCallback(e,t)},configurable:!0,enumerable:!0}}constructor(){super(),this.isBootstrapped=!1,this.isReady=!1,this.isUpdatePending=!1,this.lastChangedProperties,this._changedProperties=new Map,this._executingHooks=new Set,this._reactiveControllers=new Set,this._reactiveStateSubscriptions=new Map,this._reflecting=!1,this._reflectingProperties=new Set,void 0!==this.handleEvent&&(this.handleEvent=this.handleEvent.bind(this));var e,i=this.constructor,n=t({},i._reactiveAttributes,i._reactiveProperties),r={};for(var s in n)this["__"+s]=void 0,this.hasOwnProperty(s)&&(r[s]=this[s]);this._updatePromiseResolve,this._updatePromise=new Promise((e=>this._updatePromiseResolve=e)),(e=this,new Promise((t=>{if("loading"!==document.readyState||S(e))return t();if(void 0===f&&(f=window.setInterval(y,100),window.addEventListener("DOMContentLoaded",b)),v.has(e)){var i=v.get(e);v.set(e,(()=>{i(),t()}))}else v.set(e,t)}))).then((async()=>{for(var e in this.isReady=!0,n){if(this.hasOwnProperty(e)){if(!(e in r)){var t="__"+e;r[e]=this.hasAttribute(e.toLowerCase())&&null!=this[t]?this[t]:this[e]}}else this._validateReactiveProperty(e);e in r&&(Object.defineProperty(this,e,i._getReactivePropertyDescription(e,n[e])),this[e]=r[e])}var s=this.preReadyCallback();for(var a of(s instanceof Promise&&await Promise.resolve(s),this.readyCallback(),this._reactiveControllers))null==a.hostReady||a.hostReady();this.isConnected&&this.bootstrap()}))}preReadyCallback(){}readyCallback(){}connectedCallback(){for(var e of(this.isConnected=!0,this._reactiveControllers))null==e.hostConnected||e.hostConnected();this.bootstrap()}bootstrap(){if(this.isReady&&this.isConnected&&!this.isBootstrapped){var e=this.constructor,i=t({},e._reactiveAttributes,e._reactiveProperties);for(var[n,r]of this._changedProperties){var s=this[n];if(i[n]===h&&s instanceof h){var a=r;for(var[o,l]of a)this.updating(n+"."+o,l)}this.updating(n,r)}this._updatePromiseResolve(),this._invalidate()}}attributeChangedCallback(e,t,i){var n=this.constructor,r=n._attributeToPropertyMap.get(e);if(!this._reflecting&&void 0!==r&&t!==i){this.isBootstrapped||this._validateReactiveProperty(r);var s=n._reactiveAttributes[r],a=p(i,s);this._executingHooks.has(e)||this._executeHook(e,a,s)||this.setReactiveProperty(r,a)}}setAttribute(e,t){this._validateAttributeName(e),super.setAttribute(e,t)}setReactiveAttribute(e,t){var i=this.constructor._reactiveAttributes,n=this._validateAttributeName(e);if(!n)throw Error('"'+e+'" is not a registered reactive attribute');if(void 0!==t){var r=function(e,t){if(t===Object||t===Array){try{e=JSON.stringify(e)}catch(t){e=""}return e}return t===Date?e.toJSON():(t===Boolean?c:String)(e)}(t,i[n]);void 0!==r&&void 0!==e&&(null===r?super.removeAttribute(e):super.setAttribute(e,r))}}propertyChangedCallback(e,t){var i;if(this.isBootstrapped||void 0!==t){var n=this.constructor,r=null!=(i=n._reactiveProperties[e])?i:n._reactiveAttributes[e];if(!this._executeHook(e,t,r))this.setReactiveProperty(e,t)&&this.isReactiveAttribute(e)&&this._reflectingProperties.add(e.toLowerCase())}}setReactiveProperty(e,t){var i=this.constructor,n=i._reactiveAttributes,r=i._reactiveProperties;if(e in r||e in n){var s=r[e],o="__"+e,l=this[o],d=!a(l,t);if(d){if(this[o]=t,s===h){if(l){var u=this._reactiveStateSubscriptions.get(e);u&&(u(),this._reactiveStateSubscriptions.delete(e))}t instanceof h&&this._reactiveStateSubscriptions.set(e,t.subscribe(((t,i)=>{this._changedProperties.has(e)||this._changedProperties.set(e,new Map),this._changedProperties.get(e).set(t,i),this.isBootstrapped&&(this.updating(e+"."+t,i),this._invalidate())})))}this._changedProperties.has(e)||this._changedProperties.set(e,l),this.isBootstrapped&&(this.updating(e,l),this._invalidate())}return d}throw Error('"'+e+'" is not a registered reactive property')}isReactiveAttribute(e){return void 0!==e&&e in this.constructor._reactiveAttributes}isReactiveProperty(e){return void 0!==e&&e in this.constructor._reactiveProperties}updating(e,t){}update(e){}hasUpdated(e){var t,i;return null!=(t=null==(i=this.lastChangedProperties)?void 0:i.has(e))&&t}updated(e){}firstUpdated(e){}forceUpdate(){this._invalidate()}requestUpdate(){this.forceUpdate()}get updateComplete(){return this._updatePromise}logChangedProperties(e){console.log(this.nodeName+"\n"+Array.from(e.keys()).map((t=>{var i={from:e.get(t),to:this[t]};for(var n in i)"object"==typeof i[n]&&(i[n]=Array.isArray(i[n])?"[Array("+i[n].length+")]":"{Object}");return t+": "+i.from+" => "+i.to})).join("\n"))}addController(e){this._reactiveControllers.add(e),this.isConnected&&(null==e.hostConnected||e.hostConnected())}removeController(e){this._reactiveControllers.delete(e)}disconnectedCallback(){for(var e of(this.isConnected=!1,this._reactiveControllers))null==e.hostDisconnected||e.hostDisconnected()}_validateAttributeName(e){if(T)return e;var t=this.constructor,i=t._reactiveAttributes,n=t._attributeToPropertyMap.get(e);if(n&&n in i)return n;var r=e.toLowerCase();if(e!==r&&t._attributeToPropertyMap.get(r))throw Error("ReactiveElement attribute names must be lowercase: "+e)}_validateReactiveProperty(e){if(!T){var t=Object.getPrototypeOf(this).hasOwnProperty(e),i="__"+e in this,n=this.hasOwnProperty(e);!t||i||n||"hidden"===e||"isConnected"===e||console.warn("missing ReactiveElement ("+this.nodeName+") instance property definition for: "+e)}}_executeHook(e,t,i){return!!g(i)&&(this._executingHooks.add(e),"string"==typeof i?i in this&&"function"==typeof this[i]&&this[i].call(this,t):"function"==typeof i&&i.call(this,this,t),this._executingHooks.delete(e),!0)}async _invalidate(){if(!this.isUpdatePending){this.isUpdatePending=!0;var e,t=this._updatePromise;this._updatePromise=new Promise((t=>e=t)),await t;var i=this.lastChangedProperties=this._changedProperties,n=this.constructor;for(var r of(this._reflecting=!0,this._reflectingProperties))this.setReactiveAttribute(r,this[n._attributeToPropertyMap.get(r)]);for(var s of(this._reflecting=!1,this._reflectingProperties.clear(),this._reactiveControllers))null==s.hostUpdate||s.hostUpdate();this.update(i);var a=!this.isBootstrapped;for(var o of(this._changedProperties=new Map,this.isUpdatePending=!1,this.isBootstrapped=!0,this._reactiveControllers))null==o.hostUpdated||o.hostUpdated();this.updated(i),e(this.isUpdatePending),a&&this.firstUpdated(i)}}}w.__ReactiveElement__=!0,w._attributeToPropertyMap=new Map;var _=new Map,A="IntersectionObserver"in window&&"IntersectionObserverEntry"in window;var P="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R,C=function(e,t){var i="000000000"+e;return i.substr(i.length-t)},N=C,D="object"==typeof window?window:self,L=Object.keys(D).length,O=N(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+L.toString(36),4),k="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(k){var B=Math.pow(2,32)-1;R=function(){return Math.abs(k.getRandomValues(new Uint32Array(1))[0]/B)}}else R=Math.random;var x=function(){return O},M=C,U=R,V=0,F=4,q=36,H=Math.pow(q,F);function G(){return M((U()*H<<0).toString(q),F)}function X(){return V=V<H?V:0,++V-1}function j(){return"c"+(new Date).getTime().toString(q)+M(X().toString(q),F)+x()+(G()+G())}j.slug=function(){var e=(new Date).getTime().toString(36),t=X().toString(36).slice(-4),i=x().slice(0,1)+x().slice(-1),n=G().slice(-2);return e.slice(-2)+t+i+n},j.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},j.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},j.fingerprint=x;var W=(e=>(e.Embed="embed",e.Nrkbeta="nrkbeta",e.Nrkinnlogging="nrkinnlogging",e.Nrkno="nrkno",e.Nrkp3="nrkp3",e.Nrkradio="nrkradio",e.Nrksuper="nrksuper",e.Nrktv="nrktv",e.Yr="yr",e))(W||{}),z="nrknoOnTrackerReady-1";function K(e){void 0===globalThis[z]&&(globalThis[z]=function(e){globalThis[z].q.push(e)},globalThis[z].q=[]),function(e){if(document.querySelector('script[src="'+e+'"]'))return;var t=document.createElement("script");t.async=!0,t.src=e,document.head.appendChild(t)}("https://static.nrk.no/nrkno-snowplow/major/1/nrkno-snowplow-entry.js"),globalThis[z](e)}var Y={"application/dash+xml":["mpd"],"application/ogg":["ogx"],"application/vnd.apple.mpegurl":["m3u8"],"audio/flac":["flac"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp4":["mp4a","m4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/ogg; codecs=opus":["opus"],"audio/wav":["wav"],"audio/webm":["weba"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"text/vtt":["vtt","webvtt"],"video/3gpp":["3gp"],"video/3gpp2":["3g2"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"]};function Q(e){return"application/vnd.apple.mpegurl"===e.type}function $(e){return e.type.startsWith("audio/")}function J(e){var t=function(e){var t=/\.(\w{2,6})(\?.*)?(#.*)?$/.exec(e);return t?t[1]:void 0}(e);return t?function(e){var t=e.replace(/^\./,"").toLowerCase(),i=Object.keys(Y).find((e=>Y[e].includes(t)));return i?{type:i}:void 0}(t):void 0}function Z(e){var t=/^(\w+\/[\w-.+]+)(?:.*;\s*codecs=([^;]+))?/.exec(e);if(t&&t.length>1){var i={type:t[1]};return t.length>2&&(i.codecs=t[2]),i}}function ee(e){if(void 0===e)return"";if("string"==typeof e)return e;var t=e.codecs?";codecs="+e.codecs:"";return""+e.type+t}function te(e){var t=ee(e);return!!document.createElement("video").canPlayType(t)}function ie(e){if(void 0===e&&(e=!0),"undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function ne(e,t){return t+'/mp4;codecs="'+e+'"'}function re(){if(!ie())return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer;return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}function se(e){var t="string"==typeof e?Z(e):e;return!!t&&Q(t)&&function(){if(!re())return!1;var e=ie();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(ne(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(ne(t,"audio")))))}()}var ae=(e=>(e.Debug="debug",e.Log="log",e.Info="info",e.Warn="warn",e.Error="error",e))(ae||{}),oe=[];function le(e){function t(e,t,i){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];oe.forEach((n=>n.log(e,t,i,...r)))}return{debug:t.bind(t,e,"debug"),log:t.bind(t,e,"log"),info:t.bind(t,e,"info"),warn:t.bind(t,e,"warn"),error:t.bind(t,e,"error"),metric:t.bind(t,"Metric","log")}}var de=le("UnlockMediaElement"),he=new WeakMap;var ue=(e=>(e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED",e))(ue||{});function ce(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}function pe(e){return"AbortError"===ge(e).name}function ge(e,t){return ce(e)?e:t?new Error(t+": "+e):new Error(""+e)}function fe(e){if("object"!=typeof e||null===e)return""+e;var t=me(e);return JSON.stringify(t)}function me(e){var t,i={};return Object.getOwnPropertyNames(e).concat(["name","message","stack","msExtendedCode"]).filter((e=>!/^(\d+|[A-Z_]+)$/.exec(e))).filter((t=>void 0!==e[t])).forEach((t=>{"object"==typeof e[t]&&null!==e[t]?i[t]=me(e[t]):i[t]=e[t]})),"object"==typeof(t=e)&&null!==t&&void 0===t.name&&1===t.MEDIA_ERR_ABORTED&&"number"==typeof t.code&&(i.name="MediaError"),i}var ve={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toSeconds=e.end=e.parse=e.pattern=void 0;var t="\\d+",i="".concat(t,"(?:[\\.,]").concat(t,")?"),n="(".concat(t,"Y)?(").concat(t,"M)?(").concat(t,"W)?(").concat(t,"D)?"),r="T(".concat(i,"H)?(").concat(i,"M)?(").concat(i,"S)?"),s="P(?:".concat(n,"(?:").concat(r,")?)"),a=["years","months","weeks","days","hours","minutes","seconds"],o=Object.freeze({years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0});e.pattern=new RegExp(s);e.parse=function(t){var i=t.replace(/,/g,".").match(e.pattern);if(!i)throw new RangeError("invalid duration: ".concat(t));var n=i.slice(1);if(0===n.filter((function(e){return null!=e})).length)throw new RangeError("invalid duration: ".concat(t));if(n.filter((function(e){return/\./.test(e||"")})).length>1)throw new RangeError("only the smallest unit can be fractional");return n.reduce((function(e,t,i){return e[a[i]]=parseFloat(t||"0")||0,e}),{})};e.end=function(e,t){void 0===t&&(t=new Date);var i=Object.assign({},o,e),n=t.getTime(),r=new Date(n);r.setFullYear(r.getFullYear()+i.years),r.setMonth(r.getMonth()+i.months),r.setDate(r.getDate()+i.days);var s=3600*i.hours*1e3,a=60*i.minutes*1e3;return r.setMilliseconds(r.getMilliseconds()+1e3*i.seconds+s+a),r.setDate(r.getDate()+7*i.weeks),r};e.toSeconds=function(t,i){void 0===i&&(i=new Date);var n=Object.assign({},o,t),r=i.getTime(),s=new Date(r),a=(0,e.end)(n,s),l=60*(i.getTimezoneOffset()-a.getTimezoneOffset());return(a.getTime()-s.getTime())/1e3+l},e.default={end:e.end,toSeconds:e.toSeconds,pattern:e.pattern,parse:e.parse}}(ve);var ye=I(ve);class be extends Error{constructor(e,t,i){var n=((e.status||0===e.status?e.status:"")+" "+(e.statusText||"")).trim();super("Request failed with "+(n?"status code "+n:"an unknown error")),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=e,this.request=t,this.options=i}}class Se extends Error{constructor(e){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=e}}var Ee,Te,we,_e,Ae=e=>null!==e&&"object"==typeof e,Pe=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var n of t)if((!Ae(n)||Array.isArray(n))&&void 0!==n)throw new TypeError("The `options` argument must be an object");return Re({},...t)},Ie=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var i=new globalThis.Headers(e),n=t instanceof globalThis.Headers,r=new globalThis.Headers(t);for(var[s,a]of r.entries())n&&"undefined"===a||void 0===a?i.delete(s):i.set(s,a);return i},Re=function e(){for(var i={},n={},r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];for(var o of s)if(Array.isArray(o))Array.isArray(i)||(i=[]),i=[...i,...o];else if(Ae(o)){for(var[l,d]of Object.entries(o))Ae(d)&&l in i&&(d=e(i[l],d)),i=t({},i,{[l]:d});Ae(o.headers)&&(n=Ie(n,o.headers),i.headers=n)}return i},Ce=(Ee=!1,Te=!1,we="function"==typeof globalThis.ReadableStream,_e="function"==typeof globalThis.Request,we&&_e&&(Te=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return Ee=!0,"half"}}).headers.has("Content-Type")),Ee&&!Te),Ne="function"==typeof globalThis.AbortController,De="function"==typeof globalThis.ReadableStream,Le="function"==typeof globalThis.FormData,Oe=["get","post","put","patch","head","delete"],ke={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},Be=2147483647,xe=Symbol("stop"),Me=e=>Oe.includes(e)?e.toUpperCase():e,Ue=[413,429,503],Ve={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:Ue,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},Fe=function(e){if(void 0===e&&(e={}),"number"==typeof e)return t({},Ve,{limit:e});if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return t({},Ve,e,{afterStatusCodes:Ue})};var qe=Boolean(globalThis.DOMException);function He(e){var t,i;if(qe)return new DOMException(null!=(i=null==e?void 0:e.reason)?i:"The operation was aborted.","AbortError");var n=new Error(null!=(t=null==e?void 0:e.reason)?t:"The operation was aborted.");return n.name="AbortError",n}class Ge{static create(e,t){var i=new Ge(e,t),n=async()=>{if(i._options.timeout>Be)throw new RangeError("The `timeout` option cannot be greater than "+Be);await Promise.resolve();var e=await i._fetch();for(var t of i._options.hooks.afterResponse){var n=await t(i.request,i._options,i._decorateResponse(e.clone()));n instanceof globalThis.Response&&(e=n)}if(i._decorateResponse(e),!e.ok&&i._options.throwHttpErrors){var r=new be(e,i.request,i._options);for(var s of i._options.hooks.beforeError)r=await s(r);throw r}if(i._options.onDownloadProgress){if("function"!=typeof i._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!De)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return i._stream(e.clone(),i._options.onDownloadProgress)}return e},r=i._options.retry.methods.includes(i.request.method.toLowerCase())?i._retry(n):n(),s=function(e,n){r[e]=async()=>{i.request.headers.set("accept",i.request.headers.get("accept")||n);var s=(await r).clone();if("json"===e){if(204===s.status)return"";if(0===(await s.clone().arrayBuffer()).byteLength)return"";if(t.parseJson)return t.parseJson(await s.text())}return s[e]()}};for(var[a,o]of Object.entries(ke))s(a,o);return r}constructor(e,i){var n,r,s;if(void 0===i&&(i={}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=e,this._options=t({credentials:this._input.credentials||"same-origin"},i,{headers:Ie(this._input.headers,i.headers),hooks:Re({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},i.hooks),method:Me(null!=(n=i.method)?n:this._input.method),prefixUrl:String(i.prefixUrl||""),retry:Fe(i.retry),throwHttpErrors:!1!==i.throwHttpErrors,timeout:void 0===i.timeout?1e4:i.timeout,fetch:null!=(r=i.fetch)?r:globalThis.fetch.bind(globalThis)}),"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Ne){if(this.abortController=new globalThis.AbortController,this._options.signal){var a=this._options.signal;this._options.signal.addEventListener("abort",(()=>{this.abortController.abort(a.reason)}))}this._options.signal=this.abortController.signal}if(Ce&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){var o="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),l=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,o);!(Le&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(l,t({},this.request)),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",null!=(s=this._options.headers.get("content-type"))?s:"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof Se)){if(e instanceof be){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;var t=e.response.headers.get("Retry-After");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){var i=Number(t);return Number.isNaN(i)?i=Date.parse(t)-Date.now():i*=1e3,void 0!==this._options.retry.maxRetryAfter&&i>this._options.retry.maxRetryAfter?0:i}if(413===e.response.status)return 0}return Math.min(this._options.retry.backoffLimit,.3*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(n){var t=Math.min(this._calculateRetryDelay(n),Be);if(0!==t&&this._retryCount>0){for(var i of(await async function(e,t){var{signal:i}=t;return new Promise(((t,n)=>{if(i){if(i.aborted)return void n(He(i));i.addEventListener("abort",r,{once:!0})}function r(){n(He(i)),clearTimeout(s)}var s=setTimeout((()=>{null==i||i.removeEventListener("abort",r),t()}),e)}))}(t,{signal:this._options.signal}),this._options.hooks.beforeRetry)){if(await i({request:this.request,options:this._options,error:n,retryCount:this._retryCount})===xe)return}return this._retry(e)}throw n}}async _fetch(){for(var e of this._options.hooks.beforeRequest){var t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}return!1===this._options.timeout?this._options.fetch(this.request.clone()):async function(e,t,i){return new Promise(((n,r)=>{var s=setTimeout((()=>{t&&t.abort(),r(new Se(e))}),i.timeout);i.fetch(e).then(n).catch(r).then((()=>{clearTimeout(s)}))}))}(this.request.clone(),this.abortController,this._options)}_stream(e,t){var i=Number(e.headers.get("content-length"))||0,n=0;return 204===e.status?(t&&t({percent:1,totalBytes:i,transferredBytes:n},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(r){var s=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:i},new Uint8Array),await async function e(){var{done:a,value:o}=await s.read();if(a)r.close();else{if(t)n+=o.byteLength,t({percent:0===i?0:n/i,transferredBytes:n,totalBytes:i},o);r.enqueue(o),await e()}}()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}}
/*! MIT License © Sindre Sorhus */var Xe=e=>{var t=(t,i)=>Ge.create(t,Pe(e,i)),i=function(i){t[i]=(t,n)=>Ge.create(t,Pe(e,n,{method:i}))};for(var n of Oe)i(n);return t.create=e=>Xe(Pe(e)),t.extend=t=>Xe(Pe(e,t)),t.stop=xe,t},je=Xe(),We=(e=>(e.BAD_RESPONSE_ERROR="BAD_RESPONSE_ERROR",e.NETWORK_ERROR="NETWORK_ERROR",e.NOT_FOUND_ERROR="NOT_FOUND_ERROR",e.TIMEOUT_ERROR="TIMEOUT_ERROR",e))(We||{}),ze=(e=>(e.CHANNEL_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR="CHANNEL_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR",e.CHANNEL_GEOBLOCKED_ERROR="CHANNEL_GEOBLOCKED_ERROR",e.CHANNEL_UNAVAILABLE_ERROR="CHANNEL_UNAVAILABLE_ERROR",e.CHANNEL_EXCEEDS_PROFILE_RESTRICTIONS="CHANNEL_EXCEEDS_PROFILE_RESTRICTIONS",e.CHANNEL_EXCEEDS_PROFILE_AGE_LIMIT="CHANNEL_EXCEEDS_PROFILE_AGE_LIMIT",e.PROGRAM_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR="PROGRAM_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR",e.PROGRAM_GEOBLOCKED_ERROR="PROGRAM_GEOBLOCKED_ERROR",e.PROGRAM_IN_LIVE_BUFFER_ERROR="PROGRAM_IN_LIVE_BUFFER_ERROR",e.PROGRAM_NOT_TRANSCODED_ERROR="PROGRAM_NOT_TRANSCODED_ERROR",e.PROGRAM_RIGHTS_EXPIRED_ERROR="PROGRAM_RIGHTS_EXPIRED_ERROR",e.PROGRAM_RIGHTS_NOT_STARTED_ERROR="PROGRAM_RIGHTS_NOT_STARTED_ERROR",e.PROGRAM_EXCEEDS_PROFILE_RESTRICTIONS="PROGRAM_EXCEEDS_PROFILE_RESTRICTIONS",e.PROGRAM_EXCEEDS_PROFILE_AGE_LIMIT="PROGRAM_EXCEEDS_PROFILE_AGE_LIMIT",e.PROGRAM_UNAVAILABLE_ERROR="PROGRAM_UNAVAILABLE_ERROR",e.UNPLAYABLE_ERROR="UNPLAYABLE_ERROR",e))(ze||{}),Ke=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype),this.name="AbortError"}},Ye=class e extends Error{constructor(t,i){super(t),this.type=i,Object.setPrototypeOf(this,e.prototype),this.name="PSAPIRequestError"}},Qe=class e extends Error{constructor(t,i,n,r,s){super(t),this.type=i,Object.setPrototypeOf(this,e.prototype),this.name="NonPlayableError",this.endUserMessage=n,this.endUserMessageSupplement=r,this.posterImages=s}};var $e=[[["id",void 0]],[["scheme",void 0],["id",void 0]],[["scheme","nrk"],["type","podcast"],["episode",void 0]],[["scheme",void 0],["type",void 0],["id",void 0]],[["scheme","nrk"],["type","podcast"],["series",void 0],["episode",void 0]],[["scheme","nrk"],["type","radioclip"],["clipType",void 0],["id",void 0]]],Je=class e{constructor(e){var t;this.scheme=null!=(t=e.scheme)?t:"nrk",this.type=e.type,this.series=e.series,this.clipType=e.clipType,this.episode=e.episode,this.id=e.id}static parse(t){if(e.isValidFormat(t)){var i=t.split(":"),n=$e.filter((e=>e.length===i.length)).map((e=>e.reduce(((e,t,n)=>void 0===e?e:void 0===t[1]||t[1]===i[n]?(e[t[0]]=i[n],e):void 0),{}))).find((e=>void 0!==e));return n?new e(n):void 0}}static isValidFormat(e){return null!==/^[\w-]+(:[\wÆØÅæøå-]+){0,3}$/.exec(e)}asPath(){return"/"+[this.type,this.series,this.episode,this.clipType,this.id].filter((e=>e)).join("/")}toString(){return[this.scheme,this.type,this.series,this.episode,this.clipType,this.id].filter((e=>e)).join(":")}},Ze=e=>e<10?"0"+e:e,et=class e{constructor(e,t){this.utc=e,this.tzOffset=t}static parse(t){var i=/^\/Date\((\d+)(?:([+-]\d{2})(\d{2}))?\)\/$/.exec(t);if(i){var n=parseInt(i[1],10),r=i.length>2?60*parseInt(i[2],10)+parseInt(i[3],10):0;return new e(n,r)}throw new Error("Unknown format: "+t)}toModernPSAPIFormat(){var e=new Date(this.utc+60*this.tzOffset*1e3);return[e.getUTCFullYear(),"-",Ze(e.getUTCMonth()+1),"-",Ze(e.getUTCDate()),"T",Ze(e.getUTCHours()),":",Ze(e.getUTCMinutes()),":",Ze(e.getUTCSeconds()),this.tzOffset<0?"-":"+",Ze(Math.floor(this.tzOffset/60)),":",Ze(this.tzOffset%60)].join("")}toCompactLocalDate(){var e=new Date(this.utc+60*this.tzOffset*1e3);return[e.getUTCFullYear(),Ze(e.getUTCMonth()+1),Ze(e.getUTCDate())].join("")}toDateObject(){return new Date(this.utc)}};function tt(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"programId")}var it=class{constructor(e,t){this.epg=[],this.loader=e;var i=Je.parse(t);if(!i)throw new Error("Failed to parse "+t);this.mediaURI=i}static isSupported(e){if(!Je.isValidFormat(e))return!1;var t=Je.parse(e);return void 0!==t&&"nrk"===t.scheme&&(void 0===t.type||["channel","clip","podcast","program","radioclip"].includes(t.type))}get schedule(){if(this.scheduleResponse)return t({},this.scheduleResponse,{playableInSeconds:Math.max(0,(new Date(this.scheduleResponse.playableAt).getTime()-Date.now())/1e3)})}async updateMetadata(){var e=await this.loader.fetchMetadata(this.mediaURI);return this.metadata=e.data,!this.mediaURI.type&&this.metadata&&(this.mediaURI.type=function(e){var t=e._links.self.href.replace(/^\/playback\/metadata\/|\/.*/g,"");if(["channel","clip","program","podcast"].includes(t))return t;return}(this.metadata)),e}async updateSchedule(){if(!this.metadata)throw new Error("Must load metadata first.");var e=await this.loader.fetchSchedule(this.metadata);return this.scheduleResponse=e.data,t({},e,{data:this.schedule})}async updateManifest(e){if(!this.metadata)throw new Error("Must load metadata first.");var t=await this.loader.fetchManifest(this.metadata,e);return this.manifest=t.data,t}async updateEPG(){if(!this.metadata)throw new Error("Must load metadata first.");var e=await this.loader.fetchEPG(this.metadata,this.mediaURI);this.epg=e.data.map((e=>{var t,i=et.parse(e.plannedStart),n=et.parse(e.actualStart),r=ve.toSeconds(ve.parse(e.duration)),s=new et(n.utc+1e3*r,n.tzOffset),{programId:a,title:o,partNumber:l,relativeTimeType:d}=e;return{programId:a,part:l,heading:o,rating:null==(t=e.legalAge)?void 0:t.displayAge,plannedStart:i,actualStart:n,actualEnd:s,isCurrentlyLive:2===d,webImages:e.image.webImages.map((e=>({uri:e.imageUrl,width:e.pixelWidth})))}}));var i=this.epg.length-1;for(var[n,r]of this.epg.entries())n!==i&&(r.actualEnd.utc=Math.min(r.actualEnd.utc,this.epg[n+1].actualStart.utc));return t({},e,{data:this.epg})}abort(){this.loader.abort()}};var nt=class{constructor(e,t){var i,n,r,s=null==t?void 0:t.playback,a=null==t?void 0:t.recommendations;this.authTokenFunction=s&&s.authTokenFunction?s.authTokenFunction:()=>Promise.resolve(""),this.ageRestriction=s&&s.ageRestriction,this.contentGroup=s&&s.contentGroup,this.enableEeaPortability=null==s?void 0:s.enableEeaPortability,this.playbackOrigin=null!=(i=null==s?void 0:s.origin)?i:"https://psapi.nrk.no",this.recommendationsOrigin=null!=(n=null==a?void 0:a.origin)?n:"https://anbefaling-psapi.nrk.no",this.playerName=e,this.playerFamily=null!=(r=null==s?void 0:s.playerFamily)?r:"player-core",this.abortController=new AbortController,this.globalParams=null==s?void 0:s.queryParams,this.cdnOverride=null==s?void 0:s.cdnOverride,this.preferredBandwidth=null==s?void 0:s.preferredBandwidth}async fetchMetadata(e){var t="/playback/metadata"+e.asPath();return await this.loadFromPSAPI(t,this.buildQueryParams())}async fetchSchedule(e){var t,i=null==(t=e._links.schedule)?void 0:t.href;if(!i)throw new Error("Schedule is not available.");return await this.loadFromPSAPI(i,{})}async fetchManifest(e,t){if(void 0===t&&(t="default"),!e.playable)throw new Error("The metadata must contain playable information before loading the manifest.");var i=function(e){var t=e._links.manifests,i=e._links.manifestSubtitles||[],n=e._embedded.manifests,r=e._embedded.manifestSubtitles||[];if(!(t&&n&&i&&r))return[];var s=[...t,...i];return[...n,...r].map((e=>{var t=e._links.self.name;return{id:e.id,href:s.find((e=>e.name===t)).href,type:t,availabilityLabel:e.availabilityLabel}}))}(e),n=i.find((e=>e.type===t));if(!n||!n.href)throw new Error("Unable to load unknown manifest type "+t+".");var r={};return this.cdnOverride&&(r.cdnOverride=this.cdnOverride),await this.loadFromPSAPI(n.href,this.buildQueryParams(["preferredBandwidth"]),r)}async fetchEPG(e,t){var i,n;if("channel"!==t.type)throw new Error("Unsupported media type for the EPG API. Got '"+t.type+"'");var r=null!=(i=null==(n=e._links.epgBuffer)?void 0:n.href)?i:"/channels/"+t.id+"/epglivebuffer";return await this.loadFromPSAPI(r,{},{},(async e=>(rt(e,[200,204]),204===e.status?[]:await ot(e))))}async fetchRecommendationsForProgram(e){var t="/programs/"+e+"/recommend-next";return await this.loadFromPSAPIRecommendations(t,(async e=>(rt(e,[200,204]),204===e.status?null:await ot(e))))}buildQueryParams(e){void 0===e&&(e=[]);var t={};return this.enableEeaPortability&&(t["eea-portability"]="true"),void 0!==this.contentGroup&&(t.contentGroup=this.contentGroup),void 0!==this.ageRestriction&&(t.ageRestriction=this.ageRestriction),void 0!==this.preferredBandwidth&&e.includes("preferredBandwidth")&&(t.preferredBandwidth=this.preferredBandwidth),t}getPlaybackAcceptHeader(){return"application/vnd.nrk.psapi+json; version=9; player="+this.playerName+"; device="+this.playerFamily}async loadFromPSAPI(e,i,n,r){var s,a=new URL(e,this.playbackOrigin),o=[...a.searchParams.entries()].reduce(((e,i)=>{var[n,r]=i;return t({},e,{[n]:r})}),{}),l=t({},this.globalParams,o,i),d=t({accept:this.getPlaybackAcceptHeader()},n),h=await this.authTokenFunction();i&&i["eea-portability"]&&h&&(d.Authorization="Bearer "+h);try{s=await je.get(a.href,{signal:this.abortController.signal,headers:d,searchParams:0===Object.keys(l).length?void 0:l,mode:"cors",throwHttpErrors:!r})}catch(e){if("AbortError"===ge(e).name)throw e;throw e instanceof be&&st(e.response),new Ye(""+e,e instanceof Se?"TIMEOUT_ERROR":"NETWORK_ERROR")}var u=r?await r(s):await this.defaultResponseHandler(s);return{maxAge:at(s),data:u}}async loadFromPSAPIRecommendations(e,t){var i,n=new URL(e,this.recommendationsOrigin),r=await this.authTokenFunction(),s={accept:"application/json"};r&&(s.Authorization="Bearer "+r);try{i=await je.get(n.href,{signal:this.abortController.signal,headers:s,mode:"cors",throwHttpErrors:!t})}catch(e){if("AbortError"===ge(e).name)throw e;throw e instanceof be&&st(e.response),new Ye(""+e,e instanceof Se?"TIMEOUT_ERROR":"NETWORK_ERROR")}var a=t?await t(i):await this.defaultResponseHandler(i);return{maxAge:at(i),data:a}}async defaultResponseHandler(e){return rt(e,200),await ot(e)}abort(){this.abortController.abort(),this.abortController=new AbortController}};function rt(e,t){(Array.isArray(t)?t.includes(e.status):e.status===t)||st(e)}function st(e){if(404===e.status||410===e.status)throw new Ye(e.url+" doesn't exist.","NOT_FOUND_ERROR");throw new Ye("Bad response: "+e.status+" "+e.statusText,"BAD_RESPONSE_ERROR")}function at(e){var t,i=e.headers.get("Cache-Control");if(i&&(t=i.match(/max-age=(\d+)/)))return Number.parseInt(t[1],10)}async function ot(e){try{return await e.json()}catch(e){var t=ge(e);if("TypeError"===t.name||"SyntaxError"===t.name)throw new Ye("Response content problem: "+t,"BAD_RESPONSE_ERROR");throw new Ye(""+t,"NETWORK_ERROR")}}var lt=le("PSAPIClient"),dt=class extends it{constructor(e,t,i){super(new nt(t,i),e),this.abortController=new AbortController,this.psapiOptions=i}getPSAPIOptions(){return t({},this.psapiOptions)}static isSupported(e){return it.isSupported(e)}loadMetadata(e){var i,n,r=this,s=this.abortController,a=null!=(i=null==e?void 0:e.throwNonPlayableError)&&i,o=!1;return{async next(){var i,l,d,h,u,c,p;if(s.signal.aborted)throw new Ke("Already aborted.");if(o)return Promise.resolve({done:!0,value:void 0});if(r.metadata){var g,f,m,v=null!=(g=r.schedule)&&g.playableAt?new Date(r.schedule.playableAt):(d=r.metadata,(p=null!=(h=null==d||null==(u=d.availability.onDemand)?void 0:u.from)?h:null==d||null==(c=d.availability.live)||null==(c=c.transmissionInterval)?void 0:c.from)?new Date(p):void 0),y=(null!=(f=null==v?void 0:v.getTime())?f:0)-Date.now(),b=Math.max(n?1e3*n:0,null!=(m=null==e?void 0:e.minReloadTime)?m:5e3,y/2)+5e3*Math.random();lt.log("Media playable at "+v+". Reloading in "+b/1e3+" seconds."),await ht(b,s.signal)}n=await r.updateMetadataOrSchedule();var S=function(e,i){if(!i||i.playableNow&&"nonPlayable"===e.playability)return e;var n=null,r=null;e.availability.onDemand?n=t({},e.availability.onDemand,{from:i.playableAt,hasRightsNow:!1}):e.availability.live&&(r=t({},e.availability.live,{isOngoing:e.availability.live.isOngoing,transmissionInterval:t({},e.availability.live.transmissionInterval,{from:i.playableAt})}));var s=t({},e,{availability:t({},e.availability,{onDemand:n,live:r})});!1===i.playableNow&&"playable"===e.playability&&(s=t({},s,{_links:t({},s._links,{manifests:null}),playability:"nonPlayable",playable:null,nonPlayable:{reason:"blocked",messageType:"ProgramRightsHasNotStarted",endUserMessage:i.endUserMessage,endUserMessageSupplement:"",helpUrl:"https://info.nrk.no/tv/",availableAbroadUrl:null,userAction:null}}));return s.nonPlayable=t({},s.nonPlayable,{endUserMessage:i.endUserMessage}),s}(r.metadata,r.schedule),E=function(e){var t,i,n,r=null!=(t=null==e||null==(i=e.availability.onDemand)?void 0:i.to)?t:null==e||null==(n=e.availability.live)||null==(n=n.transmissionInterval)?void 0:n.to;return r?new Date(r):void 0}(S);if((o="playable"===S.playability||(null==(i=S.nonPlayable)?void 0:i.messageType)&&"ProgramRightsHasNotStarted"!==(null==(l=S.nonPlayable)?void 0:l.messageType)||!E||E<new Date)&&a&&"playable"!==S.playability){var T=function(e){var t;if(!e.nonPlayable)return"UNPLAYABLE_ERROR";return null!=(t={ChannelAvailableWithNorwegianResidentClaim:"CHANNEL_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR",ChannelIsGeoblocked:"CHANNEL_GEOBLOCKED_ERROR",ChannelUnavailable:"CHANNEL_UNAVAILABLE_ERROR",ChannelExceedsProfileRestrictions:"CHANNEL_EXCEEDS_PROFILE_RESTRICTIONS",ProgramAvailableWithNorwegianResidentClaim:"PROGRAM_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR",ProgramIsGeoblocked:"PROGRAM_GEOBLOCKED_ERROR",ProgramIsInLiveBuffer:"PROGRAM_IN_LIVE_BUFFER_ERROR",ProgramIsNotTranscoded:"PROGRAM_NOT_TRANSCODED_ERROR",ProgramRightsHasExpired:"PROGRAM_RIGHTS_EXPIRED_ERROR",ProgramRightsHasNotStarted:"PROGRAM_RIGHTS_NOT_STARTED_ERROR",ProgramExceedsProfileRestrictions:"PROGRAM_EXCEEDS_PROFILE_RESTRICTIONS",ProgramUnavailable:"PROGRAM_UNAVAILABLE_ERROR",NoMessage:"PROGRAM_UNAVAILABLE_ERROR"}[e.nonPlayable.messageType])?t:"PROGRAM_UNAVAILABLE_ERROR"}(S);throw new Qe("Media is non-playable",T,S.nonPlayable.endUserMessage,S.nonPlayable.endUserMessageSupplement,S.preplay.poster.images.map((e=>({url:e.url,pixelWidth:e.pixelWidth}))))}return{done:!1,value:S}},[Symbol.asyncIterator](){return this}}}async updateMetadataOrSchedule(){var e,t,i,n,r,s,a=!1,o=!1;null!=(e=this.metadata)&&e._links.schedule||(r=(await this.updateMetadata()).maxAge,a=!0);if(null!=(t=this.metadata)&&t._links.schedule)try{s=(await this.updateSchedule()).maxAge,o=!0}catch(e){lt.error("Failed to update schedule:",e);var l=ge(e);"PSAPIRequestError"===l.name&&"NOT_FOUND_ERROR"===l.type&&(this.scheduleResponse=void 0)}a||o&&(null==(i=this.schedule)||!i.playableNow)||(r=(await this.updateMetadata()).maxAge);return null!=(n=s)?n:r}loadEPG(e){void 0===e&&(e=9e5);var t=!0,i=this,n=this.abortController;return{async next(){if(n.signal.aborted)throw new Ke("Already aborted.");if(t)t=!1;else{var r=e+Math.round(60*Math.random()*1e3);await ht(r,n.signal)}try{await i.updateEPG()}catch(e){if("AbortError"===ge(e).name)throw e;lt.log("Failed to update EPG: "+e)}return{done:!1,value:i.epg}},[Symbol.asyncIterator](){return this}}}loadRecommendationsForProgram(){var e=this.mediaURI.id;if(!e)throw new Error("mediaURI.id is undefined");return this.loader.fetchRecommendationsForProgram(e)}abort(){this.abortController.abort(),this.abortController=new AbortController,super.abort()}};async function ht(e,t){return new Promise(((i,n)=>{var r=setTimeout((()=>{t.removeEventListener("abort",s),i()}),e),s=()=>{clearTimeout(r),t.removeEventListener("abort",s),n(new Ke("PSAPI client waiting aborted."))};t.aborted?s():t.addEventListener("abort",s)}))}class ut{constructor(){this.listeners=[],this.__destroyed=!1}get destroyed(){return this.__destroyed}addEventListener(e,t){"destroy"===e&&(this.__destroyed?this.emitDestroyableEvent(new Event("destroy"),t):this.listeners.push(t))}removeEventListener(e,t){if("destroy"===e){var i=this.listeners.indexOf(t);i>=0&&this.listeners.splice(i,1)}}destroy(){this.__destroyed=!0,this.emitDestroyableEvent(new Event("destroy")),this.listeners.length=0}emitDestroyableEvent(e,t){var i=void 0!==t?[t]:this.listeners,n=!0;for(var r of i)"handleEvent"in r?r.handleEvent(e):r(e),e.cancelable&&e.defaultPrevented&&(n=!1);return n}}class ct extends ut{constructor(e){super(),this.destroyables=new Set,void 0!==e&&e.addDestroyable(this)}addDestroyable(e){if("destroyed"in e){if(e.destroyed)return;e.addEventListener("destroy",(()=>this.destroyables.delete(e)))}this.destroyables.add(e)}addDestroyables(e){e.forEach((e=>this.addDestroyable(e)))}removeDestroyable(e){this.destroyables.delete(e)}destroy(){this.destroyed||(this.destroyables.forEach((e=>e.destroy())),this.destroyables.clear(),super.destroy())}}class pt extends ut{constructor(e,t){super(),this.ref=setTimeout((()=>{this.destroy(),e()}),t)}destroy(){void 0!==this.ref&&(clearTimeout(this.ref),this.ref=void 0,super.destroy())}}class gt extends ut{constructor(e,t,i,n){super(),e.addEventListener(t,i,n),this.remove=()=>e.removeEventListener(t,i,n)}destroy(){void 0!==this.remove&&(this.remove(),super.destroy())}}class ft extends ut{constructor(){super(...arguments),this.abortController=new AbortController}get signal(){return this.abortController.signal}abort(){this.destroy()}destroy(){this.destroyed||(this.abortController.abort(),super.destroy())}}var mt=(e,t)=>new pt(e,t),vt=(e,t,i,n)=>new gt(e,t,i,n),yt=e=>new Promise((t=>e.addEventListener("destroy",(()=>t())))),bt=(e=>(e.NO_PLAYBACK_NETWORK_ERROR="NO_PLAYBACK_NETWORK_ERROR",e.NO_PLAYBACK_DECODE_ERROR="NO_PLAYBACK_DECODE_ERROR",e.PLAYBACK_STOPPED_NETWORK_ERROR="PLAYBACK_STOPPED_NETWORK_ERROR",e.PLAYBACK_STOPPED_DECODE_ERROR="PLAYBACK_STOPPED_DECODE_ERROR",e.UNSUPPORTED_FORMAT_ERROR="UNSUPPORTED_FORMAT_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e))(bt||{}),St=(e=>(e.NO_PLAYBACK_NETWORK_ERROR="Failed to load the media.",e.NO_PLAYBACK_DECODE_ERROR="Failed to decode the media.",e.PLAYBACK_STOPPED_NETWORK_ERROR="Failed to load more of the media.",e.PLAYBACK_STOPPED_DECODE_ERROR="Failed to decode the next segment of media.",e.UNSUPPORTED_FORMAT_ERROR="Unsupported media format.",e.UNKNOWN_ERROR="Unknown error.",e))(St||{}),Et=class e extends Error{constructor(t,i,n,r){void 0===r&&(r=!0),super(St[t]),this.type=t,this.causeSummary=n,this.fatal=r,Object.setPrototypeOf(this,e.prototype),this.name="PlaybackSessionError",this.cause=i}static fromUnknownError(t,i,n){var r=ge(t,n);return new e(function(e,t){if("NetworkError"===e.name)return t?"PLAYBACK_STOPPED_NETWORK_ERROR":"NO_PLAYBACK_NETWORK_ERROR";if("DecodeError"===e.name)return t?"PLAYBACK_STOPPED_DECODE_ERROR":"NO_PLAYBACK_DECODE_ERROR";return"UNKNOWN_ERROR"}(r,i),r,ce(t)?r.name:r.message)}static fromMediaError(t,i){var n={name:"MediaError",message:t.message,code:t.code};return new e(function(e,t){if(e.code===e.MEDIA_ERR_NETWORK)return t?"PLAYBACK_STOPPED_NETWORK_ERROR":"NO_PLAYBACK_NETWORK_ERROR";if(e.code===e.MEDIA_ERR_DECODE)return t?"PLAYBACK_STOPPED_DECODE_ERROR":"NO_PLAYBACK_DECODE_ERROR";if(e.code===e.MEDIA_ERR_SRC_NOT_SUPPORTED)return"UNSUPPORTED_FORMAT_ERROR";return"UNKNOWN_ERROR"}(t,i),n,function(e){return ue[e.code]}(t),function(e){return e.code!==e.MEDIA_ERR_ABORTED}(t))}getCauseAsString(){return fe(this.cause)}};var Tt=(e=>(e.Starting="starting",e.Seeking="seeking",e.Rebuffering="rebuffering",e))(Tt||{}),wt=(e=>(e.AutoplayBlocked="autoplayblocked",e.Ended="ended",e))(wt||{}),_t=(e=>(e.SessionCreated="playercore.sessioncreated",e.SessionClosed="playercore.sessionclosed",e.PlayingChange="playercore.playingchange",e.WaitingChange="playercore.waitingchange",e.TimeRunningChange="playercore.timerunningchange",e.Broken="playercore.broken",e.MediaInfoLoaded="playercore.mediainfoloaded",e.LiveStreamEnded="playercore.livestreamended",e.RateChange="playercore.ratechange",e.VolumeChange="playercore.volumechange",e.MutedChange="playercore.mutedchange",e.TimeUpdate="playercore.timeupdate",e.ScrubberUpdate="playercore.scrubberupdate",e.MediaRangeChange="playercore.mediarangechange",e.QualityChange="playercore.qualitychange",e.FullscreenStateChange="playercore.fullscreenstatechange",e.PiPStateChange="playercore.pipstatechange",e.AirPlayStateChange="playercore.airplaystatechange",e.RemotePlaybackStateChange="playercore.remoteplaybackstatechange",e.HasSubtitlesChange="playercore.hassubtitleschange",e.SubtitlesChange="playercore.subtitleschange",e.SubtitlesDisplayChange="playercore.subtitlesdisplaychange",e.SubtitlesCueUpdate="playercore.subtitlescueupdate",e))(_t||{}),At="17.3.1",Pt=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function It(e){if(/\s/.test(e))throw Error("debug namespaces cannot include whitespace");if(!function(e){try{var t=(localStorage.getItem("debug")||"").split(/[\s,]+/g);for(var i of t)if(""!==i){var n=i.indexOf("*");if(n>-1){if(e.startsWith(i.slice(0,n)))return!0}else if(e===i)return!0}}catch(e){}return!1}(e))return function(){};var t=function(e){for(var t=0,i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return Pt[Math.abs(t)%Pt.length]}(e),i=0;return function(){for(var n=Date.now(),r=n-(i||n),s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];console.log("%c"+e+" +"+r+"ms","color: "+t,...a),i=n}}var Rt,Ct=function(e,t){var i="000000000"+e;return i.substr(i.length-t)},Nt=Ct,Dt="object"==typeof window?window:self,Lt=Object.keys(Dt).length,Ot=Nt(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+Lt.toString(36),4),kt="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(kt){var Bt=Math.pow(2,32)-1;Rt=function(){return Math.abs(kt.getRandomValues(new Uint32Array(1))[0]/Bt)}}else Rt=Math.random;var xt=function(){return Ot},Mt=Ct,Ut=Rt,Vt=0,Ft=4,qt=36,Ht=Math.pow(qt,Ft);function Gt(){return Mt((Ut()*Ht<<0).toString(qt),Ft)}function Xt(){return Vt=Vt<Ht?Vt:0,++Vt-1}function jt(){return"c"+(new Date).getTime().toString(qt)+Mt(Xt().toString(qt),Ft)+xt()+(Gt()+Gt())}jt.slug=function(){var e=(new Date).getTime().toString(36),t=Xt().toString(36).slice(-4),i=xt().slice(0,1)+xt().slice(-1),n=Gt().slice(-2);return e.slice(-2)+t+i+n},jt.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},jt.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},jt.fingerprint=xt;var Wt,zt,Kt,Yt=I(jt),Qt=Object.defineProperty,$t=Object.defineProperties,Jt=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,ei=Object.prototype.hasOwnProperty,ti=Object.prototype.propertyIsEnumerable,ii=e=>{throw TypeError(e)},ni=(e,t,i)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ri=(e,t)=>{for(var i in t||(t={}))ei.call(t,i)&&ni(e,i,t[i]);if(Zt)for(var i of Zt(t))ti.call(t,i)&&ni(e,i,t[i]);return e},si=(e,t)=>$t(e,Jt(t)),ai=(e,t,i)=>t.has(e)||ii("Cannot "+i),oi=(e,t,i)=>(ai(e,t,"read from private field"),i?i.call(e):t.get(e)),li=(e,t,i)=>t.has(e)?ii("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),di=(e,t,i,n)=>(ai(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),hi=It("app:snowplow:tracker"),ui=class{constructor(e,t){var i,n,r;li(this,Wt,{}),this.snowplow=e,this.trackerId=null!=(i=t.trackerId)?i:Yt.slug(),hi("Setting shared entity iglu:no.nrk/service/jsonschema/2-0-0 with id "+t.serviceId),this.setSharedEntity("iglu:no.nrk/service/jsonschema/2-0-0",{id:t.serviceId,environment:null!=(n=t.environment)?n:null}),t.appVersion&&t.appBuild&&(hi("Setting shared entity iglu:com.snowplowanalytics.mobile/application/jsonschema/1-0-0 with build "+t.appBuild+" and version "+t.appVersion),this.setSharedEntity("iglu:com.snowplowanalytics.mobile/application/jsonschema/1-0-0",{build:t.appBuild,version:t.appVersion})),hi("Creating tracker with ID "+this.trackerId+", web context: "+!t.disableWebContext),e.newTracker(this.trackerId,t.collectorUrl,{postPath:"/nrk/wd6",appId:t.appId,plugins:t.plugins,platform:null!=(r=t.platform)?r:"web",contexts:{webPage:!0!==t.disableWebContext},stateStorageStrategy:t.disableLocalStorage?"cookie":void 0})}trackPageView(e){e?(hi("Tracking page view with entity "+e.kind+"/"+e.id+" (tracker: "+this.trackerId+")"),this.snowplow.trackPageView({context:ci(si(ri({},oi(this,Wt)),{"iglu:no.nrk/content/jsonschema/1-0-1":e}))},[this.trackerId])):(hi("Tracking page view without contentEntity (tracker: "+this.trackerId+")"),this.snowplow.trackPageView({context:ci(oi(this,Wt))},[this.trackerId]))}trackSchemaEvent(e,t,i){var n=ci(ri(ri({},oi(this,Wt)),i));hi("Tracking event with schema "+e+" and data "+JSON.stringify(t)+" (tracker: "+this.trackerId+")"),this.snowplow.trackSelfDescribingEvent({event:{schema:e,data:ri({},t)},context:n},[this.trackerId])}trackEvent(e,t){var i=ci(ri(ri({},oi(this,Wt)),t));hi("Tracking structured event width enitites "+t+" (tracker: "+this.trackerId+")"),this.snowplow.trackStructEvent(si(ri({},e),{context:i}),[this.trackerId])}setUser(e){this.snowplow.setUserId(e,[this.trackerId]),hi("Setting shared entity iglu:no.nrk/nrk-user/jsonschema/1-0-0 with id "+e),this.setSharedEntity("iglu:no.nrk/nrk-user/jsonschema/1-0-0",{id:e})}clearUser(){this.snowplow.setUserId(null,[this.trackerId]),hi("Removing shared entity iglu:no.nrk/nrk-user/jsonschema/1-0-0"),this.removeSharedEntity("iglu:no.nrk/nrk-user/jsonschema/1-0-0")}addPlugin(e){this.snowplow.addPlugin(e,[this.trackerId])}setSharedEntity(e,t){oi(this,Wt)[e]=t}getSharedEntity(e){return oi(this,Wt)[e]}removeSharedEntity(e){e in oi(this,Wt)&&delete oi(this,Wt)[e]}};function ci(e){var t=[];for(var[i,n]of Object.entries(e)){var r=Array.isArray(n)?n:[n];for(var s of r)t.push({schema:i,data:ri({},s)})}return t}Wt=new WeakMap;var pi=class extends ui{constructor(){super(...arguments),li(this,zt),li(this,Kt)}setMedia(e,t){var i={id:e};(null==t?void 0:t.source)&&(i.source=null==t?void 0:t.source),(null==t?void 0:t.kind)&&(i.kind=null==t?void 0:t.kind),this.setSharedEntity("iglu:no.nrk/content/jsonschema/1-0-1",i),(null==t?void 0:t.channelId)&&di(this,zt,t.channelId),t&&"autoplay"in t&&void 0!==t.autoplay&&di(this,Kt,t.autoplay)}setMediaAutoplay(e){di(this,Kt,e)}setUnknownMedia(e){this.setSharedEntity("iglu:no.nrk/content/jsonschema/1-0-1",{id:"unknown",kind:"unknown"}),di(this,zt,e)}sendStartEvent(e,t){if(void 0===this.getSharedEntity("iglu:no.nrk/content/jsonschema/1-0-1"))throw new Error("Must use setMedia() first!");var i=Math.max(0,Math.floor(e));this.trackSchemaEvent("iglu:no.nrk/playback-event/jsonschema/1-0-0",{kind:"start",startTime:i,endTime:i,autoplay:oi(this,Kt),live:t,channelId:oi(this,zt)})}sendProgressEvent(e,t,i){this.sendPlaybackEvent("progress",e,t,i)}sendCompleteEvent(e,t,i){this.sendPlaybackEvent("complete",e,null!=t?t:e,i)}sendExitEvent(e,t,i){this.sendPlaybackEvent("exit",e,null!=t?t:e,i)}sendPlaybackEvent(e,t,i,n){var r=Math.max(0,Math.floor(t)),s=Math.max(0,Math.floor(i));if(r!==s||"progress"!==e){if(r>s)throw new Error("Start time can't be after end time ("+r+" vs "+s+"). Event was "+e);this.trackSchemaEvent("iglu:no.nrk/playback-event/jsonschema/1-0-0",{kind:e,startTime:r,endTime:s,live:n,channelId:oi(this,zt)})}}};zt=new WeakMap,Kt=new WeakMap,It("app:snowplow:tracker");var gi=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];var fi="iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0";var mi,vi="SharedWebPageContextPlugin",yi="requestPageViewId",bi="sharePageViewId",Si=/(:\/\/|\.)((nrk|nrksuper|nrkbeta|p3|yr)\.no|nrk\.cloud)$/,Ei=function(e){if(/\s/.test(e))throw Error("debug namespaces cannot include whitespace");if(!function(e){try{var t=(localStorage.getItem("debug")||"").split(/[\s,]+/g);for(var i of t)if(""!==i){var n=i.indexOf("*");if(n>-1){if(e.startsWith(i.slice(0,n)))return!0}else if(e===i)return!0}}catch(t){}return!1}(e))return function(){};var t=function(e){for(var t=0,i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return gi[Math.abs(t)%gi.length]}(e),i=0;return function(){for(var n=Date.now(),r=n-(i||n),s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];console.log("%c"+e+" +"+r+"ms","color: "+t,...a),i=n}}("app:snowplow:shared-web-page-context-plugin"),Ti=class{constructor(){this.origin=window.location.origin,this.otherWindows=[],this.sequence=-1,window.addEventListener("message",(e=>{var t,i,n,r;!["","/",this.origin].includes(e.origin)&&!Si.test(e.origin)||null!==e.source&&!("self"in e.source)||(Ai(e)?(Ei("onMessage: Received page view ID "+e.data.pageViewId+", storing in plugin. tracker: "+JSON.stringify({id:null==(t=this.tracker)?void 0:t.id,pageViewId:null==(i=this.tracker)?void 0:i.getPageViewId()})),this.setPageViewId(e.data.pageViewId,e.data.sequence)):_i(e)&&(null!==e.source&&e.source!==window&&this.otherWindows.push({source:e.source,origin:e.origin}),void 0!==this.pageViewId&&(Ei("onMessage: Sending page view ID "+this.pageViewId+" to other instances in window. tracker: "+JSON.stringify({id:null==(n=this.tracker)?void 0:n.id,pageViewId:null==(r=this.tracker)?void 0:r.getPageViewId()})),this.sendPageViewId(e.source,e.origin,this.pageViewId,this.sequence))))})),this.sendRequest(window.parent,"*")}get pageViewId(){return this.__pageViewId}activateBrowserPlugin(e){this.tracker=e}beforeTrack(e){var t,i,n,r,s,a=function(e){var t,i,n=e.getJson().find((e=>"cx"===e.keyIfEncoded)),r=null==(t=null==n?void 0:n.json)?void 0:t.data,s=null==r?void 0:r.find((e=>e.schema===fi));return null==(i=null==s?void 0:s.data)?void 0:i.id}(e);if((e=>"pv"===e.getPayload().e)(e)){var o=a;void 0===o&&(o=null==(t=this.tracker)?void 0:t.getPageViewId()),Ei("beforetrack: Received new page view ID "+o+", storing in plugin. tracker: "+JSON.stringify({id:null==(i=this.tracker)?void 0:i.id,pageViewId:null==(n=this.tracker)?void 0:n.getPageViewId()})),this.setPageViewId(o,this.sequence+1),void 0!==this.pageViewId&&(Ei("beforetrack: Sending page view ID "+this.pageViewId+" to other instances in window. tracker: "+JSON.stringify({id:null==(r=this.tracker)?void 0:r.id,pageViewId:null==(s=this.tracker)?void 0:s.getPageViewId()})),this.sendPageViewId(window,this.origin,this.pageViewId,this.sequence))}Ei("beforetrack: Event is not pageview. Existing page view ID:"+this.pageViewId+". event pageViewId:"+a),void 0===a&&void 0!==this.pageViewId&&e.addContextEntity({schema:fi,data:{id:this.pageViewId}}),window.parent.postMessage("nrk-sp-keep-session-alive","*")}setPageViewId(e,t){var i;void 0!==e&&this.__pageViewId!==e&&this.sequence<t&&(Ei("update page view ID "+this.__pageViewId+" -> "+e+". tracker: "+(null==(i=this.tracker)?void 0:i.id)+" "+this.sequence+" < "+t),this.__pageViewId=e,this.sequence=t,this.shareWithOtherWindows(e,t))}shareWithOtherWindows(e,t){var i,n;for(var r of this.otherWindows)Ei("Sharing page view ID "+this.pageViewId+" with other windows. tracker: "+JSON.stringify({id:null==(i=this.tracker)?void 0:i.id,pageViewId:null==(n=this.tracker)?void 0:n.getPageViewId()})),this.sendPageViewId(r.source,r.origin,e,t)}sendRequest(e,t){this.sendMessage(e,t,{namespace:vi,topic:yi})}sendPageViewId(e,t,i,n){this.sendMessage(e,t,{namespace:vi,topic:bi,pageViewId:i,sequence:n})}sendMessage(e,t,i){null===e||""===t||"/"===t?window.postMessage(i,this.origin):e.postMessage(i,t)}},wi=e=>{var t=e.data;return"object"==typeof t&&null!==t&&t.namespace===vi},_i=e=>wi(e)&&e.data.topic===yi,Ai=e=>wi(e)&&e.data.topic===bi,Pi={exports:{}};mi=Pi,function(e,t){mi.exports=t()}(self,(()=>(()=>{var e={525:(e,t)=>{function i(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var n=i({HTML:"text/html",isHTML:function(e){return e===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.find=function(e,t,i){if(void 0===i&&(i=Array.prototype),e&&"function"==typeof i.find)return i.find.call(e,t);for(var n=0;n<e.length;n++)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];if(t.call(void 0,r,n,e))return r}},t.freeze=i,t.MIME_TYPE=n,t.NAMESPACE=r},8633:(e,t,i)=>{var n=i(525),r=i(1129),s=i(6598),a=i(2133),o=r.DOMImplementation,l=n.NAMESPACE,d=a.ParseError,h=a.XMLReader;function u(e){this.options=e||{locator:{}}}function c(){this.cdata=!1}function p(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function g(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function f(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function m(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}u.prototype.parseFromString=function(e,t){var i=this.options,n=new h,r=i.domBuilder||new c,a=i.errorHandler,o=i.locator,d=i.xmlns||{},u=/\/x?html?$/.test(t),p=u?s.HTML_ENTITIES:s.XML_ENTITIES;return o&&r.setDocumentLocator(o),n.errorHandler=function(e,t,i){if(!e){if(t instanceof c)return t;e=t}var n={},r=e instanceof Function;function s(t){var s=e[t];!s&&r&&(s=2==e.length?function(i){e(t,i)}:e),n[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+g(i))}||function(){}}return i=i||{},s("warning"),s("error"),s("fatalError"),n}(a,r,o),n.domBuilder=i.domBuilder||r,u&&(d[""]=l.HTML),d.xml=d.xml||l.XML,e&&"string"==typeof e?n.parse(e,d,p):n.errorHandler.error("invalid doc source"),r.doc},c.prototype={startDocument:function(){this.doc=(new o).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var r=this.doc,s=r.createElementNS(e,i||t),a=n.length;m(this,s),this.currentElement=s,this.locator&&p(this.locator,s);for(var o=0;o<a;o++){e=n.getURI(o);var l=n.getValue(o),d=(i=n.getQName(o),r.createAttributeNS(e,i));this.locator&&p(n.getLocator(o),d),d.value=d.nodeValue=l,s.setAttributeNode(d)}},endElement:function(e,t,i){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&p(this.locator,i),m(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){if(e=f.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&p(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=f.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&p(this.locator,n),m(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(e,t,i);this.locator&&p(this.locator,r),m(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,g(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,g(this.locator))},fatalError:function(e){throw new d(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){c.prototype[e]=function(){return null}})),t.DOMParser=u,r.DOMImplementation,r.XMLSerializer},1129:(e,t,i)=>{var n=i(525),r=n.find,s=n.NAMESPACE;function a(e){return""!==e}function o(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function l(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(a):[]}(e);return Object.keys(t.reduce(o,{}))}function d(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function h(e,t){var i=e.prototype;if(!(i instanceof t)){function n(){}n.prototype=t.prototype,d(i,n=new n),e.prototype=i=n}i.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),i.constructor=e)}var u={},c=u.ELEMENT_NODE=1,p=u.ATTRIBUTE_NODE=2,g=u.TEXT_NODE=3,f=u.CDATA_SECTION_NODE=4,m=u.ENTITY_REFERENCE_NODE=5,v=u.ENTITY_NODE=6,y=u.PROCESSING_INSTRUCTION_NODE=7,b=u.COMMENT_NODE=8,S=u.DOCUMENT_NODE=9,E=u.DOCUMENT_TYPE_NODE=10,T=u.DOCUMENT_FRAGMENT_NODE=11,w=u.NOTATION_NODE=12,_={},A={},P=(_.INDEX_SIZE_ERR=(A[1]="Index size error",1),_.DOMSTRING_SIZE_ERR=(A[2]="DOMString size error",2),_.HIERARCHY_REQUEST_ERR=(A[3]="Hierarchy request error",3)),I=(_.WRONG_DOCUMENT_ERR=(A[4]="Wrong document",4),_.INVALID_CHARACTER_ERR=(A[5]="Invalid character",5),_.NO_DATA_ALLOWED_ERR=(A[6]="No data allowed",6),_.NO_MODIFICATION_ALLOWED_ERR=(A[7]="No modification allowed",7),_.NOT_FOUND_ERR=(A[8]="Not found",8)),R=(_.NOT_SUPPORTED_ERR=(A[9]="Not supported",9),_.INUSE_ATTRIBUTE_ERR=(A[10]="Attribute in use",10));function C(e,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,A[e]),this.message=A[e],Error.captureStackTrace&&Error.captureStackTrace(this,C);return i.code=e,t&&(this.message=this.message+": "+t),i}function N(){}function D(e,t){this._node=e,this._refresh=t,L(this)}function L(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var i=e._refresh(e._node);if(ye(e,"length",i.length),!e.$$length||i.length<e.$$length)for(var n=i.length;n in e;n++)Object.prototype.hasOwnProperty.call(e,n)&&delete e[n];d(i,e),e._inc=t}}function O(){}function k(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function B(e,t,i,n){if(n?t[k(t,n)]=i:t[t.length++]=i,e){i.ownerElement=e;var r=e.ownerDocument;r&&(n&&H(r,e,n),function(e,t,i){e&&e._inc++,i.namespaceURI===s.XMLNS&&(t._nsMap[i.prefix?i.localName:""]=i.value)}(r,e,i))}}function x(e,t,i){var n=k(t,i);if(!(n>=0))throw new C(I,new Error(e.tagName+"@"+i));for(var r=t.length-1;n<r;)t[n]=t[++n];if(t.length=r,e){var s=e.ownerDocument;s&&(H(s,e,i),i.ownerElement=null)}}function M(){}function U(){}function V(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function F(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(F(e,t))return!0}while(e=e.nextSibling)}function q(){this.ownerDocument=this}function H(e,t,i,n){e&&e._inc++,i.namespaceURI===s.XMLNS&&delete t._nsMap[i.prefix?i.localName:""]}function G(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{for(var r=t.firstChild,s=0;r;)n[s++]=r,r=r.nextSibling;n.length=s,delete n[n.length]}}}function X(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,G(e.ownerDocument,e),t}function j(e){return e&&e.nodeType===U.DOCUMENT_TYPE_NODE}function W(e){return e&&e.nodeType===U.ELEMENT_NODE}function z(e){return e&&e.nodeType===U.TEXT_NODE}function K(e,t){var i=e.childNodes||[];if(r(i,W)||j(t))return!1;var n=r(i,j);return!(t&&n&&i.indexOf(n)>i.indexOf(t))}function Y(e,t){var i=e.childNodes||[];if(r(i,(function(e){return W(e)&&e!==t})))return!1;var n=r(i,j);return!(t&&n&&i.indexOf(n)>i.indexOf(t))}function Q(e,t,i){var n=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===U.DOCUMENT_FRAGMENT_NODE){var a=s.filter(W);if(a.length>1||r(s,z))throw new C(P,"More than one element or text in fragment");if(1===a.length&&!K(e,i))throw new C(P,"Element in fragment can not be inserted before doctype")}if(W(t)&&!K(e,i))throw new C(P,"Only one element can be added and only after doctype");if(j(t)){if(r(n,j))throw new C(P,"Only one doctype is allowed");var o=r(n,W);if(i&&n.indexOf(o)<n.indexOf(i))throw new C(P,"Doctype can only be inserted before an element");if(!i&&o)throw new C(P,"Doctype can not be appended since element is present")}}function $(e,t,i){var n=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===U.DOCUMENT_FRAGMENT_NODE){var a=s.filter(W);if(a.length>1||r(s,z))throw new C(P,"More than one element or text in fragment");if(1===a.length&&!Y(e,i))throw new C(P,"Element in fragment can not be inserted before doctype")}if(W(t)&&!Y(e,i))throw new C(P,"Only one element can be added and only after doctype");if(j(t)){if(r(n,(function(e){return j(e)&&e!==i})))throw new C(P,"Only one doctype is allowed");var o=r(n,W);if(i&&n.indexOf(o)<n.indexOf(i))throw new C(P,"Doctype can only be inserted before an element")}}function J(e,t,i,n){(function(e,t,i){if(!function(e){return e&&(e.nodeType===U.DOCUMENT_NODE||e.nodeType===U.DOCUMENT_FRAGMENT_NODE||e.nodeType===U.ELEMENT_NODE)}(e))throw new C(P,"Unexpected parent node type "+e.nodeType);if(i&&i.parentNode!==e)throw new C(I,"child not in parent");if(!function(e){return e&&(W(e)||z(e)||j(e)||e.nodeType===U.DOCUMENT_FRAGMENT_NODE||e.nodeType===U.COMMENT_NODE||e.nodeType===U.PROCESSING_INSTRUCTION_NODE)}(t)||j(t)&&e.nodeType!==U.DOCUMENT_NODE)throw new C(P,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)})(e,t,i),e.nodeType===U.DOCUMENT_NODE&&(n||Q)(e,t,i);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===T){var s=t.firstChild;if(null==s)return t;var a=t.lastChild}else s=a=t;var o=i?i.previousSibling:e.lastChild;s.previousSibling=o,a.nextSibling=i,o?o.nextSibling=s:e.firstChild=s,null==i?e.lastChild=a:i.previousSibling=a;do{s.parentNode=e}while(s!==a&&(s=s.nextSibling));return G(e.ownerDocument||e,e),t.nodeType==T&&(t.firstChild=t.lastChild=null),t}function Z(){this._nsMap={}}function ee(){}function te(){}function ie(){}function ne(){}function re(){}function se(){}function ae(){}function oe(){}function le(){}function de(){}function he(){}function ue(){}function ce(e,t){var i=[],n=9==this.nodeType&&this.documentElement||this,r=n.prefix,s=n.namespaceURI;if(s&&null==r&&null==(r=n.lookupPrefix(s)))var a=[{namespace:s,prefix:null}];return fe(this,i,e,t,a),i.join("")}function pe(e,t,i){var n=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===n&&r===s.XML||r===s.XMLNS)return!1;for(var a=i.length;a--;){var o=i[a];if(o.prefix===n)return o.namespace!==r}return!0}function ge(e,t,i){e.push(" ",t,'="',i.replace(/[<&"]/g,V),'"')}function fe(e,t,i,n,r){if(r||(r=[]),n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case c:var a=e.attributes,o=a.length,l=e.firstChild,d=e.tagName,h=d;if(!(i=s.isHTML(e.namespaceURI)||i)&&!e.prefix&&e.namespaceURI){for(var u,v=0;v<a.length;v++)if("xmlns"===a.item(v).name){u=a.item(v).value;break}if(!u)for(var w=r.length-1;w>=0;w--)if(""===(_=r[w]).prefix&&_.namespace===e.namespaceURI){u=_.namespace;break}if(u!==e.namespaceURI)for(w=r.length-1;w>=0;w--){var _;if((_=r[w]).namespace===e.namespaceURI){_.prefix&&(h=_.prefix+":"+d);break}}}t.push("<",h);for(var A=0;A<o;A++)"xmlns"==(P=a.item(A)).prefix?r.push({prefix:P.localName,namespace:P.value}):"xmlns"==P.nodeName&&r.push({prefix:"",namespace:P.value});for(A=0;A<o;A++){var P,I,R;pe(P=a.item(A),0,r)&&(ge(t,(I=P.prefix||"")?"xmlns:"+I:"xmlns",R=P.namespaceURI),r.push({prefix:I,namespace:R})),fe(P,t,i,n,r)}if(d===h&&pe(e,0,r)&&(ge(t,(I=e.prefix||"")?"xmlns:"+I:"xmlns",R=e.namespaceURI),r.push({prefix:I,namespace:R})),l||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(d)){if(t.push(">"),i&&/^script$/i.test(d))for(;l;)l.data?t.push(l.data):fe(l,t,i,n,r.slice()),l=l.nextSibling;else for(;l;)fe(l,t,i,n,r.slice()),l=l.nextSibling;t.push("</",h,">")}else t.push("/>");return;case S:case T:for(l=e.firstChild;l;)fe(l,t,i,n,r.slice()),l=l.nextSibling;return;case p:return ge(t,e.name,e.value);case g:return t.push(e.data.replace(/[<&]/g,V).replace(/]]>/g,"]]&gt;"));case f:return t.push("<![CDATA[",e.data,"]]>");case b:return t.push("\x3c!--",e.data,"--\x3e");case E:var C=e.publicId,N=e.systemId;if(t.push("<!DOCTYPE ",e.name),C)t.push(" PUBLIC ",C),N&&"."!=N&&t.push(" ",N),t.push(">");else if(N&&"."!=N)t.push(" SYSTEM ",N,">");else{var D=e.internalSubset;D&&t.push(" [",D,"]"),t.push(">")}return;case y:return t.push("<?",e.target," ",e.data,"?>");case m:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function me(e,t,i){var n;switch(t.nodeType){case c:(n=t.cloneNode(!1)).ownerDocument=e;case T:break;case p:i=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,i)for(var r=t.firstChild;r;)n.appendChild(me(e,r,i)),r=r.nextSibling;return n}function ve(e,t,i){var n=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=t[r];"object"!=typeof s&&s!=n[r]&&(n[r]=s)}switch(t.childNodes&&(n.childNodes=new N),n.ownerDocument=e,n.nodeType){case c:var a=t.attributes,o=n.attributes=new O,l=a.length;o._ownerElement=n;for(var d=0;d<l;d++)n.setAttributeNode(ve(e,a.item(d),!0));break;case p:i=!0}if(i)for(var h=t.firstChild;h;)n.appendChild(ve(e,h,i)),h=h.nextSibling;return n}function ye(e,t,i){e[t]=i}_.INVALID_STATE_ERR=(A[11]="Invalid state",11),_.SYNTAX_ERR=(A[12]="Syntax error",12),_.INVALID_MODIFICATION_ERR=(A[13]="Invalid modification",13),_.NAMESPACE_ERR=(A[14]="Invalid namespace",14),_.INVALID_ACCESS_ERR=(A[15]="Invalid access",15),C.prototype=Error.prototype,d(_,C),N.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)fe(this[n],i,e,t);return i.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},D.prototype.item=function(e){return L(this),this[e]||null},h(D,N),O.prototype={length:0,item:N.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new C(R);var i=this.getNamedItem(e.nodeName);return B(this._ownerElement,this,e,i),i},setNamedItemNS:function(e){var t,i=e.ownerElement;if(i&&i!=this._ownerElement)throw new C(R);return t=this.getNamedItemNS(e.namespaceURI,e.localName),B(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return x(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);return x(this._ownerElement,this,i),i},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},M.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,i){var n=new q;if(n.implementation=this,n.childNodes=new N,n.doctype=i||null,i&&n.appendChild(i),t){var r=n.createElementNS(e,t);n.appendChild(r)}return n},createDocumentType:function(e,t,i){var n=new se;return n.name=e,n.nodeName=e,n.publicId=t||"",n.systemId=i||"",n}},U.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return J(this,e,t)},replaceChild:function(e,t){J(this,e,t,$),t&&this.removeChild(t)},removeChild:function(e){return X(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ve(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==g&&e.nodeType==g?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var i=t._nsMap;if(i)for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&i[n]===e)return n;t=t.nodeType==p?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var i=t._nsMap;if(i&&e in i&&Object.prototype.hasOwnProperty.call(i,e))return i[e];t=t.nodeType==p?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},d(u,U),d(u,U.prototype),q.prototype={nodeName:"#document",nodeType:S,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==T){for(var i=e.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e}return J(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===c&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),X(this,e)},replaceChild:function(e,t){J(this,e,t,$),e.ownerDocument=this,t&&this.removeChild(t),W(e)&&(this.documentElement=e)},importNode:function(e,t){return me(this,e,t)},getElementById:function(e){var t=null;return F(this.documentElement,(function(i){if(i.nodeType==c&&i.getAttribute("id")==e)return t=i,!0})),t},getElementsByClassName:function(e){var t=l(e);return new D(this,(function(i){var n=[];return t.length>0&&F(i.documentElement,(function(r){if(r!==i&&r.nodeType===c){var s=r.getAttribute("class");if(s){var a=e===s;if(!a){var o=l(s);a=t.every((d=o,function(e){return d&&-1!==d.indexOf(e)}))}a&&n.push(r)}}var d})),n}))},createElement:function(e){var t=new Z;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new N,(t.attributes=new O)._ownerElement=t,t},createDocumentFragment:function(){var e=new de;return e.ownerDocument=this,e.childNodes=new N,e},createTextNode:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new ne;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new he;return i.ownerDocument=this,i.tagName=i.nodeName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new ee;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new le;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new Z,n=t.split(":"),r=i.attributes=new O;return i.childNodes=new N,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,r._ownerElement=i,i},createAttributeNS:function(e,t){var i=new ee,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},h(q,U),Z.prototype={nodeType:c,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===T?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,G(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new D(this,(function(t){var i=[];return F(t,(function(n){n===t||n.nodeType!=c||"*"!==e&&n.tagName!=e||i.push(n)})),i}))},getElementsByTagNameNS:function(e,t){return new D(this,(function(i){var n=[];return F(i,(function(r){r===i||r.nodeType!==c||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||n.push(r)})),n}))}},q.prototype.getElementsByTagName=Z.prototype.getElementsByTagName,q.prototype.getElementsByTagNameNS=Z.prototype.getElementsByTagNameNS,h(Z,U),ee.prototype.nodeType=p,h(ee,U),te.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(A[P])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){i=this.data.substring(0,e)+i+this.data.substring(e+t),this.nodeValue=this.data=i,this.length=i.length}},h(te,U),ie.prototype={nodeName:"#text",nodeType:g,splitText:function(e){var t=this.data,i=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},h(ie,te),ne.prototype={nodeName:"#comment",nodeType:b},h(ne,te),re.prototype={nodeName:"#cdata-section",nodeType:f},h(re,te),se.prototype.nodeType=E,h(se,U),ae.prototype.nodeType=w,h(ae,U),oe.prototype.nodeType=v,h(oe,U),le.prototype.nodeType=m,h(le,U),de.prototype.nodeName="#document-fragment",de.prototype.nodeType=T,h(de,U),he.prototype.nodeType=y,h(he,U),ue.prototype.serializeToString=function(e,t,i){return ce.call(e,t,i)},U.prototype.toString=ce;try{if(Object.defineProperty){function be(e){switch(e.nodeType){case c:case T:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(be(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(D.prototype,"length",{get:function(){return L(this),this.$$length}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return be(this)},set:function(e){switch(this.nodeType){case c:case T:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ye=function(e,t,i){e["$$"+t]=i}}}catch(Se){}t.DocumentType=se,t.DOMException=C,t.DOMImplementation=M,t.Element=Z,t.Node=U,t.NodeList=N,t.XMLSerializer=ue},6598:(e,t,i)=>{var n=i(525).freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=n({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES},7937:(e,t,i)=>{var n=i(1129);n.DOMImplementation,n.XMLSerializer,t.DOMParser=i(8633).DOMParser},2133:(e,t,i)=>{var n=i(525).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+r.source+s.source+"*(?::"+r.source+s.source+"*)?$");function o(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,o)}function l(){}function d(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function h(e,t,i,r,s,a){function o(e,t,n){i.attributeNames.hasOwnProperty(e)&&a.fatalError("Attribute "+e+" redefined"),i.addValue(e,t,n)}for(var l,d=++t,h=0;;){var u=e.charAt(d);switch(u){case"=":if(1===h)l=e.slice(t,d),h=3;else{if(2!==h)throw new Error("attribute equal must after attrName");h=3}break;case"'":case'"':if(3===h||1===h){if(1===h&&(a.warning('attribute value must after "="'),l=e.slice(t,d)),t=d+1,!((d=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");o(l,c=e.slice(t,d).replace(/&#?\w+;/g,s),t-1),h=5}else{if(4!=h)throw new Error('attribute value must after "="');o(l,c=e.slice(t,d).replace(/&#?\w+;/g,s),t),a.warning('attribute "'+l+'" missed start quot('+u+")!!"),t=d+1,h=5}break;case"/":switch(h){case 0:i.setTagName(e.slice(t,d));case 5:case 6:case 7:h=7,i.closed=!0;case 4:case 1:break;case 2:i.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==h&&i.setTagName(e.slice(t,d)),d;case">":switch(h){case 0:i.setTagName(e.slice(t,d));case 5:case 6:case 7:break;case 4:case 1:"/"===(c=e.slice(t,d)).slice(-1)&&(i.closed=!0,c=c.slice(0,-1));case 2:2===h&&(c=l),4==h?(a.warning('attribute "'+c+'" missed quot(")!'),o(l,c.replace(/&#?\w+;/g,s),t)):(n.isHTML(r[""])&&c.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),o(c,c,t));break;case 3:throw new Error("attribute value missed!!")}return d;case"":u=" ";default:if(u<=" ")switch(h){case 0:i.setTagName(e.slice(t,d)),h=6;break;case 1:l=e.slice(t,d),h=2;break;case 4:var c=e.slice(t,d).replace(/&#?\w+;/g,s);a.warning('attribute "'+c+'" missed quot(")!!'),o(l,c,t);case 5:h=6}else switch(h){case 2:i.tagName,n.isHTML(r[""])&&l.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),o(l,l,t),t=d,h=1;break;case 5:a.warning('attribute space is required"'+l+'"!!');case 6:h=1,t=d;break;case 3:h=4,t=d;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}d++}}function u(e,t,i){for(var r=e.tagName,s=null,a=e.length;a--;){var o=e[a],l=o.qName,d=o.value;if((p=l.indexOf(":"))>0)var h=o.prefix=l.slice(0,p),u=l.slice(p+1),c="xmlns"===h&&u;else u=l,h=null,c="xmlns"===l&&"";o.localName=u,!1!==c&&(null==s&&(s={},g(i,i={})),i[c]=s[c]=d,o.uri=n.XMLNS,t.startPrefixMapping(c,d))}for(a=e.length;a--;)(h=(o=e[a]).prefix)&&("xml"===h&&(o.uri=n.XML),"xmlns"!==h&&(o.uri=i[h||""]));var p;(p=r.indexOf(":"))>0?(h=e.prefix=r.slice(0,p),u=e.localName=r.slice(p+1)):(h=null,u=e.localName=r);var f=e.uri=i[h||""];if(t.startElement(f,u,r,e),!e.closed)return e.currentNSMap=i,e.localNSMap=s,!0;if(t.endElement(f,u,r),s)for(h in s)Object.prototype.hasOwnProperty.call(s,h)&&t.endPrefixMapping(h)}function c(e,t,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var s=e.indexOf("</"+i+">",t),a=e.substring(t+1,s);if(/[&<]/.test(a))return/^script$/i.test(i)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,n),r.characters(a,0,a.length),s)}return t+1}function p(e,t,i,n){var r=n[i];return null==r&&((r=e.lastIndexOf("</"+i+">"))<t&&(r=e.lastIndexOf("</"+i)),n[i]=r),r<t}function g(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function f(e,t,i,n){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(i.comment(e,t+4,r-t-4),r+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,r-t-9),i.endCDATA(),r+3}var s=function(e,t){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);i=r.exec(e);)if(n.push(i),i[1])return n}(e,t),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var o=s[1][0],l=!1,d=!1;a>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],d=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(d=s[3][0]));var h=s[a-1];return i.startDTD(o,l,d),i.endDTD(),h.index+h[0].length}return-1}function m(e,t,i){var n=e.indexOf("?>",t);if(n){var r=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,i.processingInstruction(r[1],r[2]),n+2):-1}return-1}function v(){this.attributeNames={}}o.prototype=new Error,o.prototype.name=o.name,l.prototype={parse:function(e,t,i){var r=this.domBuilder;r.startDocument(),g(t,t={}),function(e,t,i,r,s){function a(e){var t=e.slice(1,-1);return t in i?i[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function l(t){if(t>_){var i=e.substring(_,t).replace(/&#?\w+;/g,a);E&&g(_),r.characters(i,0,t-_),_=t}}function g(t,i){for(;t>=b&&(i=S.exec(e));)y=i.index,b=y+i[0].length,E.lineNumber++;E.columnNumber=t-y+1}for(var y=0,b=0,S=/.*(?:\r\n?|\n)|.*$/g,E=r.locator,T=[{currentNSMap:t}],w={},_=0;;){try{var A=e.indexOf("<",_);if(A<0){if(!e.substr(_).match(/^\s*$/)){var P=r.doc,I=P.createTextNode(e.substr(_));P.appendChild(I),r.currentElement=I}return}switch(A>_&&l(A),e.charAt(A+1)){case"/":var R=e.indexOf(">",A+3),C=e.substring(A+2,R).replace(/[ \t\n\r]+$/g,""),N=T.pop();R<0?(C=e.substring(A+2).replace(/[\s<].*/,""),s.error("end tag name: "+C+" is not complete:"+N.tagName),R=A+1+C.length):C.match(/\s</)&&(C=C.replace(/[\s<].*/,""),s.error("end tag name: "+C+" maybe not complete"),R=A+1+C.length);var D=N.localNSMap,L=N.tagName==C;if(L||N.tagName&&N.tagName.toLowerCase()==C.toLowerCase()){if(r.endElement(N.uri,N.localName,C),D)for(var O in D)Object.prototype.hasOwnProperty.call(D,O)&&r.endPrefixMapping(O);L||s.fatalError("end tag name: "+C+" is not match the current start tagName:"+N.tagName)}else T.push(N);R++;break;case"?":E&&g(A),R=m(e,A,r);break;case"!":E&&g(A),R=f(e,A,r,s);break;default:E&&g(A);var k=new v,B=T[T.length-1].currentNSMap,x=(R=h(e,A,k,B,a,s),k.length);if(!k.closed&&p(e,R,k.tagName,w)&&(k.closed=!0,i.nbsp||s.warning("unclosed xml attribute")),E&&x){for(var M=d(E,{}),U=0;U<x;U++){var V=k[U];g(V.offset),V.locator=d(E,{})}r.locator=M,u(k,r,B)&&T.push(k),r.locator=E}else u(k,r,B)&&T.push(k);n.isHTML(k.uri)&&!k.closed?R=c(e,R,k.tagName,a,r):R++}}catch(e){if(e instanceof o)throw e;s.error("element parse error: "+e),R=-1}R>_?_=R:l(Math.max(A,_)+1)}}(e,t,i,r,this.errorHandler),r.endDocument()}},v.prototype={setTagName:function(e){if(!a.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,i){if(!a.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=l,t.ParseError=o},7991:(e,t)=>{t.byteLength=function(e){var t=o(e),i=t[0],n=t[1];return 3*(i+n)/4-n},t.toByteArray=function(e){var t,i,s=o(e),a=s[0],l=s[1],d=new r(function(e,t,i){return 3*(t+i)/4-i}(0,a,l)),h=0,u=l>0?a-4:a;for(i=0;i<u;i+=4)t=n[e.charCodeAt(i)]<<18|n[e.charCodeAt(i+1)]<<12|n[e.charCodeAt(i+2)]<<6|n[e.charCodeAt(i+3)],d[h++]=t>>16&255,d[h++]=t>>8&255,d[h++]=255&t;return 2===l&&(t=n[e.charCodeAt(i)]<<2|n[e.charCodeAt(i+1)]>>4,d[h++]=255&t),1===l&&(t=n[e.charCodeAt(i)]<<10|n[e.charCodeAt(i+1)]<<4|n[e.charCodeAt(i+2)]>>2,d[h++]=t>>8&255,d[h++]=255&t),d},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,s=[],a=16383,o=0,d=n-r;o<d;o+=a)s.push(l(e,o,o+a>d?d:o+a));return 1===r?(t=e[n-1],s.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],s.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),s.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)i[a]=s[a],n[s.charCodeAt(a)]=a;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function l(e,t,n){for(var r,s,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(i[(s=r)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1048:(e,t,i)=>{var n=i(7991),r=i(9318),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;var a=2147483647;function o(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return d(e,t,i)}function d(e,t,i){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|f(e,t),n=o(i),r=n.write(e,t);return r!==i&&(n=n.slice(0,r)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,i);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,i);var r=function(e){if(l.isBuffer(e)){var t=0|g(e.length),i=o(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||Q(e.length)?o(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return h(e),o(e<0?0:0|g(e))}function c(e){for(var t=e.length<0?0:0|g(e.length),i=o(t),n=0;n<t;n+=1)i[n]=255&e[n];return i}function p(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),Object.setPrototypeOf(n,l.prototype),n}function g(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return z(e).length;default:if(r)return n?-1:W(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,i);case"utf8":case"utf-8":return P(this,t,i);case"ascii":return R(this,t,i);case"latin1":case"binary":return C(this,t,i);case"base64":return A(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function y(e,t,i,n,r){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),Q(i=+i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,i,n,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):b(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,i,n,r){var s,a=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,i/=2}function d(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var h=-1;for(s=i;s<o;s++)if(d(e,s)===d(t,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===l)return h*a}else-1!==h&&(s-=s-h),h=-1}else for(i+l>o&&(i=o-l),s=i;s>=0;s--){for(var u=!0,c=0;c<l;c++)if(d(e,s+c)!==d(t,c)){u=!1;break}if(u)return s}return-1}function S(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n))>r&&(n=r):n=r;var s,a=t.length;for(n>a/2&&(n=a/2),s=0;s<n;++s){var o=parseInt(t.substr(2*s,2),16);if(Q(o))return s;e[i+s]=o}return s}function E(e,t,i,n){return K(W(t,e.length-i),e,i,n)}function T(e,t,i,n){return K(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function w(e,t,i,n){return K(z(t),e,i,n)}function _(e,t,i,n){return K(function(e,t){for(var i,n,r,s=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(i=e.charCodeAt(a))>>8,r=i%256,s.push(r),s.push(n);return s}(t,e.length-i),e,i,n)}function A(e,t,i){return 0===t&&i===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,i))}function P(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var s=e[r],a=null,o=s>239?4:s>223?3:s>191?2:1;if(r+o<=i){var l=void 0,d=void 0,h=void 0,u=void 0;switch(o){case 1:s<128&&(a=s);break;case 2:128==(192&(l=e[r+1]))&&(u=(31&s)<<6|63&l)>127&&(a=u);break;case 3:l=e[r+1],d=e[r+2],128==(192&l)&&128==(192&d)&&(u=(15&s)<<12|(63&l)<<6|63&d)>2047&&(u<55296||u>57343)&&(a=u);break;case 4:l=e[r+1],d=e[r+2],h=e[r+3],128==(192&l)&&128==(192&d)&&128==(192&h)&&(u=(15&s)<<18|(63&l)<<12|(63&d)<<6|63&h)>65535&&u<1114112&&(a=u)}}null===a?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),r+=o}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=I));return i}(n)}l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,i){return d(e,t,i)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,i){return function(e,t,i){return h(e),e<=0?o(e):void 0!==t?"string"==typeof i?o(e).fill(t,i):o(e).fill(t):o(e)}(e,t,i)},l.allocUnsafe=function(e){return u(e)},l.allocUnsafeSlow=function(e){return u(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,n=t.length,r=0,s=Math.min(i,n);r<s;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=l.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var s=e[i];if(Y(s,Uint8Array))r+s.length>n.length?(l.isBuffer(s)||(s=l.from(s)),s.copy(n,r)):Uint8Array.prototype.set.call(n,s,r);else{if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r)}r+=s.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",i=t.IS;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(e,t,i,n,r){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(this===e)return 0;for(var s=(r>>>=0)-(n>>>=0),a=(i>>>=0)-(t>>>=0),o=Math.min(s,a),d=this.slice(n,r),h=e.slice(t,i),u=0;u<o;++u)if(d[u]!==h[u]){s=d[u],a=h[u];break}return s<a?-1:a<s?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return y(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return y(this,e,t,i,!1)},l.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return S(this,e,t,i);case"utf8":case"utf-8":return E(this,e,t,i);case"ascii":case"latin1":case"binary":return T(this,e,t,i);case"base64":return w(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function R(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function C(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function N(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",s=t;s<i;++s)r+=$[e[s]];return r}function D(e,t,i){for(var n=e.slice(t,i),r="",s=0;s<n.length-1;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function L(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,i,n,r,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function k(e,t,i,n,r){H(t,n,r,e,i,7);var s=Number(t&BigInt(4294967295));e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a,i}function B(e,t,i,n,r){H(t,n,r,e,i,7);var s=Number(t&BigInt(4294967295));e[i+7]=s,s>>=8,e[i+6]=s,s>>=8,e[i+5]=s,s>>=8,e[i+4]=s;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[i+3]=a,a>>=8,e[i+2]=a,a>>=8,e[i+1]=a,a>>=8,e[i]=a,i+8}function x(e,t,i,n,r,s){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function M(e,t,i,n,s){return t=+t,i>>>=0,s||x(e,0,i,4),r.write(e,t,i,n,23,4),i+4}function U(e,t,i,n,s){return t=+t,i>>>=0,s||x(e,0,i,8),r.write(e,t,i,n,52,8),i+8}l.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||L(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||L(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=J((function(e){G(e>>>=0,"offset");var t=this[e],i=this[e+7];void 0!==t&&void 0!==i||X(e,this.length-8);var n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+i*2**24;return BigInt(n)+(BigInt(r)<<BigInt(32))})),l.prototype.readBigUInt64BE=J((function(e){G(e>>>=0,"offset");var t=this[e],i=this[e+7];void 0!==t&&void 0!==i||X(e,this.length-8);var n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+i;return(BigInt(n)<<BigInt(32))+BigInt(r)})),l.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||L(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||L(e,t,this.length);for(var n=t,r=1,s=this[e+--n];n>0&&(r*=256);)s+=this[e+--n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=J((function(e){G(e>>>=0,"offset");var t=this[e],i=this[e+7];void 0!==t&&void 0!==i||X(e,this.length-8);var n=this[e+4]+256*this[e+5]+65536*this[e+6]+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=J((function(e){G(e>>>=0,"offset");var t=this[e],i=this[e+7];void 0!==t&&void 0!==i||X(e,this.length-8);var n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+i)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||O(this,e,t,i,Math.pow(2,8*i)-1,0);var r=1,s=0;for(this[t]=255&e;++s<i&&(r*=256);)this[t+s]=e/r&255;return t+i},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||O(this,e,t,i,Math.pow(2,8*i)-1,0);var r=i-1,s=1;for(this[t+r]=255&e;--r>=0&&(s*=256);)this[t+r]=e/s&255;return t+i},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=J((function(e,t){return void 0===t&&(t=0),k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=J((function(e,t){return void 0===t&&(t=0),B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var r=Math.pow(2,8*i-1);O(this,e,t,i,r-1,-r)}var s=0,a=1,o=0;for(this[t]=255&e;++s<i&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+i},l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var r=Math.pow(2,8*i-1);O(this,e,t,i,r-1,-r)}var s=i-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=J((function(e,t){return void 0===t&&(t=0),k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=J((function(e,t){return void 0===t&&(t=0),B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,i){return M(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return M(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return U(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return U(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r=n-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),t),r},l.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var r=e.charCodeAt(0);("utf8"===n&&r<128||"latin1"===n)&&(e=r)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var s;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(s=t;s<i;++s)this[s]=e;else{var a=l.isBuffer(e)?e:l.from(e,n),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-t;++s)this[s+t]=a[s%o]}return this};var V={};function F(e,t,i){V[e]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=this.name+" ["+e+"]",this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return this.name+" ["+e+"]: "+this.message}}}function q(e){for(var t="",i=e.length,n="-"===e[0]?1:0;i>=n+4;i-=3)t="_"+e.slice(i-3,i)+t;return""+e.slice(0,i)+t}function H(e,t,i,n,r,s){if(e>i||e<t){var a,o="bigint"==typeof t?"n":"";throw a=s>3?0===t||t===BigInt(0)?">= 0"+o+" and < 2"+o+" ** "+8*(s+1)+o:">= -(2"+o+" ** "+(8*(s+1)-1)+o+") and < 2 ** "+(8*(s+1)-1)+o:">= "+t+o+" and <= "+i+o,new V.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,i){G(t,"offset"),void 0!==e[t]&&void 0!==e[t+i]||X(t,e.length-(i+1))}(n,r,s)}function G(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,i){if(Math.floor(e)!==e)throw G(e,i),new V.ERR_OUT_OF_RANGE(i||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(i||"offset",">= "+(i?1:0)+" and <= "+t,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'+e+'" argument must be of type number. Received type '+typeof t}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,i){var n='The value of "'+e+'" is out of range.',r=i;return Number.isInteger(i)&&Math.abs(i)>2**32?r=q(String(i)):"bigint"==typeof i&&(r=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(r=q(r)),r+="n"),n+=" It must be "+t+". Received "+r}),RangeError);var j=/[^+/0-9A-Za-z-_]/g;function W(e,t){var i;t=t||1/0;for(var n=e.length,r=null,s=[],a=0;a<n;++a){if((i=e.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function z(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,i,n){var r;for(r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}var $=function(){for(var e="0123456789abcdef",t=new Array(256),i=0;i<16;++i)for(var n=16*i,r=0;r<16;++r)t[n+r]=e[i]+e[r];return t}();function J(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},2553:(e,t,i)=>{var n;n="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},e.exports=n},8641:(e,t,i)=>{var n,r=i(1048).hp;n=()=>{return e={851:(e,t,i)=>{var n=i(771),r=n.getOptions,s=n.setOptions,a=i(463),o=i(367),l=i(890);e.exports={parse:a,stringify:o,types:l,getOptions:r,setOptions:s}},463:(e,t,i)=>{function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s,a,o=[],l=!0,d=!1;try{if(s=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=s.call(i)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(d)throw r}}return o}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw s}}}}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=i(771),d=i(890),h=d.Rendition,u=d.Variant,c=d.SessionData,p=d.Key,g=d.MediaInitializationSection,f=d.DateRange,m=d.SpliceInfo,v=d.MasterPlaylist,y=d.MediaPlaylist,b=d.Segment,S=d.PartialSegment,E=d.PrefetchSegment,T=d.RenditionReport;function w(e){return l.trim(e,'"')}function _(e){var t=l.splitAt(e,",");return{duration:l.toNumber(t[0]),title:decodeURIComponent(escape(t[1]))}}function A(e){var t=l.splitAt(e,"@");return{length:l.toNumber(t[0]),offset:t[1]?l.toNumber(t[1]):-1}}function P(e){var t=l.splitAt(e,"x");return{width:l.toNumber(t[0]),height:l.toNumber(t[1])}}function I(e){var t="ALLOWED-CPC: Each entry must consit of KEYFORMAT and Content Protection Configuration",i=e.split(",");0===i.length&&l.INVALIDPLAYLIST(t);var r,a=[],o=s(i);try{for(o.s();!(r=o.n()).done;){var d=r.value,h=n(l.splitAt(d,":"),2),u=h[0],c=h[1];u&&c?a.push({format:u,cpcList:c.split("/")}):l.INVALIDPLAYLIST(t)}}catch(e){o.e(e)}finally{o.f()}return a}function R(e){return e.startsWith('"')?w(e):e.startsWith("0x")||e.startsWith("0X")?l.hexToByteSequence(e):l.toNumber(e)}function C(e,t){t.IV&&e.compatibleVersion<2&&(e.compatibleVersion=2),(t.KEYFORMAT||t.KEYFORMATVERSIONS)&&e.compatibleVersion<5&&(e.compatibleVersion=5)}function N(e){var t,i,r,a={},o=s(l.splitByCommaWithPreservingQuotes(e));try{for(o.s();!(t=o.n()).done;){var d=t.value,h=n(l.splitAt(d,"="),2),u=h[0],c=h[1],p=w(c);switch(u){case"URI":a[u]=p;break;case"START-DATE":case"END-DATE":a[u]=new Date(p);break;case"IV":a[u]=(i=p,16!==(r=l.hexToByteSequence(i)).length&&l.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),r);break;case"BYTERANGE":a[u]=A(p);break;case"RESOLUTION":a[u]=P(p);break;case"ALLOWED-CPC":a[u]=I(p);break;case"END-ON-NEXT":case"DEFAULT":case"AUTOSELECT":case"FORCED":case"PRECISE":case"CAN-BLOCK-RELOAD":case"INDEPENDENT":case"GAP":a[u]="YES"===p;break;case"DURATION":case"PLANNED-DURATION":case"BANDWIDTH":case"AVERAGE-BANDWIDTH":case"FRAME-RATE":case"TIME-OFFSET":case"CAN-SKIP-UNTIL":case"HOLD-BACK":case"PART-HOLD-BACK":case"PART-TARGET":case"BYTERANGE-START":case"BYTERANGE-LENGTH":case"LAST-MSN":case"LAST-PART":case"SKIPPED-SEGMENTS":case"SCORE":a[u]=l.toNumber(p);break;default:u.startsWith("SCTE35-")?a[u]=l.hexToByteSequence(p):u.startsWith("X-")?a[u]=R(c):("VIDEO-RANGE"===u&&"SDR"!==p&&"HLG"!==p&&"PQ"!==p&&l.INVALIDPLAYLIST('VIDEO-RANGE: unknown value "'.concat(p,'"')),a[u]=p)}}}catch(e){o.e(e)}finally{o.f()}return a}function D(){l.INVALIDPLAYLIST("The file contains both media and master playlist tags.")}function L(e,t,i){var n,r=(n=t.attributes,new h({type:n.TYPE,uri:n.URI,groupId:n["GROUP-ID"],language:n.LANGUAGE,assocLanguage:n["ASSOC-LANGUAGE"],name:n.NAME,isDefault:n.DEFAULT,autoselect:n.AUTOSELECT,forced:n.FORCED,instreamId:n["INSTREAM-ID"],characteristics:n.CHARACTERISTICS,channels:n.CHANNELS})),a=e[l.camelify(i)],o=function(e,t){var i,n=!1,r=s(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.name===t.name)return"All EXT-X-MEDIA tags in the same Group MUST have different NAME attributes.";a.isDefault&&(n=!0)}}catch(e){r.e(e)}finally{r.f()}return n&&t.isDefault?"EXT-X-MEDIA A Group MUST NOT have more than one member with a DEFAULT attribute of YES.":""}(a,r);o&&l.INVALIDPLAYLIST(o),a.push(r),r.isDefault&&(e.currentRenditions[l.camelify(i)]=a.length-1)}function O(e,t,i,n,r){var a,o=new u({uri:i,bandwidth:t.BANDWIDTH,averageBandwidth:t["AVERAGE-BANDWIDTH"],score:t.SCORE,codecs:t.CODECS,resolution:t.RESOLUTION,frameRate:t["FRAME-RATE"],hdcpLevel:t["HDCP-LEVEL"],allowedCpc:t["ALLOWED-CPC"],videoRange:t["VIDEO-RANGE"],stableVariantId:t["STABLE-VARIANT-ID"]}),d=s(e);try{for(d.s();!(a=d.n()).done;){var h=a.value;if("EXT-X-MEDIA"===h.name){var c=h.attributes,p=c.TYPE;if(p&&c["GROUP-ID"]||l.INVALIDPLAYLIST("EXT-X-MEDIA TYPE attribute is REQUIRED."),t[p]===c["GROUP-ID"]&&(L(o,h,p),"CLOSED-CAPTIONS"===p)){var g,f=s(o.closedCaptions);try{for(f.s();!(g=f.n()).done;){var m=g.value.instreamId;if(m&&m.startsWith("SERVICE")&&r.compatibleVersion<7){r.compatibleVersion=7;break}}}catch(e){f.e(e)}finally{f.f()}}}}}catch(e){d.e(e)}finally{d.f()}return function(e,t,i){for(var n=function(){var n=s[r];"CLOSED-CAPTIONS"===n&&"NONE"===e[n]?(i.isClosedCaptionsNone=!0,t.closedCaptions=[]):e[n]&&!t[l.camelify(n)].some((function(t){return t.groupId===e[n]}))&&l.INVALIDPLAYLIST("".concat(n," attribute MUST match the value of the GROUP-ID attribute of an EXT-X-MEDIA tag whose TYPE attribute is ").concat(n,"."))},r=0,s=["AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS"];r<s.length;r++)n()}(t,o,r),o.isIFrameOnly=n,o}function k(e,t){if(e.method!==t.method)return!1;if(e.uri!==t.uri)return!1;if(e.iv){if(!t.iv)return!1;if(e.iv.length!==t.iv.length)return!1;for(var i=0;i<e.iv.length;i++)if(e.iv[i]!==t.iv[i])return!1}else if(t.iv)return!1;return e.format===t.format&&e.formatVersion===t.formatVersion}function B(e,t,i,n,r,s,a){for(var o=new b({uri:t,mediaSequenceNumber:r,discontinuitySequence:s}),d=!1,h=!1,u=i;u<=n;u++){var c=e[u],v=c.name,y=c.value,E=c.attributes;if("EXTINF"===v)!Number.isInteger(y.duration)&&a.compatibleVersion<3&&(a.compatibleVersion=3),Math.round(y.duration)>a.targetDuration&&l.INVALIDPLAYLIST("EXTINF duration, when rounded to the nearest integer, MUST be less than or equal to the target duration"),o.duration=y.duration,o.title=y.title;else if("EXT-X-BYTERANGE"===v)a.compatibleVersion<4&&(a.compatibleVersion=4),o.byterange=y;else if("EXT-X-DISCONTINUITY"===v)o.parts.length>0&&l.INVALIDPLAYLIST("EXT-X-DISCONTINUITY must appear before the first EXT-X-PART tag of the Parent Segment."),o.discontinuity=!0;else if("EXT-X-KEY"===v)o.parts.length>0&&l.INVALIDPLAYLIST("EXT-X-KEY must appear before the first EXT-X-PART tag of the Parent Segment."),C(a,E),o.key=new p({method:E.METHOD,uri:E.URI,iv:E.IV,format:E.KEYFORMAT,formatVersion:E.KEYFORMATVERSIONS});else if("EXT-X-MAP"===v)o.parts.length>0&&l.INVALIDPLAYLIST("EXT-X-MAP must appear before the first EXT-X-PART tag of the Parent Segment."),a.compatibleVersion<5&&(a.compatibleVersion=5),a.hasMap=!0,o.map=new g({uri:E.URI,byterange:E.BYTERANGE});else if("EXT-X-PROGRAM-DATE-TIME"===v)o.programDateTime=y;else if("EXT-X-DATERANGE"===v){for(var T={},w=0,_=Object.keys(E);w<_.length;w++){var A=_[w];(A.startsWith("SCTE35-")||A.startsWith("X-"))&&(T[A]=E[A])}o.dateRange=new f({id:E.ID,classId:E.CLASS,start:E["START-DATE"],end:E["END-DATE"],duration:E.DURATION,plannedDuration:E["PLANNED-DURATION"],endOnNext:E["END-ON-NEXT"],attributes:T})}else if("EXT-X-CUE-OUT"===v)o.markers.push(new m({type:"OUT",duration:E&&E.DURATION||y}));else if("EXT-X-CUE-IN"===v)o.markers.push(new m({type:"IN"}));else if("EXT-X-CUE-OUT-CONT"===v||"EXT-X-CUE"===v||"EXT-OATCLS-SCTE35"===v||"EXT-X-ASSET"===v||"EXT-X-SCTE35"===v)o.markers.push(new m({type:"RAW",tagName:v,value:y}));else if("EXT-X-PRELOAD-HINT"!==v||E.TYPE)if("EXT-X-PRELOAD-HINT"===v&&"PART"===E.TYPE&&h)l.INVALIDPLAYLIST("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist.");else if("EXT-X-PART"!==v&&"EXT-X-PRELOAD-HINT"!==v||E.URI){if("EXT-X-PRELOAD-HINT"===v&&"MAP"===E.TYPE)d&&l.INVALIDPLAYLIST("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist."),d=!0,a.hasMap=!0,o.map=new g({hint:!0,uri:E.URI,byterange:{length:E["BYTERANGE-LENGTH"],offset:E["BYTERANGE-START"]||0}});else if("EXT-X-PART"===v||"EXT-X-PRELOAD-HINT"===v&&"PART"===E.TYPE){"EXT-X-PART"!==v||E.DURATION||l.INVALIDPLAYLIST("EXT-X-PART: DURATION attribute is mandatory"),"EXT-X-PRELOAD-HINT"===v&&(h=!0);var P=new S({hint:"EXT-X-PRELOAD-HINT"===v,uri:E.URI,byterange:"EXT-X-PART"===v?E.BYTERANGE:{length:E["BYTERANGE-LENGTH"],offset:E["BYTERANGE-START"]||0},duration:E.DURATION,independent:E.INDEPENDENT,gap:E.GAP});o.parts.push(P)}}else l.INVALIDPLAYLIST("EXT-X-PART / EXT-X-PRELOAD-HINT: URI attribute is mandatory");else l.INVALIDPLAYLIST("EXT-X-PRELOAD-HINT: TYPE attribute is mandatory")}return o}function x(e,t,i,n,r,s,a){for(var o=new E({uri:t,mediaSequenceNumber:r,discontinuitySequence:s}),d=i;d<=n;d++){var h=e[d],u=h.name,c=h.attributes;"EXTINF"===u?l.INVALIDPLAYLIST("A prefetch segment must not be advertised with an EXTINF tag."):"EXT-X-DISCONTINUITY"===u?l.INVALIDPLAYLIST("A prefetch segment must not be advertised with an EXT-X-DISCONTINUITY tag."):"EXT-X-PREFETCH-DISCONTINUITY"===u?o.discontinuity=!0:"EXT-X-KEY"===u?(C(a,c),o.key=new p({method:c.METHOD,uri:c.URI,iv:c.IV,format:c.KEYFORMAT,formatVersion:c.KEYFORMATVERSIONS})):"EXT-X-MAP"===u&&l.INVALIDPLAYLIST("Prefetch segments must not be advertised with an EXT-X-MAP tag.")}return o}function M(e,t,i,n,r){var s=t.discontinuity,a=t.key,o=t.map,d=t.byterange,h=t.uri;if(s&&(t.discontinuitySequence=i+1),a||(t.key=n),o||(t.map=r),d&&-1===d.offset){var u=e.segments;if(u.length>0){var c=u[u.length-1];c.byterange&&c.uri===h?d.offset=c.byterange.offset+c.byterange.length:l.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST be a sub-range of the same media resource")}else l.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST appear in the Playlist file")}return e.segments.push(t),[t.discontinuitySequence,t.key,t.map]}function U(e,t){var i=function(e){var t=e.indexOf(":");return-1===t?[e.slice(1).trim(),null]:[e.slice(1,t).trim(),e.slice(t+1).trim()]}(e),r=n(i,2),s=r[0],a=r[1],o=function(e){switch(e){case"EXTM3U":case"EXT-X-VERSION":return"Basic";case"EXTINF":case"EXT-X-BYTERANGE":case"EXT-X-DISCONTINUITY":case"EXT-X-PREFETCH-DISCONTINUITY":case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-PROGRAM-DATE-TIME":case"EXT-X-DATERANGE":case"EXT-X-CUE-OUT":case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT-CONT":case"EXT-X-CUE":case"EXT-OATCLS-SCTE35":case"EXT-X-ASSET":case"EXT-X-SCTE35":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":return"Segment";case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-ENDLIST":case"EXT-X-PLAYLIST-TYPE":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PREFETCH":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return"MediaPlaylist";case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":return"MasterPlaylist";case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-START":return"MediaorMasterPlaylist";default:return"Unknown"}}(s);if(function(e,t){if("Segment"===e||"MediaPlaylist"===e)return void 0===t.isMasterPlaylist?void(t.isMasterPlaylist=!1):void(t.isMasterPlaylist&&D());if("MasterPlaylist"===e){if(void 0===t.isMasterPlaylist)return void(t.isMasterPlaylist=!0);!1===t.isMasterPlaylist&&D()}}(o,t),"Unknown"===o)return null;"MediaPlaylist"===o&&"EXT-X-RENDITION-REPORT"!==s&&"EXT-X-PREFETCH"!==s&&(t.hash[s]&&l.INVALIDPLAYLIST("There MUST NOT be more than one Media Playlist tag of each type in any Media Playlist"),t.hash[s]=!0);var d=function(e,t){switch(e){case"EXTM3U":case"EXT-X-DISCONTINUITY":case"EXT-X-ENDLIST":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-CUE-IN":return[null,null];case"EXT-X-VERSION":case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":return[l.toNumber(t),null];case"EXT-X-CUE-OUT":return Number.isNaN(Number(t))?[null,N(t)]:[l.toNumber(t),null];case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-DATERANGE":case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":case"EXT-X-START":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return[null,N(t)];case"EXTINF":return[_(t),null];case"EXT-X-BYTERANGE":return[A(t),null];case"EXT-X-PROGRAM-DATE-TIME":return[new Date(t),null];default:return[t,null]}}(s,a),h=n(d,2);return{name:s,category:o,value:h[0],attributes:h[1]}}function V(e,t){var i;return t.isMasterPlaylist?i=function(e,t){var i,r=new v,a=!1,o=s(e.entries());try{for(o.s();!(i=o.n()).done;){var d=n(i.value,2),h=d[0],u=d[1],g=u.name,f=u.value,m=u.attributes;if("EXT-X-VERSION"===g)r.version=f;else if("EXT-X-STREAM-INF"===g){var y=e[h+1];("string"!=typeof y||y.startsWith("#EXT"))&&l.INVALIDPLAYLIST("EXT-X-STREAM-INF must be followed by a URI line");var b=O(e,m,y,!1,t);b&&("number"==typeof b.score&&(a=!0,b.score<0&&l.INVALIDPLAYLIST("SCORE attribute on EXT-X-STREAM-INF must be positive decimal-floating-point number.")),r.variants.push(b))}else if("EXT-X-I-FRAME-STREAM-INF"===g){var S=O(e,m,m.URI,!0,t);S&&r.variants.push(S)}else"EXT-X-SESSION-DATA"===g?function(){var e=new c({id:m["DATA-ID"],value:m.VALUE,uri:m.URI,language:m.LANGUAGE});r.sessionDataList.some((function(t){return t.id===e.id&&t.language===e.language}))&&l.INVALIDPLAYLIST("A Playlist MUST NOT contain more than one EXT-X-SESSION-DATA tag with the same DATA-ID attribute and the same LANGUAGE attribute."),r.sessionDataList.push(e)}():"EXT-X-SESSION-KEY"===g?function(){"NONE"===m.METHOD&&l.INVALIDPLAYLIST("EXT-X-SESSION-KEY: The value of the METHOD attribute MUST NOT be NONE");var e=new p({method:m.METHOD,uri:m.URI,iv:m.IV,format:m.KEYFORMAT,formatVersion:m.KEYFORMATVERSIONS});r.sessionKeyList.some((function(t){return k(t,e)}))&&l.INVALIDPLAYLIST("A Master Playlist MUST NOT contain more than one EXT-X-SESSION-KEY tag with the same METHOD, URI, IV, KEYFORMAT, and KEYFORMATVERSIONS attribute values."),C(t,m),r.sessionKeyList.push(e)}():"EXT-X-INDEPENDENT-SEGMENTS"===g?(r.independentSegments&&l.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist"),r.independentSegments=!0):"EXT-X-START"===g&&(r.start&&l.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist"),"number"!=typeof m["TIME-OFFSET"]&&l.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED"),r.start={offset:m["TIME-OFFSET"],precise:m.PRECISE||!1})}}catch(e){o.e(e)}finally{o.f()}if(a){var E,T=s(r.variants);try{for(T.s();!(E=T.n()).done;)"number"!=typeof E.value.score&&l.INVALIDPLAYLIST("If any Variant Stream contains the SCORE attribute, then all Variant Streams in the Master Playlist SHOULD have a SCORE attribute")}catch(e){T.e(e)}finally{T.f()}}if(t.isClosedCaptionsNone){var w,_=s(r.variants);try{for(_.s();!(w=_.n()).done;)w.value.closedCaptions.length>0&&l.INVALIDPLAYLIST("If there is a variant with CLOSED-CAPTIONS attribute of NONE, all EXT-X-STREAM-INF tags MUST have this attribute with a value of NONE")}catch(e){_.e(e)}finally{_.f()}}return r}(e,t):!(i=function(e,t){var i,r=new y,a=-1,o=0,d=!1,h=!1,u=0,c=null,p=null,g=!1,f=s(e.entries());try{for(f.s();!(i=f.n()).done;){var m=n(i.value,2),v=m[0],b=m[1],S=b.name,E=b.value,w=b.attributes;if("Segment"!==b.category){if("EXT-X-VERSION"===S)void 0===r.version?r.version=E:l.INVALIDPLAYLIST("A Playlist file MUST NOT contain more than one EXT-X-VERSION tag.");else if("EXT-X-TARGETDURATION"===S)r.targetDuration=t.targetDuration=E;else if("EXT-X-MEDIA-SEQUENCE"===S)r.segments.length>0&&l.INVALIDPLAYLIST("The EXT-X-MEDIA-SEQUENCE tag MUST appear before the first Media Segment in the Playlist."),r.mediaSequenceBase=o=E;else if("EXT-X-DISCONTINUITY-SEQUENCE"===S)r.segments.length>0&&l.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before the first Media Segment in the Playlist."),d&&l.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before any EXT-X-DISCONTINUITY tag."),r.discontinuitySequenceBase=u=E;else if("EXT-X-ENDLIST"===S)r.endlist=!0;else if("EXT-X-PLAYLIST-TYPE"===S)r.playlistType=E;else if("EXT-X-I-FRAMES-ONLY"===S)t.compatibleVersion<4&&(t.compatibleVersion=4),r.isIFrame=!0;else if("EXT-X-INDEPENDENT-SEGMENTS"===S)r.independentSegments&&l.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist"),r.independentSegments=!0;else if("EXT-X-START"===S)r.start&&l.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist"),"number"!=typeof w["TIME-OFFSET"]&&l.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED"),r.start={offset:w["TIME-OFFSET"],precise:w.PRECISE||!1};else if("EXT-X-SERVER-CONTROL"===S)w["CAN-BLOCK-RELOAD"]||l.INVALIDPLAYLIST("EXT-X-SERVER-CONTROL: CAN-BLOCK-RELOAD=YES is mandatory for Low-Latency HLS"),r.lowLatencyCompatibility={canBlockReload:w["CAN-BLOCK-RELOAD"],canSkipUntil:w["CAN-SKIP-UNTIL"],holdBack:w["HOLD-BACK"],partHoldBack:w["PART-HOLD-BACK"]};else if("EXT-X-PART-INF"===S)w["PART-TARGET"]||l.INVALIDPLAYLIST("EXT-X-PART-INF: PART-TARGET attribute is mandatory"),r.partTargetDuration=w["PART-TARGET"];else if("EXT-X-RENDITION-REPORT"===S)w.URI||l.INVALIDPLAYLIST("EXT-X-RENDITION-REPORT: URI attribute is mandatory"),0===w.URI.search(/^[a-z]+:/)&&l.INVALIDPLAYLIST("EXT-X-RENDITION-REPORT: URI must be relative to the playlist uri"),r.renditionReports.push(new T({uri:w.URI,lastMSN:w["LAST-MSN"],lastPart:w["LAST-PART"]}));else if("EXT-X-SKIP"===S)w["SKIPPED-SEGMENTS"]||l.INVALIDPLAYLIST("EXT-X-SKIP: SKIPPED-SEGMENTS attribute is mandatory"),t.compatibleVersion<9&&(t.compatibleVersion=9),r.skip=w["SKIPPED-SEGMENTS"],o+=r.skip;else if("EXT-X-PREFETCH"===S){var _=x(e,E,-1===a?v:a,v-1,o++,u,t);_&&(_.discontinuity&&(_.discontinuitySequence++,u=_.discontinuitySequence),_.key?c=_.key:_.key=c,r.prefetchSegments.push(_)),h=!0,a=-1}else if("string"==typeof b){-1===a&&l.INVALIDPLAYLIST("A URI line is not preceded by any segment tags"),r.targetDuration||l.INVALIDPLAYLIST("The EXT-X-TARGETDURATION tag is REQUIRED"),h&&l.INVALIDPLAYLIST("These segments must appear after all complete segments.");var A=B(e,b,a,v-1,o++,u,t);if(A){var P=n(M(r,A,u,c,p),3);u=P[0],c=P[1],p=P[2],!g&&A.parts.length>0&&(g=!0)}a=-1}}else-1===a&&(a=v),"EXT-X-DISCONTINUITY"===S&&(d=!0)}}catch(e){f.e(e)}finally{f.f()}if(-1!==a){var I=B(e,"",a,e.length-1,o++,u,t);if(I){var R=I.parts;R.length>0&&!r.endlist&&!R[R.length-1].hint&&l.INVALIDPLAYLIST("If the Playlist contains EXT-X-PART tags and does not contain an EXT-X-ENDLIST tag, the Playlist must contain an EXT-X-PRELOAD-HINT tag with a TYPE=PART attribute"),M(r,I,c,p),!g&&I.parts.length>0&&(g=!0)}}return function(e){for(var t=new Map,i=new Map,n=!1,r=!1,a=e.length-1;a>=0;a--){var o=e[a],d=o.programDateTime,h=o.dateRange;if(d&&(r=!0),h&&h.start){n=!0,h.endOnNext&&(h.end||h.duration)&&l.INVALIDPLAYLIST("An EXT-X-DATERANGE tag with an END-ON-NEXT=YES attribute MUST NOT contain DURATION or END-DATE attributes.");var u=h.start.getTime(),c=h.duration||0;h.end&&h.duration&&u+1e3*c!==h.end.getTime()&&l.INVALIDPLAYLIST("END-DATE MUST be equal to the value of the START-DATE attribute plus the value of the DURATION"),h.endOnNext&&(h.end=t.get(h.classId)),t.set(h.classId,h.start);var p=h.end?h.end.getTime():h.start.getTime()+1e3*(h.duration||0),g=i.get(h.classId);if(g){var f,m=s(g);try{for(m.s();!(f=m.n()).done;){var v=f.value;(v.start<=u&&v.end>u||v.start>=u&&v.start<p)&&l.INVALIDPLAYLIST("DATERANGE tags with the same CLASS should not overlap")}}catch(e){m.e(e)}finally{m.f()}g.push({start:u,end:p})}else i.set(h.classId,[{start:u,end:p}])}}n&&!r&&l.INVALIDPLAYLIST("If a Playlist contains an EXT-X-DATERANGE tag, it MUST also contain at least one EXT-X-PROGRAM-DATE-TIME tag.")}(r.segments),r.lowLatencyCompatibility&&function(e,t){var i=e.lowLatencyCompatibility,r=e.targetDuration,a=e.partTargetDuration,o=e.segments,d=e.renditionReports,h=i.canSkipUntil,u=i.holdBack,c=i.partHoldBack;if(h<6*r&&l.INVALIDPLAYLIST("The Skip Boundary must be at least six times the EXT-X-TARGETDURATION."),u<3*r&&l.INVALIDPLAYLIST("HOLD-BACK must be at least three times the EXT-X-TARGETDURATION."),t){void 0===a&&l.INVALIDPLAYLIST("EXT-X-PART-INF is required if a Playlist contains one or more EXT-X-PART tags"),void 0===c&&l.INVALIDPLAYLIST("EXT-X-PART: PART-HOLD-BACK attribute is mandatory"),c<a&&l.INVALIDPLAYLIST("PART-HOLD-BACK must be at least PART-TARGET");var p,g=s(o.entries());try{for(g.s();!(p=g.n()).done;){var f=n(p.value,2),m=f[0],v=f[1].parts;v.length>0&&m<o.length-3&&l.INVALIDPLAYLIST("Remove EXT-X-PART tags from the Playlist after they are greater than three target durations from the end of the Playlist.");var y,b=s(v.entries());try{for(b.s();!(y=b.n()).done;){var S=n(y.value,2),E=S[0],T=S[1].duration;void 0!==T&&(T>a&&l.INVALIDPLAYLIST("PART-TARGET is the maximum duration of any Partial Segment"),E<v.length-1&&T<.85*a&&l.INVALIDPLAYLIST("All Partial Segments except the last part of a segment must have a duration of at least 85% of PART-TARGET"))}}catch(e){b.e(e)}finally{b.f()}}}catch(e){g.e(e)}finally{g.f()}}var w,_=s(d);try{for(_.s();!(w=_.n()).done;){var A=w.value,P=o[o.length-1];A.lastMSN||(A.lastMSN=P.mediaSequenceNumber),!A.lastPart&&P.parts.length>0&&(A.lastPart=P.parts.length-1)}}catch(e){_.e(e)}finally{_.f()}}(r,g),r}(e,t)).isIFrame&&t.hasMap&&t.compatibleVersion<6&&(t.compatibleVersion=6),t.compatibleVersion>1&&(!i.version||i.version<t.compatibleVersion)&&l.INVALIDPLAYLIST("EXT-X-VERSION needs to be ".concat(t.compatibleVersion," or higher.")),i}e.exports=function(e){var t={version:void 0,isMasterPlaylist:void 0,hasMap:!1,targetDuration:0,compatibleVersion:1,isClosedCaptionsNone:!1,hash:{}},i=function(e,t){var i,n=[],a=s(e.split("\n"));try{for(a.s();!(i=a.n()).done;){var o=i.value,d=r.from(o.trim()).toString();if(d)if(d.startsWith("#")){if(d.startsWith("#EXT")){var h=U(d,t);h&&n.push(h)}}else n.push(d)}}catch(e){a.e(e)}finally{a.f()}return 0!==n.length&&"EXTM3U"===n[0].name||l.INVALIDPLAYLIST("The EXTM3U tag MUST be the first line."),n}(e,t),n=V(i,t);return n.source=e,n}},367:(e,t,i)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s,a,o=[],l=!0,d=!1;try{if(s=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=s.call(i)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(d)throw r}}return o}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw s}}}}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function l(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(s=function(e){if("object"!==n(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===n(s)?s:String(s)),r)}var s}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}},d.apply(this,arguments)}function h(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,f(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},u(e)}function c(e,t,i){return c=p()?Reflect.construct.bind():function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&g(r,i.prototype),r},c.apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var m=i(771),v=["#EXTINF","#EXT-X-BYTERANGE","#EXT-X-DISCONTINUITY","#EXT-X-STREAM-INF","#EXT-X-CUE-OUT","#EXT-X-CUE-IN","#EXT-X-KEY","#EXT-X-MAP"],y=["#EXT-X-MEDIA"],b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,i,n,r,s=(t=a,i=p(),function(){var e,n=f(t);if(i){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this)).baseUri=e,t}return n=a,r=[{key:"push",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(var r=function(){var t=o[s];if(!t.startsWith("#"))return d(f(a.prototype),"push",e).call(e,t),"continue";if(v.some((function(e){return t.startsWith(e)})))return d(f(a.prototype),"push",e).call(e,t),"continue";if(e.includes(t)){if(y.some((function(e){return t.startsWith(e)})))return"continue";m.INVALIDPLAYLIST("Redundant item (".concat(t,")"))}d(f(a.prototype),"push",e).call(e,t)},s=0,o=i;s<o.length;s++)r()}}],r&&l(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),a}(u(Array));function S(e,t){var i=1e3;t&&(i=Math.pow(10,t));var n=Math.round(e*i)/i;return t?n.toFixed(t):n}function E(e){var t=['DATA-ID="'.concat(e.id,'"')];return e.language&&t.push('LANGUAGE="'.concat(e.language,'"')),e.value?t.push('VALUE="'.concat(e.value,'"')):e.uri&&t.push('URI="'.concat(e.uri,'"')),"#EXT-X-SESSION-DATA:".concat(t.join(","))}function T(e,t){var i=t?"#EXT-X-SESSION-KEY":"#EXT-X-KEY",n=["METHOD=".concat(e.method)];return e.uri&&n.push('URI="'.concat(e.uri,'"')),e.iv&&(16!==e.iv.length&&m.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),n.push("IV=".concat(m.byteSequenceToHex(e.iv)))),e.format&&n.push('KEYFORMAT="'.concat(e.format,'"')),e.formatVersion&&n.push('KEYFORMATVERSIONS="'.concat(e.formatVersion,'"')),"".concat(i,":").concat(n.join(","))}function w(e,t){var i=t.isIFrameOnly?"#EXT-X-I-FRAME-STREAM-INF":"#EXT-X-STREAM-INF",n=["BANDWIDTH=".concat(t.bandwidth)];if(t.averageBandwidth&&n.push("AVERAGE-BANDWIDTH=".concat(t.averageBandwidth)),t.isIFrameOnly&&n.push('URI="'.concat(t.uri,'"')),t.codecs&&n.push('CODECS="'.concat(t.codecs,'"')),t.resolution&&n.push("RESOLUTION=".concat(t.resolution.width,"x").concat(t.resolution.height)),t.frameRate&&n.push("FRAME-RATE=".concat(S(t.frameRate,3))),t.hdcpLevel&&n.push("HDCP-LEVEL=".concat(t.hdcpLevel)),t.audio.length>0){n.push('AUDIO="'.concat(t.audio[0].groupId,'"'));var r,a=s(t.audio);try{for(a.s();!(r=a.n()).done;){var o=r.value;e.push(_(o))}}catch(e){a.e(e)}finally{a.f()}}if(t.video.length>0){n.push('VIDEO="'.concat(t.video[0].groupId,'"'));var l,d=s(t.video);try{for(d.s();!(l=d.n()).done;){var h=l.value;e.push(_(h))}}catch(e){d.e(e)}finally{d.f()}}if(t.subtitles.length>0){n.push('SUBTITLES="'.concat(t.subtitles[0].groupId,'"'));var u,c=s(t.subtitles);try{for(c.s();!(u=c.n()).done;){var p=u.value;e.push(_(p))}}catch(e){c.e(e)}finally{c.f()}}if(m.getOptions().allowClosedCaptionsNone&&0===t.closedCaptions.length)n.push("CLOSED-CAPTIONS=NONE");else if(t.closedCaptions.length>0){n.push('CLOSED-CAPTIONS="'.concat(t.closedCaptions[0].groupId,'"'));var g,f=s(t.closedCaptions);try{for(f.s();!(g=f.n()).done;){var v=g.value;e.push(_(v))}}catch(e){f.e(e)}finally{f.f()}}if(t.score&&n.push("SCORE=".concat(t.score)),t.allowedCpc){var y,b=[],E=s(t.allowedCpc);try{for(E.s();!(y=E.n()).done;){var T=y.value,w=T.format,A=T.cpcList;b.push("".concat(w,":").concat(A.join("/")))}}catch(e){E.e(e)}finally{E.f()}n.push('ALLOWED-CPC="'.concat(b.join(","),'"'))}t.videoRange&&n.push("VIDEO-RANGE=".concat(t.videoRange)),t.stableVariantId&&n.push('STABLE-VARIANT-ID="'.concat(t.stableVariantId,'"')),e.push("".concat(i,":").concat(n.join(","))),t.isIFrameOnly||e.push("".concat(t.uri))}function _(e){var t=["TYPE=".concat(e.type),'GROUP-ID="'.concat(e.groupId,'"'),'NAME="'.concat(e.name,'"')];return void 0!==e.isDefault&&t.push("DEFAULT=".concat(e.isDefault?"YES":"NO")),void 0!==e.autoselect&&t.push("AUTOSELECT=".concat(e.autoselect?"YES":"NO")),void 0!==e.forced&&t.push("FORCED=".concat(e.forced?"YES":"NO")),e.language&&t.push('LANGUAGE="'.concat(e.language,'"')),e.assocLanguage&&t.push('ASSOC-LANGUAGE="'.concat(e.assocLanguage,'"')),e.instreamId&&t.push('INSTREAM-ID="'.concat(e.instreamId,'"')),e.characteristics&&t.push('CHARACTERISTICS="'.concat(e.characteristics,'"')),e.channels&&t.push('CHANNELS="'.concat(e.channels,'"')),e.uri&&t.push('URI="'.concat(e.uri,'"')),"#EXT-X-MEDIA:".concat(t.join(","))}function A(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=!1,a="";if(t.discontinuity&&e.push("#EXT-X-DISCONTINUITY"),t.key){var o=T(t.key);o!==i&&(e.push(o),i=o)}if(t.map){var l=function(e){var t=['URI="'.concat(e.uri,'"')];return e.byterange&&t.push('BYTERANGE="'.concat(P(e.byterange),'"')),"#EXT-X-MAP:".concat(t.join(","))}(t.map);l!==n&&(e.push(l),n=l)}if(t.programDateTime&&e.push("#EXT-X-PROGRAM-DATE-TIME:".concat(m.formatDate(t.programDateTime))),t.dateRange&&e.push(function(e){var t=['ID="'.concat(e.id,'"')];e.start&&t.push('START-DATE="'.concat(m.formatDate(e.start),'"')),e.end&&t.push('END-DATE="'.concat(e.end,'"')),e.duration&&t.push("DURATION=".concat(e.duration)),e.plannedDuration&&t.push("PLANNED-DURATION=".concat(e.plannedDuration)),e.classId&&t.push('CLASS="'.concat(e.classId,'"')),e.endOnNext&&t.push("END-ON-NEXT=YES");for(var i=0,n=Object.keys(e.attributes);i<n.length;i++){var r=n[i];r.startsWith("X-")?"number"==typeof e.attributes[r]?t.push("".concat(r,"=").concat(e.attributes[r])):t.push("".concat(r,'="').concat(e.attributes[r],'"')):r.startsWith("SCTE35-")&&t.push("".concat(r,"=").concat(m.byteSequenceToHex(e.attributes[r])))}return"#EXT-X-DATERANGE:".concat(t.join(","))}(t.dateRange)),t.markers.length>0&&(a=I(e,t.markers)),t.parts.length>0&&(s=R(e,t.parts)),s)return[i,n];var d=r<3?Math.round(t.duration):S(t.duration,function(e){var t=e.toString(10),i=t.indexOf(".");return-1===i?0:t.length-i-1}(t.duration));return e.push("#EXTINF:".concat(d,",").concat(unescape(encodeURIComponent(t.title||"")))),t.byterange&&e.push("#EXT-X-BYTERANGE:".concat(P(t.byterange))),Array.prototype.push.call(e,"".concat(t.uri)),[i,n,a]}function P(e){var t=e.offset,i=e.length;return"".concat(i,"@").concat(t)}function I(e,t){var i,n="",r=s(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;if("OUT"===a.type)n="OUT",e.push("#EXT-X-CUE-OUT:DURATION=".concat(a.duration));else if("IN"===a.type)n="IN",e.push("#EXT-X-CUE-IN");else if("RAW"===a.type){var o=a.value?":".concat(a.value):"";e.push("#".concat(a.tagName).concat(o))}}}catch(e){r.e(e)}finally{r.f()}return n}function R(e,t){var i,n=!1,r=s(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.hint){var o=[];if(o.push("TYPE=PART",'URI="'.concat(a.uri,'"')),a.byterange){var l=a.byterange,d=l.offset,h=l.length;o.push("BYTERANGE-START=".concat(d)),h&&o.push("BYTERANGE-LENGTH=".concat(h))}e.push("#EXT-X-PRELOAD-HINT:".concat(o.join(","))),n=!0}else{var u=[];u.push("DURATION=".concat(a.duration),'URI="'.concat(a.uri,'"')),a.byterange&&u.push("BYTERANGE=".concat(P(a.byterange))),a.independent&&u.push("INDEPENDENT=YES"),a.gap&&u.push("GAP=YES"),e.push("#EXT-X-PART:".concat(u.join(",")))}}}catch(e){r.e(e)}finally{r.f()}return n}e.exports=function(e){m.PARAMCHECK(e),m.ASSERT("Not a playlist","playlist"===e.type);var t=new b(e.uri);return t.push("#EXTM3U"),e.version&&t.push("#EXT-X-VERSION:".concat(e.version)),e.independentSegments&&t.push("#EXT-X-INDEPENDENT-SEGMENTS"),e.start&&t.push("#EXT-X-START:TIME-OFFSET=".concat(S(e.start.offset)).concat(e.start.precise?",PRECISE=YES":"")),e.isMasterPlaylist?function(e,t){var i,n=s(t.sessionDataList);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.push(E(r))}}catch(e){n.e(e)}finally{n.f()}var a,o=s(t.sessionKeyList);try{for(o.s();!(a=o.n()).done;){var l=a.value;e.push(T(l,!0))}}catch(e){o.e(e)}finally{o.f()}var d,h=s(t.variants);try{for(h.s();!(d=h.n()).done;)w(e,d.value)}catch(e){h.e(e)}finally{h.f()}}(t,e):function(e,t){var i="",n="",a=!1;if(t.targetDuration&&e.push("#EXT-X-TARGETDURATION:".concat(t.targetDuration)),t.lowLatencyCompatibility){var o=t.lowLatencyCompatibility,l=o.canBlockReload,d=o.canSkipUntil,h=o.holdBack,u=o.partHoldBack,c=[];c.push("CAN-BLOCK-RELOAD=".concat(l?"YES":"NO")),void 0!==d&&c.push("CAN-SKIP-UNTIL=".concat(d)),void 0!==h&&c.push("HOLD-BACK=".concat(h)),void 0!==u&&c.push("PART-HOLD-BACK=".concat(u)),e.push("#EXT-X-SERVER-CONTROL:".concat(c.join(",")))}t.partTargetDuration&&e.push("#EXT-X-PART-INF:PART-TARGET=".concat(t.partTargetDuration)),t.mediaSequenceBase&&e.push("#EXT-X-MEDIA-SEQUENCE:".concat(t.mediaSequenceBase)),t.discontinuitySequenceBase&&e.push("#EXT-X-DISCONTINUITY-SEQUENCE:".concat(t.discontinuitySequenceBase)),t.playlistType&&e.push("#EXT-X-PLAYLIST-TYPE:".concat(t.playlistType)),t.isIFrame&&e.push("#EXT-X-I-FRAMES-ONLY"),t.skip>0&&e.push("#EXT-X-SKIP:SKIPPED-SEGMENTS=".concat(t.skip));var p,g=s(t.segments);try{for(g.s();!(p=g.n()).done;){var f,v=r(A(e,p.value,i,n,t.version),3);i=v[0],n=v[1],"OUT"===(f=v[2])?a=!0:"IN"===f&&a&&(a=!1)}}catch(e){g.e(e)}finally{g.f()}"VOD"===t.playlistType&&a&&e.push("#EXT-X-CUE-IN"),t.prefetchSegments.length>2&&m.INVALIDPLAYLIST("The server must deliver no more than two prefetch segments");var y,b=s(t.prefetchSegments);try{for(b.s();!(y=b.n()).done;){var S=y.value;S.discontinuity&&e.push("#EXT-X-PREFETCH-DISCONTINUITY"),e.push("#EXT-X-PREFETCH:".concat(S.uri))}}catch(e){b.e(e)}finally{b.f()}t.endlist&&e.push("#EXT-X-ENDLIST");var E,T=s(t.renditionReports);try{for(T.s();!(E=T.n()).done;){var w=E.value,_=[];_.push('URI="'.concat(w.uri,'"'),"LAST-MSN=".concat(w.lastMSN)),void 0!==w.lastPart&&_.push("LAST-PART=".concat(w.lastPart)),e.push("#EXT-X-RENDITION-REPORT:".concat(_.join(",")))}}catch(e){T.e(e)}finally{T.f()}}(t,e),t.join("\n")}},890:(e,t,i)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=l(e);if(t){var r=l(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return o(this,i)}}function o(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(s=function(e){if("object"!==n(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===n(s)?s:String(s)),r)}var s}function h(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=i(771),p=h((function e(t){var i=t.type,n=t.uri,r=t.groupId,s=t.language,a=t.assocLanguage,o=t.name,l=t.isDefault,d=t.autoselect,h=t.forced,p=t.instreamId,g=t.characteristics,f=t.channels;u(this,e),c.PARAMCHECK(i,r,o),c.CONDITIONALASSERT(["SUBTITLES"===i,n],["CLOSED-CAPTIONS"===i,p],["CLOSED-CAPTIONS"===i,!n],[h,"SUBTITLES"===i]),this.type=i,this.uri=n,this.groupId=r,this.language=s,this.assocLanguage=a,this.name=o,this.isDefault=l,this.autoselect=d,this.forced=h,this.instreamId=p,this.characteristics=g,this.channels=f})),g=h((function e(t){var i=t.uri,n=t.isIFrameOnly,r=void 0!==n&&n,s=t.bandwidth,a=t.averageBandwidth,o=t.score,l=t.codecs,d=t.resolution,h=t.frameRate,p=t.hdcpLevel,g=t.allowedCpc,f=t.videoRange,m=t.stableVariantId,v=t.audio,y=void 0===v?[]:v,b=t.video,S=void 0===b?[]:b,E=t.subtitles,T=void 0===E?[]:E,w=t.closedCaptions,_=void 0===w?[]:w,A=t.currentRenditions,P=void 0===A?{audio:0,video:0,subtitles:0,closedCaptions:0}:A;u(this,e),c.PARAMCHECK(i,s),this.uri=i,this.isIFrameOnly=r,this.bandwidth=s,this.averageBandwidth=a,this.score=o,this.codecs=l,this.resolution=d,this.frameRate=h,this.hdcpLevel=p,this.allowedCpc=g,this.videoRange=f,this.stableVariantId=m,this.audio=y,this.video=S,this.subtitles=T,this.closedCaptions=_,this.currentRenditions=P})),f=h((function e(t){var i=t.id,n=t.value,r=t.uri,s=t.language;u(this,e),c.PARAMCHECK(i,n||r),c.ASSERT("SessionData cannot have both value and uri, shoud be either.",!(n&&r)),this.id=i,this.value=n,this.uri=r,this.language=s})),m=h((function e(t){var i=t.method,n=t.uri,r=t.iv,s=t.format,a=t.formatVersion;u(this,e),c.PARAMCHECK(i),c.CONDITIONALPARAMCHECK(["NONE"!==i,n]),c.CONDITIONALASSERT(["NONE"===i,!(n||r||s||a)]),this.method=i,this.uri=n,this.iv=r,this.format=s,this.formatVersion=a})),v=h((function e(t){var i=t.hint,n=void 0!==i&&i,r=t.uri,s=t.mimeType,a=t.byterange;u(this,e),c.PARAMCHECK(r),this.hint=n,this.uri=r,this.mimeType=s,this.byterange=a})),y=h((function e(t){var i=t.id,n=t.classId,r=t.start,s=t.end,a=t.duration,o=t.plannedDuration,l=t.endOnNext,d=t.attributes,h=void 0===d?{}:d;u(this,e),c.PARAMCHECK(i),c.CONDITIONALPARAMCHECK([!0===l,n]),c.CONDITIONALASSERT([s,r],[s,r<=s],[a,a>=0],[o,o>=0]),this.id=i,this.classId=n,this.start=r,this.end=s,this.duration=a,this.plannedDuration=o,this.endOnNext=l,this.attributes=h})),b=h((function e(t){var i=t.type,n=t.duration,r=t.tagName,s=t.value;u(this,e),c.PARAMCHECK(i),c.CONDITIONALPARAMCHECK(["OUT"===i,n]),c.CONDITIONALPARAMCHECK(["RAW"===i,r]),this.type=i,this.duration=n,this.tagName=r,this.value=s})),S=h((function e(t){u(this,e),c.PARAMCHECK(t),this.type=t})),E=function(e){r(i,e);var t=a(i);function i(e){var n,r=e.isMasterPlaylist,s=e.uri,a=e.version,o=e.independentSegments,l=void 0!==o&&o,d=e.start,h=e.source;return u(this,i),n=t.call(this,"playlist"),c.PARAMCHECK(r),n.isMasterPlaylist=r,n.uri=s,n.version=a,n.independentSegments=l,n.start=d,n.source=h,n}return h(i)}(S),T=function(e){r(i,e);var t=a(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,i),n.isMasterPlaylist=!0,e=t.call(this,n);var r=n.variants,s=void 0===r?[]:r,a=n.currentVariant,o=n.sessionDataList,l=void 0===o?[]:o,d=n.sessionKeyList,h=void 0===d?[]:d;return e.variants=s,e.currentVariant=a,e.sessionDataList=l,e.sessionKeyList=h,e}return h(i)}(E),w=function(e){r(i,e);var t=a(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,i),n.isMasterPlaylist=!1,e=t.call(this,n);var r=n.targetDuration,s=n.mediaSequenceBase,a=void 0===s?0:s,o=n.discontinuitySequenceBase,l=void 0===o?0:o,d=n.endlist,h=void 0!==d&&d,c=n.playlistType,p=n.isIFrame,g=n.segments,f=void 0===g?[]:g,m=n.prefetchSegments,v=void 0===m?[]:m,y=n.lowLatencyCompatibility,b=n.partTargetDuration,S=n.renditionReports,E=void 0===S?[]:S,T=n.skip,w=void 0===T?0:T,_=n.hash;return e.targetDuration=r,e.mediaSequenceBase=a,e.discontinuitySequenceBase=l,e.endlist=h,e.playlistType=c,e.isIFrame=p,e.segments=f,e.prefetchSegments=v,e.lowLatencyCompatibility=y,e.partTargetDuration=b,e.renditionReports=E,e.skip=w,e.hash=_,e}return h(i)}(E),_=function(e){r(i,e);var t=a(i);function i(e){var n,r=e.uri,s=e.mimeType,a=e.data,o=e.duration,l=e.title,d=e.byterange,h=e.discontinuity,c=e.mediaSequenceNumber,p=void 0===c?0:c,g=e.discontinuitySequence,f=void 0===g?0:g,m=e.key,v=e.map,y=e.programDateTime,b=e.dateRange,S=e.markers,E=void 0===S?[]:S,T=e.parts,w=void 0===T?[]:T;return u(this,i),(n=t.call(this,"segment")).uri=r,n.mimeType=s,n.data=a,n.duration=o,n.title=l,n.byterange=d,n.discontinuity=h,n.mediaSequenceNumber=p,n.discontinuitySequence=f,n.key=m,n.map=v,n.programDateTime=y,n.dateRange=b,n.markers=E,n.parts=w,n}return h(i)}(S),A=function(e){r(i,e);var t=a(i);function i(e){var n,r=e.hint,s=void 0!==r&&r,a=e.uri,o=e.duration,l=e.independent,d=e.byterange,h=e.gap;return u(this,i),n=t.call(this,"part"),c.PARAMCHECK(a),n.hint=s,n.uri=a,n.duration=o,n.independent=l,n.duration=o,n.byterange=d,n.gap=h,n}return h(i)}(S),P=function(e){r(i,e);var t=a(i);function i(e){var n,r=e.uri,s=e.discontinuity,a=e.mediaSequenceNumber,o=void 0===a?0:a,l=e.discontinuitySequence,d=void 0===l?0:l,h=e.key;return u(this,i),n=t.call(this,"prefetch"),c.PARAMCHECK(r),n.uri=r,n.discontinuity=s,n.mediaSequenceNumber=o,n.discontinuitySequence=d,n.key=h,n}return h(i)}(S),I=h((function e(t){var i=t.uri,n=t.lastMSN,r=t.lastPart;u(this,e),c.PARAMCHECK(i),this.uri=i,this.lastMSN=n,this.lastPart=r}));e.exports={Rendition:p,Variant:g,SessionData:f,Key:m,MediaInitializationSection:v,DateRange:y,SpliceInfo:b,Playlist:E,MasterPlaylist:T,MediaPlaylist:w,Segment:_,PartialSegment:A,PrefetchSegment:P,RenditionReport:I}},771:e=>{function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s,a,o=[],l=!0,d=!1;try{if(s=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=s.call(i)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(d)throw r}}return o}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw a}}}}function n(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var a={};function o(e){if(a.strictMode)throw e;a.silent||console.error(e.message)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if("number"==typeof e)return e;var i=10===t?Number.parseFloat(e,t):Number.parseInt(e,t);return Number.isNaN(i)?0:i}e.exports={THROW:o,ASSERT:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var a,l=i(r.entries());try{for(l.s();!(a=l.n()).done;){var d=t(a.value,2),h=d[0];d[1]||o(new Error("".concat(e," : Failed at [").concat(h,"]")))}}catch(e){l.e(e)}finally{l.f()}},CONDITIONALASSERT:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s,a=i(n.entries());try{for(a.s();!(s=a.n()).done;){var l=t(s.value,2),d=l[0],h=t(l[1],2),u=h[0],c=h[1];u&&(c||o(new Error("Conditional Assert : Failed at [".concat(d,"]"))))}}catch(e){a.e(e)}finally{a.f()}},PARAMCHECK:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s,a=i(n.entries());try{for(a.s();!(s=a.n()).done;){var l=t(s.value,2),d=l[0];void 0===l[1]&&o(new Error("Param Check : Failed at [".concat(d,"]")))}}catch(e){a.e(e)}finally{a.f()}},CONDITIONALPARAMCHECK:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s,a=i(n.entries());try{for(a.s();!(s=a.n()).done;){var l=t(s.value,2),d=l[0],h=t(l[1],2),u=h[0],c=h[1];u&&void 0===c&&o(new Error("Conditional Param Check : Failed at [".concat(d,"]")))}}catch(e){a.e(e)}finally{a.f()}},INVALIDPLAYLIST:function(e){o(new Error("Invalid Playlist : ".concat(e)))},toNumber:l,hexToByteSequence:function(e){(e.startsWith("0x")||e.startsWith("0X"))&&(e=e.slice(2));for(var t=[],i=0;i<e.length;i+=2)t.push(l(e.slice(i,i+2),16));return r.from(t)},byteSequenceToHex:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;i<=t&&o(new Error("end must be larger than start : start=".concat(t,", end=").concat(i)));for(var n=[],r=t;r<i;r++)n.push("0".concat((255&e[r]).toString(16).toUpperCase()).slice(-2));return"0x".concat(n.join(""))},tryCatch:function(e,t){try{return e()}catch(e){return t(e)}},splitAt:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=-1,r=0,s=0;r<e.length;r++)if(e[r]===t){if(s++===i)return[e.slice(0,r),e.slice(r+1)];n=r}return-1!==n?[e.slice(0,n),e.slice(n+1)]:[e]},trim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e?(e=e.trim()," "===t||(e.startsWith(t)&&(e=e.slice(1)),e.endsWith(t)&&(e=e.slice(0,-1))),e):e},splitByCommaWithPreservingQuotes:function(e){for(var t=[],i=!0,n=0,r=[],s=0;s<e.length;s++){var a=e[s];i&&","===a?(t.push(e.slice(n,s).trim()),n=s+1):'"'!==a&&"'"!==a||(i?(r.push(a),i=!1):a===r[r.length-1]?(r.pop(),i=!0):r.push(a))}return t.push(e.slice(n).trim()),t},camelify:function(e){var t,n=[],r=!1,s=i(e);try{for(s.s();!(t=s.n()).done;){var a=t.value;"-"!==a&&"_"!==a?r?(n.push(a.toUpperCase()),r=!1):n.push(a.toLowerCase()):r=!0}}catch(e){s.e(e)}finally{s.f()}return n.join("")},formatDate:function(e){var t=e.getUTCFullYear(),i=("0"+(e.getUTCMonth()+1)).slice(-2),n=("0"+e.getUTCDate()).slice(-2),r=("0"+e.getUTCHours()).slice(-2),s=("0"+e.getUTCMinutes()).slice(-2),a=("0"+e.getUTCSeconds()).slice(-2),o=("00"+e.getUTCMilliseconds()).slice(-3);return"".concat(t,"-").concat(i,"-").concat(n,"T").concat(r,":").concat(s,":").concat(a,".").concat(o,"Z")},hasOwnProp:function(e,t){return Object.hasOwnProperty.call(e,t)},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a=Object.assign(a,e)},getOptions:function(){return Object.assign({},a)}}}},t={},function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}(851);var e,t},e.exports=n()},9318:(e,t)=>{t.read=function(e,t,i,n,r){var s,a,o=8*r-n-1,l=(1<<o)-1,d=l>>1,h=-7,u=i?r-1:0,c=i?-1:1,p=e[t+u];for(u+=c,s=p&(1<<-h)-1,p>>=-h,h+=o;h>0;s=256*s+e[t+u],u+=c,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=n;h>0;a=256*a+e[t+u],u+=c,h-=8);if(0===s)s=1-d;else{if(s===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),s-=d}return(p?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,t,i,n,r,s){var a,o,l,d=8*s-r-1,h=(1<<d)-1,u=h>>1,c=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,g=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+u>=1?c/l:c*Math.pow(2,1-u))*l>=2&&(a++,l/=2),a+u>=h?(o=0,a=h):a+u>=1?(o=(t*l-1)*Math.pow(2,r),a+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,r),a=0));r>=8;e[i+p]=255&o,p+=g,o/=256,r-=8);for(a=a<<r|o,d+=r;d>0;e[i+p]=255&a,p+=g,a/=256,d-=8);e[i+p-g]|=128*f}},9907:e=>{var t,i,n=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var o,l=[],d=!1,h=-1;function u(){d&&o&&(d=!1,o.length?l=o.concat(l):h=-1,l.length&&c())}function c(){if(!d){var e=a(u);d=!0;for(var t=l.length;t;){for(o=l,l=[];++h<t;)o&&o[h].run();h=-1,t=l.length}o=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new p(e,t)),1!==l.length||d||a(c)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},3555:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(2784);class r{constructor(e,t,i,r,s,a,o){this.method=n.Method.GET,this.videoKey=i,this.service=e,this.method=r,this.params=t||{},this.body=s,this.onSuccessCallback=a,this.onFailCallback=o}getService(){return this.service}getMethod(){var e;return null!==(e=this.method)&&void 0!==e?e:n.Method.GET}setMethod(e){this.method=e}getParams(){return this.params}getOnSuccess(){return this.onSuccessCallback}getOnFail(){return this.onFailCallback}getVideoKey(){return this.videoKey}getParam(e){return this.params[e]}setParam(e,t){return this.params[e]=t,this}setParams(e){this.params=e}getBody(){return this.body}setBody(e){this.body=e}isPost(){return this.method===n.Method.POST}}},6075:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(108),r=i(9065),s=i(3555),a=i(2784),o=i(61);class l{constructor(e){this.readyToSend=!1,this.servicesToWait=[n.A.Service.INIT,n.A.Service.START],this.onWillSendVideoRequestListeners=[],this.pluginRef=e,this._requests=[],this._waitingForToken=[],this._waitingForMetadata=[]}shouldSendStats(){return this.readyToSend}sendRequest(e){if(""!==r.default.getInstance().getFastDataSessionToken()){this._waitingForToken.forEach((e=>this.prepareParams(e))),this._requests.push(...this._waitingForToken),this._waitingForToken=[];var t=e.getVideoKey(),i=e.getParams(),n=e.getService();for(var s of this.onWillSendVideoRequestListeners)s(n,t,i);this.prepareParams(e),this._requests.push(e),this._processRequests()}else this._waitingForToken.push(e)}prepareParams(e){var t=e.getService();t!=n.A.Service.START&&t!=n.A.Service.PING||(e.setParam("pingTime",e.getParam("pingTime")||r.default.getInstance().getFastDataService().getPingTime()),r.default.getInstance().getCommonVariable("appAnalytics","isEnabled")&&e.setParam("sessionParent",e.getParam("sessionParent")||r.default.getInstance().getFastDataSessionToken()));var i=e.getVideoKey();this.pluginRef.videos.existsVideo(i)&&e.setParam("code",e.getParam("code")||this.pluginRef.videos.getVideo(i).getViewCode()),t!==n.A.Service.INIT&&t!==n.A.Service.START&&t!==n.A.Service.ERROR||r.default.getInstance().getCommonVariable("appAnalytics","isEnabled")&&(e.setParam("parentId",e.getParam("sessionRoot")),e.setParam("navContext",e.getParam("navContext")||r.default.getInstance().getCommonVariable("appAnalytics","context")))}buildRequest(e,t,i,n,r,o){i=null!=i?i:a.Method.GET;var l=new s.default(e,t,"",i,n,r,o);return l.setMethod(i),l}_processRequests(){var e=this._requests;this._requests=[],e.forEach((e=>{if(-1!==this.servicesToWait.indexOf(e.getService())&&(this.readyToSend=!0),this.readyToSend){for(;this._waitingForMetadata.length;){var t=this._waitingForMetadata.shift();r.default.getInstance().pushData(r.default.getInstance().getOptions().offline?o.default.Consumer.PERSISTENT:o.default.Consumer.NQS,t.getService(),t.getMethod(),t.getParams(),t.getOnSuccess(),t.getOnFail())}r.default.getInstance().pushData(r.default.getInstance().getOptions().offline?o.default.Consumer.PERSISTENT:o.default.Consumer.NQS,e.getService(),e.getMethod(),e.getParams(),e.getOnSuccess(),e.getOnFail())}else this._waitingForMetadata.push(e)}))}}},2784:(e,t,i)=>{var n;i.r(t),i.d(t,{AnalyticsTag:()=>r,AppAnalyticsTag:()=>s,BalancerTag:()=>a,CoreTag:()=>o,Method:()=>n}),function(e){e.GET="GET",e.POST="POST"}(n||(n={}));var r="Analytics",s="AppAnalytics",a="Balancer",o="Core"},7276:(e,t,i)=>{var n;i.r(t),i.d(t,{LogLevel:()=>n,default:()=>r}),function(e){e[e.SILENT=6]="SILENT",e[e.ERROR=5]="ERROR",e[e.WARNING=4]="WARNING",e[e.NOTICE=3]="NOTICE",e[e.DEBUG=2]="DEBUG",e[e.VERBOSE=1]="VERBOSE"}(n||(n={}));class r{static report(e,t,i,s){if("undefined"!=typeof console&&console.log){s=s||"darkcyan";var a={5:"e",4:"w",3:"n",2:"d",1:"v"}[i=i||n.NOTICE],o="[NPAW - "+e+"]"+this._getCurrentTime()+" "+a+":";if(r.logLevel<=i)if(r.plainLogs||"undefined"!=typeof document&&document.documentMode)this._plainReport(t,o);else{var l;l=i===n.ERROR&&console.error?console.error:i===n.WARNING&&console.warn?console.warn:i===n.DEBUG&&console.debug?console.debug:console.log,o="%c"+o,d=t,"[object Array]"===Object.prototype.toString.call(d)?(t.splice(0,0,o,"color: "+s),l.apply(console,t)):l.call(console,o,"color: "+s,t)}}var d}static _getCurrentTime(){var e=new Date;return"["+("0"+e.getDate()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3)+"]"}static _plainReport(e,t){if(e instanceof Array)for(var i in e)this._plainReport(e[i],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+" <next line>"),console.log(e))}static setLogLevel(e){this.logLevel=e}static getLogLevel(){return this.logLevel}static error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.report(e,[].slice.call(arguments,1),n.ERROR,"darkred")}static warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.report(e,[].slice.call(arguments,1),n.WARNING,"darkorange")}static notice(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.report(e,[].slice.call(arguments,1),n.NOTICE,"darkgreen")}static debug(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.report(e,[].slice.call(arguments,1),n.DEBUG,"indigo")}static verbose(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.report(e,[].slice.call(arguments,1),n.VERBOSE,"navy")}static loadLevelFromUrl(){"undefined"!=typeof window&&window.location&&this._parseLevelFromUrl(window.location.search)}static _parseLevelFromUrl(e){if(e){var t=/\?.*&*npaw-debug=(.+)/i.exec(e);null!==t&&(this.logLevel=Number(t[1])),null!==/\?.*&*npaw-debug=plain/i.exec(e)&&(this.plainLogs=!0)}}}r.logLevel=n.ERROR,r.plainLogs=!1},9065:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var n=i(108),r=i(1577),s=i(2784),a=i(7276),o=i(9907);class l{constructor(e,t,i,n,r){var s,a,l;this.response={},this._session="",this.sessionExpire=120,this.retries=0,this.isUsingLegacy=!1,this.options=e,this.npawPluginOptions=r,this.accountCode=t,this.coreStorage=i,this.browserStorage=n,this._fastDataHost=this.options.getFastDataHost();var d=null!==(s="true"===o.env.IS_STANDALONE)&&void 0!==s&&s;this.isUsingLegacy=d&&null!==(l=void 0!==(null===(a=null==r?void 0:r.legacyPlugin)||void 0===a?void 0:a.viewTransform))&&void 0!==l&&l,this._createConfigurationInterval()}init(){var e,t;if(this.options&&this.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,void(this._session=r.default.generateRandomString(15));if(!this.isUsingLegacy)if(this.browserStorage&&this.browserStorage.isEnabled()&&(new Date).getTime()<1e3*(null!==(e=Number(this.browserStorage.getLocal("sessionExpire")))&&void 0!==e?e:this.sessionExpire)+(Number(this.coreStorage.getDataTime())||0)&&this.coreStorage.getStoredData())this.setData(null!==(t=this.coreStorage.getStoredData())&&void 0!==t?t:"");else{var i=n.A.Service.DATA,o={system:this.accountCode,pluginVersion:b.getPluginVersion(),requestNumber:this.getRequestNumber()};this.loadConfiguration();try{a.default.notice(s.CoreTag,i+" "+o.system),"nicetest"===o.system&&a.default.error(s.CoreTag,"No accountCode has been set. Please set your accountCode inside plugin's options."),this.performRequestToFastData(i,o,this._receiveData.bind(this),this._failedData.bind(this))}catch(e){a.default.error(s.CoreTag,"Error doing get data request to FastData service.")}}}updateOptions(e){this.options.updateOptions(e),this.options.offline&&(this.reset(),this.init())}getSessionExpireTime(){return this.sessionExpire}refreshSessionToken(){this._session="",this.browserStorage.removeStorages("data"),this.init()}loadConfiguration(){var e=n.A.Service.CONFIGURATION,t={system:this.accountCode,pluginVersion:b.getPluginVersion(),requestNumber:this.getRequestNumber()};this.performRequestToFastData(e,t,this._receiveConfiguration.bind(this),this._failedConfiguration.bind(this))}getSession(){var e,t;return this.isUsingLegacy?null===(t=null===(e=this.npawPluginOptions)||void 0===e?void 0:e.legacyPlugin)||void 0===t?void 0:t.viewTransform._session:this._session}setSession(e){this._session=e}setHost(e){this.response.host=e}getPingTime(){var e;return null!==(e=this.pingTime)&&void 0!==e?e:5}getBeatTime(){var e;return null!==(e=this.beatTime)&&void 0!==e?e:30}setData(e){try{var t=JSON.parse(e);this.options["parse.fdsResponseHost"]&&(e=e.replace(t.q.h,this.options["parse.fdsResponseHost"](t.q.h)),t=JSON.parse(e)),this.response={msg:e,host:t.q.h,code:t.q.c,pingTime:t.q.pt||5,beatTime:t.q.i&&t.q.i.bt||30,sessionExpire:t.q.st&&t.q.st||120},this._session=this.response.code,this.browserStorage.setLocal("sessionExpire",this.response.sessionExpire),this.browserStorage.setStorages("accCode",this.accountCode),this.browserStorage.setStorages("session",this.response.code),this.coreStorage.setStoredData(this.response.msg),this.coreStorage.setDataTime((new Date).getTime().toString()),this.pingTime=this.response.pingTime,this.beatTime=this.response.beatTime,this.sessionExpire=this.response.sessionExpire}catch(e){a.default.error(s.CoreTag,"Fastdata response is invalid.")}}setConfiguration(e){try{this.response.configurationOptions=JSON.parse(e)}catch(e){a.default.error(s.CoreTag,"Configuration response is invalid.")}}getFastDataResponse(){return this.response}getAccountCode(){return this.accountCode}getRequestNumber(){return Math.random()}reset(){this.coreStorage.removeStoredData(),this.coreStorage.removeSession(),this.browserStorage.removeLocal("sessionExpire"),this.browserStorage.removeStorages("accCode"),this.browserStorage.removeStorages("session")}performRequestToFastData(e,t,i,n){if(!this.options.offline){t.timemark=(new Date).getTime(),t.outputFormat="json";var s=this,a=new XMLHttpRequest;a.open("GET","https://"+this._fastDataHost+e+r.default.toQueryString(t)),a.onload=function(e){s.options.offline||(a.status>=200&&a.status<400?i(this,e):n(this,e))},a.onerror=function(e){n(this,e)},a.send()}}_createConfigurationInterval(){this.isUsingLegacy||!this.options.isRefreshLMAConfigurationEnabled()||this._refreshInterval||(this._refreshInterval=setInterval(this.loadConfiguration.bind(this),1e3*this.options.refreshLMAConfigurationSeconds()))}_receiveData(e,t){this.setData(e.response)}_receiveConfiguration(e,t){this.setConfiguration(e.response)}_failedData(e,t){a.default.error(s.CoreTag,"Fastdata request has failed."),++this.retries<5&&setTimeout(this.init.bind(this),5e3)}_failedConfiguration(e,t){a.default.error(s.CoreTag,"Fastdata configuration request has failed."),++this.retries<5&&setTimeout(this.init.bind(this),5e3)}}var d=i(2602);class h{constructor(){this.offline=!1,this.host="lma.npaw.com",this.disableCookies=!0,this.forceCookies=!1,this.disableStorage=!1,this.authToken=void 0,this.authType="Bearer",this["app.https"]=!0,this["lma.refresh.configuration.enabled"]=!1,this["lma.refresh.configuration.seconds"]=300,this["parse.fdsResponseHost"]=null}updateOptions(e){var t=new d.A;Object.keys(this).forEach((i=>{null==e[i]||Object.keys(t).includes(i)||(this[i]=e[i])}))}setNpawPluginOptions(e){Object.keys(this).forEach((t=>{null!=e[t]&&(this[t]=e[t])}))}isRefreshLMAConfigurationEnabled(){return this["lma.refresh.configuration.enabled"]}refreshLMAConfigurationSeconds(){return this["lma.refresh.configuration.seconds"]}getHost(){return this.host}getFastDataHost(){return this.host}}class u{constructor(e,t,i,n,r,a,o){this.method=s.Method.GET,this.headers={},this.xhr=new XMLHttpRequest,this.retries=0,this.hadBody=!1,this.isHttps=e,this.host=t,this.service=i,this.method=n,this.params=r,this.onSuccessCallback=a,this.onFailCallback=o}performHttps(){return this.isHttps}getHost(){return this.host}getService(){return this.service}getMethod(){return this.method}getParams(){return this.params}getBody(){return this.body}setBody(e){this.body=e}addHeader(e,t){this.headers[e]=t}getRetries(){return this.retries}send(e,t){if(this.params.timemark=Date.now(),this.params.sessionRoot=b.getInstance().getFastDataSessionToken(),this.params.system=b.getInstance().getFastDataService().getAccountCode(),this.body&&(this.hadBody=!0),this.method===s.Method.POST&&!this.body){var i={};i.timemark=this.params.timemark,this.params.code&&(i.code=this.params.code),i.sessionRoot=this.params.sessionRoot,i.system=this.params.system,i.sessionId=this.params.sessionId&&""!=this.params.sessionId?this.params.sessionId:b.getInstance().getFastDataSessionToken(),this.body=JSON.stringify(this.params),this.params=i}try{this.getUrl()}catch(e){console.log(e)}for(var n in this.xhr.open(this.method,this.getUrl()),this.xhr.onreadystatechange=()=>{4===this.xhr.readyState&&this.xhr.status>=200&&this.xhr.status<400?(t&&t(),this.onSuccessCallback&&this.onSuccessCallback()):4===this.xhr.readyState&&(this.retries++,!this.hadBody&&this.method===s.Method.POST&&this.body&&(this.params=JSON.parse(this.body),this.body=void 0),e(),this.onFailCallback&&this.onFailCallback())},this.headers)this.xhr.setRequestHeader(n,this.headers[n]);this.xhr.send(this.body)}asyncSend(){return e=this,i=function*(){return new Promise(((e,t)=>{this.send(t,e)}))},new((t=void 0)||(t=Promise))((function(n,r){function s(e){try{o(i.next(e))}catch(e){r(e)}}function a(e){try{o(i.throw(e))}catch(e){r(e)}}function o(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(s,a)}o((i=i.apply(e,[])).next())}));var e,t,i}toLocalStorageString(){var e={},t=this.service.split("/");for(var i in e.request=t[t.length-1],e.unixtime=this.params.timemark,this.params)void 0!==this.params[i]&&("sessionId"===i||"sessionRoot"===i?e[i]="":"code"===i?e[i]="CODE_PLACEHOLDER":"object"==typeof this.params[i]?e[i]=JSON.stringify(this.params[i]):e[i]=this.params[i]);return JSON.stringify(e)}getUrl(){return(this.isHttps?"https":"http")+"://"+this.host+this.service+r.default.toQueryString(this.params)}}var c=i(5438),p=[n.A.Service.ERROR,n.A.Service.AD_ERROR];class g{constructor(e,t,i){this.freshRequests=[],this.retryRequests=[],this.databaseSendingInterval=12e4,this.isDestroyed=!1,this.servicesToWait=[n.A.Service.INIT,n.A.Service.START],this.sentStart=!1,this.options=e,this.coreStorage=t,this.fastDataService=i}destroy(){this.freshRequests=[],this.retryRequests=[],this.isDestroyed=!0,this.timeWhenLastSentFromDatabase=(new Date).getTime()}send(e,t,i,n,r){var o;if(!this.isDestroyed){var l=new u(null===(o=this.options["app.https"])||void 0===o||o,this.coreStorage.getHost(),e,t,null!=i?i:{},n,r);void 0!==this.options.authToken&&void 0!==this.options.authType&&e!==c.xC.CDN&&(a.default.verbose(s.AnalyticsTag,"Adding Authorization header with type "+this.options.authType),l.addHeader("Authorization",this.options.authType+" "+this.options.authToken)),this.freshRequests.push(l),this._processRequests()}}getTimeOfLastSentRequest(){return this.timeOfLastSentRequest}wasStartSent(){return this.sentStart}_processRequests(){return e=this,i=function*(){if(!this.isDestroyed){var e=this.retryRequests.splice(0,this.retryRequests.length),t=this.freshRequests.splice(0,this.freshRequests.length);e.length>0&&a.default.verbose(s.CoreTag,"Retrying to send these requests:",...e.map((e=>e.getService())));var i=[],n=!1;for(var r of e)if(n)i.push(r);else try{yield r.asyncSend(),this.timeOfLastSentRequest=(new Date).getTime()}catch(e){n=!0,i.push(r)}for(var o of t)try{yield o.asyncSend(),this.servicesToWait.includes(o.getService())&&(this.sentStart=!0),this.timeOfLastSentRequest=(new Date).getTime()}catch(t){p.includes(o.getService())&&i.push(o)}this.retryRequests.push(...i.slice(-25))}},new((t=void 0)||(t=Promise))((function(n,r){function s(e){try{o(i.next(e))}catch(e){r(e)}}function a(e){try{o(i.throw(e))}catch(e){r(e)}}function o(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(s,a)}o((i=i.apply(e,[])).next())}));var e,t,i}}class f{constructor(e,t,i){this.prefix="npaw",this.disableCookies=e,this.forceCookies=t,this.disabled=i}updateStorageOptions(e,t,i){this.disableCookies=e,this.forceCookies=t,this.disabled=i}isEnabled(){if(this.disabled)return!1;var e=!0;if(!this.forceCookies)try{localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(t){e=!1}return e}setLocal(e,t){if(!this.disabled)try{!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?"undefined"!=typeof localStorage&&localStorage&&localStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".local."+e,t)}catch(e){a.default.debug(s.CoreTag,"App Analytics needs localStorage or cookies, not supported by your browser.")}}getLocal(e){if(!this.disabled)return this._localGetRemove("getItem","_getCookie",e)}removeLocal(e){if(!this.disabled)return this._localGetRemove("removeItem","_removeCookie",e)}_localGetRemove(e,t,i){try{if(this.forceCookies||!("undefined"!=typeof localStorage&&localStorage||this.disableCookies))return this[t](this.prefix+".local."+i);if("undefined"!=typeof localStorage&&localStorage)return localStorage[e](this.prefix+"."+i)}catch(e){a.default.debug(s.CoreTag,"App Analytics needs localStorage or cookies, not supported by your browser.")}}setSession(e,t){if(!this.disabled)try{!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?"undefined"!=typeof sessionStorage&&sessionStorage&&sessionStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".session."+e,t)}catch(e){a.default.debug(s.CoreTag,"App Analytics needs sessionStorage or cookies, not supported by your browser.")}}getSession(e){if(!this.disabled)return this._sessionGetRemove("getItem","_getCookie",e)}removeSession(e){if(!this.disabled)return this._sessionGetRemove("removeItem","_removeCookie",e)}_sessionGetRemove(e,t,i){try{if(this.forceCookies||!("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies))return this[t](this.prefix+".session."+i);if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage[e](this.prefix+"."+i)}catch(e){a.default.debug(s.CoreTag,"App Analytics needs sessionStorage or cookies, not supported by your browser.")}}getStorages(e){if(!this.disabled)return this.getSession(e)||this.getLocal(e)}setStorages(e,t){this.disabled||(this.setSession(e,t),this.setLocal(e,t))}removeStorages(e){this.disabled||(this.removeSession(e),this.removeLocal(e))}_setCookie(e,t){if("undefined"!=typeof document){var i=";";"undefined"!=typeof location&&(i+="domain="+location.host.split(".").reverse().splice(0,2).reverse().join(".")+";path=/;"),document.cookie=e+"="+t+i}}_getCookie(e){if("undefined"!=typeof document)for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var r=i[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}_removeCookie(e){this._setCookie(e,"")}}class m{constructor(e,t){this.options=e,this.browserStorage=t}isEnabled(){return this.browserStorage.isEnabled()}setLocal(e,t){this.browserStorage.setLocal(e,t)}getLocal(e){return this.browserStorage.getLocal(e)}removeLocal(e){this.browserStorage.removeLocal(e)}getHost(){var e=this.options.getHost(),t=b.getInstance().getFastDataService();return!b.getInstance().isUsingLegacy()&&t&&t.getFastDataResponse()&&t.getFastDataResponse().host?e=t.getFastDataResponse().host:b.getInstance().isUsingLegacy()&&b.getInstance().getLegacyFastDataHost()&&(e=b.getInstance().getLegacyFastDataHost()),e}getSession(){var e=this.browserStorage.getStorages("session");if("undefined"===e&&(e=void 0),!e){var t=this.getStoredData();if(t)try{e=JSON.parse(t).q.c}catch(e){}}return e}getStorageHost(){var e=null,t=this.getStoredData();if(t)try{e=JSON.parse(t).q.h}catch(e){}return e}getLocalAccountCode(){return this.browserStorage.getLocal("accCode")}getSessionAccountCode(){return this.browserStorage.getSession("accCode")}getAppAnalyticsRegisteredProperties(){return this.browserStorage.getLocal("appAnalyticsRegisteredProperties")}setAppAnalyticsRegisteredProperties(e){this.browserStorage.setLocal("appAnalyticsRegisteredProperties",e)}removeAppAnalyticsRegisteredProperties(){this.browserStorage.removeLocal("appAnalyticsRegisteredProperties")}getAppAnalyticsStarted(){return"true"===this.browserStorage.getLocal("appAnalyticsStarted")}setAppAnalyticsStarted(e){this.browserStorage.setLocal("appAnalyticsStarted",String(e))}removeAppAnalyticsStarted(){this.browserStorage.removeStorages("appAnalyticsStarted")}getDataTime(){return this.browserStorage.getStorages("dataTime")}setDataTime(e){this.browserStorage.setStorages("dataTime",e)}getLastActive(){return Number(this.browserStorage.getStorages("lastactive"))}setLastActive(e){this.browserStorage.setStorages("lastactive",e)}removeLastActive(){this.browserStorage.removeStorages("lastactive")}setSession(e){this.browserStorage.setStorages("session",e)}removeSession(){this.browserStorage.removeStorages("session")}getSessionExpire(){return 1e3*Number(this.browserStorage.getLocal("sessionExpire"))}getStoredData(){return this.browserStorage.getStorages("data")}setStoredData(e){this.browserStorage.setStorages("data",e)}removeStoredData(){this.browserStorage.removeStorages("data")}getStorages(e){return t=this,n=function*(){return this.browserStorage.getStorages(e)},new((i=void 0)||(i=Promise))((function(e,r){function s(e){try{o(n.next(e))}catch(e){r(e)}}function a(e){try{o(n.throw(e))}catch(e){r(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,a)}o((n=n.apply(t,[])).next())}));var t,i,n}}var v=i(61),y=i(9907);class b{static getInstance(e,t,i){return this._instance&&!i||(this._instance=new b(e||"",t)),this._instance}constructor(e,t){var i,n,r,s;if(this.options=new h,this.sendingOffline=!1,this.isDestroyed=!1,this.usingLegacy=!1,this.commonVariables=new Map,this.registeredPeriodicPushes=new Map,this.pluginOptions=t,this.pluginOptions){this.pluginOptions.host&&this.options.setNpawPluginOptions({host:this.pluginOptions.host});var a=null!==(i="true"===y.env.IS_STANDALONE)&&void 0!==i&&i;this.usingLegacy=a&&null!==(s=void 0!==(null===(r=null===(n=this.pluginOptions)||void 0===n?void 0:n.legacyPlugin)||void 0===r?void 0:r.viewTransform))&&void 0!==s&&s}this.browserStorage=new f(this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.coreStorage=new m(this.options,this.browserStorage),this.fastDataService=new l(this.options,e,this.coreStorage,this.browserStorage,this.pluginOptions),this.fastDataService.init(),this.nqsService=new g(this.options,this.coreStorage,this.fastDataService),this.deleteOldOfflineEntries()}destroy(){this.unregisterAllPeriodicPushes(),this.commonVariables.clear(),this.nqsService.destroy()}static getPluginVersion(){var e=y.env.NWF||"";return"7.2.41"+("true"===y.env.IS_STANDALONE?"-balancer":"")+e+"-js-sdk"}isUsingLegacy(){return this.usingLegacy}wasStartSent(){var e,t,i,n,r,s,a;return this.isUsingLegacy()?(null===(t=null===(e=this.pluginOptions)||void 0===e?void 0:e.legacyPlugin)||void 0===t?void 0:t._comm)&&(null===(n=null===(i=this.pluginOptions)||void 0===i?void 0:i.legacyPlugin)||void 0===n?void 0:n._comm.transforms)?null===(a=!(null===(s=null===(r=this.pluginOptions)||void 0===r?void 0:r.legacyPlugin)||void 0===s?void 0:s._comm.transforms[0]._isBusy))||void 0===a||a:void 0:this.nqsService.wasStartSent()}setLegacyPlugin(e){var t,i,n,r;if(this.pluginOptions){this.pluginOptions.legacyPlugin=e;var s=null!==(t="true"===y.env.IS_STANDALONE)&&void 0!==t&&t;this.usingLegacy=s&&null!==(r=void 0!==(null===(n=null===(i=this.pluginOptions)||void 0===i?void 0:i.legacyPlugin)||void 0===n?void 0:n.viewTransform))&&void 0!==r&&r}}setActiveSwitchingOnLegacy(e){e&&this.pluginOptions&&this.pluginOptions.legacyPlugin&&this.pluginOptions.legacyPlugin.options&&(this.pluginOptions.legacyPlugin.options["content.cdn"]="ACTVSWIT")}getViewCode(){var e;return null===(e=this.pluginOptions)||void 0===e?void 0:e.legacyPlugin.viewTransform.getViewCode()}getLegacyFastDataHost(){var e;return null===(e=this.pluginOptions)||void 0===e?void 0:e.legacyPlugin.viewTransform.response.host}setOptions(e){this.options.updateOptions(e),this.browserStorage.updateStorageOptions(this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.fastDataService.updateOptions(e)}getOptions(){return this.options}getCoreStorage(){return this.coreStorage}registerCommonVariable(e,t,i){var n,r;this.commonVariables.has(e)?null===(n=this.commonVariables.get(e))||void 0===n||n.set(t,i):(this.commonVariables.set(e,new Map),null===(r=this.commonVariables.get(e))||void 0===r||r.set(t,i))}unregisterCommonVariable(e,t){var i;null===(i=this.commonVariables.get(e))||void 0===i||i.delete(t)}getCommonVariable(e,t){var i;return null===(i=this.commonVariables.get(e))||void 0===i?void 0:i.get(t)}getFastDataService(){return this.fastDataService}getFastDataSessionToken(){return this.fastDataService.getSession()}refreshSessionToken(){return this.usingLegacy?void 0:this.fastDataService.refreshSessionToken()}isSessionTokenExpired(){var e,t=(new Date).getTime();return!this.usingLegacy&&t-(null!==(e=this.nqsService.getTimeOfLastSentRequest())&&void 0!==e?e:t)>1e3*this.fastDataService.getSessionExpireTime()}pushData(e,t,i,n,r,s){this.handleDataToSend(e,t,i,n,r,s)}pushPeriodicDataFromCallback(e,t,i,n,r,s,a,o){var l=setInterval((()=>{var t=s();t&&this.handleDataToSend(e,i,r,t,a,o)}),n<1e3?1e3:n);this.registeredPeriodicPushes.has(t)?(clearInterval(this.registeredPeriodicPushes.get(t)),this.registeredPeriodicPushes.set(t,l)):this.registeredPeriodicPushes.set(t,l)}unregisterPeriodicPush(e){clearInterval(this.registeredPeriodicPushes.get(e)),this.registeredPeriodicPushes.delete(e)}unregisterAllPeriodicPushes(){if(0!==this.registeredPeriodicPushes.size){a.default.debug(s.CoreTag,"Unregistering "+this.registeredPeriodicPushes.size+" periodic pushes");var e=Array.from(this.registeredPeriodicPushes.keys());for(var t of e)clearInterval(this.registeredPeriodicPushes.get(t)),this.registeredPeriodicPushes.delete(t);a.default.debug(s.CoreTag,"Finished unregistering all pushes")}}deleteOldOfflineEntries(){var e,t,i,n,r=null!==(t=null===(e=this.coreStorage.getLocal("offlineViews"))||void 0===e?void 0:e.split(","))&&void 0!==t?t:[];for(var s of r){var a=null!==(n=null===(i=this.coreStorage.getLocal("offlineViews."+s))||void 0===i?void 0:i.split(","))&&void 0!==n?n:[];a.length>0&&Date.now()-JSON.parse("["+a+"]")[0].timemark>2592e6&&this.deleteViewDataFromLocalStorage(s)}}sendOfflineEvents(){var e,t,i,r,o;return i=this,o=function*(){if(this.options.offline)a.default.notice(s.AnalyticsTag,"Unable to send offline events because offline option is enabled");else if(!this.sendingOffline){this.sendingOffline=!0;for(var i=15,r=!1;!r&&i-- >0;)""===this.getFastDataSessionToken()?yield new Promise((e=>setTimeout(e,100))):r=!0;if(!(i<1)){var o=(null!==(t=null===(e=this.coreStorage.getLocal("offlineViews"))||void 0===e?void 0:e.split(","))&&void 0!==t?t:[]).map((e=>new Promise(((t,i)=>{var r,a=null!==(r=this.coreStorage.getLocal("offlineViews."+e))&&void 0!==r?r:"";if((a=a.replace(/CODE_PLACEHOLDER/g,b.getInstance().getFastDataSessionToken()+"_"+e.split("_")[1])).length>0){var o=new u(!0,this.coreStorage.getHost(),n.A.Service.OFFLINE_EVENTS,s.Method.POST,{code:b.getInstance().getFastDataSessionToken()+"_"+e.split("_")[1]},(()=>{this.deleteViewDataFromLocalStorage(e),t()}),(()=>t()));o.setBody("["+a+"]"),o.send((function(){}))}}))));yield Promise.all(o).finally((()=>{this.sendingOffline=!1}))}}},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{a(o.next(e))}catch(e){t(e)}}function s(e){try{a(o.throw(e))}catch(e){t(e)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,s)}a((o=o.apply(i,[])).next())}))}deleteViewDataFromLocalStorage(e){var t,i;this.coreStorage.removeLocal("offlineViews."+e);var n=null!==(i=null===(t=this.coreStorage.getLocal("offlineViews"))||void 0===t?void 0:t.split(","))&&void 0!==i?i:[],r=n.indexOf(e);-1!=r&&n.splice(r,1),this.coreStorage.setLocal("offlineViews",n.toString())}handleDataToSend(e,t,i,r,s,a){if(!this.isDestroyed)switch(e){case v.default.Consumer.NQS:this.nqsService.send(t,i,r,s,a);break;case v.default.Consumer.PERSISTENT:if(void 0!==s&&s(),t===n.A.Service.VIDEO_PLUGIN_LOGS)break;if(t===n.A.Service.INIT)break;r.timemark=Date.now();var o=new u(this.options["app.https"],"",t,i,r,s,a),l=this.coreStorage.getLocal("offlineViews");if(l){var d=l.split(",");d.includes(r.code)||(d.push(r.code),this.coreStorage.setLocal("offlineViews",d.toString()))}else this.coreStorage.setLocal("offlineViews",r.code);var h=this.coreStorage.getLocal("offlineViews."+r.code);if(h){var c=h.split(",");c.push(o.toLocalStorageString()),this.coreStorage.setLocal("offlineViews."+r.code,c.toString())}else this.coreStorage.setLocal("offlineViews."+r.code,o.toLocalStorageString());break;case v.default.Consumer.BLACK_HOLE:void 0!==s&&s()}}}},2602:(e,t,i)=>{i.d(t,{A:()=>n});class n{constructor(){this.host="lma.npaw.com",this.components={},this.host="lma.npaw.com",this.components={}}}},108:(e,t,i)=>{var n;i.d(t,{A:()=>s});class r{}n=r,r.VideoService={INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",DATA_OBJECT:"/data"},r.Service=Object.assign(Object.assign({DATA:"/data",ADAPTERS:"/adapters",CONFIGURATION:"/configuration",APP_ANALYTICS_PLUGIN_LOGS:"/infinity/session/pluginLogs",VIDEO_PLUGIN_LOGS:"/infinity/video/pluginLogs"},n.VideoService),{CDN:"/cdn",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"});var s=r},61:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});class n{}n.Products={VIDEO_ANALYTICS:"videoAnalytics",BALANCER:"balancer"},n.AnalyticsVariables={VIEW_CODE:"viewCode",METHOD_OPTION:"methodOption"},n.BalancerVariables={AS_ENABLED:"activeSwitchingEnabled",PROFILE_NAME:"profileName",BUCKET:"bucket",DECISION_FINISHED:"decisionFinished",LAST_USED_CDN:"lastUsedCdn",BALANCER_TRAFFIC:"balancerTraffic",BALANCER_BITRATE:"balancerBitrate"},n.Consumer={NQS:"NQS",PERSISTENT:"PERSISTENT",BLACK_HOLE:"BLACK_HOLE"}},1577:(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var n=i(7276),r=i(2784);class s{static toQueryString(e){return"?"+Object.keys(e).map((t=>{if(null!==e[t]&&"object"==typeof e[t]){var i=JSON.stringify(e[t]);if("{}"!==i)return encodeURIComponent(t)+"="+encodeURIComponent(i)}else if(null!==e[t]&&void 0!==e[t]&&""!==e[t])return encodeURIComponent(t)+"="+encodeURIComponent(e[t]);return""})).filter((e=>""!=e)).join("&")}static addProtocol(e,t){var i="http://localhost/";try{i="http://"+e,t||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?i="https://"+e:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(i="//"+e)}catch(e){n.default.warn(r.CoreTag,e)}return i}static parseBoolean(e){return"string"==typeof e?"true"===e.toLowerCase():!!e}static methodFromString(e){var t,i=null!==(t=null==e?void 0:e.toUpperCase())&&void 0!==t?t:"";return i in r.Method?r.Method[i]:r.Method.GET}static generateRandomString(e){for(var t="",i=0;i<e;i++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}}},6933:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n,r=i(2477),s=i.n(r),a=i(7276);!function(e){e.BLACK="[30m",e.RED="[31m",e.GREEN="[32m",e.YELLOW="[33m",e.BLUE="[34m",e.MAGENTA="[35m",e.CYAN="[36m",e.WHITE="[37m"}(n||(n={}));class o{static colorizeText(e,t){return""+t+e+this.RESET}static header(e){a.default.getLogLevel()<a.LogLevel.SILENT&&console.log(this.BOLD+e+this.RESET)}static log(e,t){a.default.getLogLevel()<a.LogLevel.SILENT&&console.log(e,t||"")}static logWithPrefix(e,t,i){if(void 0===i&&(i=1),a.default.getLogLevel()<a.LogLevel.SILENT){var n=t.repeat(i)+e;console.log(n)}}}o.logIdent="  ",o.BOLD="[1m",o.RESET="[0m";class l{constructor(e,t){this.eventType=e,this.params=t,this.columns=["Event","Params"]}generateRow(){return this.eventType.padEnd(15)+this.getParamsString().padEnd(15)}getParamsString(){if(!this.params)return o.colorizeText("Data not defined",n.YELLOW);var e=[];switch(this.eventType){case s().INIT:case s().START:this.params.player&&e.push("Player: "+this.params.player),this.params.pluginVersion&&e.push("Plugin Version: "+this.params.pluginVersion),this.params.playerStartupTime&&e.push("Player Startup Time: "+this.params.playerStartupTime+" ms"),this.params.playhead&&e.push("Playhead: "+this.params.playhead),this.params.position&&e.push("Position: "+this.params.position),this.params.breakNumber&&e.push("Break Number: "+this.params.breakNumber),this.params.adAdapterVersion&&e.push("Ad Adapter Version: "+this.params.adAdapterVersion),this.params.adDuration&&e.push("Ad Duration: "+this.params.adDuration);break;case s().JOIN:this.params.rendition&&e.push("Rendition: "+this.params.rendition),this.params.pingTime&&e.push("Ping Time: "+this.params.pingTime+" s"),this.params.playhead&&e.push("Playhead: "+this.params.playhead),this.params.position&&e.push("Position: "+this.params.position),this.params.breakNumber&&e.push("Break Number: "+this.params.breakNumber),this.params.adJoinDuration&&e.push("Ad Join Duration: "+this.params.adJoinDuration),this.params.adPlayhead&&e.push("Ad Playhead: "+this.params.adPlayhead);break;case s().JOIN_TIME:this.params.joinDuration&&e.push("Join Time: "+this.params.joinDuration+" ms"),this.params.bitrate&&e.push("Bitrate: "+(this.params.bitrate/1e6).toFixed(2)+" MB/s");break;case s().PAUSE:this.params.playhead&&e.push("Playhead: "+this.params.playhead);break;case s().RESUME:this.params.playhead&&e.push("Playhead: "+this.params.playhead),this.params.pauseDuration&&e.push("Pause Duration: "+this.params.pauseDuration+" ms");break;case s().SEEK_BEGIN:break;case s().SEEK_END:this.params.seekDuration&&e.push("Seek Duration: "+this.params.seekDuration+" ms");break;case s().BUFFER_BEGIN:break;case s().BUFFER_END:this.params.bufferDuration&&e.push("Buffer Duration: "+this.params.bufferDuration+" ms");break;case s().ERROR:break;case s().STOP:this.params.playhead&&e.push("Playhead: "+this.params.playhead),this.params.bitrate&&-1!==this.params.bitrate?e.push("Bitrate: "+(this.params.bitrate/1e6).toFixed(2)+" MB/s"):this.params.bitrate&&e.push("Bitrate: "+this.params.bitrate),this.params.position&&e.push("Position: "+this.params.position),this.params.breakNumber&&e.push("Break Number: "+this.params.breakNumber),this.params.adPlayhead&&e.push("Ad Playhead: "+this.params.adPlayhead),this.params.adJoinDuration&&e.push("Ad Join Duration: "+this.params.adJoinDuration),this.params.adViewedDuration&&e.push("Ad Viewed Duration: "+this.params.adViewedDuration),this.params.adTotalDuration&&e.push("Ad Total Duration: "+this.params.adTotalDuration),this.params.adBitrate&&e.push("Ad Bitrate: "+this.params.adBitrate);break;case s().VIDEO_EVENT:break;case s().QUARTILE:this.params.position&&e.push("Position: "+this.params.position),this.params.breakNumber&&e.push("Break Number: "+this.params.breakNumber),this.params.quartile&&e.push("Quartile: "+this.params.quartile),this.params.adViewedDuration&&e.push("Ad Viewed Duration: "+this.params.adViewedDuration);break;case s().PODSTART:this.params.position&&e.push("Position: "+this.params.position),this.params.breakNumber&&e.push("Break Number: "+this.params.breakNumber),this.params.adInsertionType&&e.push("Ad Insertion Type: "+this.params.adInsertionType);break;case s().PODSTOP:this.params.position&&e.push("Position: "+this.params.position),this.params.breakNumber&&e.push("Break Number: "+this.params.breakNumber);case s().CLICK:case s().MANIFEST:}return 0===e.length?o.colorizeText("Data not defined",n.YELLOW):e.join(" | ")}}var d=i(3782),h=i.n(d),u=i(1577),c=i(9065);class p{constructor(){this.integrationMessageColors={RED:"#FF1515",GREEN:"#0f0",YELLOW:"#F6D500"},this.balancerEnabled=!0,this.videoAnalyticsEnabled=!0,this.adsAnalyticsEnabled=!0,this.reportTimeoutDuration=p.defaultReportTimeout,this.reportTimeoutStarted=!1,this.runningOffline=!1,this.balancerInterceptedRequests=!1,this.successfulResponseFromSelector=!1,this.usedSelectorAPI=!1,this.activeSwitchingEnabled=!1,this.asDecisionPerformed=!1,this.switchedCdns=!1,this.cdnList=new Map,this.triedSendingBalancerStats=!1,this.mandatoryBalancerRequests=["cdn"],this.capturedEvents=[],this.successfulNQSRequests=new Set,this.hasPlayerRegistered=!1,this.triedSendingNQSStats=!1,this.mandatoryNQSRequests=[s().START,s().JOIN_TIME,"ping",s().STOP],this.shouldIgnoreAds=!1,this.capturedAdsEvents=[],this.successfulNQSAdsRequests=new Set,this.hasAdsPlayerRegistered=!1,this.triedSendingNQSAdStats=!1,this.mandatoryNQSAdsRequests=[h().Service.AD_START,h().Service.AD_MANIFEST,h().Service.AD_JOIN,h().Service.AD_STOP,h().Service.AD_POD_START,h().Service.AD_QUARTILE,h().Service.AD_POD_STOP].map((e=>e.slice(1)))}static getInstance(e){return void 0===e&&(e=!1),this._instance&&!e||(this._instance=new p),this._instance}destroy(){this.clearReportTimeout(),this.cleanCdnList(),this.capturedEvents=[],this.successfulNQSRequests.clear(),this.reportTimeoutStarted=!1}start(e){e&&(this.npawPluginInstance=e),this.reportTimeoutStarted||(this.reportTimeout=setTimeout((()=>{this.report(),this.videoAnalyticsEnabled=!1,this.balancerEnabled=!1,this.adsAnalyticsEnabled=!1}),this.reportTimeoutDuration),this.reportTimeoutStarted=!0)}clearReportTimeout(){clearTimeout(this.reportTimeout),this.reportTimeoutStarted=!1,this.reportTimeout=void 0}setOptions(e){e&&(e["ad.ignore"]&&(this.shouldIgnoreAds=u.default.parseBoolean(e["ad.ignore"])),e.offline&&(this.runningOffline=u.default.parseBoolean(e.offline)))}setBalancerEnabled(e){this.balancerEnabled=null!=e?e:this.balancerEnabled}setVideoAnalyticsEnabled(e){this.videoAnalyticsEnabled=null!=e?e:this.videoAnalyticsEnabled}setAdsAnalyticsEnabled(e){this.adsAnalyticsEnabled=null!=e?e:this.adsAnalyticsEnabled}getReportTimeout(){return this.reportTimeoutDuration}setReportTimeout(e){e&&e>0&&(this.reportTimeoutDuration=null!=e?e:this.reportTimeoutDuration,this.clearReportTimeout(),this.start())}cleanCdnList(){this.cdnList.clear()}addCdn(e,t){this.cdnList.set(e,t)}updateCdnInfo(e,t,i,n){if(this.balancerEnabled){var r=this.cdnList.get(e);r&&(r.setRequestsPerformed(t),r.setTrafficServerInBytes(i),r.setFailedRequests(n))}}wasSelectorCommunicationSuccessful(e,t){this.successfulResponseFromSelector=e,t&&(this.apiErrorMessage=t)}setInterceptedRequests(e){this.balancerInterceptedRequests=e}setActiveSwitchingEnabled(e){this.activeSwitchingEnabled=e}wasActiveSwitchingDecisionPerformed(e){this.asDecisionPerformed=e}setSwitchedCdns(e){this.switchedCdns=e}usedSelectorAPIResponse(e){this.usedSelectorAPI=e}setTriedSendingBalancerStats(e){this.triedSendingBalancerStats=e}addNQSRequest(e){(this.videoAnalyticsEnabled||this.balancerEnabled)&&this.successfulNQSRequests.add(e)}addNQSEvent(e,t){this.videoAnalyticsEnabled&&this.capturedEvents.push(new l(e,t)),"stop"===e&&setTimeout((()=>{this.report(),this.clearReportTimeout()}),500)}registeredPlayer(e){this.hasPlayerRegistered=e}setTriedSendingNQSStats(e){this.triedSendingNQSStats=e}addNQSAdRequest(e){this.adsAnalyticsEnabled&&this.successfulNQSAdsRequests.add(e)}addNQSAdEvent(e,t){this.adsAnalyticsEnabled&&this.capturedAdsEvents.push(new l(e,t))}registeredAdsPlayer(e){this.hasAdsPlayerRegistered=e}setTriedSendingNQSAdStats(e){this.triedSendingNQSAdStats=e}report(){if(this.balancerEnabled||this.videoAnalyticsEnabled||this.adsAnalyticsEnabled){var e="------- Certification Tool -------";o.header(e),"ERROR_INVALID_ACCOUNT"===this.apiErrorMessage?o.log("%cAccount code is invalid!","color: #FF1515; font-size: 12px; font-weight: bold;"):(this.logBalancerDiagnostic(),c.default.getInstance().isUsingLegacy()||(this.logVideoAnalyticsDiagnostic(),this.logAdsAnalyticsDiagnostic())),this.videoAnalyticsEnabled=!1,this.balancerEnabled=!1,this.adsAnalyticsEnabled=!1,this.clearReportTimeout(),o.header("".padEnd(34,"-"))}}logBalancerDiagnostic(){var e,t;if(this.balancerEnabled&&(null===(t=null===(e=this.npawPluginInstance)||void 0===e?void 0:e.isBalancerEnabled())||void 0===t||t)){var i=Array.from(this.successfulNQSRequests).map((e=>e.slice(1))),r=this.mandatoryBalancerRequests.some((e=>i.includes(e))),s=this.mandatoryBalancerRequests.filter((e=>!i.includes(e)));if(o.header("Balancer Diagnostic"),o.logWithPrefix("Intercepted requests: "+(this.balancerInterceptedRequests?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent),this.runningOffline?o.logWithPrefix("Ignoring Balancer stats since running in offline mode",o.logIdent):this.triedSendingBalancerStats?o.logWithPrefix("Any event sent to server: "+(r?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent):o.logWithPrefix("Reached stats server: Unknown",o.logIdent),!this.runningOffline&&s.length>0&&this.triedSendingBalancerStats&&o.logWithPrefix(o.colorizeText("Missing requests: "+s.join(", "),n.YELLOW),o.logIdent),o.logWithPrefix("Request to the Selector API: "+(this.successfulResponseFromSelector?o.colorizeText("Successful",n.GREEN):o.colorizeText("Unsuccessful",n.RED)),o.logIdent),this.apiErrorMessage&&!this.successfulResponseFromSelector&&o.logWithPrefix(this.getApiErrorMessage(),o.logIdent,2),o.logWithPrefix("Took decision based on Selector API: "+(this.usedSelectorAPI?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent),this.activeSwitchingEnabled?o.logWithPrefix("Active switching decision: "+(this.asDecisionPerformed?o.colorizeText("Performed",n.GREEN):o.colorizeText("Not performed",n.RED)),o.logIdent):o.logWithPrefix("Active switching decision: "+o.colorizeText("Active Switching Disabled!",n.YELLOW),o.logIdent),o.logWithPrefix("CDN List: ",o.logIdent),this.cdnList.size>0){var a=this.cdnList.values().next().value.columns.map((e=>e.padEnd(18))).join("");o.logWithPrefix(a,o.logIdent,2)}else o.logWithPrefix(o.colorizeText("The list is empty!",n.RED),o.logIdent,2);for(var l of this.cdnList.values()){var d=l.generateRow();o.log(o.logIdent.repeat(2)+d.row,"color: "+d.color)}var h=Array.from(this.cdnList.values()).filter((e=>e.getFailedRequestsPercentage()>30)).length,u=this.successfulResponseFromSelector&&this.balancerInterceptedRequests&&this.usedSelectorAPI&&this.cdnList.size>0&&(!this.triedSendingBalancerStats||r),c=this.integrationMessageColors.YELLOW,p="%cCDN Balancer might not be integrated!";u?this.triedSendingBalancerStats&&0===s.length&&h<this.cdnList.size&&(p="%cCDN Balancer is integrated!",c=this.integrationMessageColors.GREEN):(p="%cCDN Balancer is NOT integrated!",c=this.integrationMessageColors.RED),o.log(p,"color: "+c+"; font-size: 12px; font-weight: bold;")}}logVideoAnalyticsDiagnostic(){if(this.videoAnalyticsEnabled){var e=Array.from(this.successfulNQSRequests).map((e=>e.slice(1))),t=this.mandatoryNQSRequests.filter((t=>!e.includes(t)));if(o.header("Video Analytics Diagnostic"),o.logWithPrefix("Events sent to server/storage: "+(0!==e.length?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent),o.logWithPrefix("All mandatory events sent to server/storage: "+(0===t.length?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent),t.length>0&&this.triedSendingNQSStats&&o.logWithPrefix("Missing stats requests: "+o.colorizeText(t.join(", "),n.RED),o.logIdent),o.logWithPrefix("Was able to capture events: "+(this.capturedEvents.length>0?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent),o.logWithPrefix("Captured events:",o.logIdent),this.capturedEvents.length>0){var i=this.capturedEvents[0].columns.map((e=>e.padEnd(15))).join("");o.logWithPrefix(i,o.logIdent,2)}else o.logWithPrefix(o.colorizeText("No events captured!",n.RED),o.logIdent,2);for(var r of this.capturedEvents)o.logWithPrefix(r.generateRow(),o.logIdent,2);var s=this.hasPlayerRegistered&&0!==e.length&&this.capturedEvents.length>0,a=this.integrationMessageColors.YELLOW,l="%cVideo Analytics might not be integrated!";s?this.triedSendingNQSStats&&0===t.length&&(l="%cVideo Analytics is integrated!",a=this.integrationMessageColors.GREEN):(l="%cVideo Analytics is NOT integrated!",a=this.integrationMessageColors.RED),o.log(l,"color: "+a+"; font-size: 12px; font-weight: bold;")}}logAdsAnalyticsDiagnostic(){if(this.adsAnalyticsEnabled){var e=Array.from(this.successfulNQSAdsRequests).map((e=>e.slice(1))),t=this.mandatoryNQSAdsRequests.filter((t=>!e.includes(t)));if(o.header("Ads Analytics Diagnostic"),this.shouldIgnoreAds&&o.log("%cIgnoring Ads Analytics because ad.ignore option is set to true","color: "+this.integrationMessageColors.YELLOW+"; font-size: 12px; font-weight: bold;"),this.hasAdsPlayerRegistered||0!==e.length){if(o.logWithPrefix("Events sent to server/storage: "+(0!==e.length?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent),o.logWithPrefix("All mandatory events sent to server/storage: "+(0===t.length?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent),t.length>0&&this.triedSendingNQSAdStats&&o.logWithPrefix("Missing ad stats requests: "+o.colorizeText(t.join(", "),n.RED),o.logIdent),o.logWithPrefix("Was able to capture ads events: "+(this.capturedAdsEvents.length>0?o.colorizeText("Yes",n.GREEN):o.colorizeText("No",n.RED)),o.logIdent),o.logWithPrefix("Captured events:",o.logIdent),this.capturedAdsEvents.length>0){var i=this.capturedAdsEvents[0].columns.map((e=>e.padEnd(15))).join("");o.logWithPrefix(i,o.logIdent,2)}else o.logWithPrefix(o.colorizeText("No events captured!",n.RED),o.logIdent,2);for(var r of this.capturedAdsEvents)o.logWithPrefix(r.generateRow(),o.logIdent,2);var s=(this.hasAdsPlayerRegistered||0!=e.length)&&this.capturedAdsEvents.length>0,a=this.integrationMessageColors.YELLOW,l="%cAds Analytics might not be integrated!";s?0===t.length&&(l="%cAds Analytics is integrated!",a=this.integrationMessageColors.GREEN):(l="%cAds Analytics is NOT integrated!",a=this.integrationMessageColors.RED),o.log(l,"color: "+a+"; font-size: 12px; font-weight: bold;")}else o.log("%cIgnoring Ads Analytics because no ads adapter was registered","color: "+this.integrationMessageColors.YELLOW+"; font-size: 12px; font-weight: bold;")}}getApiErrorMessage(){return"ERROR_CONFIGURATION_NOT_FOUND"===this.apiErrorMessage?o.colorizeText(this.apiErrorMessage+" - Default profile not set or profile doesn't exist",n.YELLOW):this.apiErrorMessage}}p.defaultReportTimeout=3e5},9731:function(e){var t,i,n,r,s;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var d={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(d.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var h=o.path,u=h.substring(0,h.lastIndexOf("/")+1)+a.path;d.path=s.normalizePath(u)}else d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));return null===d.path&&(d.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},parseURL:function(e){var i=t.exec(e);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},5438:(e,t,i)=>{i.d(t,{CE:()=>y,Ji:()=>_,LI:()=>S,Lg:()=>g,Ow:()=>m,Y4:()=>d,Zq:()=>P,_C:()=>w,b3:()=>b,dR:()=>T,df:()=>l,hj:()=>c,jQ:()=>E,m:()=>f,mH:()=>v,w2:()=>h,wc:()=>A,xC:()=>s,yL:()=>a,yl:()=>o,zU:()=>p});var n=r;function r(e,t){var i=u();return(r=function(e,t){return i[e-=245]})(e,t)}!function(e){for(var t=r,i=e();;)try{if(963469==-parseInt(t(284))/1+-parseInt(t(271))/2+parseInt(t(263))/3+parseInt(t(258))/4+-parseInt(t(262))/5*(-parseInt(t(252))/6)+-parseInt(t(247))/7*(-parseInt(t(267))/8)+parseInt(t(286))/9*(-parseInt(t(268))/10))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(u);var s={CDN:n(269)},a={Success:"ok",Fail:"nok",Progress:"pr"},o={Updated:"updated",Success:"ok",Fail:"nok"},l={host:n(259),devHost:n(287),devDomains:[n(251),"qa.npaw.com"],service:n(277),decisionCallWaitTime:3e4,decisionReloadIntervalPerManifestMilliseconds:3e4},d=[".mp4",n(255),".ts",n(289),n(261),n(249)],h=[".m3u8",n(270)];function u(){var e=["9igXREV","stage-smartswitchv2.youbora.com","wss://p2p-tracker.youbora.com/webrtc",".cmf","NEW_SEGMENT_AVAILABLE","size","7967043unGHkh","command",".m4f","SEGMENT_ABSENT","stage.npaw.com","2409840VGcKTw","SEGMENT_REQUEST","data",".m4s",".aac",".srt","4509244TesBUY","gnsnpaw.com","qualityPriority",".dash","10xSvXWL","4205127IGKAOe","ping","keys","close","8yPGlOh","15842070FnZBmp","/cdn",".mpd","3426564tIjlUi","cdnPriority","identifier","connect",".ass","pong","/decision","default","SEGMENTS_MAP","bestScore","PING","PONG","splits","209491gqicMc",".vtt"];return(u=function(){return e})()}var c=[n(256)],p=[n(257),n(285),".ssa",n(275)],g={connect:n(274),close:n(266),error:"error",data:n(254),ping:n(264),pong:n(276)},f={optimizedScore:"optimizedScore",optimizedFeedback:"optimizedFeedback",bestScore:n(280),qualityPriority:n(260),cdnPriority:n(272)},m={max:25e6,min:2e5,default:2e5},v=(n(278),{data:"SEGMENT_DATA",absent:n(250),map:n(279),newSegmentAvailable:n(245),request:n(253),cancel:"CANCEL_SEGMENT_REQUEST",ping:n(281),pong:n(282)}),y={command:n(248),id:"data_spec_key",size:n(246),storageSize:"ss",map:n(265),identifier:n(273),splits:n(283),time:0,simpleMapKeys:"k",simpleMapSize:"s",dateTime:"dt",createdAt:"ca"},b={bandwidth_test:2,message:1,data:0},S={maxMessageSize:65532,probability:1,timeout:2500,maxConcurrency:6,maxConnectedPeers:40,tracker:n(288),upload:!1},E={version:2},T={expiration:3e5,count:60,safeMaxCount:300},w={retries:5,retryDelay:100,defaultBwThreshold:2e5,connectTimeoutMilliseconds:1e4,readTimeoutMilliseconds:3e3,minRequestSizeForBwEstimateKB:100},_={totalDataInterval:6e4},A={callTimeoutMilliseconds:500,timeBetweenCallsMilliseconds:1e3,timeBetweenBurstsMilliseconds:5e3},P={lastMeasurementWeight:.5,maximumRelativeDeltaForTrial:.2,minimumDurationSinceLastUsedForTrialMilliseconds:3e4}},9393:(e,t,i)=>{var n=i(7086),r=i(7680),s={getPosition:function(){return null},getGivenBreaks:function(){return null},getExpectedBreaks:function(){return null},getExpectedPattern:function(){return null},getBreaksTime:function(){return null},getGivenAds:function(){return null},getExpectedAds:function(){return null},getIsVisible:function(){return!0},getAudioEnabled:function(){return null},getIsSkippable:function(){return null},getIsFullscreen:function(){return null},getCampaign:function(){return null},getCreativeId:function(){return null},getProvider:function(){return null},getAdInsertionType:function(){return null},fireClick:function(e){"string"==typeof e&&(e={url:e}),this.emit(n.Event.CLICK,{params:e})},fireQuartile:function(e){this.flags.isStarted&&"number"==typeof e&&e>this.flags.lastQuartileSent&&e<4&&(this.flags.lastQuartileSent++,this.emit(n.Event.QUARTILE,{params:{quartile:e}}))},startChronoView:function(){if(this.getIsVisible()&&this.plugin.backgroundDetector&&!this.plugin.backgroundDetector.isInBackground){var e=this.chronos.viewedMax;0!==e.length&&0===e[e.length-1].stopTime||(e.push(new r),e[e.length-1].start())}},stopChronoView:function(){var e=this.chronos.viewedMax;e[0]&&e.length>0&&0===e[e.length-1].stopTime&&e[e.length-1].stop()},fireManifest:function(e,t){var i={params:e};"string"==typeof e&&(i={params:{errorType:e,errorMessage:t}}),this.emit(n.Event.MANIFEST,i)},fireSkip:function(e){void 0===e&&(e={}),e.skipped=!0,this.fireStop(e)},fireBreakStart:function(e){this.fireAdBreakStart(e)},fireBreakStop:function(e){this.fireAdBreakStop(e)},fireAdBreakStart:function(e){this.emit(n.Event.PODSTART,{params:e})},fireAdBreakStop:function(e){this.emit(n.Event.PODSTOP,{params:e})}};e.exports=s},594:(e,t,i)=>{var n=i(7086),{default:r}=i(7276),{AnalyticsTag:s}=i(2784),a={getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){},getDroppedFrames:function(){},getThroughput:function(){},getRendition:function(){},getTitle2:function(){},getIsLive:function(){},getCdnTraffic:function(){},getP2PTraffic:function(){},getUploadTraffic:function(){},getIsP2PEnabled:function(){},getSegmentDuration:function(){},getHouseholdId:function(){},getLatency:function(){},getPacketLoss:function(){},getPacketSent:function(){},getMetrics:function(){},getAudioCodec:function(){},getVideoCodec:function(){},getURLToParse:function(){},fireSeekBegin:function(e,t,i){if(this._discardFalseBuffers(),!(this.getVideo()&&this.getVideo().getIsLive()&&this.plugin.options["content.isLive.noSeek"])&&this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===t)return;r.notice(s,"Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();try{this.fireEventsStruct.seek=[],i?this.fireEventsStruct.seek.push(i):this.fireEventsStruct.seek.push("undefinedEvent")}catch(e){}this.flags.isSeeking=!0,this.emit(n.Event.SEEK_BEGIN,{params:e})}},fireSeekEnd:function(e,t){if(!(this.getVideo()&&this.getVideo().getIsLive()&&this.plugin.options["content.isLive.noSeek"])&&this.flags.isJoined&&this.flags.isSeeking){try{t?this.fireEventsStruct.seek.push(t):this.fireEventsStruct.seek.push("undefinedEvent")}catch(e){}(e=e||{}).triggeredEvents=this.fireEventsStruct.seek,this.cancelSeek(),this.emit(n.Event.SEEK_END,{params:e});try{this.chronos.pause.getDeltaTime(!1)>0&&this.chronos.pause.resume()}catch(e){}}},cancelSeek:function(e){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireEvent:function(e,t,i,r){if("data"===e)this.emit(n.Event.DATA_OBJECT,{params:r});else{var s=r||{};s.name=e||"",s.dimensions=t||{},s.values=i||{},this.emit(n.Event.VIDEO_EVENT,{params:s})}},storeNewRendition:function(e){this.getVideo().triggerUpdateRendition(e)}};e.exports=a},5292:(e,t,i)=>{var n=i(1593),{default:r}=i(7276),s=i(2507),a=i(9835),o=i(5200),l=i(7255),d=i(3381),h=i(8490),u=i(7086),c=i(6777),{AnalyticsTag:p}=i(2784),{default:g}=i(9065),{default:f}=i(61),m=n.extend({constructor:function(e,t,n,s,d,h){this._key=e,this._setAdapter=!1,this._npawVideo=t,this._loadedAdapterImplementation=!1,this.flags=new l,this.chronos=new o,this._adapterClasses={},this.fireEventsStruct={},this.fireEventsStruct.buffer=[],this.fireEventsStruct.seek=[],this.monitor=null,this.plugin=n,this.player&&this.unregisterListeners(),this.player=null,this._isAdsAdapter=null,this.log=r,this.log.loadLevelFromUrl(),this.npaw=i(6014),this.setPlayer(d);var u,c="object"!=typeof h,g=c?JSON.parse(h):void 0;if(this._adapterName=c?this.getAdapterName(g):this.getAdapterNameFromClass(h),c&&this.plugin&&this.plugin.canOverwriteAdapters()&&(u=this._getAdapterFromTemplates(this._adapterName))&&r.notice(p,"Overwrite Adapter: "+this._adapterName),c&&!u)if(h)try{u=g}catch(e){r.warn(p,"Problem parsing adapter json code (to object conversion)")}else u=this._getAdapterFromTemplates(this._adapterName);this.tag=this.player,c&&u?(this.evalAdapterJson(u,!1),this.registerListeners()):!c&&h&&(this.loadAdapterClasses(h,!1),this.registerListeners()),this.plugin.options.enableExtraMetricCollection&&this._npawVideo.fetchLocation(),r.notice(p,"Adapter "+this.getVersion()+" with Lib "+a+" is ready.")},_updatePlayer:function(e){this.player&&this.unregisterListeners(),this.player=null,this.setPlayer(e),this.tag=this.player,this.registerListeners()},isSetAdapter:function(){return this._setAdapter},getVideo:function(){return this._npawVideo},getPlugin:function(){return this.plugin},getNpawUtils:function(){return this.plugin.utils},getNpawReference:function(){return this.npaw},getLog:function(){return this.log},isStarted:function(){return!!this.flags&&this.flags.isStarted},getAdapterClass:function(e){var t=this._adapterClasses;return t[e]?t[e]:null},getAdapterName:function(e){if(e&&e["adapter,getVersion"])try{return window.Function(e["adapter,getVersion"])()}catch(e){}return"undefined"},getAdapterNameFromClass:function(e){if(e&&e.getVersion)try{return e.getVersion()}catch(e){}return"undefined"},getAdapterClasses:function(){return this._adapterClasses},updateAdapterTemplates:function(e){if(this.plugin.canOverwriteAdapters()){var t=this._getAdapterFromTemplates(this._adapterName,e);t&&(this.evalAdapterJson(t,!0),this.registerListeners())}},_getAdapterFromTemplates:function(e,t){var i=null;t||(t=this.plugin.adapterTemplates);try{e&&t&&t[e.toLowerCase()]&&(i=JSON.parse(t[e.toLowerCase()]))}catch(t){r.warn(p,"Adapter "+e+" not found on repository")}return i},evalAdapterJson:function(e,t){t=t||!1;var i=0,n=0,s="";try{for(var a in e){var o=a.split(","),l=o.shift(),d=o.shift();s=d;var h=null;if(o&&o.length>=1){var u=o;h=window.Function(u,e[a])}else h=window.Function(e[a]);h&&("adapter"===l.toLowerCase()?(this[d]=h,i++):l.indexOf(".adapter")>0?(l=l.replace(".adapter",""),this.getAdapterClasses()[l]||(this.getAdapterClasses()[l]=new m(this._key,this._npawVideo,this.getPlugin(),null,this.player,null,null,{})),this.getAdapterClasses()[l][d]=h,n++):(this.getAdapterClasses()[l]||(this.getAdapterClasses()[l]={},this.getAdapterClasses()[l].constructor=function(){},this.getAdapterClasses()[l].plugin=this.plugin,this.getAdapterClasses()[l].getNpawUtils=function(){return this.plugin.utils}),this.getAdapterClasses()[l][d]=h,n++))}this._loadedAdapterImplementation=!0,this._adapterEvaluatedCode=e;try{this.adapterHash=c("string"==typeof e?e.trim():JSON.stringify(e).trim())}catch(e){this.adapterHash="Undefined"}r.notice(p,"["+this.getAdapterKey()+"] Loaded adapter ("+this.getVersion()+") (Hash "+this.adapterHash+") implementation from JSON; From templates: "+t+"; Integrated adapter methods: "+i+", external methods: "+n)}catch(e){r.error(p,"Can't be evaluated adapter json correctly; From templates: "+t+", Last method evaluated: "+s)}},loadAdapterClasses:function(e,t){var i=this;t=t||!1;var n=0,s=0,a="",o=Object.getPrototypeOf(e);try{for(var l="",d=new Map;o!==Object.prototype;)Object.getOwnPropertyNames(o).forEach((e=>{"function"!=typeof o[e]||"constructor"===e||d.has(e)||d.set(e,o[e])})),o=Object.getPrototypeOf(o);if(d.forEach(((e,t)=>{this[t]=e,l+=e.toString(),n++})),a="Adapter Class",void 0!==e.adsAdapters)for(var h of Object.keys(e.adsAdapters))this.getAdapterClasses()[h]=new m(this._key,this._npawVideo,this.getPlugin(),null,this.player,new e.adsAdapters[h]),a="Ads Adapter -> "+h;if(void 0!==e.additionalContexts){var u=function(){i.getAdapterClasses()[g]||(i.getAdapterClasses()[g]={},i.getAdapterClasses()[g].constructor=function(){},i.getAdapterClasses()[g].plugin=i.plugin,i.getAdapterClasses()[g].getNpawUtils=function(){return this.plugin.utils});var t=new e.additionalContexts[g],n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n).filter((e=>"function"==typeof t[e]&&"constructor"!==e));for(var a of r)i.getAdapterClasses()[g][a]=t[a],s++};for(var g of Object.keys(e.additionalContexts))u();a="Additional Contexts"}this._loadedAdapterImplementation=!0;try{this.adapterHash=c(l.trim())}catch(e){this.adapterHash="Undefined"}r.notice(p,"["+this.getAdapterKey()+"] Loaded adapter ("+this.getVersion()+") (Hash "+this.adapterHash+") implementation from class; From templates: "+t+"; Integrated adapter methods: "+n+", external methods: "+s)}catch(e){r.error(p,"Can't be evaluated adapter class correctly; From templates: "+t+", Last method evaluated: "+a)}},getAdapterKey:function(){return this._key},setPlayer:function(e){"string"==typeof e&&"undefined"!=typeof document?this.player=document.getElementById(e):this.player=e},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){try{this.stopMonitor(),this.stopReadyStateMonitor(),this.unregisterListeners(),this.player=null,this.tag=null}catch(e){r.error(p,"Can't process dispose for video "+this._key)}},monitorPlayhead:function(e,t,i){this.stopMonitor();var n=0;e&&(n|=d.Type.BUFFER),t&&(n|=d.Type.SEEK),this.monitor&&this.monitor._timer.isRunning?this.monitor.skipNextTick():this.monitor=new d(this,n,i)},stopMonitor:function(){this.monitor&&this.monitor.stop()},monitorReadyState:function(e){this.stopReadyStateMonitor(),this.stateMonitor=new h(this,e)},startReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.start()},stopReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.stop()},checkReadyState:function(e,t){try{this.plugin&&this.plugin.getReadyStateMonitorEnabled()&&e&&(e>3&&!this.flags.isSeeking?this.flags.isBuffering?this.fireBufferEnd({},t+"-readyState"):this.flags.isJoined||this.fireJoin({},t+"-readyState"):e<4&&!this.flags.isBuffering&&!this.flags.isPaused&&this.fireBufferBegin({},!1,t+"-readyState",!0))}catch(e){r.error(p,"Can't check readyState property correctly")}},getPlayhead:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getTotalBytes:function(){return null},getTitle:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return a+"-generic-js"},getVideoObject:function(){return null},getLastUsedCdn:function(){return g.getInstance().getCommonVariable(f.Products.BALANCER,f.BalancerVariables.LAST_USED_CDN)||void 0},checkExistsPlayer:function(){return!0},checkExistsObjectOnPage:function(e){return s.elementIsInPage(e)},fireInit:function(e,t){if(this._npawVideo&&this._npawVideo.controlPlayerExists()&&!this.checkExistsPlayer())return r.warn(p,"Cannot fire init event because player not exists on the document"),null;this.adapterHash&&((e=e||{}).pluginHash=this.adapterHash),this._npawVideo&&this._npawVideo.fireInit(e,t)},fireStart:function(e,t){return this._npawVideo&&this._npawVideo.controlPlayerExists()&&!this.checkExistsPlayer()?(r.warn(p,"Cannot fire start event because player not exists on the document"),null):this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls()?null:void(this.flags.isStarted||(this.flags.isStarted=!0,this.chronos.total.start(),this.chronos.join.start(),t&&((e=e||{}).triggeredEvents=[t]),this.adapterHash&&((e=e||{}).pluginHash=this.adapterHash),this.startReadyStateMonitor(),this.emit(u.Event.START,{params:e}),this.plugin._logSetAdapterEvent(this._adapterEvaluatedCode)))},fireJoin:function(e,t){this.flags.isJoined||this.flags.isStarted||this._isAds()||!this._npawVideo||!this._npawVideo.isInitiated||this.fireStart(),this.flags.isStarted&&!this.flags.isJoined&&(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(u.Event.JOIN,{params:e}))},firePause:function(e,t){this._discardFalseBuffers(),this.flags.isBuffering&&this.fireBufferEnd(null,"firePauseCall"),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(u.Event.PAUSE,{params:e}))},fireResume:function(e,t){if(this._discardFalseBuffers(),this.flags.isJoined&&this.flags.isPaused){this.flags.isPaused=!1;try{this._npawVideo.ignorePauseSmallEvents()&&this.chronos.pause.getDeltaTime(!1)<=50?this.chronos.pause.reset():this.chronos.pause.stop()}catch(e){this.chronos.pause.stop()}this.monitor&&this.monitor.skipNextTick(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(u.Event.RESUME,{params:e})}},fireBufferBegin:function(e,t,i,n){if(n=n||!1,this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!t)return;r.notice(p,"Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();try{this.fireEventsStruct.buffer=[],i?this.fireEventsStruct.buffer.push(i):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(e){}this.flags.isBuffering=!0,this.flags.isVideoStateBuffering=n,this.emit(u.Event.BUFFER_BEGIN,{params:e})}},fireBufferEnd:function(e,t){if(this.flags.isJoined&&this.flags.isBuffering){try{t?this.fireEventsStruct.buffer.push(t):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(e){}(e=e||{}).triggeredEvents=this.fireEventsStruct.buffer,this.cancelBuffer(),this.emit(u.Event.BUFFER_END,{params:e});try{this.chronos.pause.getDeltaTime(!1)>0&&this.chronos.pause.resume()}catch(e){}}},_discardFalseBuffers:function(){try{this.flags.isBuffering&&this.flags.isVideoStateBuffering&&this._getDeltaBufferTime()<=100&&this.cancelBuffer()}catch(e){}},cancelBuffer:function(e){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.flags.isVideoStateBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},_getDeltaBufferTime:function(){return this.chronos&&this.chronos.buffer?this.chronos.buffer.getDeltaTime(!1):0},fireStop:function(e,t){try{if((this._isAds()||this._npawVideo._isStopReady())&&(this._isAds()&&this.flags.isStarted||!this._isAds()&&(this.flags.isStarted||this._npawVideo.isInitiated))){if(this.stopMonitor(),this.stopReadyStateMonitor(),this._isAds()&&(e=e||{},this.flags.isPaused)){var i=this.chronos.pause.getDeltaTime();e.adPauseDuration=i}this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(u.Event.STOP,{params:e}),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset(),this.chronos.viewedMax.splice(0,this.chronos.viewedMax.length)}}catch(e){r.warn(p,"Issue firing Stop event")}},firePlayerLog:function(e,t){if(this._npawVideo){var i={logs:t,logAction:e,logType:"playerEvent"};this._npawVideo.firePlayerLog(i)}},setIsAds:function(e){this._isAdsAdapter=e},_isAds:function(){return this._isAdsAdapter},fireCasted:function(e,t){e||(e={}),e.casted=!0,this.fireStop(e,t)},fireError:function(e,t,i,n,r,a){var o=s.buildErrorParams(e,t,i);o.code&&delete o.code,r&&((o=o||{}).triggeredEvents=[r]);var l=this._npawVideo?this._npawVideo.options:{};void 0!==o.errorCode&&l["errors.ignore"]&&l["errors.ignore"].indexOf(o.errorCode.toString())>-1||(((a=a||!1)||void 0!==o.errorCode&&l["errors.fatal"]&&l["errors.fatal"].indexOf(o.errorCode.toString())>-1)&&this.flags.isJoined&&((o=o||{}).errorType="fatal"),this.emit(u.Event.ERROR,{params:o}))},fireFatalError:function(e,t,i,n,r){this.fireError(e,t,i,n,r,!0)},isLegacyBufferBehaviourEnabled:function(){return(this._npawVideo?this._npawVideo.options:{}).enableLegacyBufferBehaviour||!1}},{Event:u.Event});s.assign(m.prototype,i(9393)),s.assign(m.prototype,i(594)),e.exports=m},5200:(e,t,i)=>{var n=i(3948),r=i(7680),s=n.extend({constructor:function(){this.reset()},reset:function(){this.join=new r,this.seek=new r,this.pause=new r,this.buffer=new r,this.total=new r,this.viewedMax=[]}});e.exports=s},7255:(e,t,i)=>{var n=i(3948).extend({constructor:function(){this.reset()},reset:function(){this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isVideoStateBuffering=!1,this.isEnded=!1,this.isStopped=!1,this.lastQuartileSent=0,this.isAdPaused=!1}});e.exports=n},3381:(e,t,i)=>{var n=i(3948),r=i(4954),s=i(7680),a=n.extend({constructor:function(e,t,i){this._adapter=e,this._seekEnabled=t&a.Type.SEEK,this._bufferEnabled=t&a.Type.BUFFER,i=i||800,this._chrono=new s,this._lastPlayhead=0,i>0&&(this._timer=new r(this.progress.bind(this),i))},start:function(){this.stop(),this.canBeUsed()&&this._timer.start()},stop:function(){this._lastPlayhead=0,this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var e=this._chrono.stop();this._chrono.start();var t=e*a.kBUFFER_THRESHOLD_RATIO,i=e*a.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!==this._adapter.getPlayrate()&&(t*=this._adapter.getPlayrate(),i*=this._adapter.getPlayrate());var n=this._getPlayhead(),r=1e3*Math.abs(this._lastPlayhead-n),s="function"==typeof this._adapter.getVideoBufferLength?this._adapter.getVideoBufferLength():null;if(r<t){if(this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking){var o=this._adapter.getPlugin();o&&o.options&&o.options.checkVideoBufferInPlayheadMonitor?(null===s||s<=0)&&this._adapter.fireBufferBegin(null,!1,"playheadMonitor"):this._adapter.fireBufferBegin(null,!1,"playheadMonitor")}}else r>i?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1,"playheadMonitor"):(this._seekEnabled&&this._adapter.fireSeekEnd(null,"playheadMonitor"),this._bufferEnabled&&this._adapter.fireBufferEnd(null,"playheadMonitor"));this._lastPlayhead=n},canBeUsed:function(){var e=this._adapter.getVideo(),t=this._adapter.getPlugin();return!(!t||!t.getPlayheadMonitorEnabled()||!this._seekEnabled&&!this._bufferEnabled||e&&e.getIsLive()&&t.options["content.isLive.noMonitor"])},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});e.exports=a},8490:(e,t,i)=>{var n=i(3948),{default:r}=i(7276),{AnalyticsTag:s}=i(2784),a=n.extend({constructor:function(e,t){this._adapter=e,this._videoElement=e.getVideoObject(),this._startedStateCheck=!1,this._intervalCheckId=null,this._intervalMilliseconds=t||300},start:function(){var e=this._adapter.plugin;e&&e.getReadyStateMonitorEnabled()&&this._videoElement&&!this._startedStateCheck&&(this._intervalCheckId=setInterval(this.checkStateProperty.bind(this),this._intervalMilliseconds),this._startedStateCheck=!0)},stop:function(){try{this._startedStateCheck&&this._intervalCheckId&&clearInterval(this._intervalCheckId),this._intervalCheckId=null,this._startedStateCheck=!1}catch(e){r.error(s,"Produced error stopping the network monitor")}},checkStateProperty:function(e){try{this._videoElement&&this._adapter&&this._videoElement.readyState&&(this._videoElement.readyState>3&&!this._adapter.flags.isSeeking?this._adapter.flags.isBuffering?this.fireBufferEnd({},"stateMonitor"):this._adapter.flags.isJoined||this.fireJoin({},"stateMonitor"):this._videoElement.readyState<4&&!this._adapter.flags.isBuffering&&this.fireBufferBegin({},!1,"stateMonitor",!0))}catch(e){}}});e.exports=a},7680:(e,t,i)=>{var n=i(3948).extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(e){var t=-1,i=(new Date).getTime();if(this.startTime){e&&!this.stopTime&&(this.stopTime=i);var n=this.pauseTime?i-this.pauseTime:0,r=this.stopTime?this.stopTime:i;t=this.offset-n+(r-this.startTime)}return t},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pauseTime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var e=new n;return e.startTime=this.startTime,e.stopTime=this.stopTime,e.offset=this.offset,e}});e.exports=n},3821:(e,t,i)=>{var n=i(3948),{default:r,LogLevel:s}=i(7276),a=i(2507),{AnalyticsTag:o}=i(2784),l=n.extend({constructor:function(e,t,i,n,r){this.videoKey=r,this.xhr=this.createXHR(),this.host=e||"",this.service=t||"",this.params=i||{},this.options=a.assign({},l.defaultOptions,n),this.retries=0,this.sendPostRequest=!1,this.preparedPostRequest=!1,this.options.cache||this.params.timemark||this.setParam("timemark",(new Date).getTime())},createXHR:function(){var e={};try{e=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){r.error(o,e)}return e},getXHR:function(){return this.xhr},getResponse:function(){return this.xhr.response},getResponseText:function(){return this.xhr.responseText},getResponseHeaders:function(){return this.xhr.getAllResponseHeaders()},getUrl:function(){return this.host+this.service+this.getParamString()},getVideoKey:function(){return this.videoKey},on:function(e,t,i){return this.xhr.addEventListener?this.xhr.addEventListener(e,t.bind(this,this,i)):e===l.Event.SUCCESS&&(this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&t.bind(this,this,i)}.bind(this)),this},off:function(e,t){return this.xhr.removeEventListener(e,t),this},getParamString:function(){try{var e="?";for(var t in this.params){var i=this.params[t];if(null!==i&&"object"==typeof i){var n=JSON.stringify(i);"{}"!==n&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}else null!=i&&""!==i&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(i)+"&")}return e.slice(0,-1)}catch(e){return r.error(o,e),""}},getParam:function(e){return this.params[e]},setParam:function(e,t){return this.params[e]=t,this},setBody:function(e){this.body=e},setPostRequest:function(e){this.sendPostRequest=e},getParamsForPostMessages:function(){var e={};try{var t=this.getParam("timemark"),i=this.getParam("code"),n=this.getParam("sessionRoot"),s=this.getParam("sessionId");t&&(e.timemark=t),i&&(e.code=i),n&&(e.sessionRoot=n),s&&(e.sessionId=s)}catch(e){r.error(o,e)}return e},send:function(){try{try{this.sendPostRequest&&!this.preparedPostRequest&&(this.options.method="POST",this.body=JSON.stringify(this.params),this.params=this.getParamsForPostMessages(),this.preparedPostRequest=!0)}catch(e){}if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);for(var t in this.options.retryAfter>0&&this.options.maxRetries>0&&0===this.retries&&this.on(l.Event.ERROR,function(){if(this.retries>=this.options.maxRetries)r.error(o,'Aborting failed request "'+this.service+'". Max retries reached.');else{r.warn(o,'YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms.");try{setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter)}catch(e){"undefined"!=typeof atv?atv.setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter):r.error(o,e)}}}.bind(this)),r.logLevel<=s.VERBOSE&&r.verbose(o,"XHR Req: "+this.getUrl()),l._globalListeners)l._globalListeners[t].forEach(function(e){this.on(t,e)}.bind(this));return this.xhr.send(this.body)}catch(e){r.error(o,e)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(e,t){l._globalListeners[e]=l._globalListeners[e]||[],l._globalListeners[e].push(t)},offEvery:function(e,t){if(l._globalListeners[e]){var i=l._globalListeners[e].indexOf(t);-1!==i&&l._globalListeners[e].splice(i,1)}}});e.exports=l},1151:(e,t,i)=>{var n=i(2503),r=i(3168),s=i(3908),a=i(8187),o=i(3831),l=i(4387),d=i(1657),h=i(3782),{AnalyticsTag:u}=i(2784),{default:c}=i(7276),p=n.extend({constructor:function(e){p.__super__.constructor.apply(this,arguments),this.plugin=e,this._realResource=void 0,this._transportFormat=void 0,this._initResource=void 0,this._cdnName=void 0,this._cdnNodeHost=void 0,this._cdnNodeTypeString=void 0,this._cdnNodeType=void 0,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._realResource},_getInitialCdnResource:function(){return this._realResource||this._initResource},getTransportFormat:function(){return this._transportFormat},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(e){e?this._isBusy||(this._isBusy=!0,this._initResource=e,this._parseManifestEnabled=this.plugin.isParseManifest(),this._cdnEnabled=this.plugin.isParseCdnNode(),this._cdnList=this.plugin.getParseCdnNodeList().slice(),s.setBalancerHeaderName(this.plugin.getParseCdnNodeNameHeader(),this.plugin.getParseNodeHeader()),this._setTimeout(),this._parseManifestEnabled?this._isFinalUrl(this._initResource)?(this._realResource=this._initResource,this.done()):this.parseManifest():this._parseCDN()):this.done()},_isFinalUrl:function(e){var t=[".ts",".mp4",".m4s",".cmfv"];for(var i in e=e||"",t){var n=t[i];if(e.lastIndexOf(n)===e.length-n.length)return!0}return!1},_setTimeout:function(){var e=()=>{this._isBusy&&(this.done(),c.warn(u,"ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))};try{this._parseTimeout=setTimeout(e,3e3)}catch(t){"undefined"!=typeof atv?this._parseTimeout=atv.setTimeout(e,3e3):c.error(u,t)}},parseManifest:function(e,t){var i=this.plugin.options["parse.manifest.auth"],n=[new d(i),new o(i),new r(i)];this._parseManifest(n,e,t||this._initResource)},_parseManifest:function(e,t,i,n){if(e.length>0){var r=e[0];r.shouldExecute(t)?(r.on(l.Event.DONE,(()=>{this._parseManifest(e.slice(1,e.length),r.getLastManifest(),r.getResource(),r.getTransportFormat()||n)})),r.parse(i,t)):this._parseManifest(e.slice(1,e.length),t,i,n)}else this._transportFormat=n,this._realResource=i,this._parseCDN()},_parseCDN:function(){if(this.plugin.isCdnSwitch())this.switchDetector=new a(this.plugin),this.switchDetector.on(a.Events.DONE,(e=>{this._cdnName=e.data,this.done()})),this.switchDetector.on(a.Events.ERROR,(()=>{this.done()})),this.switchDetector.init();else if(this._cdnEnabled&&this._cdnList.length>0){var e=this._cdnList.shift(),t=s.create(e);t?(t.on(s.Event.DONE,(()=>{this._responses=t.getResponses(),this._cdnName=t.getParsedCdnName(),this._cdnNodeHost=t.getParsedNodeHost(),this._cdnNodeTypeString=t.getParsedNodeTypeString(),this._cdnNodeType=t.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()})),t.parse(this._getInitialCdnResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(e){if(e.service===h.Service.START){var t=this.plugin.requestBuilder.lastSent;t.parsedResource=e.params.parsedResource=this.getResource()||e.params.parsedResource,t.transportFormat=e.params.transportFormat=this.getTransportFormat()||e.params.transportFormat,this._cdnEnabled&&(t.cdn=e.params.cdn=e.params.cdn||this.getCdnName(),t.nodeHost=e.params.nodeHost=this.getNodeHost()||e.params.nodeHost,t.nodeType=e.params.nodeType=this.getNodeType()||e.params.nodeType,t.nodeTypeString=e.params.nodeTypeString=this.getNodeTypeString()||e.params.nodeTypeString)}}});e.exports=p},8187:(e,t,i)=>{var n=i(1593),r=i(3821),{AnalyticsTag:s}=i(2784),{default:a}=i(7276),o=n.extend({constructor:function(e){this.plugin=e,this.headerName="x-cdn"},init:function(){var e=null;this.plugin&&(e=this.plugin.getAdapter()&&this.plugin.getAdapter().getURLToParse()?this.plugin.getAdapter().getURLToParse():this.plugin.getResource()),this.plugin&&this.plugin.getAdapter()&&this.plugin.getAdapter().flags.isStarted&&this._request(e)},done:function(e){this.emit(o.Events.DONE,e)},error:function(){this.emit(o.Events.ERROR)},_successfulRequest:function(e){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"]));var t=e.getResponseHeaders().split("\n"),i=null;for(var n in t){var r=t[n],s=r.indexOf(this.headerName);s>-1&&(i=r.substring(s+this.headerName.length+1,r.length-1).replace(" ",""))}this.done(i)},_failedRequest:function(){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"])),a.warn(s,"CDN switch detection request failed"),this.error()},_request:function(e){var t=new r(e,null,null,{method:"HEAD",cache:!0});t.on(r.Event.SUCCESS,this._successfulRequest.bind(this)),t.on(r.Event.ERROR,this._failedRequest.bind(this)),t.send()}},{Events:{DONE:"done",ERROR:"error"}});e.exports=o},3908:(e,t,i)=>{var n=i(1593),r=i(2507);i(3821);var{AnalyticsTag:s}=i(2784),{default:a}=i(7276),o=n.extend({constructor:function(e){this._options=r.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},e),this._responses={}},done:function(){this.emit(o.Event.DONE)},addParser:function(e){return this._options.parsers.push(e),this},setCdnName:function(e){return this._options.cdnName=e,this},setRequestMethod:function(e){return this._options.requestMethod=e,this},setRequestHeader:function(e,t){return this._options.requestHeaders[e]=t,this},setParseType:function(e){return this._options.parseType=e,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(e,t){this._responses=t||{};var i=JSON.stringify(this._options.requestHeaders);this._responses[i]?this._parseResponse(this._responses[i]):this._requestResponse(e)},_requestResponse:function(e){var t=JSON.stringify(this._options.requestHeaders),i="{}"!==t,n=new XMLHttpRequest;for(var r in n.open(this._options.requestMethod,e),this._options.requestHeaders)Object.prototype.hasOwnProperty(this._options.requestHeaders,r)&&n.setRequestHeader(r,this._options.requestHeaders[r]);n.onreadystatechange=()=>{4===n.readyState&&(n.status>=200&&n.status<400?(this._responses[t]=n.getAllResponseHeaders(),this._parseResponse(this._responses[t])):i?(this._options.requestHeaders={},this._requestResponse(e)):this.done())},n.send()},_parseResponse:function(e){this._options.parsers.forEach(function(t){if("string"==typeof t.headerName)this._parseHeaderResponse(e,t,t.headerName);else if(Array.isArray(t.headerName))for(var i=0,n=t.headerName.length;i<n;i++){var r=t.headerName[i];"string"==typeof r&&this._parseHeaderResponse(e,t,r)}}.bind(this)),this.done()},_parseHeaderResponse:function(e,t,i){i&&(i=i?i.toLowerCase():"",e.split("\n").forEach(function(e){var n=e.indexOf(":");-1!==n&&e.slice(0,n).toLowerCase()===i&&this._executeParser(t,e.slice(n+1))}.bind(this)))},_executeParser:function(e,t){try{var i=e.regex.exec(t.trim());if(null!==i)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),e.element){case o.ElementType.HOST:this._cdnNodeHost=i[1];break;case o.ElementType.TYPE:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.HOST_AND_TYPE:this._cdnNodeHost=i[1],this._cdnNodeTypeString=i[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=i[2];break;case o.ElementType.NAME:this._cdnName=i[1].toUpperCase()}}catch(e){a.warn(s,"CDN parsing for "+this._options.cdnName+" could not parse header value "+t)}},shouldExecute:function(){return!0}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(e,t){o._cdnConfigs.Balancer.parsers[0].headerName=e,o._cdnConfigs.Balancer.parsers[1].headerName=t},create:function(e){if(o._cdnConfigs[e])return new o(o._cdnConfigs[e]);a.warn(s,"Tried to create an unexisting CdnParser named "+e)},add:function(e,t){o._cdnConfigs[e]=t}});o.add("Level3",i(3713)),o.add("Cloudfront",i(7286)),o.add("Akamai",i(5298)),o.add("Highwinds",i(2047)),o.add("Fastly",i(563)),o.add("Telefonica",i(5040)),o.add("Amazon",i(2370)),o.add("Edgecast",i(7660)),o.add("Balancer",i(2580)),o.add("NosOtt",i(4335)),e.exports=o},5298:e=>{e.exports={cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/},{element:"host",headerName:"akamai-mon-iucid-del",regex:/(.*)/},{element:"type",headerName:"akamai-cache-status",regex:/(.+)\sfrom\schild/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(e){var t=e.toLowerCase();return-1!==t.indexOf("hit")?1:-1!==t.indexOf("miss")?2:0}}},2370:e=>{e.exports={cdnName:"AMAZON",parsers:[{element:"host",headerName:"x-amz-cf-pop",regex:/(.+)/},{element:"type",headerName:"x-cache",regex:/(.+)\sfrom.+/}],parseType:function(e){return-1!==e.toLowerCase().indexOf("hit")?1:-1!==e.toLowerCase().indexOf("miss")?2:0}}},2580:e=>{e.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/},{element:"host",headerName:null,regex:/(.+)/}]}},7286:e=>{e.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},7660:e=>{e.exports={cdnName:"EDGECAST",parsers:[{element:"host",headerName:"Server",regex:/\((.+)\/.+\)/},{element:"type",headerName:"X-Cache",regex:/(.+)/}],parseType:function(e){return"HIT"===e?1:2}}},563:e=>{e.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(e){switch(e){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},2047:e=>{e.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(e){switch(e){case"c":case"x":return 1;default:return 2}}}},3713:e=>{e.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(e){if(e){if(0===e.indexOf("TCP_HIT")||0===e.indexOf("TCP_MEM_HIT")||0===e.indexOf("TCP_IMS_HIT"))return 1;if(0===e.indexOf("TCP_MISS"))return 2}return 0}}},4335:e=>{e.exports={cdnName:"NOSOTT",parsers:[{element:"host",headerName:"X-NOS-Server",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(.*)/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},5040:e=>{e.exports={cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(e){if(e){if(-1!==e.indexOf("p")||-1!==e.indexOf("c"))return 1;if(-1!==e.indexOf("i")||-1!==e.indexOf("m"))return 2}return 0}}},3831:(e,t,i)=>{var n=i(3821),r=i(4387),s=i(7939),{AnalyticsTag:a}=i(2784),{default:o}=i(7276),l=r.extend({parse:function(e,t){if(t)this.parseLocation(t,e);else{var i=new n(e,null,null,{cache:!0,requestHeaders:this._headers});i.on(n.Event.SUCCESS,function(t){this.parseLocation(t,e)}.bind(this)),i.on(n.Event.ERROR,function(e){this.done()}.bind(this)),i.send()}},parseLocation:function(e,t){this.iterations--;var i=new RegExp(/<Location>([\s\S]+)<\/Location>/);try{this._lastManifest=e;var n=e.getResponseText(),r=i.exec(n);if(r&&r[1])var s=this._htmlDecode(r[1].replace("\n",""));s&&s!==t&&this.iterations>0?this.parse(s):this.parseFinalResource(n,t)}catch(e){o.warn(a,"Dash parse failed"),this.done()}},_htmlDecode:function(e){if("undefined"!=typeof document&&"function"==typeof document.createElement){var t=document.createElement("textarea");return t.innerHTML=e,t.childNodes&&t.childNodes.length?t.childNodes[0].nodeValue:e}return e},parseFinalResource:function(e,t){var i=new RegExp(/<BaseURL>[\r\n]*(.*?)[\r\n]*<\/BaseURL>/),n=new RegExp(/<SegmentURL[\s\S]*media="([^"]+)/),r=new RegExp(/<SegmentTemplate[\s\S]*media="([^"]+)/),s=null;try{s=i.exec(e)||r.exec(e)||n.exec(e),this._getManifestMetadata(e),s&&s[1]&&this._isFullUrl(s[1])?s[1].indexOf('"')>0?this._realResource=s[1].substr(0,s[1].indexOf('"')).replace("\n",""):this._realResource=s[1].replace("\n",""):this._realResource=t}catch(e){o.warn(a,"Dash manifest parse failed")}this.done()},_getManifestMetadata:function(e){try{var t=new RegExp(/<AdaptationSet[\s\S]*mimeType="video\/([^"]+)/).exec(e),i=null;switch(t[1]){case"mp4":case"m4s":i=s.MP4;break;case"mp2t":i=s.MPEG2;break;case"cmfv":i=s.CMF}this._transportFormat=i}catch(e){o.warn(a,"Couldnt find the transport format")}},_isFullUrl:function(e){return-1!==e.indexOf("http")},shouldExecute:function(e){var t=!0;return e&&(t=-1!==e.getResponseText().indexOf("<MPD")),t}});e.exports=l},3168:(e,t,i)=>{var n=i(3821),r=i(4387),s=i(7939),{AnalyticsTag:a}=i(2784),{default:o}=i(7276),l=r.extend({parse:function(e,t,i){i=i||"";var r=null;try{r=/((\S*?)(\.m3u8|\.m3u|\.ts|\.m4s|\.mp4|\.cmfv|\.m4a)((\?|;)\S*|\n|\r|$))/i.exec(e.replaceAll(",URI=","\n").replaceAll('"',"").replaceAll(",","\n"))}catch(e){o.warn(a,"Parse HLS Regex failed",e),this.done()}if(null!==r){var l=r[1].trim(),d="",h=i.lastIndexOf("/");if(0!==l.indexOf("http")&&-1!==h){if("/"===l[0]&&"/"!==l[1]){var u=i.indexOf("/")+1;u+=i.substr(u,i.length).indexOf("/")+1,u+=i.substr(u,i.length).indexOf("/"),l=i.slice(0,u)+l}else l=i.slice(0,h)+"/"+l;d=i.slice(0,h)+"/"}if(".m3u8"===r[3]||".m3u"===r[3])if(t)this._parseWithManifest(t,d,r);else{var c=new n(l,null,null,{cache:!0,requestHeaders:this._headers});c.on(n.Event.SUCCESS,function(e){this._parseWithManifest(e,d,r)}.bind(this)),c.on(n.Event.ERROR,function(e){this.done()}.bind(this)),c.send()}else{switch(r[3]){case".mp4":case".m4s":case".m4a":this._transportFormat=s.MP4;break;case".ts":this._transportFormat=s.MPEG2;break;case".cmfv":this._transportFormat=s.CMF}this._realResource=l,this.done()}}else this.done()},_parseWithManifest:function(e,t,i){this._lastManifest=e,this.parse(e.getResponseText(),null,t+i[2])},shouldExecute:function(e){var t=!0;return e&&(t=-1!==e.getResponseText().indexOf("#EXTM3U")),t}});e.exports=l},1657:(e,t,i)=>{var n=i(3821),r=i(4387).extend({parse:function(e,t){if(t)this._parseWithManifest(t);else{this._realResource=e;var i=new n(e,null,null,{cache:!0,requestHeaders:this._headers});i.on(n.Event.SUCCESS,function(e){this._parseWithManifest(e)}.bind(this)),i.on(n.Event.ERROR,function(e){this.done()}.bind(this)),i.send()}},_parseWithManifest:function(e){this._lastManifest=e;var t=e.getResponseHeaders(),i=!1;e&&e.xhr&&e.xhr.responseURL&&e.xhr.responseURL!==this._realResource?(this._realResource=e.xhr.responseURL,this.parse(this._realResource),i=!0):t.split("\n").forEach(function(e){e.startsWith("Location:")&&(this._realResource=e.slice(10),this.parse(this._realResource),i=!0)}.bind(this)),i||this.done()}});e.exports=r},4387:(e,t,i)=>{var n=i(1593).extend({constructor:function(e){this._realResource=void 0,this._lastManifest=void 0,this._transportFormat=void 0,this.iterations=3,this._headers=e},done:function(){this.iterations=3,this.emit(n.Event.DONE)},parse:function(e,t){},getResource:function(){return this._realResource},getTransportFormat:function(){return this._transportFormat},getLastManifest:function(){return this._lastManifest},shouldExecute:function(e){return!0}},{Event:{DONE:"done"}});e.exports=n},2503:(e,t,i)=>{var n=i(1593).extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(e){},isBlocking:function(e){return this._isBusy},done:function(){this._isBusy=!1,this.emit(n.Event.DONE)},hasToSend:function(e){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}});e.exports=n},3782:(e,t,i)=>{var n=i(703),r=i(7086),s={AdPosition:n,ManifestError:i(8932),RequestMethod:i(9637),Service:i(7062),WillSendEvent:i(3003),WillSendLog:i(825),AdInsertionType:i(1083),Adapter:r,Metadata:i(8424)};e.exports=s},1083:e=>{e.exports={ClientSide:"csai",ServerSide:"ssai"}},703:e=>{e.exports={Preroll:"pre",Midroll:"mid",Postroll:"post"}},7086:(e,t,i)=>{var n={Event:i(2477)};e.exports=n},2477:e=>{e.exports={INIT:"init",START:"start",JOIN:"join",JOIN_TIME:"joinTime",DATA_OBJECT:"data",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",MANIFEST:"manifest",PODSTART:"break-start",PODSTOP:"break-stop",QUARTILE:"quartile",VIDEO_EVENT:"video-event"}},8932:e=>{e.exports={NO_RESPONSE:"NO_RESPONSE",EMPTY:"EMPTY_RESPONSE",WRONG:"WRONG_RESPONSE"}},8424:e=>{e.exports={REQUIRED_METADATA_TIMEOUT:1e4}},9637:e=>{e.exports={GET:"GET",POST:"POST"}},7062:e=>{e.exports={DATA:"/data",ADAPTERS:"/adapters",CONFIGURATION:"/configuration",APP_ANALYTICS_PLUGIN_LOGS:"/infinity/session/pluginLogs",VIDEO_PLUGIN_LOGS:"/infinity/video/pluginLogs",INIT:"/init",START:"/start",JOIN:"/joinTime",DATA_OBJECT:"/data",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",CDN:"/cdn",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"}},8472:e=>{e.exports={HDS:"HDS",HLS:"HLS",MSS:"MSS",DASH:"DASH",RTMP:"RTMP",RTP:"RTP",RTSP:"RTSP",DVB:"DVB",DVBC:"DVB-C",DVBT:"DVB-T",DVBT2:"DVB-T2",MULTICAST:"MULTICAST"}},7939:e=>{e.exports={MP4:"MP4",MPEG2:"TS",CMF:"CMF"}},3003:e=>{e.exports={WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_DATA_OBJECT:"will-send-data",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_MANIFEST:"will-send-ad-manifest",WILL_SEND_AD_POD_START:"will-send-ad-break-start",WILL_SEND_AD_POD_STOP:"will-send-ad-break-stop",WILL_SEND_AD_QUARTILE:"will-send-ad-quartile",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"}},825:e=>{e.exports={WILL_SEND_LOG_PLUGIN_INIT:"will-send-log-plugin-init",WILL_SEND_LOG_PLUGIN_SET_OPTIONS:"will-send-log-plugin-set-options",WILL_SEND_LOG_PLUGIN_RECEIVE_DATA:"will-send-log-plugin-receive-data",WILL_SEND_LOG_INFINITY_BEGIN:"will-send-log-infinity-begin",WILL_SEND_LOG_INFINITY_START:"will-send-log-infinity-start",WILL_SEND_LOG_INFINITY_EVENT:"will-send-log-infinity-event",WILL_SEND_LOG_INFINITY_NAV:"will-send-log-infinity-nav",WILL_SEND_LOG_INFINITY_NEW_SESSION:"will-send-log-infinity-new-session"}},9773:(e,t,i)=>{var n=i(3948).extend({constructor:function(e){this.plugin=e,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(){this.isBackgroundDetectorStarted||"undefined"==typeof document||(this.isBackgroundDetectorStarted=!0,document.addEventListener("visibilitychange",this.listenerReference))},stopDetection:function(){this.isBackgroundDetectorStarted&&"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1},_visibilityListener:function(e){if("undefined"!=typeof document){var t=this._getSettings();"hidden"===document.visibilityState?this._toBackground(t):"visible"===document.visibilityState&&this._toForeground(t)}},_toBackground:function(e){this.isInBackground=!0;try{if(this.plugin&&this.plugin.videos)for(var t=0;t<this.plugin.videos.getVideoKeys().length;t++){var i=this.plugin.videos.getVideoKeys()[t],n=this.plugin.videos.getAdsAdapter(i);n&&n.stopChronoView()}}catch(e){}try{if("string"==typeof e){switch(e){case"stop":this._fireStop();break;case"pause":this._firePause()}if(this.plugin.appAnalytics.appAnalyticsStarted){this.lastBeatTime=(new Date).getTime();var r=this.plugin.appAnalytics._beat.chrono.startTime?this.lastBeatTime-this.plugin.appAnalytics._beat.chrono.startTime:0;this.plugin.appAnalytics._sendBeat(r),this.plugin.appAnalytics._beat.stop()}}}catch(e){}},_toForeground:function(e){this.isInBackground=!1;try{if(this.plugin&&this.plugin.videos)for(var t=0;t<this.plugin.videos.getVideoKeys().length;t++){var i=this.plugin.videos.getVideoKeys()[t],n=this.plugin.videos.getAdsAdapter(i);n&&n.startChronoView()}}catch(e){}try{if("string"==typeof e&&e&&this.plugin.appAnalytics.appAnalyticsStarted){var r=(new Date).getTime();r-this.lastBeatTime<this.plugin.appAnalytics.sessionExpire?(this.plugin.appAnalytics._sendBeat(r-this.lastBeatTime),this.plugin.appAnalytics._beat.start()):this.plugin.appAnalytics.newSession()}}catch(e){}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]:this.plugin.deviceDetector.isPlayStation()?this.plugin.options["background.settings.playstation"]:void 0},_firePause:function(){this._fireX("firePause")},_fireStop:function(){this._fireX("fireStop")},_fireX:function(e){try{if(this.plugin&&this.plugin.videos)for(var t=0;t<this.plugin.videos.getVideoKeys().length;t++){var i=this.plugin.videos.getVideoKeys()[t];this.adsAdapter=this.plugin.videos.getAdsAdapter(i),this.adsAdapter&&this.adsAdapter[e]({},"backgroundDetector"),this.contentAdapter=this.plugin.videos.getAdapter(i),this.contentAdapter&&this.contentAdapter[e]({},"backgroundDetector")}}catch(e){}},canBlockStartCalls:function(){return this.isInBackground&&!0===this.plugin.options["background.enabled"]&&this._getSettings()}});e.exports=n},2635:(e,t,i)=>{var n=i(3948).extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTVDevice=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isPlaystationDevice=null!==navigator.userAgent.match(/PlayStation/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTVDevice&&!this._isPlaystationDevice&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTVDevice&&!this._isPlaystationDevice)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTVDevice},isPlayStation:function(){return this._isPlaystationDevice}});e.exports=n},6424:(e,t,i)=>{var n=i(3948).extend({constructor:function(e,t){this.plugin=e,this.video=t,this.listenerReference=this._changeListener.bind(this),this.loadReference=this._loadListener.bind(this),this.isEnabled=!1,this.pageHeight=0,this.maxHeight=0,this.startDetection()},startDetection:function(){this.isEnabled||"undefined"==typeof window||"function"!=typeof window.addEventListener||(window.addEventListener("scroll",this.listenerReference),window.addEventListener("resize",this.listenerReference),window.addEventListener("load",this.loadReference),this.isEnabled=!0)},stopDetection:function(){this.isEnabled&&"undefined"!=typeof window&&"function"==typeof window.removeEventListener&&(window.removeEventListener("scroll",this.listenerReference),window.removeEventListener("resize",this.listenerReference),window.removeEventListener("load",this.loadReference),this.isEnabled=!1)},getScrollDepth:function(){var e=null;return this.maxHeight&&this.pageHeight&&(e=Math.min(Math.trunc(this.maxHeight/this.pageHeight*100),100)),e},_loadListener:function(){if("undefined"!=typeof document){var e=document.documentElement;e&&(this.pageHeight=Math.round(e.scrollHeight,e.clientHeight,e.offsetHeight),this.maxHeight=window.innerHeight,this._updateCompletionRate())}},_changeListener:function(){if(this.pageHeight){var e=this.maxHeight;this.maxHeight=Math.max(this.maxHeight,window.pageYOffset+window.innerHeight),e!==this.maxHeight&&this._updateCompletionRate()}var t=this.video.getAdsAdapter();t&&t.flags.isStarted&&(t.getIsVisible()?t.startChronoView():t.stopChronoView())},_updateCompletionRate:function(){setTimeout(function(){this.plugin.storage.setSession("pageScrollDepth",this.getScrollDepth())}.bind(this),3e3)}});e.exports=n},245:(e,t,i)=>{var n=i(3948).extend({constructor:function(e){this.plugin=e},getAllData:function(){var e=this.getNonRandomData();return e.timestamp=this.getTimestamp(),e},getNonRandomData:function(){var e={};return e.userAgent=this.getUserAgent(),e.threads=this.getVirtualCores(),e.language=this.getLanguage(),e.langList=this.getAvailableLanguages(),e.resolution=this.getResolution(),e.colorDepth=this.getColorDepth(),e.deviceMemory=this.getMemory(),e.touchscreen=this.getTouchscreen(),e.localStorage=this.getLocalStorage(),e.sessionStorage=this.getSessionStorage(),e.cookiesAvailable=this.getCookiesAvailable(),e.flashAvailable=this.getHasFlash(),e.timeZone=this.getTimeZone(),e.plugins=this.getPluginList(),e},getUserAgent:function(){return this._getNavigatorValue("userAgent")},getVirtualCores:function(){return this._getNavigatorValue("hardwareConcurrency")},getLanguage:function(){return this._getNavigatorValue("language")},getAvailableLanguages:function(){return this._getNavigatorValue("languages")},getResolution:function(){var e=null;try{this._getNavigatorValue("screen")&&(e=navigator.screen.width.toString()+navigator.screen.height.toString())}catch(e){}return e},getColorDepth:function(){var e=null;try{this._getNavigatorValue("screen")&&(e=navigator.screen.colorDepth)}catch(e){}return e},getMemory:function(){return this._getNavigatorValue("deviceMemory")},getTouchscreen:function(){return this._getNavigatorValue("maxTouchPoints")||!1},getLocalStorage:function(){var e=!1;try{e="undefined"!=typeof localStorage}catch(e){}return e},getSessionStorage:function(){var e=!1;try{e="undefined"!=typeof sessionStorage}catch(e){}return e},getCookiesAvailable:function(){return this._getNavigatorValue("cookieEnabled")||!1},getHasFlash:function(){var e=!1;try{var t=this._getNavigatorValue("plugins");e=t&&"object"==typeof t["Shockwave Flash"]||"undefined"!=typeof window&&window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}return e},getPluginList:function(){var e=null;try{var t=this._getNavigatorValue("plugins");if(t&&0!==t.length){for(var i="",n=0;n<navigator.plugins.length;n++)i+=navigator.plugins[n].description+" "+navigator.plugins[n].filename+" "+navigator.plugins[n].name+" ";e=i}}catch(e){}return e},getTimeZone:function(){var e=null;try{e=(new Date).getTimezoneOffset().toString()}catch(e){}return e},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator},_getNavigatorValue:function(e){var t=null;try{this._navigatorCheck()&&(t=navigator[e])}catch(e){}return t}});e.exports=n},5804:(e,t,i)=>{var n=i(245),r=i(3948),s=i(6777),{default:a}=i(9065),o=r.extend({constructor:function(){this.dataExtractor=new n,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var e=this.dataExtractor.getAllData();this.key=this._hashFunction(e),a.getInstance().getCoreStorage().setLocal("npawDeviceUUID",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(e){var t=e;return"string"!=typeof e&&(t=JSON.stringify(e)),s(t)},_reset:function(){this.key=void 0},getPreviousKey:function(){return a.getInstance().getCoreStorage().getLocal("npawDeviceUUID")}});e.exports=o},6777:e=>{e.exports=function(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,n,r,s,a;return r=2147483648&e,s=2147483648&t,a=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(n=1073741824&t)?2147483648^a^r^s:i|n?1073741824&a?3221225472^a^r^s:1073741824^a^r^s:a^r^s}function n(e,n,r,s,a,o,l){return e=i(e,i(i(function(e,t,i){return e&t|~e&i}(n,r,s),a),l)),i(t(e,o),n)}function r(e,n,r,s,a,o,l){return e=i(e,i(i(function(e,t,i){return e&i|t&~i}(n,r,s),a),l)),i(t(e,o),n)}function s(e,n,r,s,a,o,l){return e=i(e,i(i(function(e,t,i){return e^t^i}(n,r,s),a),l)),i(t(e,o),n)}function a(e,n,r,s,a,o,l){return e=i(e,i(i(function(e,t,i){return t^(e|~i)}(n,r,s),a),l)),i(t(e,o),n)}function o(e){var t,i="",n="";for(t=0;t<=3;t++)i+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return i}var l,d,h,u,c,p,g,f,m,v=Array();for(v=function(e){for(var t,i=e.length,n=i+8,r=16*((n-n%64)/64+1),s=Array(r-1),a=0,o=0;o<i;)a=o%4*8,s[t=(o-o%4)/4]=s[t]|e.charCodeAt(o)<<a,o++;return a=o%4*8,s[t=(o-o%4)/4]=s[t]|128<<a,s[r-2]=i<<3,s[r-1]=i>>>29,s}(e=function(e){e=e.replace(/rn/g,"n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e)),p=1732584193,g=4023233417,f=2562383102,m=271733878,l=0;l<v.length;l+=16)d=p,h=g,u=f,c=m,p=n(p,g,f,m,v[l+0],7,3614090360),m=n(m,p,g,f,v[l+1],12,3905402710),f=n(f,m,p,g,v[l+2],17,606105819),g=n(g,f,m,p,v[l+3],22,3250441966),p=n(p,g,f,m,v[l+4],7,4118548399),m=n(m,p,g,f,v[l+5],12,1200080426),f=n(f,m,p,g,v[l+6],17,2821735955),g=n(g,f,m,p,v[l+7],22,4249261313),p=n(p,g,f,m,v[l+8],7,1770035416),m=n(m,p,g,f,v[l+9],12,2336552879),f=n(f,m,p,g,v[l+10],17,4294925233),g=n(g,f,m,p,v[l+11],22,2304563134),p=n(p,g,f,m,v[l+12],7,1804603682),m=n(m,p,g,f,v[l+13],12,4254626195),f=n(f,m,p,g,v[l+14],17,2792965006),p=r(p,g=n(g,f,m,p,v[l+15],22,1236535329),f,m,v[l+1],5,4129170786),m=r(m,p,g,f,v[l+6],9,3225465664),f=r(f,m,p,g,v[l+11],14,643717713),g=r(g,f,m,p,v[l+0],20,3921069994),p=r(p,g,f,m,v[l+5],5,3593408605),m=r(m,p,g,f,v[l+10],9,38016083),f=r(f,m,p,g,v[l+15],14,3634488961),g=r(g,f,m,p,v[l+4],20,3889429448),p=r(p,g,f,m,v[l+9],5,568446438),m=r(m,p,g,f,v[l+14],9,3275163606),f=r(f,m,p,g,v[l+3],14,4107603335),g=r(g,f,m,p,v[l+8],20,1163531501),p=r(p,g,f,m,v[l+13],5,2850285829),m=r(m,p,g,f,v[l+2],9,4243563512),f=r(f,m,p,g,v[l+7],14,1735328473),p=s(p,g=r(g,f,m,p,v[l+12],20,2368359562),f,m,v[l+5],4,4294588738),m=s(m,p,g,f,v[l+8],11,2272392833),f=s(f,m,p,g,v[l+11],16,1839030562),g=s(g,f,m,p,v[l+14],23,4259657740),p=s(p,g,f,m,v[l+1],4,2763975236),m=s(m,p,g,f,v[l+4],11,1272893353),f=s(f,m,p,g,v[l+7],16,4139469664),g=s(g,f,m,p,v[l+10],23,3200236656),p=s(p,g,f,m,v[l+13],4,681279174),m=s(m,p,g,f,v[l+0],11,3936430074),f=s(f,m,p,g,v[l+3],16,3572445317),g=s(g,f,m,p,v[l+6],23,76029189),p=s(p,g,f,m,v[l+9],4,3654602809),m=s(m,p,g,f,v[l+12],11,3873151461),f=s(f,m,p,g,v[l+15],16,530742520),p=a(p,g=s(g,f,m,p,v[l+2],23,3299628645),f,m,v[l+0],6,4096336452),m=a(m,p,g,f,v[l+7],10,1126891415),f=a(f,m,p,g,v[l+14],15,2878612391),g=a(g,f,m,p,v[l+5],21,4237533241),p=a(p,g,f,m,v[l+12],6,1700485571),m=a(m,p,g,f,v[l+3],10,2399980690),f=a(f,m,p,g,v[l+10],15,4293915773),g=a(g,f,m,p,v[l+1],21,2240044497),p=a(p,g,f,m,v[l+8],6,1873313359),m=a(m,p,g,f,v[l+15],10,4264355552),f=a(f,m,p,g,v[l+6],15,2734768916),g=a(g,f,m,p,v[l+13],21,1309151649),p=a(p,g,f,m,v[l+4],6,4149444226),m=a(m,p,g,f,v[l+11],10,3174756917),f=a(f,m,p,g,v[l+2],15,718787259),g=a(g,f,m,p,v[l+9],21,3951481745),p=i(p,d),g=i(g,h),f=i(f,u),m=i(m,c);return(o(p)+o(g)+o(f)+o(m)).toLowerCase()}},1593:(e,t,i)=>{var n=i(3948),r=i(2467),s=n.extend({on:function(e,t){if(this._listeners=this._listeners||{},"function"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this},off:function(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}return this},emit:function(e,t){return this._listeners=this._listeners||{},t=t||{},r(this._listeners[e])&&this._listeners[e].forEach(this._eachCallback.bind(this,e,t)),r(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,e,t)),this},_eachCallback:function(e,t,i){"function"==typeof i&&i({type:e,data:t,target:this})}});e.exports=s},4173:e=>{e.exports=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}},9600:e=>{var t=function(){};e.exports=function(e){if(arguments.length>1)throw Error("Second argument not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");return t.prototype=e,new t}},2467:e=>{e.exports=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},2101:(e,t,i)=>{var n=i(3948),r=i(9474),s=n.extend({constructor:function(e){if(this.appAnalytics=e.appAnalytics,this.timeObject=void 0,this.playerSetup=void 0,this.myTimesObject={},this.perfObject=void 0,"undefined"!=typeof window&&"function"==typeof window.addEventListener&&(window.addEventListener("load",this._windowLoaded.bind(this)),window.performance&&window.performance.timing)){try{"function"==typeof window.performance.getEntriesByType&&(this.perfObject=window.performance)}catch(e){}this.timeObject=window.performance.timing}try{if("function"==typeof PerformanceObserver){var t=new PerformanceObserver(((e,t)=>{var i=e.getEntries();this.myTimesObject.largestContentfulPaint=i[i.length-1].renderTime}));PerformanceObserver.supportedEntryTypes.indexOf("largest-contentful-paint")>-1&&t.observe({entryTypes:["largest-contentful-paint"]})}}catch(e){}},_windowLoaded:function(){this.myTimesObject.onLoad=(new Date).getTime(),this._getEnoughFPS(),setTimeout(this._fireLoadTimesEvent.bind(this),1e3)},_fireLoadTimesEvent:function(){this._getLastMetrics(),this.appAnalytics&&this.appAnalytics.fireEvent("loadTimes",{},this._getAllValues())},_getAllValues:function(){var e={PageLoadTime:this.getPageLoadTime(),DNSTime:this.getDnsTime(),TCPTime:this.getTcpTime(),HandshakeTime:this.getHandshakeTime(),DomReadyTime:this.getDomReadyTime(),BackendTime:this.getBackendTime(),FrontendTime:this.getFrontendTime(),VisualReady:this.getTimeToVisuallyReady(),TimeToInteractive:this.getTimeToInteractive(),JsTime:this.getJSTime(),CssTime:this.getCSSTime(),ImageTime:this.getImageTime(),FontTime:this.getFontTime(),AvgReqLatency:this.getAvgReqLatency(),MaxReqLatency:this.getMaxReqLatency(),FirstPaint:this.getFirstPaint(),FirstContentfulPaint:this.getFirstContentfulPaint(),LargestContentfulPaint:this.getLargestContentfulPaint(),SpeedIndex:this.getSpeedIndex()};for(var t in e)null===e[t]||void 0===e[t]||e[t]<0?delete e[t]:e[t]=Math.round(e[t]);return e},getPageLoadTime:function(){var e;return this.timeObject&&(e=this.timeObject.loadEventEnd-this.timeObject.navigationStart),e},getPlayerStartupTime:function(){var e;return this.timeObject&&this.playerSetup&&(e=this.playerSetup-this.timeObject.navigationStart),e},getDnsTime:function(){var e;return this.timeObject&&(e=this.timeObject.domainLookupEnd-this.timeObject.domainLookupStart),e},getTcpTime:function(){var e;return this.timeObject&&(e=this.timeObject.connectEnd-this.timeObject.connectStart),e},getHandshakeTime:function(){var e;return this.timeObject&&this.timeObject.secureConnectionStart&&(e=this.timeObject.connectEnd-this.timeObject.secureConnectionStart),e},getDomReadyTime:function(){var e;return this.timeObject&&(e=this.timeObject.domComplete-this.timeObject.navigationStart),e},getBackendTime:function(){var e;return this.timeObject&&(e=this.timeObject.responseStart-this.timeObject.navigationStart),e},getFrontendTime:function(){var e;return this.timeObject&&(e=this.myTimesObject.onLoad-this.timeObject.responseStart),e},getTimeToVisuallyReady:function(){var e=this.myTimesObject.firstPaint||0;return this.timeObject?Math.max(e,this.timeObject.domContentLoadedEventEnd-this.timeObject.navigationStart||0):e||void 0},getTimeToInteractive:function(){if(this.myTimesObject.fps&&this.getTimeToVisuallyReady())return Math.max(this.myTimesObject.fps,this.getTimeToVisuallyReady());setTimeout((()=>{this.getTimeToInteractive()}),500)},getJSTime:function(){return this._getXTime("script")},getCSSTime:function(){return this._getXTime("css")},getImageTime:function(){return this._getXTime("img")},getFontTime:function(){return this._getXTime("css",[".woff",".otf",".ttf"])},getAvgReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var e=0,t=0,i=this.perfObject.getEntriesByType("resource");for(var n in i)i[n].requestStart&&i[n].responseStart&&(t+=i[n].responseStart-i[n].requestStart),e++;return t/e}}catch(n){}},getFirstPaint:function(){return this.myTimesObject?this.myTimesObject.firstPaint:void 0},getFirstContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.firstContentfulPaint:void 0},getLargestContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.largestContentfulPaint:void 0},getMaxReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var e=this.perfObject.getEntriesByType("resource"),t=0;for(var i in e)e[i].requestStart&&e[i].responseStart&&(t=Math.max(t,e[i].responseStart-e[i].requestStart));return t}}catch(e){}},getSpeedIndex:function(){var e;if("undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.getEntriesByType)try{e=r()}catch(e){}return e},_getXTime:function(e,t){var i=0;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var n=this.perfObject.getEntriesByType("resource");for(var r in n)if(n[r].initiatorType===e)if(t){var s=!1;for(var a in t)n[r].name.indexOf(t[a]>0)&&(s=!0);s&&(i+=n[r].duration)}else i+=n[r].duration}}catch(e){}return Math.round(i)||void 0},_getLastMetrics:function(){var e,t;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var i=this.perfObject.getEntriesByType("paint");for(var n in i)"first-paint"===i[n].name?e=i[n].startTime:"first-contentful-paint"===i[n].name&&(t=i[n].startTime)}}catch(e){}!e&&this.timeObject&&(e=this.timeObject.msFirstPaint-this.timeObject.navigationStart),this.myTimesObject.firstPaint=e,this.myTimesObject.firstContentfulPaint=t,this.getTimeToInteractive()},_getEnoughFPS:function(){if(!this.timeObject||"undefined"==typeof window)return!0;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(){};this.preFPS=(new Date).getTime(),e((()=>{var e=(new Date).getTime();e<this.preFPS+50?this.myTimesObject.fps=e-this.timeObject.navigationStart:setTimeout((()=>this._getEnoughFPS()),50)}))},setPlayerSetupTime:function(){this.playerSetup=this.playerSetup||(new Date).getTime()}});e.exports=s},2995:(e,t,i)=>{var n=i(3948).extend({getCdnTraffic:function(){var e;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn)e=CdnBalancerStats.cdn.totalDownloadedBytes;else if("undefined"!=typeof Streamroot)e=this._getStreamrootPeerObject("cdn",!1)||this._getStreamrootInstanceObject("cdnDownload");else if("undefined"!=typeof peer5&&peer5.getStats)e=peer5.getStats().totalHttpDownloaded;else if("undefined"!=typeof teltoo&&teltoo.getStats){var t=teltoo.getStats();e=t.totalReceivedBytes-t.p2pReceivedBytes}return e},getMultiCdnInfo:function(){var e;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn&&CdnBalancerStats.cdn.cdns){var t=CdnBalancerStats.p2p;e={P2P:{downloaded_bytes:t.downloadedBytes,uploaded_bytes:t.uploadedBytes,downloaded_chunks:t.downloadedSegments,uploaded_chunks:t.uploadedSegments,errors:t.failedRequests?t.failedRequests.total:0,missed_downloaded_chunks:t.failedRequests?t.failedRequests.absent:0,timeout_errors:t.failedRequests?t.failedRequests.timeout:0,other_errors:t.failedRequests?t.failedRequests.error:0,late_uploaded_chunks:t.discardedUploadedSegments,late_uploaded_bytes:t.discardedUploadedBytes,late_downloaded_bytes:t.discardedDownloadedBytes,time:t.downloadMillis,active_peers:t.activePeers,peers:t.totalPeers}},CdnBalancerStats.cdn.cdns.forEach((function(t){e[t.name]={downloaded_bytes:t.bytes,downloaded_chunks:t.chunks,errors:t.failures,time:t.downloadMillis}}))}return e},getSegmentDuration:function(){if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.segmentDuration)return CdnBalancerStats.segmentDuration},getBalancerResponseId:function(){if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn)return CdnBalancerStats.cdn.responseUUID},getP2PTraffic:function(){var e;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?e=CdnBalancerStats.p2p.downloadedBytes:"undefined"!=typeof Streamroot?e=this._getStreamrootPeerObject("p2p",!0)||this._getStreamrootInstanceObject("dnaDownload"):"undefined"!=typeof peer5&&peer5.getStats?e=peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats&&(e=teltoo.getStats().p2pReceivedBytes),e},getUploadTraffic:function(){var e;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?e=CdnBalancerStats.p2p.uploadedBytes:"undefined"!=typeof Streamroot?e=this._getStreamrootPeerObject("upload",!0)||this._getStreamrootInstanceObject("dnaUpload"):"undefined"!=typeof peer5&&peer5.getStats&&(e=peer5.getStats().totalP2PUploaded),e},getIsP2PEnabled:function(){var e=!1;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p)e=CdnBalancerStats.p2p.downloadEnabled;else if("undefined"!=typeof Streamroot)if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var t in Streamroot.peerAgents)e=e||Streamroot.peerAgents[t].isP2PEnabled;else Streamroot.instances&&Streamroot.instances.forEach((function(t){e=e||t.dnaDownloadEnabled||t.dnaUploadEnabled}));else"undefined"!=typeof peer5&&peer5.isEnabled?e=peer5.isEnabled():"undefined"!=typeof teltoo&&(e=!0);return e},_getStreamrootPeerObject:function(e,t){var i="";if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var n in Streamroot.peerAgents){var r=Streamroot.peerAgents[n];!r.stats||t&&!r.isP2PEnabled||(i+=r.stats[e])}return i.length>0?i:void 0},_getStreamrootInstanceObject:function(e){var t="";return Streamroot.instances&&Streamroot.instances.forEach((function(i){i.stats&&i.stats.currentContent&&(t+=i.stats.currentContent[e])})),t.length>0?t:void 0}});e.exports=n},9474:e=>{e.exports=function e(t){var i,n,r=(t=t||window).document,s=function(e){var i=!1;if(e.getBoundingClientRect){var n=e.getBoundingClientRect();(i={top:Math.max(n.top,0),left:Math.max(n.left,0),bottom:Math.min(n.bottom,t.innerHeight||r.documentElement.clientHeight),right:Math.min(n.right,t.innerWidth||r.documentElement.clientWidth)}).bottom<=i.top||i.right<=i.left?i=!1:i.area=(i.bottom-i.top)*(i.right-i.left)}return i},a=function(e,t){if(t){var i=s(e);i&&o.push({url:t,area:i.area,rect:i})}},o=[],l=[];try{var d=t.performance.timing.navigationStart;!function(){for(var i=r.getElementsByTagName("*"),n=/url\(.*(http.*)\)/gi,l=0;l<i.length;l++){var d=i[l],h=t.getComputedStyle(d);if("IMG"===d.tagName&&a(d,d.src),h["background-image"]){n.lastIndex=0;var u=n.exec(h["background-image"]);u&&u.length>1&&a(d,u[1].replace('"',""))}if("IFRAME"===d.tagName)try{var c=s(d);if(c){var p=e(d.contentWindow);p&&o.push({tm:p,area:c.area,rect:c})}}catch(e){}}}(),function(){for(var e={},i=t.performance.getEntriesByType("resource"),n=0;n<i.length;n++)e[i[n].name]=i[n].responseEnd;for(var r=0;r<o.length;r++)"tm"in o[r]||(o[r].tm=void 0!==e[o[r].url]?e[o[r].url]:0)}(),function(){"msFirstPaint"in t.performance.timing&&(i=t.performance.timing.msFirstPaint-d);for(var e=t.performance.getEntriesByType("paint"),n=0;n<e.length;n++)"first-paint"===e[n].name&&(i=e[n].startTime);if(void 0===i||i<0||i>12e4){i=t.performance.timing.responseStart-d;for(var s={},a=r.getElementsByTagName("head")[0].children,o=0;o<a.length;o++){var l=a[o];"SCRIPT"===l.tagName&&l.src&&!l.async&&(s[l.src]=!0),"LINK"===l.tagName&&"stylesheet"===l.rel&&l.href&&(s[l.href]=!0)}for(var h=t.performance.getEntriesByType("resource"),u=!1,c=0;c<h.length;c++)if(u||!s[h[c].name]||"script"!==h[c].initiatorType&&"link"!==h[c].initiatorType)u=!0;else{var p=h[c].responseEnd;(void 0===i||p>i)&&(i=p)}}i=Math.max(i,0)}(),function(){for(var e={0:0},n=0,s=0;s<o.length;s++){var a=i;"tm"in o[s]&&o[s].tm>i&&(a=o[s].tm),void 0===e[a]&&(e[a]=0),e[a]+=o[s].area,n+=o[s].area}var d=Math.max(r.documentElement.clientWidth,t.innerWidth||0)*Math.max(r.documentElement.clientHeight,t.innerHeight||0);if(d>0&&(d=.1*Math.max(d-n,0),void 0===e[i]&&(e[i]=0),e[i]+=d,n+=d),n){for(var h in e)e.hasOwnProperty(h)&&l.push({tm:h,area:e[h]});l.sort((function(e,t){return e.tm-t.tm}));for(var u=0,c=0;c<l.length;c++)u+=l[c].area,l[c].progress=u/n}}(),function(){if(l.length){n=0;for(var e=0,t=0,r=0;r<l.length;r++){var s=l[r].tm-e;s>0&&t<1&&(n+=(1-t)*s),e=l[r].tm,t=l[r].progress}}else n=i}()}catch(t){}return n}},6014:(e,t,i)=>{var n=r,r={noConflict:function(){return r=n,this}};r.VERSION=i(9835),r.polyfills=i(4607),r.polyfills(),r.Object=i(3948),r.Emitter=i(1593);var{default:s}=i(7276);r.Log=s,r.Log.loadLevelFromUrl(),r.Util=i(2507),r.HybridNetwork=i(2995),r.Chrono=i(7680),r.Timer=i(4954),r.Constants=i(3782),r.Transform=i(2503),r.ResourceTransform=i(1151),r.CdnParser=i(3908),r.HlsParser=i(3168),r.DashParser=i(3831),r.LocationheaderParser=i(1657),r.Options=i(7061),r.Plugin=i(1527),r.Storage=i(470),r.RequestBuilder=i(2071),r.PlayheadMonitor=i(3381),r.Adapter=i(5292),r.adapters={},r.BackgroundDetector=i(9773),r.DeviceDetector=i(2635),r.UUIDGenerator=i(5804),r.registerAdapter=function(e,t){this.adapters[e]=t}.bind(r),r.unregisterAdapter=function(e){this.adapters[e]=null}.bind(r),e.exports=r},3948:(e,t,i)=>{var n=i(4173),r=i(9600),s=function(){};s.prototype={constructor:function(){}},s.extend=function(e,t){var i,s=this;return i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return s.apply(this,arguments)},n(i,s,t),i.prototype=r(s.prototype),e&&n(i.prototype,e),i.prototype.constructor=i,i.__super__=s.prototype,i},e.exports=s},3398:(e,t,i)=>{var n=i(3948),{default:r}=i(7276),{AnalyticsTag:s}=i(2784),a=n.extend({exists:function(e){return a.Dictionary.hasOwnProperty(e)},getNewName:function(e){var t=a.Dictionary[e];return r.warn(s,'The option "'+e+'" is deprecated, use "'+t+'" instead'),t}},{Dictionary:{httpSecure:"app.https",username:"user.name",anonymousUser:"user.anonymousId",obfuscateIp:"user.obfuscateIp",userType:"user.type","content.title2":"content.program","background.settings.iphone":"background.settings.iOS","parse.hls":"parse.manifest","parse.dash":"parse.manifest","parse.locationHeader":"parse.manifest","extraparam.1":"content.customDimension.1","extraparam.2":"content.customDimension.2","extraparam.3":"content.customDimension.3","extraparam.4":"content.customDimension.4","extraparam.5":"content.customDimension.5","extraparam.6":"content.customDimension.6","extraparam.7":"content.customDimension.7","extraparam.8":"content.customDimension.8","extraparam.9":"content.customDimension.9","extraparam.10":"content.customDimension.10","extraparam.11":"content.customDimension.11","extraparam.12":"content.customDimension.12","extraparam.13":"content.customDimension.13","extraparam.14":"content.customDimension.14","extraparam.15":"content.customDimension.15","extraparam.16":"content.customDimension.16","extraparam.17":"content.customDimension.17","extraparam.18":"content.customDimension.18","extraparam.19":"content.customDimension.19","extraparam.20":"content.customDimension.20","ad.extraparam.1":"ad.customDimension.1","ad.extraparam.2":"ad.customDimension.2","ad.extraparam.3":"ad.customDimension.3","ad.extraparam.4":"ad.customDimension.4","ad.extraparam.5":"ad.customDimension.5","ad.extraparam.6":"ad.customDimension.6","ad.extraparam.7":"ad.customDimension.7","ad.extraparam.8":"ad.customDimension.8","ad.extraparam.9":"ad.customDimension.9","ad.extraparam.10":"ad.customDimension.10"}});e.exports=a},3455:(e,t,i)=>{var n=i(3948),r=i(470),s=n.extend({constructor:function(){this.storage=new r("npawOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var e=this._getValidId();this.storage.setLocal(e,""),this.viewList.push(e),this.storage.setLocal("views",this.viewList),this.actualView=e},addEvent:function(e,t){if("/start"===e&&this._newView(),"/init"===e)return null;if(!this.actualView)return null;var i='{"request":"'+e.slice(1)+'",';for(var n in i+='"unixtime":'+Date.now()+",",t){if(void 0===t[n])break;i+='"'+n+'":',"code"===n?i+='"CODE_PLACEHOLDER",':"sessionId"===n?i+='"SESSION_PLACEHOLDER",':"sessionRoot"===n?i+='"ROOT_PLACEHOLDER",':"string"==typeof t[n]?i+='"'+t[n]+'",':"object"==typeof t[n]?i+='"'+JSON.stringify(t[n]).replace(/"/g,'\\"')+'",':i+=t[n]+","}i=i.slice(0,-1),i+="}";var r=this.storage.getLocal(this.actualView);""!==r&&(r+=","),this.storage.setLocal(this.actualView,r+i)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var e=0;;){var t=this.viewList[e];if(this.givenIds.indexOf(t)<0)return this.givenIds.push(t),["["+this.storage.getLocal(t)+"]",t];e++}return[null,null]},removeView:function(e){this.storage.removeLocal(e);var t=this.viewList.indexOf(e);-1!==t&&this.viewList.splice(t,1),-1!==(t=this.givenIds.indexOf(e))&&this.givenIds.splice(t,1),this.storage.setLocal("views",this.viewList.toString()),e===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var e="";this.storage.getLocal("views")?e=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===e?this.viewList=[]:"function"==typeof e.split&&(this.viewList=e.split(","))},_getValidId:function(){var e=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(e)>=0?this._getValidId():e},sent:function(){this.givenIds=[]}});e.exports=s},7061:(e,t,i)=>{var n=i(3948),r=i(3398),{default:s}=i(7276),a=i(7939),o=i(8472),l=i(9637),{AnalyticsTag:d}=i(2784),h=n.extend({constructor:function(e){this.enabled=!0,this.authToken=void 0,this.authType="Bearer",this.preventZombieViews=!0,this.offline=!1,this.referer=void 0,this.referral=void 0,this.disableCookies=!0,this.forceCookies=!1,this.disableStorage=!1,this["user.email"]=void 0,this["user.type"]=void 0,this["user.name"]=void 0,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=void 0,this["user.privacyProtocol"]=void 0,this["parse.manifest"]=!1,this["parse.manifest.auth"]={},this["parse.cdnNameHeader"]=["x-cdn-forward"],this["parse.cdnNodeHeader"]="",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Amazon","Cloudfront","Level3","Fastly","Highwinds","Telefonica","Edgecast","NosOtt"],this["parse.fdsResponseHost"]=void 0,this["parse.cdnSwitchHeader"]=!1,this["parse.cdnTTL"]=60,this["network.ip"]=void 0,this["network.isp"]=void 0,this["network.connectionType"]=void 0,this["device.id"]=void 0,this["device.code"]=void 0,this["device.model"]=void 0,this["device.brand"]=void 0,this["device.type"]=void 0,this["device.name"]=void 0,this["device.osName"]=void 0,this["device.osVersion"]=void 0,this["device.browserName"]=void 0,this["device.browserVersion"]=void 0,this["device.browserType"]=void 0,this["device.browserEngine"]=void 0,this["device.EDID"]=void 0,this["device.isAnonymous"]=!1,this["content.transactionCode"]=void 0,this["content.resource"]=void 0,this["content.isLive"]=void 0,this["content.isLive.noSeek"]=!1,this["content.isLive.noMonitor"]=!1,this["content.title"]=void 0,this["content.program"]=void 0,this["content.duration"]=void 0,this["content.fps"]=void 0,this["content.segmentDuration"]=void 0,this["content.bitrate"]=void 0,this["content.totalBytes"]=void 0,this["content.sendTotalBytes"]=!1,this["content.throughput"]=void 0,this["content.rendition"]=void 0,this["content.cdn"]=void 0,this["content.cdnNode"]=void 0,this["content.cdnType"]=void 0,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=void 0,this["content.transportFormat"]=void 0,this["content.package"]=void 0,this["content.saga"]=void 0,this["content.tvShow"]=void 0,this["content.season"]=void 0,this["content.episodeTitle"]=void 0,this["content.channel"]=void 0,this["content.id"]=void 0,this["content.imdbId"]=void 0,this["content.gracenoteId"]=void 0,this["content.type"]=void 0,this["content.genre"]=void 0,this["content.language"]=void 0,this["content.autodetect.language"]=!0,this["content.subtitles"]=void 0,this["content.autodetect.subtitles"]=!0,this["content.contractedResolution"]=void 0,this["content.cost"]=void 0,this["content.price"]=void 0,this["content.playbackType"]=void 0,this["content.drm"]=void 0,this["content.encoding.videoCodec"]=void 0,this["content.encoding.audioCodec"]=void 0,this["content.encoding.codecSettings"]=void 0,this["content.encoding.codecProfile"]=void 0,this["content.encoding.containerFormat"]=void 0,this["ad.metadata"]={},this["ad.campaign"]=void 0,this["ad.creativeId"]=void 0,this["ad.provider"]=void 0,this["ad.resource"]=void 0,this["ad.title"]=void 0,this["ad.duration"]=void 0,this["ad.expectedPattern"]=void 0,this["ad.givenAds"]=void 0,this["ad.breaksTime"]=void 0,this["ad.expectedBreaks"]=void 0,this["ad.givenBreaks"]=void 0,this["ad.ignore"]=!1,this["ad.blockerDetected"]=void 0,this["ad.postRollTimeout"]=1e3,this["app.name"]=void 0,this["app.releaseVersion"]=void 0,this["app.https"]=!0,this["background.enabled"]=!0,this["background.settings"]=void 0,this["background.settings.android"]="stop",this["background.settings.iOS"]="stop",this["background.settings.desktop"]=void 0,this["background.settings.tv"]="stop",this["background.settings.playstation"]="stop",this["smartswitch.configCode"]=void 0,this["smartswitch.groupCode"]=void 0,this["smartswitch.contractCode"]=void 0,this["content.customDimensions"]={},this["content.customDimension.1"]=void 0,this["content.customDimension.2"]=void 0,this["content.customDimension.3"]=void 0,this["content.customDimension.4"]=void 0,this["content.customDimension.5"]=void 0,this["content.customDimension.6"]=void 0,this["content.customDimension.7"]=void 0,this["content.customDimension.8"]=void 0,this["content.customDimension.9"]=void 0,this["content.customDimension.10"]=void 0,this["content.customDimension.11"]=void 0,this["content.customDimension.12"]=void 0,this["content.customDimension.13"]=void 0,this["content.customDimension.14"]=void 0,this["content.customDimension.15"]=void 0,this["content.customDimension.16"]=void 0,this["content.customDimension.17"]=void 0,this["content.customDimension.18"]=void 0,this["content.customDimension.19"]=void 0,this["content.customDimension.20"]=void 0,this["ad.customDimension.1"]=void 0,this["ad.customDimension.2"]=void 0,this["ad.customDimension.3"]=void 0,this["ad.customDimension.4"]=void 0,this["ad.customDimension.5"]=void 0,this["ad.customDimension.6"]=void 0,this["ad.customDimension.7"]=void 0,this["ad.customDimension.8"]=void 0,this["ad.customDimension.9"]=void 0,this["ad.customDimension.10"]=void 0,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this["errors.fatal"]=[],this["errors.nonFatal"]=[],this["errors.ignore"]=[],this["pause.ignoreSmallEvents"]=!0,this["check.playerExists"]=!0,this["check.appAnalytics.autoBegin"]=!1,this["check.appAnalytics.enabled"]=!0,this["debug.playerLogs.enabled"]=!1,this["debug.pluginLogs.enabled"]=!1,this["check.videoAnalytics.enabled"]=!0,this["lma.refresh.configuration.enabled"]=!1,this["lma.refresh.configuration.seconds"]=300,this.linkedViewId=void 0,this.waitForMetadata=!1,this.pendingMetadata=[],this.method=l.GET,this["playhead.monitor"]=!0,this["readyState.monitor"]=!0,this["adapters.overwrite"]=!1,this["adapters.templates"]={},this["adapters.properties"]={},this.enableExtraMetricCollection=!1,this.renditionQueryInterval=250,this.enableLegacyBufferBehaviour=!1,this.ignoreSeekInTimeUpdate=!1,this.checkVideoBufferInPlayheadMonitor=!1,this.setOptions(e)},setOptions:function(e,t,i){void 0===i&&(i=!1);var n,a=!1;if(void 0===t&&(t=this,a=!0,n=new r),void 0!==e)for(var o in e){var l=void 0,h=!1;a&&(this.hasOwnProperty(o)||(n.exists(o)?(l=n.getNewName(o),h=!0):"function"!=typeof e[o]&&s.warn(d,'The option "'+o+'" does not exist, so it cannot be set'))),i||"object"==typeof t[o]&&void 0!==t[o]&&!Array.isArray(t[o])&&"parse.cdnNode.list"===o?this.setOptions(e[o],t[o]):h?t[l]=e[o]:t[o]=e[o]}},setExtraParams:function(e){if("object"==typeof e&&e.length){for(e.length>=20&&(e=e.slice(0,20));e.length<20;)e.push(void 0);e.forEach(((e,t)=>{this["content.customDimension."+(t+1).toString()]=e}))}},setCustomDimensions:function(){h.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(e){if("object"==typeof e&&e.length){for(e.length>=10&&(e=e.slice(0,10));e.length<10;)e.push(void 0);e.forEach(((e,t)=>{this["ad.customDimension."+(t+1).toString()]=e}))}},setAdCustomDimensions:function(){h.prototype.setAdExtraParams.apply(this,arguments)},setEnableLegacyBufferBehaviour:function(){h.prototype.setEnableLegacyBufferBehaviour.apply(this,arguments)}},{StreamingProtocol:o,TransportFormat:a,RequestMethod:l});e.exports=h},1527:(e,t,i)=>{var n=i(1593),r=i(3782),s=i(2507),{default:a}=i(7276),o=i(5651),{default:l}=i(6075),d=i(7061),h=i(470),u=(i(3455),i(2071)),c=i(1151),p=i(2101),g=i(9773),f=i(2635),m=i(5804),{default:v}=i(3555),{Method:y,AnalyticsTag:b}=i(2784),{default:S}=i(9065),{default:E}=i(61),{default:T}=i(1577),w=n.extend({constructor:function(e,t,n,r){if(w.instance)return t&&(a.notice(b,"Set Options for already existing instance"),w.instance.setOptions(t),w.instance.storage.updateStorageOptions(w.instance.options.disableCookies,w.instance.options.forceCookies,w.instance.options.disableStorage)),n&&(a.notice(b,"Set Adapter for already existing instance"),w.instance.setAdapter(n)),a.warn(b,"Only a single plugin instance can be created on npaw context"),w.instance;this.options=new d(t),this.storage=new h(null,this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.utils=i(2507),this.uuidGenerator=new m,this.videos=new o(this),this.analyticsRequestHandler=new l(this),this.adapterTemplates={},this.appAnalytics=e,this.requestBuilder=new u,this.resourceTransform=new c(this),this.lastEventTime=null,this.browserLoadTimes=new p(this),this.deviceDetector=new f,this.backgroundDetector=new g(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection(),n&&this.setAdapter(n),this._logInitPluginEvent(t),navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((e=>{"Windows"===navigator.userAgentData.platform&&(this.majorPlatformVersion=parseInt(e.platformVersion.split(".")[0]))})),w.instance=this,this.fetchTvDeviceModelInfo()},addOnWillSendRequestListener(e){this.analyticsRequestHandler.onWillSendVideoRequestListeners.push(e)},removeOnWillSendRequestListener(e){this.analyticsRequestHandler.onWillSendVideoRequestListeners=this.analyticsRequestHandler.onWillSendVideoRequestListeners.filter((t=>t!==e))},destroy:function(){this.videos.removeAllAdapters(),this.videos.videos={}},_setAdapterTemplates:function(e){this.adapterTemplates=e},_receiveConfiguration:function(e){try{if(e.target.response.configurationOptions){var t=e.target.response.configurationOptions;this.options.setOptions(t,this.options),this.videos.updateAllOptions(t)}this.isRefreshLMAConfigurationEnabled()&&this.fastDataTransform&&this.fastDataTransform._createConfigurationInterval()}catch(e){}},_reset:function(e){this.videos.resetVideo(e)},setOptions:function(e){if(this._logSetOptionsEvent(e),e){for(var t of("boolean"==typeof e["parse.manifest"]&&e["parse.manifest"]&&(e.waitForMetadata=!0,e.pendingMetadata||(e.pendingMetadata=[]),e.pendingMetadata.push("parsedResource")),this.options.setOptions(e),this.storage.updateStorageOptions(this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.videos.getVideoKeys()))this.setVideoOptions(e,t);"boolean"==typeof e["background.enabled"]&&(e["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection())}S.getInstance().registerCommonVariable(E.Products.VIDEO_ANALYTICS,E.AnalyticsVariables.METHOD_OPTION,T.methodFromString(e.method))},setVideoOptions:function(e,t){t=t||"default",e&&t&&this.videos.existsVideo(t)&&Object.keys(e).length>0&&this.videos.getVideo(t).setVideoOptions(e)},updateCustomMetrics:function(e,t){t=t||"default",e&&this.videos.existsVideo(t)&&Object.keys(e).length>0&&this.videos.getVideo(t).updateCustomMetrics(e)},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})},getPingTime:function(){return S.getInstance().getFastDataService().getPingTime()},fetchTvDeviceModelInfo(){if(!this.options["device.model"]){var e=this;"undefined"!=typeof webOS?webOS.service.request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["modelName"]},onComplete:function(t){t.returnValue?e.lgDeviceModel=t.modelName:a.debug(b,"Could not get LG device model name")}}):"undefined"!=typeof webapis&&void 0!==webapis.productinfo&&(this.samsungDeviceModel=webapis.productinfo.getRealModel())}},_logInitPluginEvent:function(e){var t={logs:e,logAction:"initPlugin",logType:"pluginMethod"};this._sendPluginLogs(t,this.isMethodPostEnabled())},_logSetAdapterEvent:function(e){var t={adapter:e,logAction:"setAdapter",logType:"pluginMethod"};this._sendPluginLogs(t,this.isMethodPostEnabled())},_logSetOptionsEvent:function(e){var t={logs:e,logAction:"setOptions",logType:"pluginMethod"};this._sendPluginLogs(t,this.isMethodPostEnabled())},_logReceiveDataEvent:function(e){var t="";e.data&&e.data.target&&e.data.target.response&&e.data.target.response.msg&&(t=JSON.parse(e.data.target.response.msg));var i={logs:t,logAction:"receiveData",logType:"internalMethod"};this._sendPluginLogs(i,this.isMethodPostEnabled())},_sendPluginLogs:function(e,t){if(t=t||!1,this.isPluginLogsEnabled()&&(e&&e.logType&&e.logAction&&a.notice(b,"PluginLog "+e.logType+": Action "+e.logAction),this.analyticsRequestHandler&&null!==(e=this.requestBuilder.buildParams(e,r.Service.VIDEO_PLUGIN_LOGS,this)))){var i=t?y.POST:y.GET,n=new v(r.Service.VIDEO_PLUGIN_LOGS,e,"",i);this.analyticsRequestHandler.sendRequest(n)}}},{Event:r.WillSendEvent});s.assign(w.prototype,i(9516)),s.assign(w.prototype,i(5901)),s.assign(w.prototype,i(1705)),s.assign(w.prototype,i(6083)),s.assign(w.prototype,i(6874)),w.instance=null,e.exports=w},9516:(e,t,i)=>{var{default:n}=i(7276),r=i(5292),s=i(1516),{default:a}=i(6933),{AnalyticsTag:o}=i(2784),l={registerAdapter:function(e,t,i,l){if(t){if(i=i||{},l=l||"default",this.videos.existsVideo(l))i=i||{},this.videos.getVideo(l).mergeOptions(i),this.setAdapter(new r(l,this.videos.getVideo(l),this,this.adapterTemplates,e,t),l);else{var d=new s(l,this,this.options,null,null);this.getNextViewIndex(d),i=i||{},d.setVideoOptions(i),this.videos.setVideo(d);var h=new r(l,d,this,this.adapterTemplates,e,t);this.setAdapter(h,l)}a.getInstance().registeredPlayer(!0);var u=i["content.resource"];!u&&this.videos.existsAdapter(l)&&((u=this.videos.getAdapter(l).getURLToParse())||(u=this.videos.getAdapter(l).getResource())),this.resourceTransform.init(u)}else n.error(o,"Register Adapter needs an adapter to initialize")},setAdapter:function(e,t){if(t=t||"default",this.browserLoadTimes&&this.browserLoadTimes.setPlayerSetupTime(),e.isSetAdapter())n.warn(o,"Adapters can only be added to a single plugin");else{var i=this.getAdapter(t);i&&(e.flags=i.flags,e.chronos=i.chronos,e.fireEventsStruct=i.fireEventsStruct),this.removeAdapter(t),this.videos.setAdapter(e,t)}},getAdapter:function(e){return e=e||"default",this.videos.getAdapter(e)},removeAdapter:function(e){e=e||"default",this.videos.existsVideo(e)&&this.videos.removeAdapter(this.contentAdapterListeners,e)},getNextViewIndex:function(e){e.nextView();for(var t=!0;t;){var i=!1;for(var n of this.videos.getVideoKeys().filter((t=>t!==e.getVideoKey())))if(e.getViewCode()===this.videos.getVideo(n).getViewCode()){i=!0;break}i&&e.nextView(),t=i}}};e.exports=l},5901:(e,t,i)=>{var n=i(5292),r=i(1516),{default:s}=i(6933),a={registerAdsAdapter:function(e,t,i,s){if(t)if(s=s||"default",this.videos.existsVideo(s))this.videos.getVideo(s).mergeOptions(i),this.setAdsAdapter(new n(s,this.videos.getVideo(s),this,this.adapterTemplates,e,t),s);else{var a=new r(s,this,this.options,null,null);a.mergeOptions(i),this.videos.setVideo(a);var o=new n(s,a,this,this.adapterTemplates,e,t);this.setAdsAdapter(o,s)}else Log.error(AnalyticsTag,"Register Ads Adapter needs an adapter to initialize")},updateAdsAdapter:function(e,t){t=t||"default",e&&(videoObj=this.videos.getVideo(t),videoObj&&videoObj.getAdapter()&&(adsAdapter=videoObj.getAdapter().getAdapterClass(e),adsAdapter&&videoObj.setAdsAdapter(adsAdapter,this,!0)))},getAdsAdapter:function(e){e=e||"default";var t=this.videos.getVideo(e);return void 0!==t?t.getAdsAdapter():void 0},setAdsAdapter:function(e,t){t=t||"default",this.videos.getVideo(t).setAdsAdapter(e,this),s.getInstance().registeredAdsPlayer(!0)},removeAdsAdapter:function(e){e=e||"default",this.videos.existsVideo(e)&&this.videos.getVideo(e).removeAdsAdapter()}};e.exports=a},1705:(e,t,i)=>{i(9835);var n=i(2507),r=i(9637),{default:s}=i(9065),{default:a}=i(61),o={getAccountCode:function(){return s.getInstance().getFastDataService().getAccountCode()},getUsername:function(e){return this._getGenericOptionsValue("user.name",e)},getPluginVersion:function(){return s.getPluginVersion()},getRequestNumber:function(){return Math.random()},getUserType:function(e){return this._getGenericOptionsValue("user.type",e)},getAnonymousUser:function(e){return this._getGenericOptionsValue("user.anonymousId",e)},getReferer:function(){var e=this.options.referer||"";return!e&&"undefined"!=typeof window&&window.location&&(e=window.location.href),e},getReferral:function(){var e=this.options.referral||"";return e||"undefined"==typeof document||(e=document.referrer),e},getLanguage:function(){var e;return"undefined"!=typeof navigator&&(e=navigator.language),e},getScreenResolution:function(){var e;try{if(window&&window.screen){var t=window.devicePixelRatio||1;e=window.screen.width*t+"x"+window.screen.height*t}}catch(e){}return e},getDeviceInfo:function(e){var t={};return this.getDeviceCode(e)&&(t.deviceCode=this.getDeviceCode(e)),this.getModel(e)&&(t.model=this.getModel(e)),this.getBrand(e)&&(t.brand=this.getBrand(e)),this.getDeviceType(e)&&(t.deviceType=this.getDeviceType(e)),this.getDeviceName(e)&&(t.deviceName=this.getDeviceName(e)),this.getOsName(e)&&(t.osName=this.getOsName(e)),this.getOsVersion(e)&&(t.osVersion=this.getOsVersion(e)),this.getBrowserName(e)&&(t.browserName=this.getBrowserName(e)),this.getBrowserVersion(e)&&(t.browserVersion=this.getBrowserVersion(e)),this.getBrowserType(e)&&(t.browserType=this.getBrowserType(e)),this.getBrowserEngine(e)&&(t.browserEngine=this.getBrowserEngine(e)),t!=={}?t:void 0},getDeviceCode:function(e){return this._getGenericOptionsValue("device.code",e)},getModel:function(e){return this._getGenericOptionsValue("device.model",e)?this._getGenericOptionsValue("device.model",e):this.lgDeviceModel?this.lgDeviceModel:this.samsungDeviceModel?this.samsungDeviceModel:void 0},getBrand:function(e){return this._getGenericOptionsValue("device.brand",e)},getDeviceType:function(e){return this._getGenericOptionsValue("device.type",e)},getDeviceName:function(e){return this._getGenericOptionsValue("device.name",e)},getOsName:function(e){return this._getGenericOptionsValue("device.osName",e)},getOsVersion:function(e){var t=this._getGenericOptionsValue("device.osVersion",e);return void 0===t&&navigator&&navigator.userAgentData&&this.majorPlatformVersion&&"Windows"===navigator.userAgentData.platform&&this.majorPlatformVersion>=13&&(t="11"),t},getBrowserName:function(e){return this._getGenericOptionsValue("device.browserName",e)},getBrowserVersion:function(e){return this._getGenericOptionsValue("device.browserVersion",e)},getBrowserType:function(e){return this._getGenericOptionsValue("device.browserType",e)},getBrowserEngine:function(e){return this._getGenericOptionsValue("device.browserEngine",e)},getIsBlocked:function(e){return this._getGenericOptionsValue("ad.blockerDetected",e)},isMethodPostEnabled:function(){return this.options.method&&this.options.method.toUpperCase()===r.POST},getDeviceUUID:function(e){var t;return!e["device.isAnonymous"]&&e["device.id"]?e["device.id"]:(this.options["device.isAnonymous"]||(t=this.options["device.id"]||this.uuidGenerator.getKey()),t)},getLibVersion:function(){return s.getPluginVersion()},getAppName:function(e){return this._getGenericOptionsValue("app.name",e)},getAppReleaseVersion:function(e){return this._getGenericOptionsValue("app.releaseVersion",e)},getIp:function(e){return this._getGenericOptionsValue("network.ip",e)},getIsp:function(e){return this._getGenericOptionsValue("network.isp",e)},getConnectionType:function(e){return this._getGenericOptionsValue("network.connectionType",e)},getEDID:function(e){var t=this._getGenericOptionsValue("device.EDID",e);return t?t.toString():void 0},getObfuscateIp:function(e){return this._getGenericOptionsValue("user.obfuscateIp",e)},getPrivacyProtocol:function(e){var t=this._getGenericOptionsValue("user.privacyProtocol",e);return"string"==typeof t&&(t=t.toLowerCase()),"optin"===t||"optout"===t?t:void 0},getCustomDimensions:function(e){var t=this._getGenericOptionsValue("content.customDimensions",e);return"object"==typeof t?t:void 0},getExtraparam1:function(e){return this._getGenericOptionsValue("content.customDimension.1",e)},getExtraparam2:function(e){return this._getGenericOptionsValue("content.customDimension.2",e)},getExtraparam3:function(e){return this._getGenericOptionsValue("content.customDimension.3",e)},getExtraparam4:function(e){return this._getGenericOptionsValue("content.customDimension.4",e)},getExtraparam5:function(e){return this._getGenericOptionsValue("content.customDimension.5",e)},getExtraparam6:function(e){return this._getGenericOptionsValue("content.customDimension.6",e)},getExtraparam7:function(e){return this._getGenericOptionsValue("content.customDimension.7",e)},getExtraparam8:function(e){return this._getGenericOptionsValue("content.customDimension.8",e)},getExtraparam9:function(e){return this._getGenericOptionsValue("content.customDimension.9",e)},getExtraparam10:function(e){return this._getGenericOptionsValue("content.customDimension.10",e)},getExtraparam11:function(e){return this._getGenericOptionsValue("content.customDimension.11",e)},getExtraparam12:function(e){return this._getGenericOptionsValue("content.customDimension.12",e)},getExtraparam13:function(e){return this._getGenericOptionsValue("content.customDimension.13",e)},getExtraparam14:function(e){return this._getGenericOptionsValue("content.customDimension.14",e)},getExtraparam15:function(e){return this._getGenericOptionsValue("content.customDimension.15",e)},getExtraparam16:function(e){return this._getGenericOptionsValue("content.customDimension.16",e)},getExtraparam17:function(e){return this._getGenericOptionsValue("content.customDimension.17",e)},getExtraparam18:function(e){return this._getGenericOptionsValue("content.customDimension.18",e)},getExtraparam19:function(e){return this._getGenericOptionsValue("content.customDimension.19",e)},getExtraparam20:function(e){return this._getGenericOptionsValue("content.customDimension.20",e)},isParseManifest:function(e){return this._getGenericOptionsValue("parse.manifest",e)},isParseCdnNode:function(e){return this._getGenericOptionsValue("parse.cdnNode",e)},isCdnSwitch:function(e){return this._getGenericOptionsValue("parse.cdnSwitchHeader",e)},getParseCdnNodeList:function(e){return this._getGenericOptionsValue("parse.cdnNode.list",e)},getParseCdnNodeNameHeader:function(e){return this._getGenericOptionsValue("parse.cdnNameHeader",e)},getParseNodeHeader:function(e){return this._getGenericOptionsValue("parse.cdnNodeHeader",e)},canOverwriteAdapters:function(e){return n.parseBoolean(this._getGenericOptionsValue("adapters.overwrite",e))},getAdaptersProperties:function(e){return this._getGenericOptionsValue("adapters.properties",e)},getNetworkConnectionType:function(){if(this.options.enableExtraMetricCollection&&navigator&&navigator.connection){var e=navigator.connection.type;return["wimax"].includes(e)?void 0:e}},getNetworkCellType:function(){if(this.options.enableExtraMetricCollection&&navigator&&navigator.connection)return this.getNetworkConnectionType()&&"wifi"!==this.getNetworkConnectionType()?navigator.connection.effectiveType:"none"},getNetworkSignalStrength:function(){},getCpuUsed:function(){},getMemoryUsed:function(){if(this.options.enableExtraMetricCollection&&performance&&performance.memory)return performance.memory.usedJSHeapSize/1024/1024},getCacheStorageUsed:function(){if(this.options.enableExtraMetricCollection){var e=0;if("undefined"!=typeof localStorage&&localStorage)for(var t in localStorage)localStorage.hasOwnProperty(t)&&(e+=2*(localStorage[t].length+t.length));if("undefined"!=typeof sessionStorage&&sessionStorage)for(var i in sessionStorage)sessionStorage.hasOwnProperty(i)&&(e+=2*(sessionStorage[i].length+i.length));return 0!=e?e:void 0}},getTransferredTraffic:function(){if(this.options.enableExtraMetricCollection)return s.getInstance().getCommonVariable(a.Products.BALANCER,a.BalancerVariables.BALANCER_TRAFFIC)},getImprovedBandwidth:function(){if(this.options.enableExtraMetricCollection)return s.getInstance().getCommonVariable(a.Products.BALANCER,a.BalancerVariables.BALANCER_BITRATE)},isAppAnalyticsAutoBegin:function(e){return n.parseBoolean(this._getGenericOptionsValue("check.appAnalytics.autoBegin",e))},isAppAnalyticsEnabled:function(e){return n.parseBoolean(this._getGenericOptionsValue("check.appAnalytics.enabled",e))},isVideoAnalyticsEnabled:function(e){return n.parseBoolean(this._getGenericOptionsValue("check.videoAnalytics.enabled",e))},isRefreshLMAConfigurationEnabled:function(e){return n.parseBoolean(this._getGenericOptionsValue("lma.refresh.configuration.enabled",e))},isPluginLogsEnabled:function(e){return n.parseBoolean(this._getGenericOptionsValue("debug.pluginLogs.enabled",e))},isPlayerLogsEnabled:function(e){return n.parseBoolean(this._getGenericOptionsValue("debug.playerLogs.enabled",e))},refreshLMAConfigurationSeconds:function(e){return this._getGenericOptionsValue("lma.refresh.configuration.seconds",e)},getPlayheadMonitorEnabled:function(e){return this._getGenericOptionsValue("playhead.monitor",e)},getReadyStateMonitorEnabled:function(e){return this._getGenericOptionsValue("readyState.monitor",e)},getPageName:function(){return this.options["content.title"]},_getGenericOptionsValue:function(e,t){return t&&t[e]?t[e]:this.options[e]}};e.exports=o},6083:e=>{e.exports={fireInit:function(e,t,i){i=i||"default",this.videos.getVideo(i).fireInit(e,t)},fireError:function(e,t,i,n,r,s){s=s||"default",this.videos.getVideo(s).fireError(e,t,i,n,r)},fireFatalError:function(e,t,i,n,r,s){s=s||"default",this.videos.getVideo(s).fireFatalError(e,t,i,n,r)},fireStop:function(e,t,i){i=i||"default",this.videos.getVideo(i).fireStop(e,t)},fireOfflineEvents:function(e,t){t=t||"default",this.videos.getVideo(t).fireOfflineEvents(e)}}},6874:(e,t,i)=>{var n=i(2507),{default:r}=i(9065),s={getFastDataConfig:function(){return this.fastDataTransform.response.msg},getHost:function(){var e=r.getInstance().getOptions().getFastDataHost();return this.fastDataTransform&&this.fastDataTransform.response&&this.fastDataTransform.response.host&&(e=this.fastDataTransform.response.host),n.addProtocol(n.stripProtocol(e),this.options["app.https"])},getFastDataHost:function(){return n.addProtocol(n.stripProtocol(r.getInstance().getOptions().getFastDataHost()),this.options["app.https"])},getSession:function(){var e=r.getInstance().getCoreStorage().getStorages("session");if("undefined"===e&&(e=void 0),!e){var t=this.getStoredData();if(t)try{e=JSON.parse(t).q.c}catch(e){}}return e},getStorageHost:function(){var e=null,t=this.getStoredData();if(t)try{e=JSON.parse(t).q.h}catch(e){}return e?n.addProtocol(e,this.options["app.https"]):e},getStoredData:function(){return r.getInstance().getCoreStorage().getStorages("data")},getDataTime:function(){return r.getInstance().getCoreStorage().getStorages("dataTime")},setStoredData:function(e){this.storage.setStorages("data",e)},setSession:function(e){this.storage.setStorages("session",e)},setDataTime:function(e){this.storage.setStorages("dataTime",e)}};e.exports=s},2071:(e,t,i)=>{var n=i(3948),{default:r}=i(7276),{AnalyticsTag:s}=i(2784),a=["accountCode","username","anonymousUser","rendition","deviceInfo","player","title","title2","live","segmentDuration","mediaDuration","mediaResource","parsedResource","transactionCode","properties","cdn","profile","bucket","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","dimensions","playerStartupTime","obfuscateIp","privacyProtocol","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","referer","userType","streamingProtocol","transportFormat","householdId","adsBlocked","adsExpected","deviceUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution","linkedViewId","edid","cdnBalancerResponseUUID","accur_geo_location","network_type","network_cell_type","network_signal_strengh","cpu_used","mem_used","cache_used"],o=["player","playhead","adTitle","position","adDuration","adCampaign","adCreativeId","adProvider","adResource","adPlayerVersion","adProperties","adAdapterVersion","adInsertionType","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10","fullscreen","audio","skippable","adNumber","adNumberInBreak","breakNumber"],l=n.extend({constructor:function(){this.lastSent={}},fetchParams:function(e,t,i,n,a){e=e||{},t=t||[];for(var o=0;o<t.length;o++){var d=t[o];if(!e[d]){var h=l.getters[d],u=!1;for(var c in n)if(n[c]&&n[c][h]){var p=n[c][h](a);void 0===p||i&&this.lastSent[d]===p||(e[d]=p,this.lastSent[d]=p),u=!0;break}u||r.warn(s,"Trying to call undefined getter "+d+":"+h)}}return e},getGetters:function(){return l.getters},getRequiredMetadataParams:function(){return["live","rendition"]},buildBody:function(e,t){return this.fetchParams(void 0,l.bodyParams[e],!1,t)},buildParams:function(e,t,i,n){return e=e||{},this.fetchParams(e,l.params[t],!1,i,n),this.fetchParams(e,l.differentParams[t],!0,i,n),e},getChangedEntities:function(e){return this.fetchParams({},l.differentParams.entities,!0,e)}},{params:{"/data":["system","pluginVersion","requestNumber","username"],"/adapters":["system","pluginVersion","requestNumber"],"/configuration":["system","pluginVersion","requestNumber","appName","appReleaseVersion"],"/infinity/session/pluginLogs":["logAction","logType"],"/infinity/video/pluginLogs":["logAction","logType"],"/init":a,"/start":a,"/joinTime":["joinDuration","playhead","bitrate","accountCode","pluginVersion"],"/pause":["playhead","accountCode","pluginVersion"],"/resume":["pauseDuration","playhead","accountCode","pluginVersion"],"/seek":["seekDuration","playhead","accountCode","pluginVersion"],"/bufferUnderrun":["bufferDuration","playhead","accountCode","pluginVersion"],"/error":["player","playhead"].concat(a),"/stop":["accur_geo_location","bitrate","totalBytes","playhead","pauseDuration","metrics","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","profile","bucket","accountCode","pluginVersion"],"/infinity/video/event":[],"/adInit":o,"/adStart":o,"/adJoin":["playhead","position","adJoinDuration","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adPause":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adResume":["playhead","position","adPlayhead","adPauseDuration","adNumber","adNumberInBreak","breakNumber"],"/adBufferUnderrun":["playhead","position","adPlayhead","adBufferDuration","adNumber","adNumberInBreak","breakNumber"],"/adStop":["playhead","position","adPlayhead","adTotalDuration","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/adClick":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adError":["adPlayhead"].concat(o),"/adManifest":["givenBreaks","expectedBreaks","expectedPattern","breaksTime"],"/adBreakStart":["position","givenAds","expectedAds","breakNumber","adInsertionType"],"/adBreakStop":["position","breakNumber"],"/adQuartile":["position","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/ping":["real_traffic","improved_bandwidth_estimation","network_type","network_cell_type","network_signal_strengh","cpu_used","mem_used","cache_used","accountCode","pluginVersion","droppedFrames","playrate","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics","totalBytes","segmentDuration"],"/infinity/session/start":["accountCode","username","userType","anonymousUser","route","page","referer","referral","screenResolution","language","deviceInfo","adsBlocked","deviceUUID","libVersion","appName","appReleaseVersion","isp","connectionType","ip","obfuscateIp","privacyProtocol","dimensions","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","edid"],"/infinity/session/stop":["sessionMetrics"],"/infinity/session/nav":["route","page","scrollDepth"],"/infinity/session/beat":["sessionMetrics"],"/infinity/session/event":["accountCode"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["pluginInfo","rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage","contentId","accur_geo_location"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",segmentDuration:"getSegmentDuration",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",totalBytes:"getTotalBytes",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",parsedResource:"getParsedResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",profile:"getProfileName",bucket:"getBucketName",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",transportFormat:"getTransportFormat",obfuscateIp:"getObfuscateIp",privacyProtocol:"getPrivacyProtocol",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",dimensions:"getCustomDimensions",accur_geo_location:"getAccurateGeoLocation",network_type:"getNetworkConnectionType",network_cell_type:"getNetworkCellType",network_signal_strengh:"getNetworkSignalStrength",cpu_used:"getCpuUsed",mem_used:"getMemoryUsed",cache_used:"getCacheStorageUsed",real_traffic:"getTransferredTraffic",improved_bandwidth_estimation:"getImprovedBandwidth",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",position:"getAdPosition",adNumber:"getAdNumber",adNumberInBreak:"getAdNumberInBreak",breakNumber:"getBreakNumber",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adCreativeId:"getAdCreativeId",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",givenBreaks:"getGivenBreaks",expectedBreaks:"getExpectedBreaks",expectedPattern:"getExpectedPattern",breaksTime:"getBreaksTime",givenAds:"getGivenAds",expectedAds:"getExpectedAds",adsExpected:"getAdsExpected",adViewedDuration:"getAdViewedDuration",adViewability:"getAdViewability",fullscreen:"getIsFullscreen",audio:"getAudioEnabled",skippable:"getIsSkippable",adProvider:"getAdProvider",adInsertionType:"getAdInsertionType",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceInfo:"getDeviceInfo",edid:"getEDID",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",screenResolution:"getScreenResolution",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",page:"getPageName",playerStartupTime:"getPlayerStartupTime",pageLoadTime:"getPageLoadTime",cdnDownloadedTraffic:"getCdnTraffic",multiCdnInfo:"getMultiCdnInfo",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",cdnBalancerResponseUUID:"getBalancerResponseId",viewJson:"getOfflineView",deviceUUID:"getDeviceUUID",sessionMetrics:"getSessionMetrics",scrollDepth:"getScrollDepth",adsBlocked:"getIsBlocked",linkedViewId:"getLinkedViewId",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}});e.exports=l},470:(e,t,i)=>{var n=i(3948),{default:r}=i(7276),{AnalyticsTag:s}=i(2784),a=n.extend({constructor:function(e,t,i,n){this.prefix=e||"npaw",this.disableCookies=t,this.forceCookies=i,this.disabled=n},updateStorageOptions:function(e,t,i){this.disableCookies=e,this.forceCookies=t,this.disabled=i},isEnabled:function(){if(this.disabled)return!1;var e=!0;if(!this.forceCookies)try{localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(t){e=!1}return e},setLocal:function(e,t){if(this.disabled)return null;var i=null;try{!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?"undefined"!=typeof localStorage&&localStorage&&(i=localStorage.setItem(this.prefix+"."+e,t)):i=this._setCookie(this.prefix+".local."+e,t)}catch(e){r.error(s,"Npaw App Analytics needs localStorage or cookies, not supported by your browser.")}return i},getLocal:function(e){return this.disabled?null:this._localGetRemove("getItem","_getCookie",e)},removeLocal:function(e){return this.disabled?null:this._localGetRemove("removeItem","_removeCookie",e)},_localGetRemove:function(e,t,i){var n=null;try{!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?"undefined"!=typeof localStorage&&localStorage&&(n=localStorage[e](this.prefix+"."+i)):n=this[t](this.prefix+".local."+i)}catch(e){r.error(s,"Npaw App Analytics needs localStorage or cookies, not supported by your browser.")}return n},setSession:function(e,t){if(this.disabled)return null;var i=null;try{i=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".session."+e,t)}catch(e){r.error(s,"Npaw App Analytics needs sessionStorage or cookies, not supported by your browser.")}return i},getSession:function(e){return this.disabled?null:this._sessionGetRemove("getItem","_getCookie",e)},removeSession:function(e){return this.disabled?null:this._sessionGetRemove("removeItem","_removeCookie",e)},_sessionGetRemove:function(e,t,i){var n=null;try{n=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage[e](this.prefix+"."+i):this[t](this.prefix+".session."+i)}catch(e){r.error(s,"Npaw App Analytics needs sessionStorage or cookies, not supported by your browser.")}return n},getStorages:function(e){return this.disabled?null:this.getSession(e)||this.getLocal(e)},setStorages:function(e,t){if(this.disabled)return null;this.setSession(e,t),this.setLocal(e,t)},removeStorages:function(e){if(this.disabled)return null;this.removeSession(e),this.removeLocal(e)},_setCookie:function(e,t){if("undefined"!=typeof document){var i=";";"undefined"!=typeof location&&(i+="domain="+location.host.split(".").reverse().splice(0,2).reverse().join(".")+";path=/;"),document.cookie=e+"="+t+i}},_getCookie:function(e){if("undefined"!=typeof document)for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var r=i[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},_removeCookie:function(e){this._setCookie(e,"")}});e.exports=a},4607:e=>{e.exports=function(){Function.prototype.bind=Function.prototype.bind||function(e){var t=Array.prototype.slice,i=this,n=t.call(arguments,1);function r(){var r=i.prototype&&this instanceof i;return i.apply(!r&&e||this,n.concat(t.call(arguments)))}return r.prototype=i.prototype,r},Array.prototype.forEach=Array.prototype.forEach||function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function!");for(var i=this.length,n=0;n<i;n++)e.call(t,this[n],n,this)},Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)}}},4954:(e,t,i)=>{var n=i(3948),r=i(7680),s=n.extend({constructor:function(e,t){this.callback=e,this.interval=t||5e3,this.isRunning=!1,this._timer=null,this.chrono=new r},start:function(){this.isRunning||(this.isRunning=!0,this._setTick())},stop:function(){if(this.isRunning=!1,this._timer)try{clearTimeout(this._timer),this._timer=null}catch(e){"undefined"!=typeof atv&&(atv.clearTimeout(this._timer),this._timer=null)}},_setTick:function(){if(this.isRunning){this.chrono.start();try{this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}catch(e){"undefined"!=typeof atv&&(this._timer=atv.setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval))}}}});e.exports=s},2507:(e,t,i)=>{var{default:n,LogLevel:r}=i(7276),{AnalyticsTag:s}=i(2784),a={stripProtocol:function(e){var t=e;try{t=e.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){n.warn(s,e)}return t},parseBoolean:function(e){return"string"==typeof e||e instanceof String?"true"===e.toLowerCase():!!e},elementIsInPage:function(e){try{return e!==document.body&&document.body.contains(e)}catch(e){n.warn(s,e)}return!0},addProtocol:function(e,t){var i="http://localhost/";try{i="http://"+e,t||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?i="https://"+e:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(i="//"+e)}catch(e){n.warn(s,e)}return i},parseNumber:function(e,t){return!isNaN(e)&&e>=0&&e!==1/0&&e!==-1/0&&null!=e?e:t},logAllEvents:function(e,t,i){try{if(n.logLevel<=r.DEBUG){i=i||function(e){n.debug(s,"Event: "+e.type)};var a=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];t&&(null===t[0]?(t.shift(),a=t):a=a.concat(t));for(var o=0;o<a.length;o++)"function"==typeof e?e.call(window,a[o],i):e.on?e.on(a[o],i):e.addEventListener&&e.addEventListener(a[o],i)}}catch(e){n.error(s,e)}},buildRenditionString:function(e,t,i){1===arguments.length&&(i=e,e=null,t=null);var n=null;return e&&t&&(n=e+"x"+t),"number"==typeof i&&!isNaN(i)&&i>=1&&(n?n+="@":n="",n+=i<1e3?Math.round(i)+"bps":i<1e6?(i=Math.round(i/1e3))+"Kbps":(i=Math.round(i/1e4)/100)+"Mbps"),n},buildErrorParams:function(e,t,i){var n={};return"object"==typeof e&&null!==e?n=e:(n.errorCode=e||"FAILURE",n.msg=t||n.errorCode,n.errorMetadata=i),n},calculateAdViewability:function(e,t){var i=!0;if("undefined"!=typeof window&&e&&"function"==typeof e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.top>=window.innerHeight||n.bottom<=0||n.right<=0||n.left>=window.innerWidth)i=!1;else{var r=Math.trunc(n.height*n.width),s=n.top>0?n.top:0,a=n.bottom>window.innerHeight?window.innerHeight:n.bottom,o=n.left>0?n.left:0;i=((n.right>window.innerWidth?window.innerWidth:n.right)-o)*(a-s)*100>r*(t||50)}}return i},getMetricsFrom:function(e,t){var i=e||t;for(var n in i)if("object"!=typeof i[n]||!i[n].value){var r={};r.value=i[n],i[n]=r}return i},assign:i(4173),isArray:i(2467)};e.exports=a},9835:(e,t,i)=>{var n="7.2.41"+(i(9907).env.NWF||"");e.exports=n},1516:(e,t,i)=>{var n=i(1593),r=i(7680),s=i(7061),{default:a}=i(7276),o=i(3782),l=i(2507),{default:d}=i(1577),h=i(5292),u=i(2071),c=i(2995),p=i(6424),{default:g}=i(6933),{default:f}=i(9065),{default:m}=i(3555),{default:v}=i(61),{Method:y,AnalyticsTag:b}=i(2784),S=n.extend({constructor:function(e,t,i,n){this._key=e,this.plugin=t,this.isInitiated=!1,this.isAdsManifestSent=!1,this.playedPostrolls=0,this.isBreakStarted=!1,this.initChrono=new r,this.options=new s(i),this._adNumber=0,this._adNumberInBreak=0,this.requestBuilder=new u,this.hybridNetwork=new c,this.resizeScrollDetector=new p(t,this),this._adapter=null,this._adsAdapter=null,n&&this.setAdapter(n,t),this._pluginLogsQueue=[],this.lastEventTime=null,this.lastKnownLocation=void 0,this.isFetchingLocation=!1,this.sendingPings=!1,this._startPings()},mergeOptions:function(e){e&&this.options.setOptions(e,this.options)},setVideoOptions:function(e){e&&this.options.setOptions(e)},updateCustomMetrics:function(e){e&&this.options.setOptions(e,void 0,!0)},getVideoKey:function(){return this._key},nextView:function(){return this._viewIndex=(new Date).getTime(),this._viewCode=f.getInstance().getFastDataSessionToken(),f.getInstance().registerCommonVariable(v.Products.VIDEO_ANALYTICS,v.AnalyticsVariables.VIEW_CODE,this._viewIndex),this.getViewCode()},getViewCode:function(){var e=f.getInstance().getFastDataSessionToken();return 0===e.length||this._viewCode&&this._viewCode===e||(this._viewCode=e),this._viewCode+(this._viewIndex?"_"+this._viewIndex:"")},setAdapter:function(e,t){for(var i in this.plugin=t,this._adapter=e,this._adapter.setIsAds(!1),this._adapter._setAdapter=!0,this.contentAdapterListeners={},this.contentAdapterListeners[h.Event.START]=this._startListener.bind(this),this.contentAdapterListeners[h.Event.JOIN]=this._joinListener.bind(this),this.contentAdapterListeners[h.Event.DATA_OBJECT]=this._advancedDataListener.bind(this),this.contentAdapterListeners[h.Event.PAUSE]=this._pauseListener.bind(this),this.contentAdapterListeners[h.Event.RESUME]=this._resumeListener.bind(this),this.contentAdapterListeners[h.Event.SEEK_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[h.Event.SEEK_END]=this._seekEndListener.bind(this),this.contentAdapterListeners[h.Event.BUFFER_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[h.Event.BUFFER_END]=this._bufferEndListener.bind(this),this.contentAdapterListeners[h.Event.ERROR]=this._errorListener.bind(this),this.contentAdapterListeners[h.Event.STOP]=this._stopListener.bind(this),this.contentAdapterListeners[h.Event.VIDEO_EVENT]=this._videoEventListener.bind(this),this.contentAdapterListeners)this._adapter.on(i,this.contentAdapterListeners[i]);this.options.enableExtraMetricCollection&&this.shouldStartRenditionTimer()},getAdapter:function(){return this._adapter},removeAdapter:function(){try{if(this._adapter){if(this._adapter.dispose(),this.contentAdapterListeners){for(var e in this.contentAdapterListeners)this._adapter.off(e,this.contentAdapterListeners[e]);delete this.contentAdapterListeners}this._adapter=null}}catch(e){a.error(b,"Is not possible to remove adapter for video: "+this._key)}},getAdsAdapter:function(){return this._adsAdapter},fetchLocation:function(){this.isFetchingLocation=!0,navigator&&navigator.geolocation?(this.lastKnownLocation=void 0,navigator.geolocation.getCurrentPosition((e=>{this.lastKnownLocation={latitude:e.coords.latitude,longitude:e.coords.longitude},this.isFetchingLocation=!1}),(e=>{this.isFetchingLocation=!1}),{enableHighAccuracy:!0,timeout:1e4})):(this.lastKnownLocation=void 0,this.isFetchingLocation=!1)},shouldStartRenditionTimer:function(){if(!this._adapter.getAdapterClass("detectQualityChange")&&!this.renditionInterval){var e=this.options.renditionQueryInterval<100?100:this.options.renditionQueryInterval;this.renditionInterval=setInterval((()=>{var e=this._adapter.getRendition();e&&this.triggerUpdateRendition(e)}),e||250)}},triggerUpdateRendition:function(e){this.lastObservedRendition?this.lastObservedRendition!=e&&(this.lastObservedRendition=e):this.lastObservedRendition=e},fireInit:function(e,t){this.isInitiated||(!this.getAdapter()||this.getAdapter()&&!this.getAdapter().flags.isStarted)&&(this._viewIndex||this.plugin.getNextViewIndex(this),this._startPings(),this.initChrono.start(),this.isInitiated=!0,e=e||{},t&&(e.triggeredEvents=[t]),this._send(o.WillSendEvent.WILL_SEND_INIT,o.Service.INIT,e),this._adSavedError(),this._adSavedManifest(),a.notice(b,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+o.Service.INIT+", title/res: "+(e.title||e.mediaResource)+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:"")))},fireError:function(e,t,i,n,r,s){this.fireInit();var d=l.buildErrorParams(e,t,i);d.code&&delete d.code,r&&(d.triggeredEvents=[r]);try{(s=s||!1)&&this._adapter&&this._adapter.flags&&this._adapter.flags.isJoined&&((d=d||{}).errorType="fatal")}catch(e){}this._send(o.WillSendEvent.WILL_SEND_ERROR,o.Service.ERROR,d),this._adSavedError(),this._adSavedManifest(),a.notice(b,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+o.Service.ERROR+", errorType: "+d.errorType+", errorCode: "+d.errorCode+(d.triggeredEvents?", eventsTriggered: "+d.triggeredEvents:"")),"fatal"===d.errorType&&this.fireStop()},fireFatalError:function(e,t,i,n,r){this.fireError(e,t,i,n,r,!0)},fireStop:function(e,t){if(this.isInitiated||this.isStarted){this._adapter&&(this._adapter.flags.isStopped=!0,this._adapter.monitor&&this._adapter.monitor.stop()),this._adsAdapter&&this.isBreakStarted&&(this._adsAdapter.fireStop(),this._adsAdapter.fireAdBreakStop()),e=e||{},t&&(e.triggeredEvents=[t]),g.getInstance().setTriedSendingNQSStats(!0),this._send(o.WillSendEvent.WILL_SEND_STOP,o.Service.STOP,e,void 0,void 0,(()=>{g.getInstance().addNQSRequest(o.Service.STOP)}));var i=this._adapter?this._adapter.chronos:null;i&&(i.total.stop(),i.join.reset(),i.pause.reset(),i.buffer.reset(),i.seek.reset()),this.lastKnownLocation=void 0,this.observedRenditions=[],this.renditionInterval&&(clearInterval(this.renditionInterval),this.renditionInterval=void 0),a.notice(b,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+o.Service.STOP+" at "+e.playhead+"s"+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:"")),this._reset()}},fireOfflineEvents:function(e){this.options&&!this.options.offline?this.isInitiated||this._adapter&&this._adapter.flags.isStarted||this._adsAdapter&&this._adsAdapter.flags.isStarted?a.error(b,"Adapters have to be stopped"):(this._offlineParams=e,f.getInstance().getFastDataService().getAccountCode()&&f.getInstance().getFastDataSessionToken()?this._generateAndSendOffline():this.offlineReference=this._generateAndSendOffline.bind(this)):a.error(b,"To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){if(this.options.disableStorage)return null;for(var e=this._offlineParams;;){var t=this.requestBuilder.buildBody(o.Service.OFFLINE_EVENTS,[this,this.plugin]).viewJson;if(null===t[0])break;var i=this.plugin.getNextViewIndex(this),n=t[0].replace(/CODE_PLACEHOLDER/g,i.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"");this._send(o.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,o.Service.OFFLINE_EVENTS,e,n,"POST",function(e,t){this.plugin.offlineStorage.removeView(t.offlineId)}.bind(this),{offlineId:t[1]})}this.plugin.offlineStorage.sent(),this._offlineParams=null},_reset:function(){try{this._stopPings(),this._adapter&&this._adapter.flags.reset(),this._viewIndex=void 0,this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isAdsManifestSent=!1,this.initChrono.reset(),this._totalPrerollsTime=0,this.requestBuilder.lastSent.breakNumber=0,this.requestBuilder.lastSent.adNumber=0,this._savedAdManifest=null,this._savedAdError=null,this.playedPostrolls=0,this.isBreakStarted=!1,this._adNumber=0,this._adNumberInBreak=0}catch(e){}},_send:function(e,t,i,n,r,s,a){var l=d.methodFromString(r),h=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&h>this.lastEventTime+6e5&&this.plugin.getNextViewIndex(this),this.lastEventTime=t===o.Service.STOP?null:h;var u=new m(t,i,this.getVideoKey(),l,void 0,s);this.plugin.resourceTransform.parse(u),i=this.requestBuilder.buildParams(i,t,[this,this.plugin],this.options),!0===this.getIsLive()&&(i.mediaDuration=this.options["content.duration"],i.playhead=void 0),u.setParams(i),n&&u.setBody(n),u.setMethod(l),this.plugin.isMethodPostEnabled()&&u.setMethod(y.POST);var c={params:u.getParams(),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(e,c),this.plugin.analyticsRequestHandler&&(null!==i||void 0!==r)&&this.options.enabled&&(this.plugin.lastServiceSent=t,this.plugin.analyticsRequestHandler.sendRequest(u))},firePlayerLog:function(e){try{if(this.plugin.isPlayerLogsEnabled())if(this._adapter&&!this._adapter.isStarted())e.timemark=(new Date).getTime(),this._pluginLogsQueue.push(e);else{for(;this._pluginLogsQueue.length>0;){var t=this._pluginLogsQueue.shift();this._sendPlayerLog(t)}this._sendPlayerLog(e)}}catch(e){}},_sendPlayerLog:function(e){try{e&&e.logType&&e.logAction&&a.notice(b,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") PlayerLog "+e.logType+": Action "+e.logAction),this.plugin._comm&&e&&null!==(e=this.requestBuilder.buildParams(e,o.Service.VIDEO_PLUGIN_LOGS,this,this.options))&&this._send(null,o.Service.VIDEO_PLUGIN_LOGS,e)}catch(e){}}});l.assign(S.prototype,i(8037)),l.assign(S.prototype,i(5710)),l.assign(S.prototype,i(7355)),l.assign(S.prototype,i(5031)),e.exports=S},8037:(e,t,i)=>{var n=i(3782),r=i(2507),s=i(5292),{AnalyticsTag:a}=i(2784),{default:o}=i(7276),{default:l}=i(6933),d={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(e,t,i){if(i=i||!1,e.isSetAdapter())o.warn(a,"Adapters can only be added to a single plugin");else try{for(var n in this.removeAdsAdapter(),this.plugin=t,this._adsAdapter=e,this._adsAdapter.setIsAds(!0),this.adsAdapterListeners={},this.adsAdapterListeners[s.Event.START]=this._adStartListener.bind(this),this.adsAdapterListeners[s.Event.JOIN]=this._adJoinListener.bind(this),this.adsAdapterListeners[s.Event.DATA_OBJECT]=this._adAdvancedDataListener.bind(this),this.adsAdapterListeners[s.Event.PAUSE]=this._adPauseListener.bind(this),this.adsAdapterListeners[s.Event.RESUME]=this._adResumeListener.bind(this),this.adsAdapterListeners[s.Event.BUFFER_BEGIN]=this._adBufferBeginListener.bind(this),this.adsAdapterListeners[s.Event.BUFFER_END]=this._adBufferEndListener.bind(this),this.adsAdapterListeners[s.Event.STOP]=this._adStopListener.bind(this),this.adsAdapterListeners[s.Event.ERROR]=this._adErrorListener.bind(this),this.adsAdapterListeners[s.Event.CLICK]=this._adClickListener.bind(this),this.adsAdapterListeners[s.Event.MANIFEST]=this._adManifestListener.bind(this),this.adsAdapterListeners[s.Event.PODSTART]=this._adBreakStartListener.bind(this),this.adsAdapterListeners[s.Event.PODSTOP]=this._adBreakStopListener.bind(this),this.adsAdapterListeners[s.Event.QUARTILE]=this._adQuartileListener.bind(this),this.adsAdapterListeners)this._adsAdapter.on(n,this.adsAdapterListeners[n]);i&&(o.notice(a,"Registering listeners for registered AdsAdapter"),this._adsAdapter.registerListeners())}catch(e){o.warn(a,"Problem during setAdsAdapter process")}},removeAdsAdapter:function(){if(this._adsAdapter){if(this._adsAdapter.dispose(),this.adsAdapterListeners){for(var e in this.adsAdapterListeners)this._adsAdapter.off(e,this.adsAdapterListeners[e]);delete this.adsAdapterListeners}this.resizeScrollDetector.stopDetection(),this._adsAdapter=void 0}},_adStartListener:function(e){this._adapter?(this._adapter.fireBufferEnd(null,"adStartListener"),this._adapter.fireSeekEnd(null,"adStartListener"),this.isInitiated||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this._adsAdapter&&(this._adsAdapter.chronos.viewedMax=[]);var t=e.data.params||{};t.adNumber=this.getNewAdNumber(),(this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._adsAdapter.fireManifest(),this._adsAdapter.fireAdBreakStart(),t.adNumberInBreak=this.getNewAdNumberInBreak(),l.getInstance().addNQSAdEvent(s.Event.START,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_START,n.Service.AD_START,t)):(this.adInitSent=!0,t.adNumberInBreak=this.getNewAdNumberInBreak(),l.getInstance().addNQSAdEvent(s.Event.INIT,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_INIT,n.Service.AD_INIT,t))},_adJoinListener:function(e){var t={};r.assign(t,e.data.params||{}),this.adInitSent&&!this.adStartSent&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireAdBreakStart(),l.getInstance().addNQSAdEvent(s.Event.START,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_START,n.Service.AD_START,t)),this._adsAdapter.startChronoView(),this.adConnected&&(this._adsAdapter.chronos.join.startTime=this.adConnectedTime,this._adsAdapter.chronos.total.startTime=this.adConnectedTime,this.adConnectedTime=0,this.adConnected=!1),t=e.data.params||{},l.getInstance().addNQSAdEvent(s.Event.JOIN,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_JOIN,n.Service.AD_JOIN,t),this.adInitSent=!1,this.adStartSent=!1},_adAdvancedDataListener:function(e){var t=e.data.params||{};this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_DATA_OBJECT,n.Service.DATA_OBJECT,t)},_adPauseListener:function(e){var t=e.data.params||{};this._adsAdapter.stopChronoView(),l.getInstance().addNQSAdEvent(s.Event.PAUSE,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_PAUSE,n.Service.AD_PAUSE,t)},_adResumeListener:function(e){var t=e.data.params||{};this._adsAdapter.startChronoView(),l.getInstance().addNQSAdEvent(s.Event.RESUME,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_RESUME,n.Service.AD_RESUME,t)},_adBufferBeginListener:function(e){o.notice(a,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") Ad Buffer Begin"),this._adsAdapter.stopChronoView(),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(e){var t=e.data.params||{};this._adsAdapter.startChronoView(),l.getInstance().addNQSAdEvent(s.Event.BUFFER_END,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_BUFFER,n.Service.AD_BUFFER,t)},_adStopListener:function(e){var t=e.data.params||{};if(this._adsAdapter.stopChronoView(),this._adsAdapter.flags.reset(),this._totalPrerollsTime=(this._totalPrerollsTime||0)+this._adsAdapter.chronos.total.getDeltaTime(),t.position=this.requestBuilder.lastSent.position,l.getInstance().addNQSAdEvent(s.Event.STOP,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_STOP,n.Service.AD_STOP,t),this.requestBuilder.lastSent.position===n.AdPosition.Postroll){var i=this.options["ad.expectedPattern"];this.playedPostrolls++,(this.requestBuilder.lastSent.givenAds&&this.requestBuilder.lastSent.givenAds<=this.playedPostrolls||!this.requestBuilder.lastSent.givenAds&&i&&i.post&&i.post[0]&&i.post[0]<=this.playedPostrolls)&&this._adapter.fireStop({},"_adStopListener")}this.adConnected=!0,this.adConnectedTime=(new Date).getTime()},_adErrorListener:function(e){var t=e.data.params||{};!this._adapter||this._adapter.flags.isStarted||this.isInitiated?this._blockAdError(e.data.params)||(this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireAdBreakStart()),this._adsAdapter&&this._adsAdapter.flags.isStarted||(t.adNumber=this.getNewAdNumber(),t.adNumberInBreak=this.getNewAdNumberInBreak()),this.isBreakStarted||(t.breakNumber=this.getNewBreakNumber()),l.getInstance().addNQSAdEvent(s.Event.ERROR,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_ERROR,n.Service.AD_ERROR,t)):this._savedAdError=e},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_adSavedManifest:function(){this._savedAdManifest&&(this._adManifestListener(this._savedAdManifest),this._savedAdManifest=null)},_blockAdError:function(e){var t=Date.now();return this._lastAdErrorParams&&this._lastAdErrorParams.errorCode===e.errorCode&&this._lastAdErrorParams.msg===e.msg&&this._lastAdErrorParams.adCreativeId===this.getAdCreativeId()&&this._lastAdErrorTime+5e3>t?(this._lastAdErrorTime=t,!0):(this._lastAdErrorTime=t,this._lastAdErrorParams=e,!1)},_adClickListener:function(e){var t=e.data.params||{};this._adsAdapter.stopChronoView(),l.getInstance().addNQSAdEvent(s.Event.CLICK,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_CLICK,n.Service.AD_CLICK,t)},_adManifestListener:function(e){if(!this.isAdsManifestSent){if(this._adapter&&!this._adapter.flags.isStarted&&!this.isInitiated)return void(this._savedAdManifest=e);var t=e.data.params||{};this.isAdsManifestSent=!0,l.getInstance().addNQSAdEvent(s.Event.MANIFEST,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_MANIFEST,n.Service.AD_MANIFEST,t)}},_adBreakStartListener:function(e){if(!this.isBreakStarted){this.isBreakStarted=!0,this._adapter&&this._adapter.firePause();var t=e.data.params||{};t.breakNumber=this.getNewBreakNumber(),l.getInstance().addNQSAdEvent(s.Event.PODSTART,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_POD_START,n.Service.AD_POD_START,t),this.adConnected=!1}},_adBreakStopListener:function(e){if(this.isBreakStarted){this.isBreakStarted=!1;var t=e.data.params||{};t.position=this.requestBuilder.lastSent.position,l.getInstance().addNQSAdEvent(s.Event.PODSTOP,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_POD_STOP,n.Service.AD_POD_STOP,t),this.adConnected=!1,this._adapter&&this._adapter.fireResume()}},_adQuartileListener:function(e){var t=e.data.params||{};t.quartile&&(l.getInstance().addNQSAdEvent(s.Event.QUARTILE,t),this._sendAdEventIfAllowed(n.WillSendEvent.WILL_SEND_AD_QUARTILE,n.Service.AD_QUARTILE,t))},_sendAdEventIfAllowed:function(e,t,i){this.options["ad.ignore"]||(l.getInstance().setTriedSendingNQSAdStats(!0),this._send(e,t,i,void 0,void 0,(()=>{l.getInstance().addNQSAdRequest(t)}))),o.notice(a,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+t)}};e.exports=d},5710:(e,t,i)=>{var{default:n}=i(6933),r=i(3782),s=i(2477),{default:a}=i(7276),o=i(2507),l=i(5292),{AnalyticsTag:d}=i(2784),{default:h}=i(61),{default:u}=i(9065),c={_startListener:function(e){!this.plugin.options.enableExtraMetricCollection||this.lastKnownLocation||this.isFetchingLocation||this.fetchLocation(),this.isInitiated?0!==this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime):(this._viewIndex||this.plugin.getNextViewIndex(this),this._startPings());var t=e.data.params||{};n.getInstance().addNQSEvent(l.Event.START,t);var i=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle(),s=u.getInstance().getCommonVariable(h.Products.BALANCER,h.BalancerVariables.DECISION_FINISHED);void 0===s&&(s=!0),(i=!this.options.forceInit&&i&&this._isExtraMetadataReady()&&s&&this._isRequiredMetadataReady())&&!this.isInitiated?(n.getInstance().setTriedSendingNQSStats(!0),this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,t,void 0,void 0,(()=>{n.getInstance().addNQSRequest(r.Service.START)})),this._adSavedError(),this._adSavedManifest(),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.START+", title/res: "+(t.title||t.mediaResource)+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:"")),this.isStarted=!0):this.isInitiated||(this.isInitiated=!0,this._adapter.chronos.join.start(),n.getInstance().setTriedSendingNQSStats(!0),this._send(r.WillSendEvent.WILL_SEND_INIT,r.Service.INIT,t,void 0,void 0,(()=>{n.getInstance().addNQSRequest(r.Service.INIT)})),this._adSavedError(),this._adSavedManifest(),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.INIT+", title/res: "+(t.title||t.mediaResource)+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))),this.options.enableExtraMetricCollection&&this.shouldStartRenditionTimer()},_retryStart:function(e){var t=u.getInstance().getCommonVariable(h.Products.BALANCER,h.BalancerVariables.DECISION_FINISHED);void 0===t&&(t=!0),this._isExtraMetadataReady()&&t&&this._isRequiredMetadataReady()&&(this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,{triggeredEvents:["retryStart"]}),this.startDelayed=!1)},_joinListener:function(e){var t={};if(o.assign(t,e.data.params||{}),this._adsAdapter&&this._adsAdapter.flags.isStarted)this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0;else{if(n.getInstance().addNQSEvent(l.Event.JOIN,t),this._adapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._totalPrerollsTime||0),(new Date).getTime()),this._totalPrerollsTime=0),this.isInitiated&&!this.isStarted){var i=u.getInstance().getCommonVariable(h.Products.BALANCER,h.BalancerVariables.DECISION_FINISHED);void 0===i&&(i=!0),this._isExtraMetadataReady()&&i&&this._isRequiredMetadataReady()?(n.getInstance().setTriedSendingNQSStats(!0),this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,t,void 0,void 0,(()=>{n.getInstance().addNQSRequest(r.Service.START)}))):this.startDelayed=!0,this._adSavedError(),this._adSavedManifest(),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.START+", title/res: "+(t.title||t.mediaResource)+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:"")),this.isStarted=!0}t=e.data.params||{},n.getInstance().addNQSEvent(s.JOIN_TIME,t),this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireAdBreakStop(),n.getInstance().setTriedSendingNQSStats(!0),this._send(r.WillSendEvent.WILL_SEND_JOIN,r.Service.JOIN,t,void 0,void 0,(()=>{n.getInstance().addNQSRequest(r.Service.JOIN)})),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.JOIN+", duration: "+t.joinDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))}},_advancedDataListener:function(e){var t=e.data.params||{};this._send(r.WillSendEvent.WILL_SEND_DATA_OBJECT,r.Service.DATA_OBJECT,t),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.DATA_OBJECT+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_pauseListener:function(e){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var t=e.data.params||{};n.getInstance().addNQSEvent(l.Event.PAUSE,t),this._send(r.WillSendEvent.WILL_SEND_PAUSE,r.Service.PAUSE,t),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.PAUSE+" at "+t.playhead+"s"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_resumeListener:function(e){this._adsAdapter&&this.isBreakStarted&&!this._adsAdapter.flags.isStarted&&this._adsAdapter.fireAdBreakStop();var t=e.data.params||{};n.getInstance().addNQSEvent(l.Event.RESUME,t),this._send(r.WillSendEvent.WILL_SEND_RESUME,r.Service.RESUME,t),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.RESUME+", duration: "+t.pauseDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:"")),this._adapter.chronos.pause.reset()},_seekBufferBeginListener:function(e){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.pause(),e.type&&e.type.includes("buffer")?(n.getInstance().addNQSEvent(l.Event.BUFFER_BEGIN,{}),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+e.type+", eventsTriggered: "+this._adapter.fireEventsStruct.buffer)):(n.getInstance().addNQSEvent(l.Event.SEEK_BEGIN,{}),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+e.type+", eventsTriggered: "+this._adapter.fireEventsStruct.seek))},_seekEndListener:function(e){var t=e.data.params||{};n.getInstance().addNQSEvent(l.Event.SEEK_END,t),this._send(r.WillSendEvent.WILL_SEND_SEEK,r.Service.SEEK,t),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.SEEK+" to "+t.playhead+" in "+t.seekDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_bufferEndListener:function(e){var t=e.data.params||{};n.getInstance().addNQSEvent(l.Event.BUFFER_END,t),this._send(r.WillSendEvent.WILL_SEND_BUFFER,r.Service.BUFFER,t),a.notice(d,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+r.Service.BUFFER+" to "+t.playhead+" in "+t.bufferDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_errorListener:function(e){this._blockError(e.data.params)||(n.getInstance().addNQSEvent(l.Event.ERROR,e.data.params),this.fireError(e.data.params||{}),this._adSavedError(),this._adSavedManifest())},_blockError:function(e){var t=Date.now();return this._lastErrorParams&&this._lastErrorParams.errorCode===e.errorCode&&this._lastErrorParams.msg===e.msg&&this._lastErrorTime+5e3>t?(this._lastErrorTime=t,!0):(this._lastErrorTime=t,this._lastErrorParams=e,!1)},_stopListener:function(e){n.getInstance().addNQSEvent(l.Event.STOP,e.data.params),this.fireStop(e.data.params||{})},_isStopReady:function(e){var t=!1;if(!this.requestBuilder.lastSent.live&&this._adsAdapter&&this._adapter&&(!this._adapter.getPlayhead()||this._adapter.getPlayhead()>=this.requestBuilder.lastSent.mediaDuration-1)){var i=0,n=this.options["ad.expectedPattern"];if(n&&n.post&&n.post[0])i=n.post[0];else if(this.requestBuilder.lastSent.breaksTime){if(this.requestBuilder.lastSent.position===r.AdPosition.Postroll&&(i=this.requestBuilder.lastSent.givenAds),!i&&this.requestBuilder.lastSent.breaksTime){var s=this.requestBuilder.lastSent.breaksTime;s.length>0&&this.requestBuilder.lastSent.mediaDuration&&Math.round(s[s.length-1])+1>=this.requestBuilder.lastSent.mediaDuration&&(i=1)}}else t=!0;i<=this.playedPostrolls&&(t=!0)}else t=!0;return t},_videoEventListener:function(e){n.getInstance().addNQSEvent(l.Event.VIDEO_EVENT,e.data.params),this._send(r.WillSendEvent.WILL_SEND_VIDEO_EVENT,r.Service.VIDEO_EVENT,e.data.params)},_isExtraMetadataReady:function(e){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;try{var t=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(e){if(t.hasOwnProperty(e)){if(this[t[e]])return!!this[t[e]]();if(this.plugin[t[e]])return!!this.plugin[t[e]]()}}.bind(this)).indexOf(!1)<0}catch(e){a.warn("["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") Error processing isExtraMetadataReady method.")}return!0},_isRequiredMetadataReady:function(){if((new Date).getTime()-this._adapter.chronos.join.startTime<r.Metadata.REQUIRED_METADATA_TIMEOUT){try{var e=this.requestBuilder.getGetters();return this.requestBuilder.getRequiredMetadataParams().every(function(t){if(e.hasOwnProperty(t))if("function"==typeof this[e[t]]){var i=this[e[t]]();if(null!=i&&!Number.isNaN(i))return!0}else if(this.plugin&&"function"==typeof this.plugin[e[t]]){var n=this.plugin[e[t]]();if(null!=n&&!Number.isNaN(n))return!0}return!1}.bind(this))}catch(e){a.warn("["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") Error processing _isRequiredMetadataReady method.")}return!1}return!0}};e.exports=c},7355:(e,t,i)=>{var n=i(2507),{default:r}=i(7276),s=i(9835),a=i(8472),o=i(7939),l=i(3782),{default:d}=i(9065),{AnalyticsTag:h}=i(2784),{default:u}=i(61),c={getPlayhead:function(){var e=this._safeGetterAdapter("getPlayhead");return n.parseNumber(e,0)},getPlayrate:function(){var e=0;if(this._adapter&&this._adapter.flags&&!this._adapter.flags.isPaused)try{e=this._adapter.getPlayrate()}catch(e){r.warn(h,"An error occured while calling getPlayrate",e)}return e},getFramesPerSecond:function(){return this._safeGetterAdapter("getFramesPerSecond","content.fps")},getSegmentDuration:function(){return this.hybridNetwork.getSegmentDuration()||this._safeGetterAdapter("getSegmentDuration","content.segmentDuration")},getDroppedFrames:function(){var e=this._safeGetterAdapter("getDroppedFrames");return e||(e=this.getWebkitDroppedFrames()),n.parseNumber(e,0)},getWebkitDroppedFrames:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount)return this._adapter.tag.webkitDroppedFrameCount},getDuration:function(){var e=this._safeGetterAdapter("getDuration","content.duration")||void 0;return n.parseNumber(Math.round(e),void 0)},getBitrate:function(){var e=this._safeGetterAdapter("getBitrate","content.bitrate");return e&&-1!==e||(e=this.getWebkitBitrate()),n.parseNumber(e,-1)},getTotalBytes:function(){return this.options["content.sendTotalBytes"]?this._safeGetterAdapter("getTotalBytes","content.totalBytes"):void 0},getWebkitBitrate:function(){try{if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;e=Math.round(t/this.plugin.fastDataTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}}catch(t){}return-1},getThroughput:function(){var e=this._safeGetterAdapter("getThroughput","content.throughput");return n.parseNumber(e,-1)},getRendition:function(){return this._safeGetterAdapter("getRendition","content.rendition")},getTitle:function(){return this._safeGetterAdapter("getTitle","content.title")},getTitle2:function(){return this._safeGetterAdapter("getTitle2","content.program")},getIsLive:function(){var e=this.options["content.isLive"];return e||!1===e||(e=this._safeGetterAdapter("getIsLive")||!1),e},getResource:function(){return this._safeGetterAdapter("getResource","content.resource")},getParsedResource:function(){var e=this.plugin.resourceTransform.getResource();return(e=e||this._safeGetterAdapter("getURLToParse"))===this.getResource()?void 0:e},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){return this._safeGetterAdapter("getPlayerVersion")||""},getPlayerName:function(){return this._safeGetterAdapter("getPlayerName")||""},getCdn:function(){return(d.getInstance().getCommonVariable(u.Products.BALANCER,u.BalancerVariables.AS_ENABLED)?"ACTVSWIT":this.plugin.resourceTransform.getCdnName())||this.options["content.cdn"]},getProfileName:function(){return d.getInstance().getCommonVariable(u.Products.BALANCER,u.BalancerVariables.PROFILE_NAME)},getBucketName:function(){return d.getInstance().getCommonVariable(u.Products.BALANCER,u.BalancerVariables.BUCKET)},getPluginVersion:function(){return this.getAdapterVersion()},getAdapterVersion:function(){return this._safeGetterAdapter("getVersion")},getCdnTraffic:function(){return this._safeGetterAdapter("getCdnTraffic")||this.hybridNetwork.getCdnTraffic()},getMultiCdnInfo:function(){return this.hybridNetwork.getMultiCdnInfo()},getBalancerResponseId:function(){return this.hybridNetwork.getBalancerResponseId()},getP2PTraffic:function(){return this._safeGetterAdapter("getP2PTraffic")||this.hybridNetwork.getP2PTraffic()},getUploadTraffic:function(){return this._safeGetterAdapter("getUploadTraffic")||this.hybridNetwork.getUploadTraffic()},getIsP2PEnabled:function(){return this._safeGetterAdapter("getIsP2PEnabled")||this.hybridNetwork.getIsP2PEnabled()},getStreamingProtocol:function(){var e=this.options["content.streamingProtocol"];if(e)for(var t in a)if(a[t]===e)return e},getTransportFormat:function(){var e=this.options["content.transportFormat"];if(!e&&this.options["parse.manifest"]&&(e=this.plugin.resourceTransform.getTransportFormat()),e)for(var t in o)if(o[t]===e)return e},getHouseholdId:function(){return this._safeGetterAdapter("getHouseholdId")},getLatency:function(){return this.getIsLive()?this._safeGetterAdapter("getLatency"):void 0},getPacketLoss:function(){return this._safeGetterAdapter("getPacketLoss")},getPacketSent:function(){return this._safeGetterAdapter("getPacketSent")},getVideoMetrics:function(){return n.getMetricsFrom(this._adapter?this._adapter.getMetrics():void 0,this.options["content.metrics"])},getPlayerStartupTime:function(){return this.plugin.browserLoadTimes.getPlayerStartupTime()},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){var e=this.options["content.playbackType"];if(!e){var t=this.options["content.isLive"];"boolean"!=typeof t&&(t=this._safeGetterAdapter("getIsLive")),"boolean"==typeof t&&(e=t?"Live":"VoD")}return e},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this._safeGetterAdapter("getVideoCodec","content.encoding.videoCodec")},getAudioCodec:function(){return this._safeGetterAdapter("getAudioCodec","content.encoding.audioCodec")},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]},getLinkedViewId:function(){return this.options.linkedViewId},_safeGetterAdapter:function(e,t){var i;if(t&&this.options[t])i=this.options[t];else try{this._adapter&&"function"==typeof this._adapter[e]&&(i=this._adapter[e]())}catch(t){r.warn(h,"An error occured while calling "+e,t)}return i||void 0},getCustomDimensions:function(){var e=this.options["content.customDimensions"];return"object"==typeof e?e:void 0},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]},getPluginInfo:function(){return JSON.stringify({lib:s,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()})},getAccountCode:function(){return d.getInstance().getFastDataService().getAccountCode()},getUsername:function(){return this.options["user.name"]},getEmail:function(){return this.options["user.email"]},getNodeHost:function(){return this.options["content.cdnNode"]||this.plugin.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.plugin.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.plugin.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){var e;return this.plugin.offlineStorage&&(e=this.plugin.offlineStorage.getView()),e},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},controlPlayerExists:function(){return this.options["check.playerExists"]},ignorePauseSmallEvents:function(){return this.options["pause.ignoreSmallEvents"]},getAdPlayerVersion:function(){return this._safeGetterAdsAdapter("getPlayerVersion")||""},getAdPosition:function(){var e=l.AdPosition.Preroll;if(this._adsAdapter)try{var t=this._adsAdapter.getPosition();l.AdPosition.Preroll!==t&&l.AdPosition.Midroll!==t&&l.AdPosition.Postroll!==t||(e=t)}catch(e){r.warn(h,"An error occured while calling getAdPosition",e)}return!e&&this._adapter&&(e=this._adapter.flags.isJoined?l.AdPosition.Midroll:l.AdPosition.Preroll),e},getAdNumber:function(){return this.requestBuilder.lastSent.adNumber||0},getAdNumberInBreak:function(){return this.requestBuilder.lastSent.adNumberInBreak||0},getBreakNumber:function(){return this.requestBuilder.lastSent.breakNumber||0},getAdPlayhead:function(){var e=this._safeGetterAdsAdapter("getPlayhead");return n.parseNumber(e,0)},getAdDuration:function(){var e=this._safeGetterAdsAdapter("getDuration","ad.duration");return n.parseNumber(e,0)},getAdBitrate:function(){var e=this._safeGetterAdsAdapter("getBitrate");return e&&-1!==e||(e=this.getWebkitAdBitrate()),n.parseNumber(e,-1)},getWebkitAdBitrate:function(){try{if(this._adsAdapter&&this._adsAdapter.tag&&this._adsAdapter.tag.webkitVideoDecodedByteCount){var e=this._adsAdapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var t=this._adsAdapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;e=Math.round(t/this.plugin.fastDataTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adsAdapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}}catch(e){}return-1},getAdTitle:function(){return this._safeGetterAdsAdapter("getTitle","ad.title")},getAdResource:function(){return this._safeGetterAdsAdapter("getResource","ad.resource")},getAdCampaign:function(){return this._safeGetterAdsAdapter("getCampaign","ad.campaign")},getAdCreativeId:function(){return this._safeGetterAdsAdapter("getCreativeId","ad.creativeId")},getAdProvider:function(){return this._safeGetterAdsAdapter("getProvider","ad.provider")},getAdAdapterVersion:function(){return this._safeGetterAdsAdapter("getVersion")},getAdMetadata:function(){return this.options["ad.metadata"]},getAdInsertionType:function(){return this._safeGetterAdsAdapter("getAdInsertionType")},getGivenBreaks:function(){return this._safeGetterAdsAdapter("getGivenBreaks","ad.givenBreaks")},getExpectedBreaks:function(){var e,t=this.options["ad.expectedBreaks"],i=this.options["ad.expectedPattern"];if(t)e=t;else if(i)e=0,e=i.pre?i.pre.length:0,e+=i.mid?i.mid.length:0,e+=i.post?i.post.length:0;else if(this._adsAdapter)try{e=this._adsAdapter.getExpectedBreaks()}catch(e){r.warn(h,"An error occured while calling expectedBreaks",e)}return e},getExpectedPattern:function(){return this._safeGetterAdsAdapter("getExpectedPattern","ad.expectedPattern")},getBreaksTime:function(){return this._safeGetterAdsAdapter("getBreaksTime","ad.breaksTime")},getGivenAds:function(){return this._safeGetterAdsAdapter("getGivenAds","ad.givenAds")},getExpectedAds:function(){var e;try{if(this._adsAdapter){var t=this.options["ad.expectedPattern"];if(t&&this.getAdPosition()){var i=[];if(t.pre&&(i=i.concat(t.pre)),t.mid&&(i=i.concat(t.mid)),t.post&&(i=i.concat(t.post)),i.length>0){var n=this.requestBuilder.lastSent.breakNumber;n>i.length&&(n=i.length),e=i[n-1]}}else e=this._adsAdapter.getExpectedAds()}}catch(e){r.warn(h,"An error occured while calling expectedAds",e)}return e},getAdsExpected:function(){var e;try{e=this.getExpectedPattern()||this.getGivenAds()||!1}catch(e){r.warn(h,"An error occured while calling givenAds or expectedPattern",e)}return e},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1},getAdViewedDuration:function(){return this._getTimeMaxOrAcum(!0)},getAdViewability:function(){return this._getTimeMaxOrAcum()},_getTimeMaxOrAcum:function(e){var t=0;return this._adsAdapter&&this._adsAdapter.chronos.viewedMax.forEach((function(i){e?t+=i.getDeltaTime(!1):t=Math.max(i.getDeltaTime(!1),t)})),t},getAudioEnabled:function(){return this._safeGetterAdsAdapter("getAudioEnabled")},getIsSkippable:function(){return this._safeGetterAdsAdapter("getIsSkippable")},getIsFullscreen:function(){return this._safeGetterAdsAdapter("getIsFullscreen")},_safeGetterAdsAdapter:function(e,t){var i;if(t&&this.options[t])i=this.options[t];else try{this._adsAdapter&&"function"==typeof this._adsAdapter[e]&&(i=this._adsAdapter[e]())}catch(t){r.warn(h,"An error occured while calling "+e,t)}return i},getNewAdNumber:function(){var e=this.requestBuilder.lastSent.adNumber;return e&&this.requestBuilder.lastSent.position===this.getAdPosition()?e+=1:e=1,this.requestBuilder.lastSent.adNumber=e,e},getNewAdNumberInBreak:function(){return this._adNumberInBreak++,this.requestBuilder.lastSent.adNumberInBreak=this._adNumberInBreak,this._adNumberInBreak},getNewBreakNumber:function(){var e=1;return this._adNumberInBreak=0,this.requestBuilder.lastSent.breakNumber&&(e=this.requestBuilder.lastSent.breakNumber+1),e&&this.requestBuilder.lastSent.position!==this.getAdPosition()&&(e=1),this.requestBuilder.lastSent.breakNumber=e,e},getAccurateGeoLocation:function(){return this.lastKnownLocation}};e.exports=c},5031:(e,t,i)=>{var{default:n}=i(7276),r=i(3782),{default:s}=i(6933),{default:a}=i(9065),{default:o}=i(3555),{AnalyticsTag:l,Method:d}=i(2784);i(1577);var{default:h}=i(61),u={_startPings:function(){if(!this.sendingPings){var e=this.plugin.isMethodPostEnabled()?d.POST:d.GET,t=1e3*a.getInstance().getFastDataService().getPingTime();a.getInstance().pushPeriodicDataFromCallback(this.plugin.options.offline?h.Consumer.PERSISTENT:h.Consumer.NQS,this.getVideoKey(),r.Service.PING,t,e,this._sendPing.bind(this),this._onPingSuccess.bind(this)),this.sendingPings=!0}},_onPingSuccess:function(){s.getInstance().addNQSRequest(r.Service.PING),this.lastEventTime=(new Date).getTime()},_stopPings:function(){a.getInstance().unregisterPeriodicPush(this.getVideoKey()),this.sendingPings=!1},_sendPing:function(){if(this.plugin.analyticsRequestHandler.shouldSendStats()){var e=(new Date).getTime(),t=this.timeSinceLastPing?e-this.timeSinceLastPing:5e3;this.timeSinceLastPing=e;var i={diffTime:t,entities:this.requestBuilder.getChangedEntities([this,this.plugin])};if(this._adapter&&(i=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(i,["pauseDuration"],!1,[this,this.plugin],this.options):this.requestBuilder.fetchParams(i,["bitrate","throughput","fps"],!1,[this,this.plugin],this.options),this._adapter.flags.isJoined&&(i=this.requestBuilder.fetchParams(i,["playhead"],!1,[this,this.plugin],this.options)),this._adapter.flags.isBuffering&&(i=this.requestBuilder.fetchParams(i,["bufferDuration"],!1,[this,this.plugin],this.options)),this._adapter.flags.isSeeking&&(i=this.requestBuilder.fetchParams(i,["seekDuration"],!1,[this,this.plugin],this.options))),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(i=this.requestBuilder.fetchParams(i,["adPlayhead","adViewedDuration","adViewability"],!1,[this,this.plugin],this.options),i=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(i,["adPauseDuration"],!1,[this,this.plugin],this.options):this.requestBuilder.fetchParams(i,["adBitrate"],!1,[this,this.plugin],this.options)),this._adsAdapter.flags.isBuffering&&(i=this.requestBuilder.fetchParams(i,["adBufferDuration"],!1,[this,this.plugin],this.options))),i=this.requestBuilder.buildParams(i,r.Service.PING,[this,this.plugin],this.options),this.controlPlayerExists()&&this._adapter&&!this._adapter.checkExistsPlayer())return n.debug(l,"Detected player no exists, and fire stop event"),void this._adapter.fireStop();s.getInstance().setTriedSendingNQSStats(!0);var a=this.plugin.isMethodPostEnabled()?d.POST:d.GET,h=new o(r.Service.PING,i,this.getVideoKey(),a),u=h.getVideoKey(),c=h.getService(),p=this.plugin.analyticsRequestHandler.onWillSendVideoRequestListeners;for(var g of p)g(c,u,i);return this.plugin.analyticsRequestHandler.prepareParams(h),n.verbose(l,r.Service.PING),this.startDelayed&&this._retryStart(),h.getParams()}}};e.exports=u},5651:(e,t,i)=>{var n=i(1593),{default:r}=i(7276),{AnalyticsTag:s}=i(2784),a=n.extend({constructor:function(e){this.plugin=e,this.videos={}},existsVideo:function(e){return e=e||"default",!!this.videos[e]},getVideo:function(e){if(e=e||"default",this.videos[e])return this.videos[e]},setVideo:function(e){this.videos[this._parseVideoKey(e.getVideoKey())]=e},getVideoKeys:function(){return Object.keys(this.videos)},existsAdapter:function(e){return e=e||"default",!(!this.videos[e]||!this.videos[e]._adapter)},getAdapter:function(e){if(e=e||"default",this.videos[e])return this.videos[e].getAdapter()},setAdapter:function(e,t){t=t||"default",this.videos[t]&&this.videos[t].setAdapter(e,this.plugin)},getAdsAdapter:function(e){if(e=e||"default",this.videos[e])return this.videos[e].getAdsAdapter()},removeAdapter:function(e,t){t=t||"default";try{this.videos[t]&&this.videos[t].removeAdapter()}catch(e){r.error(s,"Is not possible to remove adapter for video: "+t)}},removeAllAdapters:function(){for(var e of Object.keys(this.videos))this.videos[e].removeAdapter(),this.videos[e].removeAdsAdapter()},sendRequest:function(e,t,i,n,a,o,l,d){e=e||"default",this.videos[e]?this.videos._send(this._key,t,i,n,a,o,l,d):r.error(s,"Can't send request for not existent video object")},updateAllOptions:function(e){for(var t in this.videos)for(var i in e)this.videos[t].options[i]=e[i];e["adapters.templates"]&&(this.plugin._setAdapterTemplates(e["adapters.templates"]),this.updateAdapterTemplates(e["adapters.templates"]))},updatePingInterval:function(e){for(var t in this.videos)this.videos[t]._ping.interval=e},updateAdapterTemplates:function(e){if(e&&this.videos)for(var t in this.videos)this.videos[t]._adapter&&this.videos[t]._adapter.updateAdapterTemplates(e)},resetVideo:function(e){e=e||"default",this.video[e]&&this.video[e]._reset()},_parseVideoKey:function(e){return e||"default"}});e.exports=a}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{i.d(n,{default:()=>Ki});var e={};i.r(e),i.d(e,{VERSION:()=>Rt,addSidxSegmentsToPlaylist:()=>Ke,generateSidxKey:()=>Ze,inheritAttributes:()=>Pt,parse:()=>Ct,parseUTCTiming:()=>Nt,stringToMpdXml:()=>It,toM3u8:()=>lt,toPlaylists:()=>mt});var t=i(9065),r=i(7276),s=i(2784),a=i(5438),o=d;function l(){var e=["random","bufferToString","indexOf","delay","split","keys","pathname","filter","includes","findPathMach","115306HNlJjE","list","isMedia","min","test","length","isHeaderMatch","forEach","isSubtitles","pattern","origin","slice","768430XvMZBb","getRouteAndFilename","4qKeVbX","host","http://","sliceByFirstSpecial","418064ecIeKg","string","1050144mKWCyA","381417ZTBvjw","returnRandom","endsWith","apply","isManifest","regex","substr","round","7aEtCeW","url","getPath","lastIndexOf","2304846iBQiqN","isAudio","type","171133hcBTfj","push","toString","fromCharCode"];return(l=function(){return e})()}function d(e,t){var i=l();return(d=function(e,t){return i[e-=476]})(e,t)}!function(e){for(var t=d,i=e();;)try{if(123527==-parseInt(t(498))/1+-parseInt(t(512))/2+parseInt(t(483))/3*(parseInt(t(476))/4)+-parseInt(t(524))/5+parseInt(t(482))/6+parseInt(t(491))/7*(-parseInt(t(480))/8)+parseInt(t(495))/9)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(l);class h{static[o(525)](e){var t=o,i=new URL(e),n=i[t(522)]+i[t(508)],r=n[t(494)]("/")+1;return{route:n[t(523)](0,r),fileName:n[t(523)](r)}}static[o(493)](e){return{path:new URL(e).pathname}}static[o(505)](e){return new Promise((t=>setTimeout(t,e)))}static[o(511)](e,t,i){var n=o,r=i[n(492)];e=e[n(506)]("?")[0];var s=new URL(e),a=new URL(t);s[n(477)]!=a.host&&(s[n(477)]=a[n(477)],e=s[n(500)]());var l=t;if(null!=t&&""!=t)for(;!e[n(510)](l)&&l.includes("/");){l[n(485)]("/")&&(l=l[n(489)](0,l[n(517)]-1));var d=l[n(489)](l[n(494)]("/"),l.length);if((r[n(485)](d)||r[n(485)](d+"/"))&&(r.endsWith("/")&&(r=r[n(489)](0,r.length-1)),r=r[n(489)](0,r[n(494)]("/")+1)),"https://"==(l=l[n(489)](0,l[n(494)]("/")+1))||l==n(478))return""}return e.replace(l,r)}static sliceByFirstSpecial(e,t){void 0===t&&(t=!1);var i=o,n=[e.indexOf("?")];return t&&n[i(499)](e[i(504)](";")),n=n[i(509)]((e=>-1!=e)),e[i(523)](0,Math[i(515)](...n))}static[o(514)](e){var t=o,i=!1;return a.Y4[t(519)]((n=>{i=i||e[t(485)](n)})),i}static[o(487)](e,t){void 0===t&&(t=!1);var i=o,n=!1,r=t?h[i(479)](e,t):e;return a.w2[i(519)]((e=>{n=n||r[i(485)](e)})),n}static[o(496)](e){var t=!1;return a.hj.forEach((i=>{t=t||e[d(485)](i)})),t}static[o(520)](e){var t=o,i=!1;return a.zU[t(519)]((n=>{i=i||e[t(485)](n)})),i}static[o(503)](e){var t=o;return String.fromCharCode[t(486)](null,new Uint8Array(e))}static[o(484)](e){var t=o,i="",n=e.length-1;return n>0&&(i=e[Math[t(490)](Math[t(502)]()*n)]),i}static formatParameters(e){return"?"+Object[o(507)](e).map((function(t){return""===e[t]?"":t+"="+encodeURIComponent(e[t])})).join("&")}static ifByteArrayToString(e){var t=o;if(typeof e!=t(481)){for(var i=new Uint8Array(e),n="",r=0;r<i[t(517)];r++)n+=String[t(501)](i[r]);return n}return e}static isValidUrl(e){try{return new URL(e),!0}catch(e){return!1}}static[o(518)](e,t){var i=o,n=!1;return t[i(497)]===i(513)?n=t[i(521)].map((e=>e)).includes(e):t[i(497)]===i(488)&&(n=new RegExp(t[i(521)])[i(516)](e)),n}}var u=p;function c(){var e=["send","6621234ZeucDQ","addRequestInterceptor","unload","status",".m3u8","responseType","readyState","isNaN","27sgMQLt","headers","12260976KHEHtZ","_totalDownloadedBytes","removeRequestInterceptor","692qdFhjk","responseURL","setRequestHeader","_interceptor","endsWith","string","Theoplayer interceptor - Intercepting request to -> ","verbose","byteLength","network","length","33895gksPxF","manifest","4724169OosVmB","pathname","_totalDownloadTime","response","type","2hOgpWb","now","respondWith","url","5341990ZPgEqV","_cdnBalancer","7ZMNbiI","setEstimator","arraybuffer","statusText",".mpd","_player","body","848570XKKsGX","27525135peweXT","onreadystatechange"];return(c=function(){return e})()}function p(e,t){var i=c();return(p=function(e,t){return i[e-=498]})(e,t)}!function(e){for(var t=p,i=e();;)try{if(937905==-parseInt(t(506))/1*(parseInt(t(541))/2)+-parseInt(t(536))/3+parseInt(t(523))/4*(-parseInt(t(534))/5)+parseInt(t(510))/6*(-parseInt(t(499))/7)+parseInt(t(520))/8+parseInt(t(518))/9*(parseInt(t(545))/10)+parseInt(t(507))/11)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(c);class g{constructor(e,t){var i=p;this[i(521)]=0,this._totalDownloadTime=0,this[i(504)]=e,this[i(498)]=t}load(){var e=p;this[e(504)]&&this._cdnBalancer&&(this[e(521)]=0,this[e(538)]=0,this[e(498)].useTheoplayer(),this[e(511)]())}[u(512)](){var e=u;this[e(504)][e(532)][e(522)](this[e(526)])}[u(511)](){var e=u;this._interceptor=e=>{e.waitUntil((t=>{var i=p,n=new XMLHttpRequest,a=0,o=0,l=0;for(var d in"stream"===e[i(515)]?n[i(515)]=i(501):n[i(515)]=e[i(515)],n[i(508)]=d=>{var u=i;if(1===n[u(516)]&&e[u(540)]!==u(535)&&(a=Date[u(542)]()),2===n.readyState&&"manifest"!==e.type&&(o=Date[u(542)](),l=o-a),4===n[u(516)]){var c={status:n[u(513)],statusText:n[u(502)],body:void 0};if(n[u(513)]>=200&&n[u(513)]<400){var p=new URL(e[u(544)])[u(537)];if(p[u(527)](u(514))||p.endsWith(u(503))?c[u(505)]=h.ifByteArrayToString(n[u(539)]):c[u(505)]=n[u(539)],e.type!==u(535)&&l>0){var g=Date[u(542)]()-o;this[u(538)]+=g,this[u(521)]+=n[u(539)][u(531)];var f=this[u(521)]/(this._totalDownloadTime/1e3);Number[u(517)](f)&&(f=(typeof n[u(539)]===u(528)?n[u(539)][u(533)]:n[u(539)][u(531)])/(l/1e3)),this[u(504)].network[u(500)]({bandwidth:8*f,roundTripTime:l/1e3,createMeasurer:()=>{}})}e.respondWith(c)}else e[u(543)](c);r.default[u(530)](s.BalancerTag,"Theoplayer interceptor - Completed request for -> "+n[u(524)]),t()}},r.default[i(530)](s.BalancerTag,i(529)+e.url),n.open(e.method,e.url),e[i(519)])n[i(525)](d,e[i(519)][d]);n[i(509)](e[i(505)])}))},this[e(504)][e(532)].addRequestInterceptor(this._interceptor)}}function f(e,t){var i=m();return(f=function(e,t){return i[e-=382]})(e,t)}function m(){var e=["389490ystScu","165781sCdxnI","load","696423eIHSna","518004cxMjOK","7476dJUsyH","toLowerCase","354054QkaWyI","_cdnBalancer","4115672SotrWu","unload","1knRKTr","loadedInterceptors","push"];return(m=function(){return e})()}!function(e){for(var t=f,i=e();;)try{if(138409==parseInt(t(391))/1*(-parseInt(t(384))/2)+-parseInt(t(383))/3+parseInt(t(385))/4+parseInt(t(394))/5+parseInt(t(387))/6+-parseInt(t(395))/7+parseInt(t(389))/8)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(m);class v{constructor(e){var t=f;this[t(392)]=[],this[t(388)]=e}loadInterceptor(e,t){var i,n=f;"theoplayer"===e[n(386)]()&&(i=new g(t,this[n(388)])),i&&(i[n(382)](),this[n(392)][n(393)](i))}removeInterceptors(){var e=f;for(var t of this[e(392)])null==t||t[e(390)]()}}function y(e,t){var i=b();return(y=function(e,t){return i[e-=397]})(e,t)}function b(){var e=["2750251XZbLrj","1245097SToqXx","balanceManifests","isLive","3701004vrVJGh","timeBetweenHeads","8671505mRsEcw","dynamicRules","reportTime","balanceAudio","isDev","2872198uaxilF","noProbing","resource","6NkMYia","jwtAuthType","profileName","bucketName","16aZREhP","domainWhitelistRegex","probeOnlyOnBanned","balanceSubtitles","7684128ClDgBZ","updateTime","videoId","jwtToken","debug","forceDecisionCall","allowSpecialDelimitersInUrl","signManifestUsingApi","363882GLZrfL","domainWhitelist"];return(b=function(){return e})()}!function(e){for(var t=y,i=e();;)try{if(871371==-parseInt(t(422))/1+parseInt(t(400))/2+parseInt(t(419))/3+parseInt(t(425))/4+parseInt(t(427))/5+-parseInt(t(403))/6*(parseInt(t(421))/7)+parseInt(t(407))/8*(-parseInt(t(411))/9))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(b);class S{constructor(e){var t,i,n,r,s,a,o,l,d,h,u,c,p,g=y;this[g(424)]=!1,this.updateTime=0,this[g(397)]=5,this[g(416)]=!1,this[g(420)]=[],this[g(408)]=[],this.probeOnlyOnBanned=!1,this.noProbing=!1,this[g(417)]=!1,this.signManifestUsingApi=!1,this[g(423)]=!1,this[g(398)]=!0,this.balanceSubtitles=!0,this[g(428)]={},this.profileName=null==e?void 0:e[g(405)],this[g(406)]=null==e?void 0:e[g(406)],this[g(424)]=(null==e?void 0:e[g(424)])||!1,this[g(413)]=null==e?void 0:e[g(413)],this[g(402)]=null==e?void 0:e[g(402)],this[g(412)]=null!==(t=null==e?void 0:e[g(412)])&&void 0!==t?t:0,this.reportTime=null!==(i=null==e?void 0:e[g(397)])&&void 0!==i?i:0,this[g(415)]=null==e?void 0:e.debug,this[g(399)]=null==e?void 0:e[g(399)],this[g(426)]=null==e?void 0:e.timeBetweenHeads,this.domainWhitelist=null!==(n=null==e?void 0:e[g(420)])&&void 0!==n?n:[],this[g(408)]=null!==(r=null==e?void 0:e[g(408)])&&void 0!==r?r:[],this.probeOnlyOnBanned=null!==(s=null==e?void 0:e[g(409)])&&void 0!==s&&s,this[g(401)]=null!==(a=null==e?void 0:e.noProbing)&&void 0!==a&&a,this[g(417)]=null!==(o=null==e?void 0:e[g(417)])&&void 0!==o&&o,this[g(418)]=null!==(l=null==e?void 0:e[g(418)])&&void 0!==l&&l,this[g(423)]=null!==(d=null==e?void 0:e[g(423)])&&void 0!==d&&d,this[g(398)]=null===(h=null==e?void 0:e[g(398)])||void 0===h||h,this.balanceSubtitles=null===(u=null==e?void 0:e[g(410)])||void 0===u||u,this.dynamicRules=null!==(c=null==e?void 0:e.dynamicRules)&&void 0!==c?c:{},this[g(414)]=null==e?void 0:e[g(414)],this.jwtAuthType=null!==(p=null==e?void 0:e[g(404)])&&void 0!==p?p:"Bearer"}}function E(){var e=["421708hBfzAw","push","indexOf","328358HLwZpX","emit","457596guWDhJ","1526QRsMlt","_listeners","forEach","off","36HyYyvT","data","1880680upGTLf","1995300EzNrau","splice","1961176cHXJNV","6NMxrTz","9336JoSQIq"];return(E=function(){return e})()}function T(e,t){var i=E();return(T=function(e,t){return i[e-=345]})(e,t)}var w=T;!function(e){for(var t=T,i=e();;)try{if(265652==parseInt(t(348))/1+parseInt(t(346))/2+parseInt(t(359))/3*(parseInt(t(361))/4)+-parseInt(t(356))/5+-parseInt(t(360))/6*(-parseInt(t(349))/7)+parseInt(t(358))/8+parseInt(t(353))/9*(-parseInt(t(355))/10))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(E);class _{constructor(){this[T(350)]={}}on(e,t){var i=T;return!this[i(350)][e]&&(this._listeners[e]=[]),this._listeners[e][i(362)](t),this}[w(352)](e,t){var i=w;if(this._listeners[e])if(t){var n=this._listeners[e][i(345)](t);-1!==n&&this[i(350)][e][i(357)](n,1)}else this._listeners[e]=[];return this}[w(347)](e,t,i){void 0===t&&(t={});var n=w;return[e,"*"][n(351)]((r=>{var s=n;this[s(350)][r]&&this[s(350)][r].forEach((n=>{var r=i||s(354);n({type:e,[r]:t})}))})),this}}var A=i(1048).hp,P=I;function I(e,t){var i=N();return(I=function(e,t){return i[e-=343]})(e,t)}!function(e){for(var t=I,i=e();;)try{if(850564==parseInt(t(349))/1*(parseInt(t(373))/2)+parseInt(t(416))/3+parseInt(t(361))/4*(-parseInt(t(403))/5)+-parseInt(t(460))/6*(-parseInt(t(440))/7)+-parseInt(t(393))/8*(parseInt(t(375))/9)+parseInt(t(464))/10+-parseInt(t(461))/11*(parseInt(t(384))/12))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(N);var R=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){var a=I;function o(e){var t=I;try{d(n[t(483)](e))}catch(e){s(e)}}function l(e){try{d(n.throw(e))}catch(e){s(e)}}function d(e){var t,n=I;e.done?r(e[n(477)]):(t=e.value,t instanceof i?t:new i((function(e){e(t)})))[n(450)](o,l)}d((n=n[a(493)](e,t||[]))[a(483)]())}))};class C extends _{getIceAnswer(){return this[P(441)]}[P(465)](){return this[P(437)]}[P(353)](){return this[P(415)]}[P(412)](){return this._totalSendSegments}getDownloadedBytes(){return this[P(462)]}[P(343)](){return this[P(406)]}[P(426)](){var e=P;return 0==this[e(360)]?0:this[e(462)]*(this._totalDownloadTime/1e3)}[P(427)](){return this[P(434)]}[P(362)](){return this[P(424)]}getLastBandwith(){return this[P(367)]}[P(489)](){var e,t=P;if(null!=this[t(378)])return this._ip;var i=null===(e=this[t(441)])||void 0===e?void 0:e[t(451)];if(null!=i)try{var n=i.split("c=IN IP4")[1],r=(n=n[t(428)]())[t(414)](" ")[0];r=(r=n.split("a=")[0])[t(428)](),this[t(378)]=r}catch(t){}}getLastResponses(){return this[P(497)]}constructor(e,t,i){var n=P;super(),this[n(459)]=[],this[n(345)]=new Map,this[n(497)]=[],this[n(458)]=[],this[n(499)]=new TextDecoder,this[n(469)]=Math.round(65536*Math[n(463)]())-32768,this[n(409)]=[],this._totalDownloaded=0,this._totalDownloadedBytes=0,this._totalDownloadTime=0,this[n(396)]=0,this[n(453)]=0,this[n(482)]=!1,this[n(399)]=0,this[n(437)]=0,this[n(415)]=0,this._totalSendSegments=0,this[n(434)]=0,this[n(424)]=0,this[n(367)]=0,this[n(378)]=void 0,this[n(356)]=0,this[n(344)]=0,this[n(404)]=!1,this[n(432)]=!1,this.isAhead=!1,this[n(500)]=!1,this[n(350)]=0,this[n(475)]=0,this.totalErrors=0,this[n(357)]=new Map,this.testLatencyDone=!1,this[n(495)]=!1,this[n(449)]=0,this[n(351)]=0,this._answer=i,this.id=t.id,this._peer=t,this[n(473)]=e,t.on(a.Lg.connect,this[n(455)][n(421)](this)),t.on(a.Lg[n(364)],this[n(401)][n(421)](this)),t.on(a.Lg[n(454)],this[n(369)].bind(this)),t.on(a.Lg[n(435)],this[n(504)][n(421)](this))}[P(467)](){return this[P(399)]}[P(452)](){var e=P;return this[e(345)][e(478)]>0}[P(480)](){return this[P(356)]}[P(501)](){return this._lastSegmendDataMessagesTime}[P(382)](){var e=P;this[e(446)][e(382)](),this._onClose(),this[e(404)]=!0}[P(455)](){var e=P;r.default[e(490)](s.BalancerTag,e(390)+this.id),this._destroyed||(r.default[e(376)](s.BalancerTag,e(447)+this.id),this[e(473)].peerConnect(this))}[P(369)](e){var t,i,n=P;r.default.debug(s.BalancerTag,n(392)+this.id+" "+(null===(t=null==e?void 0:e[n(454)])||void 0===t?void 0:t[n(498)])),"sctp-failure"===(null===(i=null==e?void 0:e[n(454)])||void 0===i?void 0:i[n(498)])&&this[n(401)](),this[n(396)]=0,this[n(496)]++}[P(401)](){var e=P;this[e(446)][e(382)](),this[e(345)][e(347)](),this[e(386)](e(472),0),this[e(473)].peerCloseListener(this)}_endDownload(e,t){var i=P;e===i(385)&&(r.default[i(376)](s.BalancerTag,i(410)),this[i(396)]=0);var n=this[i(345)][i(388)](t);n&&r.default[i(376)](s.BalancerTag,i(439)+n.id),this[i(345)].delete(t)}[P(504)](e){var t=P;if(!this[t(404)]){var i=e[t(481)](0,4),n=e.slice(4,e[t(355)]),o=i[0],l=this[t(365)](e[t(481)](1,3)),d=i[3];if(this._version<d&&(this._version=d),o==a.b3[t(395)]){var h=JSON[t(422)](this[t(499)][t(358)](n));if(h[a.CE[t(394)]])switch(h[a.CE.command]){case a.mH[t(371)]:this[t(473)][t(433)](this,h[a.CE.id],h[a.CE[t(484)]]);break;case a.mH.map:this[t(459)]=h[a.CE[t(381)]],this[t(356)]++,this[t(344)]=Date.now();break;case a.mH[t(479)]:var u=h[a.CE.id],c=(h[a.CE[t(478)]],h[a.CE.storageSize]);this._lastLatencyP2P=Date.now()-h[a.CE[t(374)]],this[t(424)]=Date[t(391)]()-h[a.CE.createdAt],this[t(473)][t(486)](this[t(434)]);var p=0,g=this[t(473)][t(488)]()[t(468)](u);g&&(p=g.startTime-h[a.CE[t(380)]]),p>=0?(this.isAhead=!0,this[t(500)]=!1):(this[t(429)]=!1,this[t(500)]=!0),this[t(459)].unshift(u),this[t(459)].length>c&&this[t(459)][t(400)]();break;case a.mH[t(387)]:var f=h[a.CE[t(484)]],m=h[a.CE[t(438)]];this[t(363)](f,m);break;case a.mH[t(363)]:var v=Date[t(391)]()-h[a.CE.time];this[t(473)][t(486)](v);break;case a.mH[t(503)]:this[t(357)].set(h[a.CE.identifier],h[a.CE[t(484)]]);break;case a.mH.absent:var y=h[a.CE[t(484)]]||0,b=this[t(345)][t(388)](y);b&&b.id===h[a.CE.id]&&(this._loader[t(346)](this,b.id),this._endDownload(t(385),l));break;case a.mH[t(435)]:var S=this[t(345)][t(388)](h[a.CE.identifier]);if(S&&(S[t(478)]=h[a.CE.size],0==S[t(487)]&&(S.startTime=Date[t(391)]()),this[t(406)]>=3&&this.getDownloadBandwidth()>0)){var E=1e3*S[t(478)]/this[t(426)]();E>1.15*a.LI[t(366)]&&r.default[t(490)](s.BalancerTag,"This peer may timeout in "+E+"ms")}}}else if(o==a.b3[t(435)]){var T=this[t(345)].get(l);if(T&&T.id){0==T[t(487)]&&(T.startTime=Date[t(391)]()),T[t(435)][t(442)](n);var w=0;T.data.forEach((e=>{w+=e[t(355)]}));var _=Date[t(391)]()-(T[t(487)]||Date[t(391)]());if(w>T.size&&r.default[t(376)](s.BalancerTag,"SOMETHING IS WRONG, Total p2p file size is bigger than expected size. "+w+" "+T.size),w==T[t(478)]){var A=0,I=new Uint8Array(w);for(var R of T[t(435)])I[t(425)](new Uint8Array(R),A),A+=R[t(355)];this[t(462)]=this[t(462)]+I[t(355)],this[t(406)]++,this._totalDownloadTime=this[t(360)]+_;var C={time:Date[t(391)](),size:I.byteLength};this[t(497)][t(442)](C),this[t(473)].addPeerResponse(C);var N=(Date.now()-T[t(487)])/1e3,D=T[t(478)]/N;this[t(367)]=D,this[t(409)][t(442)](T.id),this[t(473)][t(471)](this,T.id,_,I[t(436)]),r.default[t(376)](s.BalancerTag,"p2p not wrong -> "+T.id+t(377)+T.size),this[t(386)]("Download ended "+T.id+" "+T.size+t(397)+w,l)}else{var L=0,O=new Uint8Array(w);for(var k of T[t(435)])O[t(425)](new Uint8Array(k),L),L+=k[t(355)];0!=T[t(478)]&&this._loader[t(466)](this,T.id,_,O,T.size)}}else r.default.debug(s.BalancerTag,"P2P: "+this.id+t(443))}}}[P(371)](e){var t=P;if(!this[t(404)]){this._version>=2&&(this[t(475)]++,0==this[t(475)]&&this[t(475)]++);var i=this._operationId;r.default[t(376)](s.BalancerTag,t(407)+i),this[t(502)](e,i),this[t(470)]({[a.CE.command]:a.mH[t(371)],[a.CE.id]:e,[a.CE[t(484)]]:i},a.b3[t(395)])}}ping(e){var t=P;r.default[t(376)](s.BalancerTag,t(402)+this.id),this[t(470)]({[a.CE[t(394)]]:a.mH[t(387)],[a.CE[t(438)]]:Date[t(391)](),[a.CE.id]:e,[a.CE[t(484)]]:this.id},a.b3[t(395)])}[P(363)](e,t){var i=P;r.default[i(376)](s.BalancerTag,"P2P Pong to "+this.id),this[i(470)]({[a.CE[i(394)]]:a.mH[i(363)],[a.CE.time]:t,[a.CE.id]:e,[a.CE[i(484)]]:this.id},a.b3.message)}_cancelRequest(e,t){var i=P;this[i(470)]({[a.CE[i(394)]]:a.mH[i(503)],[a.CE.id]:e,[a.CE.identifier]:t},a.b3[i(395)])}[P(474)](e){return R(this,void 0,void 0,(function*(){var t=I;this[t(404)]||this[t(470)]({[a.CE[t(394)]]:a.mH.map,[a.CE[t(381)]]:e},a.b3[t(395)])}))}sendSegment(e,t,i){var n;return R(this,void 0,void 0,(function*(){var o=I;if(!this[o(404)]){if(t.data&&this[o(357)]&&null==this._cancel[o(388)](i)){this[o(470)]({[a.CE[o(394)]]:a.mH[o(435)],[a.CE.id]:e,[a.CE[o(478)]]:t[o(445)],[a.CE.identifier]:i,[a.CE[o(348)]]:Math[o(418)](t.data[o(355)]/a.LI[o(491)])+1},a.b3[o(395)]);var l=t[o(445)],d=0,h=this.getByteArrayFromIdentifier(i),u=A[o(431)]([a.b3[o(435)],h[0],h[1],0]),c=l;t[o(359)]++;var p=Date[o(391)]();try{for(;c>0&&!this[o(357)][o(388)](i);){for(var g=Math[o(372)](c,a.LI[o(491)]);t&&t[o(435)]&&t[o(435)][o(355)]&&g+d>t[o(435)][o(355)]&&!this[o(357)][o(388)](i);)yield new Promise((e=>setTimeout(e,2)));this._peer.send(A[o(354)]([u,A[o(431)](t.data,(null===(n=t.data)||void 0===n?void 0:n[o(355)])-c,g)])),d+=g,c-=g}}catch(e){r.default.debug(s.BalancerTag,o(352))}this[o(437)]=this[o(437)]+d,this._totalSendTime=Date.now()-p,this[o(419)]++,t[o(359)]--,this[o(357)][o(388)](i)?this[o(473)].peerCanceledSegmentUpload(t[o(435)].byteLength-c):(this[o(458)].push({time:Date[o(391)](),size:t.data.byteLength}),this[o(473)][o(405)](t[o(435)][o(355)]))}else r.default[o(376)](s.BalancerTag,"P2P Upload canceled.");null!=this._cancel[o(388)](i)&&(r.default[o(376)](s.BalancerTag,o(368)),this._cancel[o(383)](i))}}))}[P(448)](e){var t=[0,0];return t[0]=e>>8&255,t[1]=255&e,t}[P(365)](e){return(255&e[0])<<8|255&e[1]}[P(457)](e,t){var i=P;this[i(470)]({[a.CE.command]:a.mH[i(408)],[a.CE.id]:e,[a.CE[i(484)]]:t},a.b3.message)}[P(420)](e,t,i,n){return R(this,void 0,void 0,(function*(){var r=I;this._destroyed||this[r(470)]({[a.CE.command]:a.mH.newSegmentAvailable,[a.CE.id]:e,[a.CE.size]:t,[a.CE[r(430)]]:i,[a.CE[r(374)]]:Date.now(),[a.CE[r(380)]]:n},a.b3.message)}))}[P(470)](e,t){var i=P;try{this[i(446)].send(A[i(354)]([A[i(431)]([t,0,0,a.jQ[i(444)]]),A[i(431)](JSON[i(413)](e))]))}catch(e){r.default.debug(s.BalancerTag,i(352))}}[P(476)](){return this[P(459)]}_startTimeout(e,t){var i=P;r.default[i(376)](s.BalancerTag,i(411)+t),this[i(345)][i(425)](t,{id:e,data:[],startTime:0,size:0}),setTimeout((()=>{var n,r,s=i,o=this[s(409)][s(494)](e);o<0?(this[s(423)](e,t),r=(null===(n=this._activeDownloads[s(388)](t))||void 0===n?void 0:n.size)||0,this._loader.peerFailedSegmentTimeout(this,e,r),this[s(386)]("Timeout "+e+" "+a.LI[s(366)],t)):this._downloaded[s(389)](o,1)}),a.LI[i(366)])}[P(485)](){var e,t=P;return(null===(e=this[t(497)][0])||void 0===e?void 0:e[t(438)])||0}static[P(370)](e){for(var t=P,i=0,n=Date[t(391)](),r=0;r<e[t(456)];)e[r][t(438)]+a.Ji[t(492)]<n?e.splice(r,1):(i+=e[r][t(478)],++r);return i}[P(379)](){var e=P;return C._getLastSecondsTraffic(this[e(497)])}[P(398)](){return C[P(370)](this._lastSent)}}function N(){var e=[" not an active download id","version","realBodySize","_peer","P2P onConnect to ","getByteArrayFromIdentifier","testLatencyResult","then","sdp","isDownloading","timeouts","error","_onConnect","length","sendNoSegment","_lastSent","_segmentMap","18cACiUk","66913yQMBTp","_totalDownloadedBytes","random","15088310GpDnlo","getTotalSendBytes","peerSegmentProgress","getVersion","getSegment","_identifierShort","_send","peerSegmentLoaded","Close callback","_loader","sendMap","_operationId","getSegmentMap","value","size","newSegmentAvailable","getSegmentDataMessages","slice","downloadingProcessActive","next","identifier","getOldestRequestTS","addPeerLatency","startTime","getStorage","getIp","verbose","maxMessageSize","totalDataInterval","apply","indexOf","testBandwidthDone","totalErrors","_lastResponses","errorDetail","_decoder","isBehind","getLastSegmentDataMessagesTime","_startTimeout","cancel","_onData","getDownloadedChunks","_lastSegmendDataMessagesTime","_activeDownloads","peerFailedSegmentAbsent","clear","splits","5dJYZct","timeGap","testBandwidthResult","Could not send message to peer (maybe it was destroyed)","getTotalSendTime","concat","byteLength","_segmendDataMessages","_cancel","decode","activeP2PSendProcesses","_totalDownloadTime","344qwtkaa","getLastLatencySegment","pong","close","getIdentifierFromByteArray","timeout","_lastBandwith","Canceling operation -> 0 ","_onError","_getLastSecondsTraffic","request","min","51046oSTBmJ","dateTime","27TSoeeZ","debug"," download end ","_ip","getLastDownloadsTraffic","createdAt","map","destroy","delete","2004ISQBpJ","Absent","_endDownload","ping","get","splice","CREATEPEERCONNECTING?","now","P2P onError to ","3979176DfKZjX","command","message","consecutiveHaveSegment"," | ","getLastUploadsTraffic","_version","pop","_onClose","P2P Ping to ","48335ZfAQeq","_destroyed","peerSegmentUpload","_totalDownloaded","OPERATION ID -> ","absent","_downloaded","Probable algorithm failed","PTT-> TIMEOUT CREATION ","getTotalSendSegments","stringify","split","_totalSendTime","3049095GJkHhx","__awaiter","floor","_totalSendSegments","sendNewSegmentAvailable","bind","parse","_cancelRequest","_lastLatencySegment","set","getDownloadBandwidth","getLastLatencyP2P","trim","isAhead","storageSize","from","foreSegmentsInfo","peerSegmentUploadRequest","_lastLatencyP2P","data","buffer","_totalSendBytes","time","Closing p2p download ","3586723ddJEuy","_answer","push"];return(N=function(){return e})()}function D(e,t){var i=k();return(D=function(e,t){return i[e-=177]})(e,t)}var L=D;!function(e){for(var t=D,i=e();;)try{if(136170==-parseInt(t(182))/1+parseInt(t(183))/2*(-parseInt(t(197))/3)+parseInt(t(193))/4*(-parseInt(t(185))/5)+-parseInt(t(181))/6*(-parseInt(t(190))/7)+-parseInt(t(187))/8*(-parseInt(t(179))/9)+-parseInt(t(188))/10*(parseInt(t(195))/11)+parseInt(t(189))/12)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(k);class O{constructor(e){var t=D;this[t(196)]=[],this[t(177)]=e}[L(180)](e){var t=L;for(this[t(196)][t(198)](e);this.array[t(194)]>this[t(177)];)this.removeFirst()}[L(178)](){var e=L;if(!this.isEmpty())return this[e(196)][e(191)]()}[L(184)](){var e=L;if(!this.isEmpty())return this[e(196)][0]}isEmpty(){return 0===this.array.length}[L(199)](){var e=L;return Object[e(192)]([],this[e(196)])}[L(186)](e){var t=L,i=Object.assign([],this[t(196)]);return i[t(194)]<=e?i:i.splice(i[t(194)]-e)}}function k(){var e=["6ayvyMK","139025GPWpMw","2QSFcvz","peek","192475srMCDw","lastn","2600dWfDDJ","2617530GNhEXT","4640220KLnxyo","439369EinCrA","shift","assign","4twibtQ","length","11QKVlRo","array","149502MdZsGk","push","copyArray","size","removeFirst","4869BKPpcS","add"];return(k=function(){return e})()}var B=i(6933),x=U;function M(){var e=["isHeaderMatch","incrementSwitchesDueToErrors","price","getWeightedBandwidth","addResp","switches","highestRenditionBandwidth","isCodavel","lastUpdatedState","url","_incrementCacheCount","samplesResponseTime","regex","time","totalFail","sumResponseBytes","lastMeasurementWeight","forEach","http3xxResponses","lastPingTime","maxThroughput","uncompressedBytes","length","sumVideoBytes","downloadMillisVideo","getAvgLastVideoBandwidth","3590hmyhwA","downloadTimeMs","lastPreferedVideoChunkSize","downloadedSegments","getCdnCacheMisses","updateStatusCodeCounters","getBandwidthInBits","_checked","Downloaded a ","browserCacheHits","name","sumResponseTime","downloadMillis","compressedBytes","entries","2091018DoqXkU","clone","unbannedTime","usedOrProbed","firstHugeChunkSize","keys","initialBw","toLowerCase","lastPreferedVideoChunkDownloadTime","incrementSwitches","original","_parser","failed","banned","Unknown","pattern","updateCdnInfo","_updateCacheCount","48UDIXen","internal_provider","getOldestRequestTS","numberOfCdnCacheMisses","minResponseBytes","provider","STREBOOS","_updateCacheCounts","active","min","375954qgruuu","getAvgResponseTime","1995GKBfNx","maxResponseTime"," at ","avgPingTime","308119SKrWVQ","auth","kb in ","map","dnsEnabled","host","minRequestSizeForBwEstimateKB","http1xxResponses","sumNetworkLatency","3860uiAckt","score","maxNetworkLatency","7515SQTlIY","1017110VmbJVM","numberOfCdnCacheHits","lastn","hugeChunks","downloadedBytesVideo","resetOnPing","sumVideoTime","_accumBw","switchesDueToQuality","path","undefined","updateAvailability","trunc","failures","_lastsPreferedVideoBandwidth","wBandwidth","bandwidthForScoring","includes","switchesDueToConnectivity","MB/s size-> ","wBandwidthForScoring","add","setChecked","absolute","copyArray","minResponseTime","type","unBannedCount","downloadedBytesForScoring","1440354BdfEAH","getAvgWBandwidth","header","MAX_SAFE_INTEGER","switchesDueToErrors","max","isAudio","maxBandwidth","getAvgRecentWBandwidth","STREBOPX","samplesResponseBytes","headers","bannedRefTicToc","push","downloadedChunks","getAvgRecentBandwidth","fromEntries","addProbe","_lastResponses","getVideoBandwidth","incrementSwitchesDueToConnectivity","_processCdnCache","maxResponseBytes","shift","retries","sumThroughput","rendition","minThroughput","isRangeCompatible","toFixed","highestSegmentBandwidth","pushLastPreferedVideoBandwidth","lowestSegmentBandwidth","now","minNetworkLatency","indexOf","calculateEffectiveBandwidth","weight","lastPreferedVideoBandwidth","getLastResponse","usedOnce","list","downloadTimeForScoring","http2xxResponses","http4xxResponses","numberOfCdnCacheUnknowns","http5xxResponses","video","samplesNetworkLatency","bannedTime","cdnName","s from ","CODAVEL","downloadedBytes","bandwidth","samplesThroughput","downloadedChunksVideo"];return(M=function(){return e})()}function U(e,t){var i=M();return(U=function(e,t){return i[e-=269]})(e,t)}!function(e){for(var t=U,i=e();;)try{if(466348==parseInt(t(367))/1+parseInt(t(415))/2+-parseInt(t(369))/3*(parseInt(t(382))/4)+-parseInt(t(386))/5+-parseInt(t(339))/6+-parseInt(t(373))/7*(-parseInt(t(357))/8)+parseInt(t(385))/9*(parseInt(t(324))/10))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(M);class V{constructor(e,t,i,n,r,s,a,o,l,d,h,u,c){var p=U;this.bannedCount=0,this[p(413)]=0,this[p(429)]=0,this.downloadedBytes=0,this[p(414)]=0,this[p(283)]=0,this[p(389)]=0,this[p(343)]=0,this[p(402)]=new O(20),this[p(406)]=new O(20),this[p(399)]=0,this[p(439)]=0,this[p(312)]=0,this[p(333)]=0,this.numberOfCdnCacheHits=0,this[p(360)]=0,this[p(286)]=0,this[p(336)]=0,this.usedOnce=!1,this[p(390)]=0,this.downloadMillisVideo=0,this.downloadedChunksVideo=0,this[p(341)]=0,this.bannedTime=0,this[p(427)]=Date[p(274)](),this[p(306)]=0,this[p(422)]=1e12,this[p(279)]=0,this[p(400)]=[],this[p(304)]=0,this[p(326)]=0,this[p(347)]=0,this[p(317)]=0,this._accumBw=V[p(345)],this.bandwidth=new O(20),this[p(401)]=new O(20),this[p(433)]=[],this[p(271)]=0,this[p(273)]=Number[p(418)],this.highestPingTime=0,this.lowestPingTime=Number.MAX_SAFE_INTEGER,this[p(372)]=0,this[p(269)]=!0,this._checked=!1,this[p(327)]=new Array,this[p(342)]=!1,this[p(362)]=e,this[p(358)]=[p(293),p(363),p(424)].includes(e)?t:e,this[p(334)]=t,this[p(378)]=i,this[p(395)]=n,this.url=r,this.score=s,this.price=o,this.weight=l,this[p(409)]=d,this.dnsEnabled=h,this[p(374)]=u,this[p(349)]=a,this[p(365)]=!0,this[p(352)]=!1,this[p(350)]=c}[x(272)](e){var t=x;this[t(400)][t(428)](e),this[t(400)].length>5&&this._lastsPreferedVideoBandwidth[t(438)]()}[x(323)](){var e=x,t=0,i=0;for(i=0;i<this._lastsPreferedVideoBandwidth[e(320)];i++)t+=this[e(400)][i];return t/i}[x(280)](){var e=x;return 0===this._lastResponses.length?{time:Date.now(),size:0}:this[e(433)][this[e(433)][e(320)]-1]}setLastResponses(e){this._lastResponses=e}addResponse(e){var t=x;this[t(433)][t(428)](e)}[x(368)](){var e=x;return 0==this[e(429)]?0:this[e(336)]/this[e(429)]}getCdnCacheHits(){return this[x(387)]}[x(328)](){return this[x(360)]}[x(436)](e){var t=x;if(this[t(350)]&&e[t(426)]){var i=Object[t(431)](Object[t(338)](e.headers)[t(376)]((e=>{var[t,i]=e;return[t.toLowerCase(),i]}))),{hit:n,miss:r}=this[t(350)].cache;n&&r?this[t(364)](n,r,i):this[t(356)](n||r,i,!!n)}}_updateCacheCounts(e,t,i){var n,r,s=x,a=null!==(n=null==e?void 0:e[s(417)][s(346)]())&&void 0!==n?n:"",o=null!==(r=null==t?void 0:t[s(417)][s(346)]())&&void 0!==r?r:"",l=a in i&&h[s(298)](i[a],e),d=o in i&&h[s(298)](i[o],t);l?this[s(387)]++:d?this[s(360)]++:this.numberOfCdnCacheUnknowns++}_updateCacheCount(e,t,i){var n,r=x,s=null!==(n=null==e?void 0:e[r(417)][r(346)]())&&void 0!==n?n:"";if(s in t){var a=t[s],o=!1;e.type===r(282)?o=e.pattern[r(403)](a):e[r(412)]===r(310)&&(o=new RegExp(e[r(354)]).test(a)),o?this[r(308)](i):this._incrementCacheCount(!i)}else this[r(308)](!i)}[x(308)](e){var t=x;e?this.numberOfCdnCacheHits++:this[t(360)]++}[x(302)](e){var t,i,n=x,o=e.route,l=e[n(295)]||0,d=e.size||0,h=e[n(325)]||0,u=e[n(351)];if(this[n(342)]=!0,this[n(329)](e.statusCode),u)return this[n(439)]++,this.totalFail++,void B.default.getInstance()[n(355)](this[n(334)],this.downloadedChunks,this[n(294)],this.totalFail);this[n(429)]++,this[n(294)]+=d,void 0===this[n(313)]?this.sumResponseBytes=d:this[n(313)]+=d,void 0===this[n(361)]?this[n(361)]=d:this[n(361)]=Math[n(366)](this.minResponseBytes,d),void 0===this.maxResponseBytes?this.maxResponseBytes=d:this.maxResponseBytes=Math[n(420)](this[n(437)],d),typeof this[n(425)]===n(396)?this[n(425)]=1:this[n(425)]+=1,null!=e[n(337)]&&null!=e[n(319)]&&(typeof this[n(337)]===n(396)?this.compressedBytes=e[n(337)]:this[n(337)]+=e.compressedBytes,void 0===this[n(319)]?this[n(319)]=e.uncompressedBytes:this[n(319)]+=e[n(319)]),this._processCdnCache(e),B.default.getInstance().updateCdnInfo(this[n(334)],this[n(429)],this[n(294)],this[n(312)]),null!=e[n(441)]&&e[n(441)].isAudio&&0==this[n(389)]&&(this.usedOnce=!1),(null==e[n(441)]||!e[n(441)][n(421)])&&(this[n(414)]+=d,this[n(283)]+=h,this[n(281)]=!0,this[n(389)]++,0==this.firstHugeChunkSize&&(this[n(343)]=d)),a.Y4[n(315)]((t=>{var i=n;if(o[i(276)](t)>=0){var r=!0;l>0?(d>1e3*a._C[i(379)]&&(r=!1,this._accumBw=this._accumBw!==V[i(345)]?Math[i(398)](this[i(393)]*(1-a.Zq[i(314)])+l*a.Zq[i(314)]):l),this[i(295)][i(407)](l),this.wBandwidth.add({bw:l*d,ct:d}),(null==e[i(441)]||!e[i(441)][i(421)])&&(this[i(402)][i(407)](l),this[i(406)].add({bw:l*d,ct:d}),this[i(322)]+=h,this[i(390)]+=d,this[i(297)]++,typeof this[i(440)]===i(396)?this[i(440)]=l:this[i(440)]+=l,typeof this[i(442)]===i(396)?this[i(442)]=l:this.minThroughput=Math[i(366)](this[i(442)],l),void 0===this[i(318)]?this.maxThroughput=l:this[i(318)]=Math[i(420)](this[i(318)],l),typeof this.samplesThroughput===i(396)?this[i(296)]=1:this[i(296)]+=1,void 0===this[i(321)]?this[i(321)]=d:this.sumVideoBytes+=d,typeof this[i(392)]===i(396)?this.sumVideoTime=h:this[i(392)]+=h)):this[i(333)]++,0==this[i(393)]&&!r&&(this[i(281)]=!1)}})),0==this[n(294)]&&(this[n(281)]=!1),l>this[n(271)]&&(this[n(271)]=l),l<this[n(273)]&&(this[n(273)]=l),this[n(336)]+=h,void 0===this.sumResponseTime?this.sumResponseTime=h:this[n(335)]+=h,typeof this[n(411)]===n(396)?this.minResponseTime=h:this[n(411)]=Math[n(366)](this[n(411)],h),typeof this[n(370)]===n(396)?this.maxResponseTime=h:this.maxResponseTime=Math[n(420)](this[n(370)],h),void 0===this.samplesResponseTime?this[n(309)]=1:this[n(309)]+=1,this[n(433)][n(428)]({time:Date[n(274)](),size:d}),(null==e[n(441)]||!(null===(t=e[n(441)])||void 0===t?void 0:t[n(421)]))&&(this[n(326)]=d,this[n(347)]=h),null!=e.rendition&&this[n(304)]<e[n(441)][n(295)]&&(this.highestRenditionBandwidth=e[n(441)][n(295)]),(null==e[n(441)]||!(null===(i=e[n(441)])||void 0===i?void 0:i[n(421)]))&&(this[n(279)]=e[n(295)],this[n(272)](e.bandwidth));var c=n(353);e[n(441)]&&(c=e[n(441)][n(421)]?"Audio":n(288));var p=0;e[n(441)]&&(p=e[n(441)].targetDuration),r.default.verbose(s.BalancerTag,n(332)+c+" segment of "+p+n(292)+e[n(291)]+n(371)+Number(l/1e6).toFixed(2)+n(405)+Number(d/1024)[n(270)](2)+n(375)+h)}[x(277)](e,t){var i=this[x(347)],n=this.lastPreferedVideoChunkSize,r=this.lastPingTime,s=i-r;if(s<=0&&(r=i,s=i),n<=0)return 0;var a=e/8*t,o=a*s/n+2*r;return 0==o?0:8*a/(o/1e3)}[x(434)](){var e=x;return(this[e(414)]||0)/((this[e(283)]||1)/1e3)*8}getBandwidth(){return this[x(393)]}setBandwidth(e){this._accumBw=e}[x(330)](){return 8*this[x(393)]}getAvgBandwidth(){var e=x,t=0,i=0;for(var n of this.bandwidth[e(410)]())t+=n,i++;return i>0?t/i:0}[x(430)](){var e=x,t=0,i=0;for(var n of this[e(295)][e(388)](4))t+=n,i++;return i>0?t/i:0}[x(416)](){var e=x,t=0,i=0;for(var n of this.wBandwidthForScoring[e(410)]())t+=n.bw,i+=n.ct;return i>0?t/i:0}[x(423)](){var e=x,t=0,i=0;for(var n of this[e(406)][e(388)](4))t+=n.bw,i+=n.ct;return i>0?t/i:0}[x(301)](){var e=x;return.45*this.getAvgWBandwidth()+.55*this[e(423)]()}resetBandwidth(){this[x(393)]=V.initialBw}[x(359)](){var e,t=x;return(null===(e=this[t(433)][0])||void 0===e?void 0:e[t(311)])||0}[x(340)](){var e=x,t=new V(this[e(362)],this[e(334)],this[e(378)],this[e(395)],this[e(307)],this[e(383)],this[e(349)],this[e(300)],this[e(278)],this[e(409)],this[e(377)],this[e(374)],this._parser);return Object[e(344)](this)[e(315)]((e=>{var i=e,n={};n[i]=this[i],Object.assign(t,n)})),t}[x(432)](e){var t=x;typeof this[t(381)]===t(396)?this[t(381)]=e:this[t(381)]+=e,void 0===this[t(275)]?this[t(275)]=e:this[t(275)]=Math[t(366)](this[t(275)],e),void 0===this[t(384)]?this[t(384)]=e:this[t(384)]=Math[t(420)](this[t(384)],e),void 0===this[t(289)]?this[t(289)]=1:this[t(289)]+=1}[x(329)](e){var t=x;null!=e&&(e>=100&&e<=199?this[t(380)]=(this[t(380)]||0)+1:e>=200&&e<=299?this[t(284)]=(this[t(284)]||0)+1:e>=300&&e<=399?this[t(316)]=(this[t(316)]||0)+1:e>=400&&e<=499?this[t(285)]=(this.http4xxResponses||0)+1:e>=500&&e<=599&&(this[t(287)]=(this.http5xxResponses||0)+1))}[x(397)](){var e=x,t=Date[e(274)]();this[e(352)]?(this[e(290)]+=t-this[e(427)],this[e(427)]=t):(this[e(341)]+=t-this[e(427)],this[e(427)]=t)}[x(348)](){var e=x;typeof this[e(303)]===e(396)?this[e(303)]=1:this.switches+=1}incrementSwitchesDueToQuality(){var e=x;typeof this[e(394)]===e(396)?this[e(394)]=1:this[e(394)]+=1}[x(435)](){var e=x;void 0===this[e(404)]?this[e(404)]=1:this[e(404)]+=1}[x(299)](){var e=x;typeof this[e(419)]===e(396)?this[e(419)]=1:this[e(419)]+=1}[x(391)](){var e=x;this[e(313)]=void 0,this.minResponseBytes=void 0,this[e(437)]=void 0,this.samplesResponseBytes=void 0,this[e(335)]=void 0,this.minResponseTime=void 0,this[e(370)]=void 0,this[e(309)]=void 0,this[e(381)]=void 0,this[e(275)]=void 0,this.maxNetworkLatency=void 0,this.samplesNetworkLatency=void 0,this[e(440)]=void 0,this[e(442)]=void 0,this[e(318)]=void 0,this.samplesThroughput=void 0,this[e(321)]=void 0,this[e(392)]=void 0,this[e(341)]=0,this[e(290)]=0,this[e(427)]=Date[e(274)]()}[x(305)](){var e=x;return[e(293),e(363),e(424)][e(403)](this[e(362)])}[x(408)](){this[x(331)]=!0}isChecked(){return this[x(331)]}}function F(e,t){var i=q();return(F=function(e,t){return i[e-=457]})(e,t)}function q(){var e=["getMinPingTime","MAX_SAFE_INTEGER","lastMeasurementWeight","trunc","_minPing","add","getAvgPingTime","72yPmtoY","averagePing","2350116xcBKlX","4904HVnpmz","777761GXkSdk","7745xourAU","min","pingsCounter","max","21iOWgzi","9490200ZsPgmK","3270320fnouve","pingsTime","2855240baUrdi","getSimpleAveragePingTime","_maxPing","3425112ojGCzf","getMaxPingTime"];return(q=function(){return e})()}V[x(345)]=9e12;var H=F;!function(e){for(var t=F,i=e();;)try{if(966497==parseInt(t(458))/1+parseInt(t(470))/2+-parseInt(t(481))/3+parseInt(t(457))/4*(parseInt(t(459))/5)+-parseInt(t(464))/6+parseInt(t(463))/7*(parseInt(t(465))/8)+parseInt(t(479))/9*(-parseInt(t(467))/10))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(q);class G{constructor(){var e=F;this[e(461)]=0,this[e(466)]=0,this[e(480)]=0,this[e(469)]=0,this[e(476)]=Number[e(473)]}[H(477)](e){var t=H;this[t(469)]=Math[t(462)](this._maxPing,e),this._minPing=Math[t(460)](this._minPing,e),this[t(466)]+=e,this.pingsCounter++,this.averagePing=0===this[t(480)]?e:Math[t(475)](this.averagePing*(1-a.Zq[t(474)])+e*a.Zq[t(474)])}[H(478)](){return this[H(480)]}[H(471)](){return this[H(469)]}[H(472)](){return this[H(476)]}[H(468)](){var e=H;return this[e(466)]/this[e(461)]}}var X=j;function j(e,t){var i=W();return(j=function(e,t){return i[e-=419]})(e,t)}function W(){var e=["1421181McKlOv","106FpGBYM","newDownloadedSegment","getPeersWithContent","486pswmiT","lastDownloadedSegment","p2pLoader","_lastPingBroadcast","then","next","28000yNWxDx","done","ping","31999WAcjHH","timeBetweenBurstsMilliseconds","_isMonitoring","throw","1030eHOVPD","bandwidth","pingTime","60EeezWR","length","7311Plxqxi","values","7385OvneCZ","testPeer","209368awqvyq","value","_pingBroadcastTimeInSeconds","__awaiter","1668960cQgMJM","now","getInstance","_instance"];return(W=function(){return e})()}!function(e){for(var t=j,i=e();;)try{if(199046==-parseInt(t(437))/1+-parseInt(t(446))/2*(-parseInt(t(433))/3)+-parseInt(t(431))/4*(-parseInt(t(435))/5)+-parseInt(t(449))/6*(-parseInt(t(421))/7)+-parseInt(t(441))/8+-parseInt(t(445))/9+parseInt(t(428))/10*(parseInt(t(424))/11))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(W);class z{constructor(e){var t=X;this[t(429)]=new Map,this[t(430)]=new Map,this._isMonitoring=!1,this._pingBroadcastTimeInSeconds=60,this[t(452)]=Date[t(442)](),this[t(451)]=e}[X(447)](e){this[X(450)]=e}monitor(){return e=this,i=function*(){var e=j;if(!this._isMonitoring)for(this[e(426)]=!0;;){if(Date.now()-this[e(452)]>1e3*this[e(439)])for(var t of this[e(451)].getPeers()[e(434)]())this.testPeer(t);else{for(;!this[e(450)];)yield new Promise((e=>setTimeout(e,1e3)));var i=this[e(451)][e(448)](this[e(450)]);i[e(432)]>0&&this.testPeer(i[0])}yield new Promise((t=>setTimeout(t,a.wc[e(425)])))}},new((t=void 0)||(t=Promise))((function(n,r){var s=j;function a(e){var t=j;try{l(i[t(420)](e))}catch(e){r(e)}}function o(e){var t=j;try{l(i[t(427)](e))}catch(e){r(e)}}function l(e){var i,r=j;e[r(422)]?n(e.value):(i=e[r(438)],i instanceof t?i:new t((function(e){e(i)})))[r(419)](a,o)}l((i=i.apply(e,[]))[s(420)]())}));var e,t,i}[X(436)](e){var t=X;this[t(451)].isEnabled()&&e[t(423)](e.id)}static[X(443)](e){var t=X;return null!=e&&(this._instance=new z(e)),this[t(444)]}}var K=Y;function Y(e,t){var i=Q();return(Y=function(e,t){return i[e-=203]})(e,t)}function Q(){var e=["createMap","resetOnPing","getMaxPingTime","_errorRequests","_sumNetworkLatency","enabled","disable","updatePeerMetrics","peerFailedSegmentAbsent"," SM Size-> ","getLastLatencyP2P","398825vXBtCy","_peers","p2pId","isAhead","Already have max peers","concat","map","_sumVideoTime","getBannedPeers","P2PManager","_accountCode","getUploadRequestsFailed","startMonitoring","getMaxPeers","_maxConcurrent","verbose","initialBw","getLastBandwith","peerRequestsPerAnnounce","_maxThroughput","peerSegmentLoaded","CREATEPEERCONNECTING","origRes","set","storeSegment","_minPeersAvailable","error","getVersion","warn","getAvgPingTime","getPeersBehind","_cdnPingTimeBean","onConnected","_downloadMillis","setLastResponses","get","getDownloadBandwidth","getTotalSendTime","_byteUploadCount","delete","avgPingTime","WebRtcEvents","7410510mnFQQz","_segmentsRequested","P2P Error: ","_downloadedBytesVideo","_samplesResponseTime","upload","_warningListener","16869cctKeF","isAudio","_minPeersParallelUsed","rendition","P2P dependency does not exist. Disabling P2P!","getMinPingTime","getOldestRequestTS","forEach","size","_activeDownloadIds","_sendMapToAllPeersV0","now","timeouts","sendJoin","setBandwidth","_sendNewSegmentToAllPeersV1","540715TdjiSz","P2P peer already exist. ","data","announcedP2P","_minResponseTime","_minNetworkLatency","consecutiveHaveSegment","_sumResponseTime","_chunkUploadCount","p2p"," available from peer ","_activeDownloads","248584SliZAR","_maxPeersParallelUsed","max","destroy","getLastDownloadsTraffic","_minResponseBytes","splice","_failedRequests","add","getLastSegmentDataMessagesTime","yes","_maxBandwidth","byteLength","trunc"," delay ","_accumBw","peerConnect","_sumThroughput","getSegment","getPeersNothing","indexOf","_offerInterval","P2PSMAP new segment to all peers: ","_availablePeersMap","getSegmentDataMessages","Error","getUploadRequests","Problem max concurrency ","lastMeasurementWeight","getLastUploadsTraffic","_samplesNetworkLatency","getUploadedUniqPeers","_peerDiscoveryTime","https://localhost","peerSegmentUploadRequest","_isEnabled","P2P Requesting segment ","_p2pManager","videoId","_packageFound","pathname","peerCloseListener","isBehind","508oNlqyw","undefined","_sumVideoBytes","_uploadRequests","resetP2PConnection","P2P Requesting new segment ","_maxNetworkLatency","peerFailedSegmentTimeout","P2P Warning ","_downloadMillisVideo"," last msg -> ","_totalPeerSet","peer","P2P MAP send map to peer  ","setSettings","_uplodadedPeers","MAX_SAFE_INTEGER","reduce","_segmentAbsentRequests","noContentObtained"," | ","_peersUsed","_chunkDownloadCount","isDownloading","time","_sumResponseBytes","6167880rSgzqF"," peer-timeouts: ","getId","length","addPeerLatency","isMaxPeers","_activePeerSet","_storage","P2P adding the candidate. ","_destroyed","_cdnObject","getPeers","_chunkUploadDiscardedCount","_updatePeersMetricsRefCounter","getPeersWithContent","getInstance"," peers: ","_maxPeersAvailable","tracker","enable","sendNewSegmentAvailable","P2PRS Requesting segment ","getUploadedChunks","_byteDownloadCount","monitor"," / ","resource","BANNING Peer -> ","_maxResponseTime","_minBandwidth","_errorListener","createdAt","getCdnObject","_options","_uploadRequestsFailed","from","_timeoutRequests","Max peers reached -> ","push","getMaxSize","getSegmentMap","_timeoutDiscardedBytes","isEnabled","s messages: ","165ESdDok","addPeerResponse","_downloadedPeers","_sendMapToPeer","maxConnectedPeers","_maxResponseBytes","onDiscovery","getPeersAhead","P2P","onOffer","_bannedPeers"," size -> ","_minThroughput","setContent","debug","bind","rejoin","endTime","_candidates","_monitoringStarted","_byteUploadDiscardedCount","Warning","start","getMissingPeers","P2PUR Peer requested segment -> ","realBodySize","_peersAvailable","sendMap","route","P2P ADDPEERCANDIDATE - received message from "," pos: ","_downloadedChunksVideo","getLastSegmentCreatedAt","_samplesThroughput","Constants","getLastResponses","peerSegmentUpload","values","getStorage","addResponse","peerSegmentProgress","min","trackerAnnounce","_peerConnectionTime","_maxConnectedPeers","request","23682CZqNTI","_samplesResponseBytes"];return(Q=function(){return e})()}!function(e){for(var t=Y,i=e();;)try{if(398225==-parseInt(t(376))/1+parseInt(t(204))/2+parseInt(t(425))/3*(-parseInt(t(247))/4)+-parseInt(t(317))/5*(parseInt(t(363))/6)+-parseInt(t(441))/7+parseInt(t(273))/8+parseInt(t(418))/9)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(Q);class ${constructor(e,t,i){var n=Y;this.upload=a.LI[n(423)],this._isEnabled=!1,this[n(243)]=!1,this[n(390)]=a.LI.maxConcurrency,this[n(361)]=a.LI[n(321)],this[n(377)]=new Map,this[n(327)]=new Map,this[n(335)]=new Map,this[n(203)]=0,this[n(419)]=new Map,this[n(434)]=[],this[n(336)]=!1,this._performReset=!1,this[n(319)]=new Map,this[n(262)]=new Map,this[n(215)]=0,this[n(302)]=Number[n(263)],this[n(314)]=0,this._failedRequests=0,this[n(309)]=0,this[n(265)]=0,this[n(368)]=0,this[n(409)]=0,this._byteDownloadCount=0,this[n(269)]=0,this._totalPeerSet=new Set,this[n(279)]=new Set,this._availablePeersMap=new Map,this._updatePeersMetricsRefCounter=0,this._offerInterval=45e3,this._accumBw=V[n(392)],this[n(256)]=0,this[n(421)]=0,this[n(348)]=0,this[n(337)]=0,this[n(285)]=0,this[n(449)]=0,this._byteUploadCount=0,this[n(250)]=0,this[n(307)]=0,this[n(282)]=!1,this[n(386)]=e,this[n(306)]=t,this._storage=i,this._cdnObject=new V(n(325),"P2P","","","",1,!1,0,0,!1,!1),this[n(283)][n(439)](this[n(219)]),this[n(283)][n(410)](this[n(352)]()),this[n(407)]=new G,window[n(385)]?this._packageFound=!0:r.default.notice(s.BalancerTag,n(429))}[K(315)](){var e=K;return this[e(243)]&&this[e(239)]}[K(292)](){this[K(239)]=!0}[K(371)](){this._isEnabled=!1}[K(355)](){return this[K(280)]}[K(235)](){var e=K;return this._uplodadedPeers[e(433)]}[K(324)](){var e=K,t=0;for(var i of this._peers.values())i[e(379)]&&t++;return t}[K(406)](){var e=K,t=0;for(var i of this._peers.values())i[e(246)]&&t++;return t}[K(223)](){var e=K,t=0;for(var i of this._peers[e(354)]())i[e(379)]||i[e(246)]||t++;return t}[K(275)](){var e,t=K;return null===(e=this[t(241)])||void 0===e?void 0:e[t(275)]()}[K(305)](){return this._cdnObject}[K(251)](){this._performReset=!0}[K(438)](){var e,t,i=K;if(this[i(243)]&&this[i(239)]){var n=new URL(null!==(e=this._options[i(299)])&&void 0!==e?e:i(237)),r=this[i(386)]+(this[i(306)][i(242)]||n[i(244)]);null===(t=this[i(241)])||void 0===t||t[i(333)](r)}}[K(261)](e){var t,i=K;if(this[i(243)]&&!this[i(239)])if(e[i(450)]&&e[i(450)][i(370)]){this._isEnabled=!0,this[i(423)]=!e[i(450)].consumeOnly||a.LI.upload,this[i(390)]=e[i(450)].maxParallelP2PDownloads||a.LI.maxConcurrency,this[i(361)]=e[i(450)][i(321)]||a.LI.maxConnectedPeers;var n=new URL(null!==(t=this[i(306)][i(299)])&&void 0!==t?t:i(237)),o=this._accountCode+(this[i(306)][i(242)]||n.pathname);this[i(241)]=new(window[i(385)])(this,o,{tracker:e.p2p[i(359)]||a.LI[i(291)],accountCode:this[i(386)],announcePeers:e[i(450)][i(394)]}),this[i(241)].on(window[i(385)][i(351)][i(417)][i(229)],$[i(303)][i(332)](this)).on(window[i(385)].Constants.WebRtcEvents[i(338)],$._warningListener[i(332)](this))[i(339)](),r.default[i(331)](s.BalancerTag,"P2P support enabled "+this[i(275)]())}else r.default[i(331)](s.BalancerTag,"P2P support disabled."),this[i(239)]=!1}[K(388)](){var e=K;this[e(336)]||(this[e(336)]=!0,z[e(288)]()[e(297)]())}isMaxPeers(){var e=K;return this[e(377)].size>this._maxConnectedPeers&&(r.default[e(391)](s.BalancerTag,e(310)+this._peers[e(433)]),!0)}[K(340)](){var e=K;return this[e(361)]-this[e(377)][e(433)]}[K(389)](){return this[K(361)]}[K(384)](){return this._bannedPeers}[K(230)](){return this[K(250)]}[K(387)](){return this[K(307)]}[K(222)](e){var t=K;return this[t(280)][t(222)](e[t(378)])}[K(287)](e){var t=K;if(this._destroyed||0==this[t(377)][t(433)])return[];var i=[];for(var n of this._peers.values())if(0==n[t(313)]()[t(276)]){var a=Date[t(436)]()-n[t(213)]();(a>3e4&&n[t(228)]()<2||a>12e4)&&(this[t(327)][t(399)](n.id,!0),n[t(207)](),this[t(245)](n),r.default[t(391)](s.BalancerTag,t(300)+n.id+t(374)+n.getSegmentMap()[t(276)]+t(257)+a/1e3+t(316)+n[t(228)]()))}else(!n[t(270)]()||n[t(403)]()>=2)&&n[t(313)]()[t(276)]>0&&n[t(313)]().indexOf(e[t(378)])>=0&&i[t(311)](n);if(0==i.length)return[];var o=[];for(var l of i)l[t(375)]()>0&&l[t(375)]()<5&&o[t(311)](l);if(0==o[t(276)])for(var d of i)d[t(375)]()>0&&d[t(375)]()<7&&o[t(311)](d);if(0==o.length){var h=[];for(var u of i)0==u[t(393)]()&&0==u[t(437)]&&o.push(u),u[t(393)]()>0&&h[t(311)](u);h=h.sort(((e,i)=>i[t(393)]()-e[t(393)]())),o=h[t(276)]<4?o.concat(h):o[t(381)](h.slice(0,3))}return 0==o[t(276)]&&(o=i),o}[K(362)](e,t){var i,n,a,o=K;if(!this[o(243)])return!1;if(r.default[o(391)](s.BalancerTag,"Active downloads vs max concurrencui P2PMO -> "+this[o(203)]+" "+this[o(390)]),this[o(203)]>this[o(390)]&&r.default[o(391)](s.BalancerTag,o(231)+this[o(203)]),!(this[o(203)]<=this[o(390)]))return r.default[o(331)](s.BalancerTag,"P2P Unable to request to more peers max concurrency ("+this[o(390)]+") already reached"),!1;r.default.verbose(s.BalancerTag,o(252)+e[o(378)]+o(267)+(null===(i=e[o(428)])||void 0===i?void 0:i[o(426)])+o(289)+this[o(377)][o(433)]);var l=this[o(287)](e);if(l.length>0){var d=Array[o(308)](l).sort(((e,t)=>.5-Math.random()))[0];return this[o(419)][o(399)](e[o(378)],e),this[o(203)]++,e.triedP2P=!0,d[o(362)](e[o(378)]),e[o(259)]=d,d[o(447)]++,r.default[o(391)](s.BalancerTag,o(294)+e[o(378)]+"  audio -> "+(null===(n=e.rendition)||void 0===n||n.isAudio,o(214),"no")+o(451)+d.id+o(328)+d.getSegmentMap()[o(276)]+o(347)+d[o(313)]().indexOf(e.p2pId)+o(274)+d[o(437)]),!0}return r.default[o(391)](s.BalancerTag,o(240)+e[o(378)]+"  audio -> "+(null===(a=e[o(428)])||void 0===a?void 0:a[o(426)])+" not available "),!1}[K(318)](e){var t=K;this[t(283)][t(356)](e)}[K(352)](){var e=K;return Array[e(308)](this[e(377)].values())[e(382)]((t=>t[e(352)]()))[e(264)](((e,t)=>[...e,...t]),[]).sort(((t,i)=>i.time-t[e(271)]))}[K(277)](e){var t=K;this._cdnPingTimeBean[t(212)](e),this[t(283)][t(416)]=this[t(407)][t(405)](),void 0===this[t(369)]?this[t(369)]=e:this[t(369)]+=e,typeof this[t(446)]===t(248)?this[t(446)]=e:this[t(446)]=Math[t(358)](this[t(446)],e),typeof this[t(253)]===t(248)?this[t(253)]=e:this._maxNetworkLatency=Math[t(206)](this[t(253)],e),typeof this[t(234)]===t(248)?this[t(234)]=1:this[t(234)]+=1}static _errorListener(e){var t=K;r.default[t(402)](s.BalancerTag,t(420),e)}static[K(424)](e){var t=K;r.default[t(404)](s.BalancerTag,t(255),e)}storeSegment(e){var t=K;if(this[t(423)]){var i=this[t(280)][t(400)](e);!e.announcedP2P&&i&&(e[t(444)]=!0,this._sendNewSegmentToAllPeersV1(e),this._sendMapToAllPeersV0());var n=this._activeDownloadIds[t(224)](e[t(378)]);n>=0&&this[t(434)][t(210)](n)}else if(!e.announcedP2P){e[t(444)]=!0;var r=this[t(280)][t(365)]();this[t(377)][t(432)]((e=>{e[t(344)](r)}))}}[K(435)](){var e=K;if(!this[e(282)]){var t=this[e(280)][e(365)](),i=Date[e(436)]()-this[e(280)][e(349)]();r.default[e(391)](s.BalancerTag,"P2PSMAP Send map all v0 size: "+t[e(276)]+e(298)+this[e(377)][e(433)]+e(218)+i),t[e(276)]>0&&this[e(377)][e(432)]((i=>{var n=e;0==i.getVersion()&&i[n(344)](t)}))}}[K(440)](e){var t=K;if(!this[t(282)]){var i=this[t(280)][t(365)]();r.default.verbose(s.BalancerTag,t(226)+i.length),i.length>0&&this[t(377)][t(432)]((i=>{var n=t;i[n(403)]()>0&&i[n(293)](e[n(378)],e[n(433)],this[n(280)][n(312)](),e[n(304)])}))}}[K(320)](e){var t=K;if(!this[t(282)]){var i=this[t(280)][t(365)]();r.default[t(391)](s.BalancerTag,t(260)+i[t(276)]+" "+e);var n=!1;this._peers[t(432)]((r=>{var s=t;r.id==e&&(r[s(344)](i),n=!0)})),!n&&r.default[t(391)](s.BalancerTag,"Problem peer doen't exists?")}}addPeerCandidate(e,t){var i,n=K;if(!this[n(282)])if(this[n(227)][n(399)](e.id,Date[n(436)]()),null==this[n(327)].get(e.id))if(r.default.verbose(s.BalancerTag,n(346)+e.id+" "),this[n(278)]())r.default[n(331)](s.BalancerTag,n(380));else{if(!this[n(377)].has(e.id)){!this._candidates.has(e.id)&&this[n(335)].set(e.id,[]);var a=new C(this,e,t);null===(i=this[n(335)][n(411)](e.id))||void 0===i||i[n(311)](a),r.default.verbose(s.BalancerTag,"P2P New peer candidate "+a.id)}this[n(372)]()}else r.default[n(331)](s.BalancerTag,"Already banned peer -> "+e.id)}[K(220)](e){var t,i=K;r.default[i(391)](s.BalancerTag,i(397)),this._destroyed||(this[i(227)].set(e.id,Date[i(436)]()),this[i(384)]()[i(411)](e.id)||(this[i(278)]()?r.default[i(331)](s.BalancerTag,i(380)):(this._peers.has(e.id)?(r.default.debug(s.BalancerTag,i(442)+e.id),e[i(207)]()):(r.default.debug(s.BalancerTag,i(281)+e.id),this[i(377)][i(399)](e.id,e),this[i(279)][i(212)](e.id),this[i(258)][i(212)](e.id),null===(t=this[i(335)][i(411)](e.id))||void 0===t||t[i(432)]((t=>{e!=t&&t[i(207)]()})),this._candidates[i(415)](e.id),this[i(320)](e.id)),this[i(372)]())))}[K(245)](e){var t=K,i=e;this[t(377)][t(415)](i.id),this[t(279)][t(415)](i.id);var n=this[t(335)][t(411)](i.id);if(n){var r=n.indexOf(i);r>-1&&(n[t(210)](r,1),!n.length&&this[t(335)][t(415)](i.id))}this[t(372)]()}[K(238)](e,t,i){var n=K;this._uploadRequests++;var a=this[n(262)][n(411)](e.id);if(null==a&&(a=0),this._uplodadedPeers.set(e.id,a),!this[n(282)]){var o=this[n(280)].getSegment(t),l=!1;o&&o[n(443)][n(216)]>1?(e.sendSegment(t,o,i),l=!0):(e.sendNoSegment(t,i),this[n(320)](e.id),this[n(307)]++),r.default[n(391)](s.BalancerTag,n(341)+l+n(267)+t+" "+(null==o?void 0:o[n(433)])+" "+(null==o?void 0:o.data[n(216)])+n(267)+e.id+" "+i+" "+(null==o?void 0:o[n(398)]))}}[K(396)](e,t,i,n){var r,s=K;this[s(203)]--,this._chunkDownloadCount++,this[s(409)]+=i,this[s(296)]+=n[s(216)],typeof this[s(272)]===s(248)?this._sumResponseBytes=n[s(216)]:this._sumResponseBytes+=n.byteLength,typeof this[s(209)]===s(248)?this[s(209)]=n[s(216)]:this._minResponseBytes=Math[s(358)](this[s(209)],n[s(216)]),void 0===this[s(322)]?this._maxResponseBytes=n[s(216)]:this[s(322)]=Math[s(206)](this[s(322)],n.byteLength),typeof this[s(364)]===s(248)?this[s(364)]=1:this[s(364)]+=1,null===(r=this._segmentsRequested[s(411)](t))||void 0===r||r[s(330)](n);var o=Math[s(217)](n[s(216)]/(i/1e3));this[s(219)]=this._accumBw!==V[s(392)]?Math[s(217)](this[s(219)]*(1-a.Zq[s(232)])+o*a.Zq[s(232)]):o,this[s(283)][s(439)](this._accumBw),typeof this._sumThroughput===s(248)?this[s(221)]=o:this[s(221)]+=o,typeof this[s(329)]===s(248)?this._minThroughput=o:this[s(329)]=Math.min(this._minThroughput,o),void 0===this[s(395)]?this._maxThroughput=o:this[s(395)]=Math[s(206)](this[s(395)],o),typeof this[s(350)]===s(248)?this[s(350)]=1:this[s(350)]+=1,typeof this[s(249)]===s(248)?this[s(249)]=n[s(216)]:this[s(249)]+=n[s(216)],void 0===this[s(383)]?this[s(383)]=i:this[s(383)]+=i,typeof this[s(448)]===s(248)?this[s(448)]=i:this[s(448)]+=i,typeof this[s(445)]===s(248)?this[s(445)]=i:this[s(445)]=Math.min(this[s(445)],i),typeof this[s(301)]===s(248)?this[s(301)]=i:this[s(301)]=Math[s(206)](this[s(301)],i),void 0===this[s(422)]?this[s(422)]=1:this[s(422)]+=1;var l=this[s(419)][s(411)](t);if(l){var d=l[s(345)];a.Y4[s(432)]((e=>{var t=s;d[t(224)](e)>=0&&(null==l[t(428)]||!l.rendition[t(426)])&&(this._downloadMillisVideo+=i,this[t(421)]+=n[t(216)],this[t(348)]++)})),l[s(334)]=Date.now(),l[s(342)]=n[s(216)],this.storeSegment(l),this._segmentsRequested.delete(t)}}[K(357)](e,t,i,n,r){var s=K;if(0!=r){var a=this._segmentsRequested[s(411)](t);if(a&&(a[s(334)]=Date[s(436)]()),a&&!this[s(280)][s(222)](a.id)&&(r>0&&(a[s(342)]=r),this[s(400)](a)),a&&(a.data=n),a&&a.id){var o=this[s(280)].getSegment(a.id);o&&(o.data=n)}}}[K(254)](e,t,i){var n,r=K;this[r(314)]+=i||0,this[r(309)]++,this[r(203)]--,this._failedRequests++,null===(n=this[r(419)].get(t))||void 0===n||n[r(266)](),this[r(419)][r(415)](t)}[K(373)](e,t){var i,n=K;this[n(265)]++,this[n(203)]--,this[n(211)]++,null===(i=this[n(419)][n(411)](t))||void 0===i||i.noContentObtained(),this._segmentsRequested[n(415)](t)}[K(353)](e){this._byteUploadCount+=e,this._chunkUploadCount++}getUploadedBytes(){return this[K(414)]}[K(295)](){return this[K(449)]}peerCanceledSegmentUpload(e){var t=K;this[t(337)]+=e,this[t(285)]++}destroy(){var e=K;if(this[e(241)])try{this[e(241)].destroy(),delete this[e(241)]}catch(e){}for(var[,t]of this._candidates)t[e(432)]((e=>{e.destroy()}));for(var[,i]of this[e(377)])i[e(207)]();try{this[e(282)]=!0,this[e(280)][e(207)]()}catch(e){}}[K(431)](){var e=K,t=Date[e(436)]();return this._peers[e(432)]((i=>{var n=i[e(431)]();n&&(t=Math.min(t,n))})),t}[K(284)](){return this._peers}getStats(){var e=K,t=0,i=0,n=0,r=0,s=0;return this[e(377)][e(432)]((a=>{var o=e;a[o(412)]()>0&&(t+=a[o(412)](),this[o(215)]=Math[o(217)](Math.max(this[o(215)],a[o(412)]())),this[o(302)]=Math.trunc(Math[o(358)](this[o(302)],a[o(412)]())),i++),n+=a[o(208)](),r+=a[o(233)](),s+=a[o(413)]()})),t/=i||1,t=Math[e(217)](t),{downloadEnabled:!0,uploadEnabled:this.upload,uploadedBytes:this[e(414)],uploadedTime:s,uploadedChunks:this[e(449)],discardedUploadedChunks:this[e(285)],discardedUploadedBytes:this[e(337)],downloadedSegments:this._chunkDownloadCount,downloadedBytes:this[e(296)],discardedDownloadedBytes:this[e(314)],failedRequests:{total:this[e(211)],absent:this[e(265)],timeout:this[e(309)],error:this[e(368)]},activePeers:this[e(377)][e(433)],totalPeers:this[e(377)][e(433)],downloadMillis:this._downloadMillis,maxBandwidth:this[e(215)],minBandwidth:this[e(302)],downloadAvgBw:t,lastSecondsDownloadTraffic:n,lastSecondsUploadTraffic:r,downloadMillisVideo:this[e(256)],downloadBytesVideo:this[e(421)],downloadChunksVideo:this._downloadedChunksVideo,avgPingTime:this[e(407)][e(405)](),minPingTime:this[e(407)][e(430)](),maxPingTime:this[e(407)][e(367)](),sumResponseBytes:this[e(272)],minResponseBytes:this._minResponseBytes,maxResponseBytes:this._maxResponseBytes,samplesResponseBytes:this[e(364)],sumResponseTime:this[e(448)],minResponseTime:this[e(445)],maxResponseTime:this._maxResponseTime,samplesResponseTime:this._samplesResponseTime,sumNetworkLatency:this._sumNetworkLatency,minNetworkLatency:this[e(446)],maxNetworkLatency:this[e(253)],samplesNetworkLatency:this[e(234)],sumThroughput:this[e(221)],minThroughput:this[e(329)],maxThroughput:this._maxThroughput,samplesThroughput:this[e(350)],sumVideoBytes:this[e(249)],sumVideoTime:this._sumVideoTime,peersAvailable:this[e(343)],maxPeersAvailable:this[e(290)],minPeersAvailable:this[e(401)],peersUsed:this._peersUsed,peersParallelUsed:this._peersParallelUsed,maxPeersParallelUsed:this[e(205)],minPeersParallelUsed:this[e(427)],peerDiscoveryTime:this[e(236)],peerConnectionTime:this[e(360)]}}[K(366)](){var e=K;this._sumResponseBytes=void 0,this._minResponseBytes=void 0,this[e(322)]=void 0,this._samplesResponseBytes=void 0,this._sumResponseTime=void 0,this._minResponseTime=void 0,this[e(301)]=void 0,this._samplesResponseTime=void 0,this[e(369)]=void 0,this._minNetworkLatency=void 0,this[e(253)]=void 0,this[e(234)]=void 0,this[e(221)]=void 0,this[e(329)]=void 0,this[e(395)]=void 0,this[e(350)]=void 0,this[e(249)]=void 0,this[e(383)]=void 0,this._peerConnectionTime=void 0,this[e(236)]=void 0,this._updatePeersMetricsRefCounter=0}[K(326)](e,t){var i=K;this[i(225)]=t,this._availablePeersMap[i(399)](e,Date[i(436)]())}[K(372)](){var e=K,t=Date[e(436)]()-this[e(225)]+15e3;this[e(227)][e(432)](((i,n)=>{var r=e;i<t&&this[r(227)][r(415)](n)})),this[e(286)]++,this[e(268)]=this[e(377)].size,this._peersParallelUsed=this._activePeerSet[e(433)],this[e(343)]=this[e(227)][e(433)],1==this[e(286)]?(this[e(427)]=this[e(279)].size,this[e(205)]=this[e(279)].size,this[e(401)]=this[e(227)].size,this._maxPeersAvailable=this[e(227)].size):((null==this[e(427)]||this[e(427)]>this._activePeerSet.size)&&(this[e(427)]=this[e(279)][e(433)]),(null==this[e(205)]||this._maxPeersParallelUsed<this[e(279)][e(433)])&&(this[e(205)]=this._activePeerSet.size),(null==this[e(401)]||this[e(401)]>this[e(227)][e(433)])&&(this._minPeersAvailable=this[e(227)][e(433)]),(null==this[e(290)]||this[e(290)]<this._availablePeersMap.size)&&(this._maxPeersAvailable=this._availablePeersMap.size))}[K(408)](e){this[K(360)]=e}[K(323)](e){this[K(236)]=e}}var J=Z;function Z(e,t){var i=ee();return(Z=function(e,t){return i[e-=111]})(e,t)}function ee(){var e=["trim","P2P"," Mbps","usedSelectorAPIResponse","length","values","noProbing","splice","active","_p2pLoader","3096KRYAVQ","maximumRelativeDeltaForTrial","CDN Candidates -> ","now","name","Estimated bandwidth based on ","useP2P","filter","size","2471484PGUjnJ"," is: ","_getNotUsedCdn","getLastResponse","2FjGWwu","toFixed","5bBBbYp"," of ","11RnhWHM","_activeSwitching","forEach","indexOf","debug","Selected ","_options","_getCdnToProbe"," Active switching method -> ","_highetsSegmentBandwidth","getVideoBandwidth","5026XGNekJ","isManifest","906470nqmXUc","_qualityPriority","getBandwidthInBits","lastUpdatedState","getInstance","12MvOBKi"," reference bandwidth ","9ZovzuR","_cdnList"," because not used yet","usedOnce","verbose","time","_bandwidthThreshold","setChecked","from","315269ZdtfQo","Performing probe to ","cdnPriority","set","get","push","sort","getBandwidth","getPeersWithContent","125682XZKAuS","floor","last bandwidth","currentCDN","Original","random","setSwitchedCdns","738132ymnLLL","714ofZPCG","avgPingTime","isChecked","15002VCcpSY","_bestScoredCdn","getCDN","latency","banned","downloadedChunks","delete","_cdnPriority"];return(ee=function(){return e})()}!function(e){for(var t=Z,i=e();;)try{if(192937==-parseInt(t(145))/1*(parseInt(t(112))/2)+-parseInt(t(154))/3*(-parseInt(t(134))/4)+parseInt(t(114))/5*(parseInt(t(161))/6)+-parseInt(t(162))/7*(parseInt(t(183))/8)+parseInt(t(136))/9*(parseInt(t(129))/10)+parseInt(t(116))/11*(-parseInt(t(192))/12)+-parseInt(t(165))/13*(-parseInt(t(127))/14))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(ee);class te{constructor(e,t,i,n,r,s){var a=Z;this._cdnList=e,this._activeSwitching=n,this._bandwidthThreshold=t,this[a(125)]=i,this._p2pLoader=r,this[a(122)]=s}[J(167)](e,t){var i=J,n=i(158),o=new Map,l=0,d=!0;if(this[i(137)][i(118)]((function(e,t){var n=i;l+=e[n(170)],!e[n(169)]&&e[n(181)]&&(o.set(t,e),d=!1)})),d&&(o.clear(),this[i(137)][i(118)]((function(e,t){var n=i;e[n(181)]&&(e[n(169)]=!1,o[n(148)](t,e))}))),(0===this[i(182)].getPeersWithContent(e)[i(177)]||!e[i(189)])&&o[i(171)](i(174)),r.default.verbose(s.BalancerTag,i(185)+o[i(191)]+i(115)+this[i(137)][i(191)]+i(124)+this[i(117)]),o[i(171)](i(158)),0==o[i(191)])return n=i(158),!this[i(117)]&&l>0&&(n=t[i(157)]),t[i(157)]=n,0===n[i(177)]?i(158):n;if(o[i(191)]>0)if(B.default.getInstance()[i(176)](!0),B.default.getInstance().wasActiveSwitchingDecisionPerformed(void 0!==this[i(117)]),this[i(117)]){var h=t[i(157)];switch(this._activeSwitching){case a.m.qualityPriority:n=this[i(130)](e,o,t);break;case a.m.cdnPriority:n=this[i(172)](e,o,t);break;default:var u;n=null===(u=this[i(166)](e,o))?"":u[i(187)]}""!==h&&n!==i(158)&&h!==n&&B.default[i(133)]()[i(160)](!0)}else{var c;null===(c=this._bestScoredCdn(e,o))||c[i(164)]()?n=0!==l||e[i(128)]?t[i(157)]:"":(n=c[i(187)],t[i(157)]=n,c[i(143)]())}return n&&""!=n[i(173)]()?n:i(158)}[J(130)](e,t,i){var n=J,o=this[n(122)][n(179)]?new Map(this[n(137)]):t;0===this[n(182)][n(153)](e).length&&o[n(171)]("P2P");var l=this[n(123)](o,a.m.qualityPriority,i[n(157)]);if(l)return r.default[n(120)](s.BalancerTag,n(146)+l[n(187)]),i[n(157)]=l[n(187)],l[n(187)];var d=this[n(194)](e);if(d)return r.default[n(120)](s.BalancerTag,n(121)+d+n(138)),d;var h="",u=0;return t.forEach((e=>{var t=n,i=e[t(126)]();r.default[t(140)](s.BalancerTag,e[t(187)]+t(135)+i/1e6+" | estimated bandwidth "+e[t(152)]()+" highest segment bandwidth -> "+this[t(125)]/1e6),u<e[t(152)]()&&(u=e.getBandwidth(),h=e[t(187)])})),r.default[n(120)](s.BalancerTag,"Fastest CDN is -> "+h),i[n(157)]=h,h}[J(172)](e,t,i){var n,o,l=J,d=this[l(122)][l(179)]?new Map(this[l(137)]):t;0===this[l(182)][l(153)](e)[l(177)]&&d.delete(l(174));var h=this._getCdnToProbe(d,a.m[l(147)],i[l(157)]);if(h)return r.default[l(120)](s.BalancerTag,l(146)+h[l(187)]),i[l(157)]=h[l(187)],h.name;var u=Array[l(144)](t[l(178)]())[l(190)]((e=>e[l(131)]()/1e3>this[l(142)]&&!e.banned));if(!u.some((e=>e[l(187)]===i.currentCDN))){var c=t[l(149)](i[l(157)]);c&&(c[l(132)]=3)}var p=null!==(o=null===(n=u[0])||void 0===n?void 0:n.name)&&void 0!==o?o:"";if(""===p){var g=Array[l(144)](t[l(178)]());g[l(151)](((e,t)=>t[l(152)]()-e[l(152)]())),p=g[0][l(187)]}return i[l(157)]=p,p}[J(166)](e,t){var i,n=J;return null!==(i=Array[n(144)](t[n(178)]())[0])&&void 0!==i?i:null}[J(194)](e){var t=J,i=[];for(var[n,r]of this._cdnList)r[t(181)]&&!r[t(169)]&&!r[t(139)]&&i[t(150)](r[t(187)]);if(0===this[t(182)][t(153)](e)[t(177)]||!e[t(189)]){var s=i[t(119)]("P2P");s>-1&&i[t(180)](s,1)}if(0!=i[t(177)]){var a=i[Math[t(155)](Math[t(159)]()*i[t(177)])],o=this[t(137)][t(149)](a);return null!=o&&(o[t(139)]=!0),a}}[J(123)](e,t,i){var n=J,o=Array.from(e[n(178)]()).filter((e=>e.name!==i));if(t===a.m[n(147)])for(var[l,d]of(o=[],e)){if(l===i)break;o[n(150)](d)}o.sort(((e,t)=>e[n(111)]()[n(141)]-t[n(111)]()[n(141)]));var h=e[n(149)](i);if(h){var u=h[n(163)],c=h[n(131)](),p=t===a.m.cdnPriority?1e3*this[n(142)]:h[n(131)](),g=o[n(190)]((e=>{var t=n;if(Date[t(186)]()-e[t(111)]()[t(141)]>=a.Zq.minimumDurationSinceLastUsedForTrialMilliseconds)return!0;var o=!0===this[t(122)][t(179)],l=o?e[t(131)]():u*c/e[t(163)];return r.default.debug(s.BalancerTag,t(188)+t(o?156:168)+" for "+e[t(187)]+t(193)+(l/1e6)[t(113)](2)+" Mbps"),r.default[t(120)](s.BalancerTag,"Current bandwidth for "+i+": "+(c/1e6)[t(113)](2)+t(175)),(l-p)/p>=-a.Zq[t(184)]}));return 0===g[n(177)]?void 0:g[n(151)](((e,t)=>e.getLastResponse()[n(141)]-t[n(111)]().time))[0]}}}var ie=se;!function(e){for(var t=se,i=e();;)try{if(654965==parseInt(t(190))/1+parseInt(t(145))/2+-parseInt(t(155))/3*(-parseInt(t(195))/4)+parseInt(t(181))/5+parseInt(t(202))/6*(-parseInt(t(207))/7)+-parseInt(t(139))/8*(-parseInt(t(140))/9)+parseInt(t(151))/10*(-parseInt(t(177))/11))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(ae);var ne=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){var a=se;function o(e){var t=se;try{d(n[t(218)](e))}catch(e){s(e)}}function l(e){try{d(n.throw(e))}catch(e){s(e)}}function d(e){var t,n=se;e[n(170)]?r(e.value):(t=e[n(157)],t instanceof i?t:new i((function(e){e(t)})))[n(199)](o,l)}d((n=n[a(214)](e,t||[]))[a(218)]())}))};class re{constructor(){var e=se;this[e(159)]=new Map,this[e(141)]=new Map,this._isMonitoring=!1,this[e(135)]=new Map,this.shouldMonitor=!0,this[e(213)]=!1,this.noProbing=!1}static[ie(198)](e){var t=ie;return!this[t(137)]&&(this[t(137)]=new re),null!=e&&this[t(137)][t(158)](e),this[t(137)]}[ie(158)](e){var t=ie;this[t(209)]=e,this[t(172)]=!0}updateCdnList(e){this[ie(135)]=e}[ie(196)](e){this.lastDownloadedSegment=e}[ie(223)](){this[ie(172)]=!1}setHeadOnBannedOnly(e){void 0===e&&(e=!1),this[ie(213)]=e}[ie(147)](e){void 0===e&&(e=!1),this.noProbing=e}[ie(138)](e){return ne(this,void 0,void 0,(function*(){var t=se;this[t(135)]=e;var i=new Map;for(var n of e[t(133)]())i.set(n[t(152)],new G),this[t(159)]=i;if(!this[t(161)])for(this[t(161)]=!0;this.shouldMonitor;){for(;!this[t(189)];)yield new Promise((e=>setTimeout(e,1e3)));if(!this[t(206)])for(var r of this[t(135)].values())this[t(189)]&&r.name!==t(149)&&(yield this[t(143)](r,this.lastDownloadedSegment),yield new Promise((e=>setTimeout(e,a.wc[t(128)]))));yield new Promise((e=>setTimeout(e,a.wc[t(191)])))}}))}[ie(162)](e,t){var i,n,r,s=ie,a=Date[s(142)]()-e;re[s(198)]()[s(141)][s(204)](t[s(152)],a);var o=re[s(198)]().pingsTime[s(168)](t[s(152)]);null==o||o[s(208)](a),t[s(166)]=a,t[s(215)]=null!==(i=null==o?void 0:o.getAvgPingTime())&&void 0!==i?i:t[s(215)],t[s(144)]=null!==(n=null==o?void 0:o[s(165)]())&&void 0!==n?n:t[s(144)],t[s(220)]=null!==(r=null==o?void 0:o.getMinPingTime())&&void 0!==r?r:t.lowestPingTime,t[s(167)](a)}[ie(143)](e,t){return ne(this,void 0,void 0,(function*(){var i=se;if(this[i(209)]&&this[i(209)].getIsEnabled&&e.active&&e[i(197)]!=i(175)&&(!this[i(213)]||e[i(156)]))if(t){var n=this[i(209)][i(205)][i(201)](t,!0,e[i(152)]);if(n=t[i(129)](n)){var a=Math[i(192)](1e9*Math[i(174)]());n=n[i(194)]("?")?n+i(153)+a:n+i(219)+a;var o=0;e[i(154)]&&(o=yield this._performGetCheck(e,n)),(!e[i(154)]||1===o)&&(e[i(154)]=!1,r.default[i(179)](s.BalancerTag,i(216)))}else r.default.verbose(s.BalancerTag,i(188)+e.name+i(184)+t[i(193)])}else r.default[i(179)](s.BalancerTag,i(183)+e[i(152)])}))}[ie(160)](e,t){return ne(this,void 0,void 0,(function*(){var i=se;return yield this[i(186)](i(173),e,t)}))}_performHeadCheck(e,t){return ne(this,void 0,void 0,(function*(){var i=se;return yield this[i(186)]("HEAD",e,t)}))}[ie(186)](e,t,i){return ne(this,void 0,void 0,(function*(){var n=se,o=new XMLHttpRequest,l=Date[n(142)](),d=this;return t[n(185)]=!0,new Promise((function(h,u){var c=n;o[c(180)]=function(){var n=c;if(4===o[n(176)]){var a=0;if("GET"===e&&206!==o[n(221)]&&o[n(221)]>=200&&o[n(221)]<400)a=1;else if(o[n(221)]>=200&&o.status<300){if(t[n(156)]){var u=Date.now();t.bannedTime+=u-t[n(136)],t[n(136)]=u,t[n(156)]=!1,t.unBannedCount++}t[n(182)]=0,r.default[n(179)](s.BalancerTag,n(210)+i+" "+o[n(221)]),t[n(217)]=0,t[n(187)]()&&null!=d.loader&&d.loader.CDNLoader[n(131)]()}else if(o[n(221)]>=400){if(r.default[n(179)](s.BalancerTag,n(150)+i+" "+o.status),null!=t[n(148)]&&t.auth[n(171)]&&!t[n(148)][n(212)]){if(403!=o[n(221)]&&!t[n(156)]){var p=Date[n(142)]();t[n(169)]+=p-t[n(136)],t[n(136)]=p,t[n(156)]=!0,t[n(200)]++}}else if(!t[n(156)]){var g=Date[n(142)]();t[n(169)]+=g-t.bannedRefTicToc,t.bannedRefTicToc=g,t[n(156)]=!0,t.bannedCount++}t[n(217)]=1,t[n(187)]()&&null!=d[n(209)]&&d[n(209)][n(205)][n(146)](1)}0===a&&d[n(162)](l,t),h(a)}},o[c(130)]=function(){var e=c;if(r.default[e(179)](s.BalancerTag,"BANNING CDN "+i+" "+o[e(221)]),t.banned){var n=Date[e(142)]();t[e(222)]+=n-t.bannedRefTicToc,t[e(136)]=n}else{var a=Date[e(142)]();t[e(169)]+=a-t.bannedRefTicToc,t[e(136)]=a,t.banned=!0,t[e(200)]++}t[e(217)]=2,t[e(187)]()&&null!=d.loader&&d[e(209)][e(205)][e(146)](2),h(0)},o[c(211)]=function(){var e=c;if(r.default.verbose(s.BalancerTag,"BANNING CDN DUE TO TIMEOUT "+i+" "+o[e(221)]),t[e(156)]){var n=Date.now();t.bannedTime+=n-t[e(136)],t[e(136)]=n}else{var a=Date.now();t[e(169)]+=a-t[e(136)],t[e(136)]=a,t.banned=!0,t.bannedCount++}t[e(217)]=2,t[e(187)]()&&null!=d[e(209)]&&d.loader[e(205)][e(146)](2),h(0)},o[c(164)](e,i),e===c(173)&&o[c(132)]("Range",c(134)),o[c(163)]=a.wc[c(203)],o[c(178)]()}))}))}}function se(e,t){var i=ae();return(se=function(e,t){return i[e-=128]})(e,t)}function ae(){var e=["PINGTIME No available resources to test "," // ","usedOrProbed","_performCheck","isCodavel","UNABLE TO GENERATE URL FOR PROBING CHECK ","lastDownloadedSegment","840822zYtbBn","timeBetweenBurstsMilliseconds","floor","url","includes","8700JUwmqF","newDownloadedSegment","provider","getInstance","then","bannedCount","updateUrl","17442UjfSoB","callTimeoutMilliseconds","set","CDNLoader","noProbing","2982zrjqxn","add","loader","HEALTHY CDN ","ontimeout","authenticate_probes","probeOnlyOnBanned","apply","avgPingTime","Probing with range failed failed. Falling back to HEAD request on the next probe","lastUpdatedState","next","?rnpaw=","lowestPingTime","status","bannedTime","stopMonitor","timeBetweenCallsMilliseconds","addParametersToUrl","onerror","onCodavelSucessfullResponse","setRequestHeader","values","bytes=0-0","_cdns","bannedRefTicToc","_instance","monitor","160dmeuya","335277tUxmvs","monitoring","now","testCdn","highestPingTime","423872dMXWyy","onCodavelFailedResponse","setNoProbing","auth","P2P","BANNING CDN ","11615180jqlqLT","name","&rnpaw=","isRangeCompatible","1803OcyZFA","banned","value","setLoader","pingsTime","_performGetCheck","_isMonitoring","_afterCheck","timeout","open","getMaxPingTime","lastPingTime","addProbe","get","unbannedTime","done","enabled","shouldMonitor","GET","random","ORIGINAL","readyState","22zARVBj","send","verbose","onload","5556950hUVdfz","failures"];return(ae=function(){return e})()}class oe{constructor(e,t){this.columns=["CDN","Provider","# of requests","% of failed req.","Traffic served (MB)"],this.requestsPerformed=0,this.trafficServedInBytes=0,this.failedRequests=0,this.name=e,this.provider=t}setRequestsPerformed(e){this.requestsPerformed=e}setTrafficServerInBytes(e){this.trafficServedInBytes=e}setFailedRequests(e){this.failedRequests=e}getFailedRequestsPercentage(){var e=this.requestsPerformed+this.failedRequests;return 0!==e?this.failedRequests/e*100:0}generateRow(){var e=0!==this.requestsPerformed?this.failedRequests/this.requestsPerformed*100:0,t="";return(e=0===this.requestsPerformed&&this.failedRequests>0?100:e)>70?t="red":e>30&&(t="yellow"),{row:"%c"+[this.name,this.provider,this.requestsPerformed+this.failedRequests,e.toFixed(0),(this.trafficServedInBytes/1048576).toFixed(2)].map((e=>e.toString().padEnd(18))).join(""),color:t}}}var le=i(61),de=he;function he(e,t){var i=ue();return(he=function(e,t){return i[e-=335]})(e,t)}function ue(){var e=["onFailedApiResponse","Original","cdnPriority","concat","getInstance","push","instantBandwidth","isNotOnWhitelist","updateAvailability"," / ","path","getFastDataService","getSegmentDuration","activeSwitchingPriority","removeActiveSegment","getCdnList","signed_url_info","getAccountCode","_cdnLastInstantBandwith","decisionCallWaitTime","isNotOnCdnList","downloadedChunks","getMaxBandwidth","every","UUID","decisionReloadIntervalPerManifestMilliseconds","_probeOnBanned","730kGgCOd","getRecommendedManifest","incrementSwitches","verbose","Bypassed ","_highestRenditionBandwidth","STREBOOS","done","join","auth_action_info","GET","getRouteAndFilename","downloadTimeForScoring","provider","updateCDNStatsOnSuccess","pathName","_activeCdnRequests","_cdnList","map","updateProgressStats","bolinaAvailable","_failedRequests","resetOnPing","minApiCallResponseTime","Error parsing Balancer API response for signed URL: ","bandwidthThreshold","startsWith","avgApiCallResponseTime","lastUsedCdn","6uFZtDy","debug","isEnabled","noProbing","qualityPriority","gotEmptyResponse","includes","BalancerVariables","_secure","currentRenditionPos","default","CDN priority","codavelUnbanTime","failures","_retries","currentRenditionBandwidth","_lastChunksLapse","resource","get","rendition","_p2pLoader","size","value","profileName","origRes","addCdn","setSettings","16590yqtELx","Updated","minimumDurationSinceLastUsedForTrialMilliseconds","3717310HXhrYL","codavelUnbanCount","codavelSwitches","bucketName","balanceManifests","onCodavelSucessfullResponse","priorityCdn","getSignedUrlFromApi","5311192wCYlUf","getStats","getCommonVariable","score","&advanceproxy=true","route","getPluginVersion","updateSettings","1203669trFANU","_method","parser","domainWhitelist","sign_all_requests","LAST_USED_CDN","emit","358193LHIgTy","_activeRequests","send","STREBOPX","token","_cdnPeakBandwidth","VERBOSE","activeSwitching","setResourceInfo","name","values","8428500cGUFSc","_responseUUID","getForceDecision"," because its host is not one of the currently active CDN hosts: [","Error updating url -> ","incrementSwitchesDueToErrors","processedApiCall","segmentDuration","addResp","failed"," | ","_activeSwitching","host","3320gFXVim","19831CxohGB","callTimeoutMilliseconds","duration","probeOnlyOnBanned","isCodavel","_highestChunkBandwidth","Error: unable to obtain API response for signed URL (status: ","apiCallErrors","https","lastPreferedVideoBandwidth","codavelBanTime","codavelSwitchesDueToConnectivity","delete","enabled","initializated","apiHost","providers","_totalDownloadedBytes","incrementSwitchesDueToConnectivity","throw","fileName","filter","monitoringStarted","timeBetweenCallsMilliseconds","Invalid regex expression ","authenticate_probes","isManifest","monitor","getActiveRequests","timeBetweenBurstsMilliseconds","&orresource= ","bannedCount","http://","P2P","downloadMillis","getCDN","finalUrl","banned","max","status","true","getCdnObject","delay","_chunkCount","renditionCount","_firstRequestTime","codavelProvidersState","incrementSwitchesDueToQuality","active","maxApiCallResponseTime","] (balancerManifest: ","cdnName","setLogLevel","lastMeasurementWeight","codavelAllBanned","onCodavelSwitched","184rGNuuE","retries","forceDecisionCall","updateCodavelBanTimes","signUrl","now","price","bannedRefTicToc","ORIGINAL","updateCdnList","_options","parse","forEach","maxBandwidth","cdnBalanceMethod","p2pAvailable","_probingInfo","cleanCdnList","codavelBanRefTicToc","announcedCdns","absolute","maximumRelativeDeltaForTrial","weight","updateCDNStatsOnFailure","codavelBanCount","_resource","domainWhitelistRegex","append_to_url","registerCommonVariable","minRequestSizeForBwEstimateKB","apiCallResponses","], nor one of the whitelisted domains [","response","trunc","https://","_bandwidthThreshold","onCodavelFailedResponse","codavelSwitchesDueToErrors","downloadedBytes","lastCodavelRequestStatus","dnsEnabled","__awaiter","then","isMasterPlaylist","url","onSucessfullApiResponse","_noProbing","lastUpdatedState","setHeadOnBannedOnly","usedOnce","startMonitoring","setNoProbing","replace","DECISION_FINISHED","discarded","_cdnInstantBandwith","?orresource=","from","isDev","set","setActiveSwitchingEnabled","setMaxBandwidth","auth","Quality priority"];return(ue=function(){return e})()}!function(e){for(var t=he,i=e();;)try{if(858659==-parseInt(t(503))/1+parseInt(t(337))/2*(parseInt(t(484))/3)+-parseInt(t(495))/4+-parseInt(t(487))/5*(-parseInt(t(457))/6)+parseInt(t(535))/7*(-parseInt(t(534))/8)+parseInt(t(521))/9+parseInt(t(428))/10*(parseInt(t(510))/11))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(ue);class ce extends _{constructor(e,t,i,n){var r=de;super(),this[r(372)]=a.Ow[r(467)],this[r(445)]=new Map,this[r(444)]=new Map,this[r(511)]=new Map,this[r(449)]=0,this[r(578)]=0,this[r(353)]={currentCDN:""},this._highestChunkBandwidth=0,this._highestRenditionBandwidth=0,this[r(419)]=new Map,this[r(392)]=new Map,this[r(515)]=new Map,this[r(471)]=new Map,this[r(552)]=0,this[r(580)]=0,this._lastChunkTime=0,this[r(473)]=0,this[r(472)]=0,this.currentRenditionPos=0,this[r(579)]=0,this.initializated=!1,this.monitoringStarted=!1,this[r(335)]=!1,this[r(361)]=0,this[r(488)]=0,this[r(545)]=0,this[r(469)]=0,this[r(489)]=0,this[r(546)]=0,this.codavelSwitchesDueToErrors=0,this.codavelSwitchesDueToQuality=0,this.codavelBanRefTicToc=Date[r(342)](),this[r(376)]=0,this[r(581)]=new Map,this[r(527)]=!1,this[r(455)]=void 0,this[r(451)]=void 0,this[r(584)]=void 0,this[r(542)]=void 0,this[r(367)]=void 0,this[r(352)]=!1,this[r(448)]=!1,this[r(414)]="",this[r(493)]="",this[r(356)]=0,this[r(528)]=void 0,this[r(347)]=e,this[r(362)]=t,this[r(477)]=i,this[r(550)]=n}getSecure(){var e=de;return null!=this[e(465)]&&this[e(465)]}[de(563)](){return this[de(511)]}[de(462)](){var e=de;this.initializated=!1,this[e(445)].clear()}[de(483)](e,t){var i,n,o,l,d,u,c,p,g,f,m,v,y,b,S,E,T=de;if(this.initializated)return this.updateSettings(e,t);this._cdnList=new Map;try{!0===(null==e?void 0:e[T(458)])&&r.default[T(587)](r.LogLevel[T(516)]);var w=h.isValidUrl(null!==(i=this[T(347)].resource)&&void 0!==i?i:"")?h.getRouteAndFilename(this[T(347)][T(474)]):{route:"",fileName:""};this[T(465)]=(null!==(o=null===(n=this[T(347)][T(474)])||void 0===n?void 0:n.indexOf(T(371)))&&void 0!==o?o:-1)>-1||void 0,this._resource[T(555)]=w[T(555)],this[T(362)][T(500)]=w[T(500)],this[T(522)]=e[T(425)],this[T(504)]=e[T(351)],this[T(532)]=e.activeSwitching,this[T(372)]=null!==(l=e[T(453)])&&void 0!==l?l:a.Ow[T(467)],this[T(427)]=e.probeOnlyOnBanned,this[T(383)]=e[T(460)];var _=void 0!==e.activeSwitching;re[T(405)]()[T(388)](null!==(d=this._noProbing)&&void 0!==d?d:this._options.noProbing),this[T(532)]===a.m[T(403)]?re[T(405)]()[T(385)](null!==(u=this._probeOnBanned)&&void 0!==u?u:this._options[T(538)]):re[T(405)]().setHeadOnBannedOnly(!1),B.default.getInstance()[T(397)](_),a.Zq.lastMeasurementWeight=null!==(c=e[T(588)])&&void 0!==c?c:a.Zq[T(588)],a.Zq[T(358)]=null!==(p=e.maximumRelativeDeltaForTrial)&&void 0!==p?p:a.Zq[T(358)],a.Zq[T(486)]=null!==(g=e[T(486)])&&void 0!==g?g:a.Zq[T(486)],a.wc[T(536)]=null!==(f=e[T(536)])&&void 0!==f?f:a.wc[T(536)],a.wc[T(564)]=null!==(m=e.timeBetweenBurstsMilliseconds)&&void 0!==m?m:a.wc[T(564)],a.wc[T(558)]=null!==(v=e[T(558)])&&void 0!==v?v:a.wc[T(558)],a.df.decisionCallWaitTime=null!==(y=e[T(420)])&&void 0!==y?y:a.df[T(420)],a.df[T(426)]=null!==(b=e.decisionReloadIntervalPerManifestMilliseconds)&&void 0!==b?b:a.df[T(426)],a._C[T(366)]=null!==(S=e[T(366)])&&void 0!==S?S:a._C[T(366)];var A=!1,P=[];P=_?(null===(E=e[T(551)])||void 0===E?void 0:E[T(404)](e[T(391)]||[]))||[]:e[T(551)]||[],B.default[T(405)]()[T(354)](),this[T(477)].isEnabled()&&(this._activeCdnRequests.P2P=0,this._cdnList.set(T(568),this[T(477)][T(576)]())),this[T(352)]=this[T(477)][T(459)](),this[T(532)]==T(461)?this.activeSwitchingPriority=T(400):this[T(532)]==T(403)?this.activeSwitchingPriority=T(468):this[T(414)]="Disabled",P.forEach((e=>{e[T(498)]}));var I=!1;P[T(349)]((i=>{var n=T,r=i[n(498)]||0,s=h.isValidUrl(i[n(381)])?h[n(439)](i[n(381)])[n(500)]:"";A=A||s===t;var a=new V(i[n(441)],i[n(519)],i[n(533)],i[n(411)],s,r,s===t,i[n(343)],i[n(359)],i.absolute,i[n(377)],i[n(399)],e[n(505)]);a[n(533)]=i[n(533)],B.default[n(405)]()[n(482)](i[n(519)],new oe(i.name,i[n(441)])),this[n(445)].set(i.name,a),this[n(581)]=new Map(Array[n(394)](this._cdnList[n(520)]())[n(556)]((e=>e[n(539)]()))[n(446)]((e=>[e.name,e[n(572)]]))),this[n(340)](),this[n(444)][i[n(519)]]=0,!I&&(this.priorityCdn=i[n(519)],I=!0)}))}catch(e){r.default.warn(s.BalancerTag,e)}this[T(356)]=this[T(445)][T(478)]-(this._p2pLoader[T(459)]()?1:0),this[T(549)]=!0}[de(502)](e,t){var i,n,s,o=de;!0===(null==e?void 0:e.debug)&&r.default[o(587)](r.LogLevel[o(516)]),this[o(504)]=e.cdnBalanceMethod,this[o(532)]=e[o(517)],this[o(427)]=e[o(538)],this[o(383)]=e[o(460)],this[o(352)]=this[o(477)][o(459)](),this._activeSwitching==o(461)?this[o(414)]=o(400):this[o(532)]==o(403)?this[o(414)]="CDN priority":this.activeSwitchingPriority="Disabled",re[o(405)]()[o(388)](null!==(i=this[o(383)])&&void 0!==i?i:this[o(347)].noProbing),this[o(532)]===a.m[o(403)]?re[o(405)]().setHeadOnBannedOnly(null!==(n=this[o(427)])&&void 0!==n?n:this[o(347)][o(538)]):re.getInstance().setHeadOnBannedOnly(!1);var l=(null===(s=e[o(551)])||void 0===s?void 0:s[o(404)](e[o(391)]||[]))||[],d=new Map,u=!1;l[o(349)]((i=>{var n=o,r=this[n(445)][n(475)](i[n(519)]);if(r){r.active=!0,r.host!=i.host&&(r.host=i[n(533)]),r.path!=i.path&&(r.path=i[n(411)]);var s=h.getRouteAndFilename(i[n(381)])[n(500)];r[n(381)]!=s&&(r[n(381)]=s),r[n(399)]!=i[n(399)]&&(r[n(399)]=i[n(399)]),d[n(396)](i.name,r)}else{var a=i[n(498)]||0,l=h[n(439)](i.url).route,c=new V(i[n(441)],i[n(519)],i[n(533)],i[n(411)],l,a,l===t,i[n(343)],i[n(359)],i[n(357)],i[n(377)],i[n(399)],e.parser);this[n(445)].set(i[n(519)],c),d.set(i[n(519)],c),this[n(444)][i[n(519)]]=0}!u&&(this[n(493)]=i[n(519)],u=!0)})),this[o(356)]=this[o(445)].size-(this[o(477)].isEnabled()?1:0),this[o(445)]=d;var c=l[o(446)]((e=>e[o(519)]));this[o(445)].forEach((e=>{var t=o;c.includes(e[t(519)])||e[t(441)]==t(345)||e[t(441)]==t(568)||(e.active=!1)})),this[o(581)]=new Map(Array[o(394)](this[o(445)][o(520)]())[o(556)]((e=>e.isCodavel()))[o(446)]((e=>[e[o(519)],e[o(572)]]))),this[o(340)]()}[de(387)](){var e=de;this[e(532)]&&(this[e(557)]?re[e(405)]()[e(346)](this._cdnList):(this[e(557)]=!0,re.getInstance()[e(562)](this[e(445)])))}[de(360)](e,t){var i=de;if(!(this[i(444)][e]<1)){this[i(447)]();var n=this[i(445)][i(475)](e);if(this[i(444)][e]--,0==t[i(338)]&&this[i(449)]++,null!=n&&n[i(338)]--,n&&!n.banned){if(n[i(572)]){var a=Date.now();n.bannedTime+=a-n.bannedRefTicToc,n[i(344)]=a}else{var o=Date[i(342)]();n.unbannedTime+=o-n.bannedRefTicToc,n[i(344)]=o,n[i(572)]=!0,n[i(566)]++}n[i(572)]=!0,n[i(566)]++}n&&r.default[i(431)](s.BalancerTag,"FAILED -> "+n.name+" -> banned "+n[i(572)]),n&&(t[i(530)]=!0,n[i(529)](t),n[i(470)]++,n.totalFail++,n[i(386)]=!0),this.codavelProvidersState=new Map(Array[i(394)](this[i(445)][i(520)]())[i(556)]((e=>e.isCodavel()))[i(446)]((e=>[e[i(519)],e.banned]))),this[i(340)]()}}[de(415)](e){var t=de;this[t(511)][t(547)](e.id),this[t(444)][e[t(586)]]--,this._chunkCount++}[de(442)](e){var t,i,n=de;if(e[n(380)]&&(this[n(528)]=e[n(528)]),this[n(447)](),null!=e.progressDownloadedBytes){if(this[n(552)]=this[n(552)]+e[n(478)],0!=e[n(537)]){var r=8*e[n(478)]/e[n(537)];this[n(540)]<r&&(this[n(540)]=r)}null===(t=this[n(445)][n(475)]((null==e?void 0:e.cdnName)||""))||void 0===t||t[n(529)](e)}else e[n(561)]&&(this[n(347)].signManifestUsingApi||this._options[n(491)])&&(null===(i=this[n(445)][n(475)]((null==e?void 0:e[n(586)])||""))||void 0===i||i[n(529)](e));this[n(581)]=new Map(Array[n(394)](this[n(445)][n(520)]())[n(556)]((e=>e[n(539)]()))[n(446)]((e=>[e[n(519)],e[n(572)]]))),this[n(340)]()}[de(416)](){return this[de(445)]}[de(447)](){var e=de,t=new Map,i=new Map;this[e(511)][e(349)]((i=>{var n=e,r=i[n(407)],s=i.cdnName,a=t[n(475)](s);null==a&&(a=0),a+=r,t[n(396)](s,a)})),this[e(392)]=t,t[e(349)](((t,i)=>{var n=e,r=this[n(515)][n(475)](i);(null==r||r<t)&&this[n(515)][n(396)](i,t)})),t.forEach(((t,i)=>{0!=t&&this[e(419)].set(i,t)})),i[e(349)](((e,t)=>{}))}getSignedUrlFromApi(e,i,n){var a,o,l,d=de,u=t.default[d(405)]()[d(412)]()[d(418)](),c=null!==(a=this[d(347)][d(480)])&&void 0!==a?a:"",p=null!==(o=this[d(347)][d(490)])&&void 0!==o?o:"default",g=(this[d(347)][d(395)],null!==(l=this[d(347)].isLive)&&void 0!==l&&l),f=i,m=new XMLHttpRequest,v=f+"/"+u+"/"+(this[d(347)][d(480)]?c+"/":"")+d(341);v=v[d(389)]("//","/"),v=d(371)+v;var y={resource:e,live:""+g,extended:d(575),npawPluginInfo:d(575),originCode:null!==this[d(347)].bucketName&&void 0!==this[d(347)][d(490)]?p:"",v:t.default[d(501)]()};if(m.open(d(438),v+h.formatParameters(y),!1),m[d(512)](),m[d(574)]>=200&&m[d(574)]<=300)try{if(m[d(369)]){var b=JSON[d(348)](m.response);for(var S of b[d(551)])if(S[d(519)]===n&&S[d(399)]&&S[d(399)][d(417)])return S[d(399)][d(417)].signed_url}}catch(e){r.default[d(458)](s.BalancerTag,d(452)+e)}else r.default[d(458)](s.BalancerTag,d(541)+m[d(574)]+")")}updateUrl(e,i,n){void 0===i&&(i=!1);var a,o,l,d,h,u,c,p,g,f,m,v,y,b,S=de,E=this[S(421)](e[S(381)]),T=this[S(408)](e[S(381)]),w=e[S(561)]&&!e[S(530)],_=E&&T,A=null!==(a=this._options[S(491)])&&void 0!==a&&a||null!==(o=this[S(347)].signManifestUsingApi)&&void 0!==o&&o;if(A){if(E&&T){var P=Array[S(394)](this._cdnList[S(520)]()).map((e=>'"'+e.host+'"')),I=(null!==(l=this[S(347)][S(506)])&&void 0!==l?l:[])[S(404)](null!==(d=this._options[S(363)])&&void 0!==d?d:[])[S(446)]((e=>'"'+e+'"'));return void r.default[S(458)](s.BalancerTag,S(432)+e[S(381)]+S(524)+P[S(436)](",")+S(368)+I[S(436)](",")+S(585)+A+")")}}else if(w||_){if(E&&T){var R=Array[S(394)](this[S(445)][S(520)]())[S(446)]((e=>'"'+e.host+'"')),C=(null!==(h=this[S(347)][S(506)])&&void 0!==h?h:[]).concat(null!==(u=this[S(347)][S(363)])&&void 0!==u?u:[])[S(446)]((e=>'"'+e+'"'));r.default[S(458)](s.BalancerTag,S(432)+e[S(381)]+S(524)+R[S(436)](",")+S(368)+C[S(436)](",")+"]")}return}if(n){var N=this[S(445)].get(n);if(N){var D=(e[S(381)][S(454)](S(543))?S(371):S(567))+N[S(533)];if("STREBOOS"===N[S(441)]||N[S(441)]===S(513)?D+="/"+t.default[S(405)]().getFastDataService()[S(418)]()+"/"+(null!==(c=this[S(347)][S(480)])&&void 0!==c?c:S(467))+"/"+(null!==(p=this[S(347)][S(490)])&&void 0!==p?p:S(467)):D+=N.path,D+=e[S(443)],(N[S(441)]===S(434)||N[S(441)]===S(513))&&(D+=D[S(463)]("?")?S(565)+e.origRes:"?orresource="+e[S(481)]),N[S(441)]===S(513)&&(D+="&advanceproxy=true"),null!=N[S(399)]&&N[S(399)][S(548)]&&(!i||i&&N.auth[S(560)]))if(N[S(399)][S(437)]===S(364)){var L=(null===(g=N[S(399)][S(417)])||void 0===g?void 0:g[S(514)])||"";D+=D[S(463)]("?")?"&"+L:"?"+L}else if(N[S(399)][S(437)]===S(507)){var O=this[S(494)](D,this.apiHost,N.name);O&&(D=O)}return D}}var k=new Map;k=new Map(this._cdnList);var B="",x="",M=(null===(f=e[S(476)])||void 0===f?void 0:f.bandwidth)||0;for(this[S(433)]<M&&(this[S(433)]=M);(!B||""==B)&&(x=new te(k,this[S(372)],this._highestRenditionBandwidth,this._activeSwitching,this._p2pLoader,this._options)[S(570)](e,this[S(353)]),t.default[S(405)]()[S(365)](le.default.Products.BALANCER,le.default.BalancerVariables[S(508)],x===S(402)?"Origin":x),"P2P"!==x);){var U=this[S(445)][S(475)](x);try{U&&x!=S(402)?(B=(e[S(381)][S(454)](S(543))?"https://":S(567))+U.host,U[S(441)]===S(434)||U[S(441)]===S(513)?B+="/"+t.default.getInstance()[S(412)]().getAccountCode()+"/"+(null!==(m=this[S(347)].profileName)&&void 0!==m?m:"default")+"/"+(null!==(v=this._options.bucketName)&&void 0!==v?v:"default"):B+=U[S(411)],B+=e.pathName,("STREBOOS"===U[S(441)]||"STREBOPX"===U[S(441)])&&(B+=B[S(463)]("?")?"&orresource= "+e[S(481)]:S(393)+e[S(481)]),"STREBOPX"===U[S(441)]&&(B+=S(499)),""==B&&r.default[S(458)](s.BalancerTag,S(525)+e[S(381)]+S(410)+(null===(y=this[S(362)])||void 0===y?void 0:y.route)+S(410)+U[S(519)])):x==S(402)&&(B=e[S(381)])}catch(e){}k.delete(x)}if("P2P"===x)B=S(568);else{this[S(444)][x]++;var V=this[S(445)][S(475)](x);if(null!=V&&null!=V[S(399)]&&V[S(399)][S(548)]&&(!i||i&&V[S(399)][S(560)]))if(V[S(399)][S(437)]===S(364)){var F=(null===(b=V[S(399)].signed_url_info)||void 0===b?void 0:b[S(514)])||"";B+=B[S(463)]("?")?"&"+F:"?"+F}else if(V[S(399)].auth_action_info===S(507)){var q=this[S(494)](B,this[S(550)],V[S(519)]);q&&(B=q)}if(e[S(571)]=B,V&&e.changeCDN(B,V[S(519)],V[S(441)]),r.default[S(431)](s.BalancerTag,"New url -> "+B+S(531)+e[S(586)]),this.lastUsedCdn!=x&&this[S(456)]!==S(402)&&void 0!==this.lastUsedCdn){var H=this[S(445)][S(475)](this.lastUsedCdn),G=this[S(445)].get(x);null!=H&&(H[S(539)]()&&null!=G&&!G[S(539)]()&&(3==H[S(384)]&&this[S(373)](3),this[S(336)]()),H[S(430)](),2==H[S(384)]?H[S(553)]():1==H[S(384)]?H[S(526)]():3==H.lastUpdatedState&&H[S(582)]())}this.lastUsedCdn=x}return B}[de(518)](e){var t=de,i=h.isValidUrl(null!=e?e:"")?h[t(439)](e):{route:"",fileName:""};this[t(362)][t(555)]=i[t(555)],this[t(362)][t(500)]=i.route}[de(429)](){return e=this,n=function*(){for(var e=he,i=0;!t.default[e(405)]()[e(497)](le.default.Products.BALANCER,le.default[e(464)][e(390)])&&i++<5;)yield h[e(577)](300);if(5===i)return this[e(362)][e(500)]+this[e(362)][e(555)];var n=Array[e(394)](this._cdnList[e(520)]()).filter((t=>t.name!==e(568)));return n.length>0?n[0][e(381)]+this[e(362)][e(555)]:this[e(362)][e(500)]+this[e(362)][e(555)]},new((i=void 0)||(i=Promise))((function(t,r){function s(e){try{o(n.next(e))}catch(e){r(e)}}function a(e){var t=he;try{o(n[t(554)](e))}catch(e){r(e)}}function o(e){var n,r=he;e[r(435)]?t(e[r(479)]):(n=e[r(479)],n instanceof i?n:new i((function(e){e(n)})))[r(379)](s,a)}o((n=n.apply(e,[])).next())}));var e,i,n}[de(496)](){var e=de,t=[],i=0,n=0,r=0,s=0,a=0,o=0,l=0,d=0;return this[e(445)][e(349)]((h=>{var u=e;if("P2P"!==h[u(519)]){h[u(409)]();var c=(h[u(375)]||0)/((h[u(569)]||1)/1e3)*8,p=(h.downloadedBytesForScoring||0)/((h[u(440)]||1)/1e3)*8;null==c&&(c=0);var g=this[u(552)]/((Date[u(342)]()-this[u(580)])/1e3)*8,f=this._cdnPeakBandwidth[u(475)](h[u(519)])||0,m=this[u(392)][u(475)](h[u(519)])||0,v=this[u(419)].get(h[u(519)])||0;t[u(406)]({downloadedBytes:h.downloadedBytes,downloadedChunks:h[u(422)],bandwidth:Math.trunc(c),instantBandwidth:Math.trunc(m),lastInstantBandwidth:Math[u(370)](v),peakBandwidth:Math[u(370)](f),failures:h.failures,totalFailures:h.totalFail,retries:h[u(338)],downloadTime:h[u(569)],provider:h.provider,profileName:h.name,isActive:h[u(583)],ptb:g,usedOnce:h.usedOnce,hugeChunks:h.hugeChunks,firstHugeChunkSize:h.firstHugeChunkSize,lastChunksLapse:this[u(473)],maxBandwidth:h[u(350)],banned:h[u(572)],lastBandwidth:h[u(544)],scoringBandwidth:p}),i+=h[u(375)],n+=c,r+=f,s+=m,a+=h[u(422)],o+=h.downloadMillis,l+=h[u(470)],d+=h[u(338)]}})),{responseUUID:this._responseUUID,totalDownloadedBytes:i,totalDownloadedChunks:a,totalDownloadedTime:o,totalFailures:l,totalRetries:d,activeSwitching:this[e(532)]||"",mode:this._method||"",totalBandwidth:Math[e(370)](n),totalInstantBandwidth:Math.trunc(s),totalPeakBandwidth:Math[e(370)](r),cdns:t,currentRenditionBandwidth:this[e(472)],currentRenditionPos:this[e(466)],renditionCount:this.renditionCount}}changeStatusCDN(e,t){var i=de,n=!1,r=0;return!t&&this[i(445)][i(349)]((e=>{e[i(583)]&&r++})),this[i(445)][i(349)]((s=>{var a=i;s.name===e&&(t&&(s[a(583)]=!0,n=!0),!t&&r>1&&(s.active=!1,n=!0))})),n}[de(398)](e,t){var i=de,n=this._cdnList[i(475)](e);return null!=n&&(n[i(350)]=t,this[i(509)](a.yl[i(485)],{loader:this}),!0)}[de(423)](e){var t=de,i=this[t(445)].get(e);return null!=i?i[t(350)]:0}[de(340)](){var e=de,t=Date.now();if(0!==this[e(581)][e(478)]){var i=Array[e(394)](this[e(581)][e(520)]())[e(424)]((e=>e));i!==this[e(335)]?i?(this[e(469)]+=t-this[e(355)],this[e(355)]=t,this[e(361)]++):(this.codavelBanTime+=t-this.codavelBanRefTicToc,this[e(355)]=t,this.codavelUnbanCount++):i?(this.codavelBanTime+=t-this.codavelBanRefTicToc,this[e(355)]=t):(this.codavelUnbanTime+=t-this[e(355)],this[e(355)]=t),this[e(335)]=i}else this.codavelBanRefTicToc=t}[de(450)](){var e=de;this[e(545)]=0,this[e(469)]=0,this[e(355)]=Date.now(),this[e(527)]=!1,this[e(455)]=void 0,this[e(451)]=void 0,this[e(584)]=void 0,this[e(542)]=void 0,this[e(367)]=void 0}[de(336)](){var e=de;this[e(489)]++,2==this[e(376)]?this[e(546)]++:1==this[e(376)]?this[e(374)]++:3==this[e(376)]&&this.codavelSwitchesDueToQuality++}[de(492)](){this.lastCodavelRequestStatus=0}[de(373)](e){this[de(376)]=e}[de(401)](){var e=de;null==this[e(542)]?this[e(542)]=1:this.apiCallErrors+=1,this[e(527)]=!0}[de(382)](e){var t=de;null==this[t(367)]?this.apiCallResponses=1:this[t(367)]+=1,null==this[t(451)]?this[t(451)]=e:this[t(451)]=Math.min(this.minApiCallResponseTime,e),null==this.avgApiCallResponseTime?this[t(455)]=e:this[t(455)]=this[t(455)]+(e-this[t(455)])/this[t(367)],null==this.maxApiCallResponseTime?this[t(584)]=e:this[t(584)]=Math[t(573)](this[t(584)],e),this.processedApiCall=!0}getBucket(){return this[de(347)].bucketName}getIsLive(){return this._options.isLive}[de(523)](){var e=de;return this[e(347)][e(339)]}[de(413)](){return this[de(528)]}[de(421)](e){var t=de,i=!1,n=new URL(e);for(var r of this._cdnList[t(520)]())if(r[t(533)]===n[t(533)]){i=!0;break}return!i}[de(408)](e){var t,i,n=de,a=!1,o=new URL(e);for(var l of null!==(t=this[n(347)][n(363)])&&void 0!==t?t:[])try{if(new RegExp(l).test(o[n(533)])){a=!0;break}}catch(t){r.default[n(458)](s.BalancerTag,n(559)+l)}for(var d of null!==(i=this[n(347)][n(506)])&&void 0!==i?i:[]){if(a)break;if(d===o[n(533)]){a=!0;break}}return!a}}var pe=fe;function ge(){var e=["getLastSegmentId","p2p","_reduceMemSize","forEach","P2P: Segment not ready yet for segment map","clear","p2pId","expiration","size","getMaxSize","40vhqolY","push","count","set","data","storeSegment","hasSegment","safeMaxCount","getLastSegmentCreatedAt","942KGYOuy","getSegment","811164KplepT","readyForP2P","_expTime","2LvOFxO","get","40269845VZEnjI","createMap","now","_maxSize","delete","_lastSegmentId","1078281FlzSNw","has","50UNAuDc","createdAt","10133090LBcyUC","min","6077904kFtBuw","_removeOldSegments","endTime","cachedSegmentExpiration","cachedSegmentsCount","5404lLFAMI","_loader","1103686zyYCRX","startTime","_localMem","debug"];return(ge=function(){return e})()}function fe(e,t){var i=ge();return(fe=function(e,t){return i[e-=488]})(e,t)}!function(e){for(var t=fe,i=e();;)try{if(851143==parseInt(t(523))/1*(parseInt(t(502))/2)+parseInt(t(497))/3*(-parseInt(t(521))/4)+-parseInt(t(512))/5*(-parseInt(t(499))/6)+parseInt(t(516))/7+parseInt(t(488))/8*(parseInt(t(510))/9)+parseInt(t(514))/10+-parseInt(t(504))/11)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(ge);class me{constructor(e){var t=fe;this[t(525)]=new Map,this[t(507)]=a.dR[t(490)],this[t(501)]=a.dR.expiration,this[t(509)]="",this[t(522)]=e,setInterval((()=>{this[t(517)]()}),1e3)}setSettings(e){var t=fe,i=e[t(528)];i&&(this[t(501)]=i[t(519)]||a.dR[t(534)],this[t(507)]=Math[t(515)](i[t(520)]||a.dR[t(490)],a.dR[t(495)]))}[pe(536)](){return this[pe(507)]}[pe(498)](e){var t=pe;return this[t(525)][t(503)](e)}hasSegment(e){var t=pe;return this[t(525)][t(511)](e)}[pe(493)](e){var t=pe;return!this[t(494)](e[t(533)])&&void 0!==e[t(492)]&&(this[t(509)]=e[t(533)],this._localMem[t(491)](e.p2pId,e),this[t(529)](),!0)}[pe(517)](){var e=pe,t=Date[e(506)]()-this[e(501)];this[e(525)][e(530)](((i,n)=>{var r=e;i[r(524)]<t&&this._localMem[r(508)](n)}))}_reduceMemSize(){var e,t,i=pe;this._localMem[i(535)]-this._maxSize>0&&(t=Date.now(),e="",this[i(525)][i(530)](((n,r)=>{var s=i;n[s(518)]<t&&(e=r,t=n[s(518)])})),this[i(525)][i(508)](e),this[i(529)]())}[pe(505)](){var e=pe,t=[];for(var[,i]of this._localMem)i[e(500)]?t[e(489)](i[e(533)]):r.default[e(526)](s.BalancerTag,e(531));return t}destroy(){var e=pe;this[e(525)][e(532)]()}getSize(){var e=pe;return this._localMem[e(535)]}[pe(527)](){return this._lastSegmentId}[pe(496)](){var e,t=pe;return(null===(e=this[t(525)][t(503)](this._lastSegmentId))||void 0===e?void 0:e[t(513)])||0}}var ve=i(8641),ye=i.n(ve);function be(e,t){var i=Ee();return(be=function(e,t){return i[e-=239]})(e,t)}!function(e){for(var t=be,i=e();;)try{if(896667==-parseInt(t(243))/1+parseInt(t(244))/2+parseInt(t(246))/3+-parseInt(t(242))/4+-parseInt(t(240))/5*(parseInt(t(248))/6)+parseInt(t(245))/7*(parseInt(t(247))/8)+parseInt(t(241))/9*(parseInt(t(239))/10))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(Ee);class Se{constructor(){this.uri="",this.pos=0}}function Ee(){var e=["120603oSVWLv","4348203PmJSsf","248WrUfnN","5862174QvFGev","60PgNrBs","5xdRqlC","1239651muwYBX","6053208aZbdvX","1140439FAylbd","3435006ZySGMZ"];return(Ee=function(){return e})()}var Te=_e;function we(){var e=["49atLRxa","getSegment","4790296jNvrIV","getSegmentsSize","isMaxRendition","618392VhuvFA","targetDuration","isAudio","addSegment","pos","13492UjjkSl","size","getSegments","segments","25091190DcWpsf","1266234UriWHQ","uri","12219qvySvI","bandwidth","316RdXNEi","set","30EmhfzI","11038698mKeLGq"];return(we=function(){return e})()}function _e(e,t){var i=we();return(_e=function(e,t){return i[e-=339]})(e,t)}!function(e){for(var t=_e,i=e();;)try{if(788559==parseInt(t(357))/1+parseInt(t(348))/2*(-parseInt(t(346))/3)+parseInt(t(339))/4*(parseInt(t(350))/5)+-parseInt(t(344))/6*(-parseInt(t(352))/7)+parseInt(t(354))/8+parseInt(t(351))/9+-parseInt(t(343))/10)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(we);class Ae{constructor(){var e=_e;this[e(345)]="",this[e(347)]=0,this[e(359)]=!1,this.bandwidthPosition=-1,this[e(358)]=0,this[e(342)]=new Map,this[e(356)]=!1}[Te(360)](e,t,i){var n=Te,r=new Se;r[n(345)]=t,r[n(361)]=i,this[n(342)][n(349)](e,r)}[Te(353)](e){return this[Te(342)].get(e)}[Te(355)](){var e=Te;return this.segments[e(340)]}[Te(341)](){return this[Te(342)]}}function Pe(){var e=["endsWith","4135758GfjuUM","13FwlXqZ","11ujFzzG","segments","variants","42814236JIEEqf","53MYKxUo","3549507BOimIu","addSegment","24wWdckN","4506950dLKJHo","getRenditions","14SPDDZT","1871523RGDlMD","isAudio","223030JVhTJk","60izmptd","addRendition","35280XvAUVL","targetDuration","uri","audio","parse","forEach"];return(Pe=function(){return e})()}var Ie=Re;function Re(e,t){var i=Pe();return(Re=function(e,t){return i[e-=414]})(e,t)}!function(e){for(var t=Re,i=e();;)try{if(693890==parseInt(t(415))/1*(-parseInt(t(427))/2)+parseInt(t(416))/3+parseInt(t(425))/4*(-parseInt(t(424))/5)+parseInt(t(434))/6*(-parseInt(t(421))/7)+-parseInt(t(418))/8*(parseInt(t(422))/9)+-parseInt(t(419))/10*(parseInt(t(436))/11)+-parseInt(t(414))/12*(-parseInt(t(435))/13))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(Pe);class Ce{static[Ie(431)](e,t,i){var n=Ie,r=ye().parse(t);return r.isMasterPlaylist?null!=r[n(438)]&&r[n(438)][n(432)]((function(e){var t=n,r=new Ae;r.bandwidth=e.bandwidth,r[t(429)]=e[t(429)],i[t(426)](e[t(429)],r),null!=e[t(430)]&&e.audio[t(432)]((function(e){var n=t,r=new Ae;r[n(429)]=e[n(429)],r[n(423)]=!0,i[n(426)](e[n(429)],r)}))})):i[n(420)]()[n(432)](((t,s)=>{var a=n;e[a(433)](s)&&(null!=r[a(437)]&&r[a(437)].forEach((function(e){var t=a;i[t(417)](s,e[t(429)],e[t(429)])})),null!=r[a(428)]&&(t[a(428)]=r[a(428)]))})),r}}var Ne=i(9731),De=i.n(Ne),Le=i(2553),Oe=i.n(Le),ke=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Oe().location&&Oe().location.href||"");var i="function"==typeof Oe().URL,n=/^\/\//.test(e),r=!Oe().location&&!/\/\//i.test(e);if(i?e=new(Oe().URL)(e,Oe().location||"http://example.com"):/\/\//i.test(e)||(e=De().buildAbsoluteURL(Oe().location&&Oe().location.href||"",e)),i){var s=new URL(t,e);return r?s.href.slice(18):n?s.href.slice(s.protocol.length):s.href}return De().buildAbsoluteURL(e,t)},Be=i(1048).hp,xe=i(7937),Me=function(e){return!!e&&"object"==typeof e},Ue=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce((function(t,i){return"object"!=typeof i||Object.keys(i).forEach((function(n){Array.isArray(t[n])&&Array.isArray(i[n])?t[n]=t[n].concat(i[n]):Me(t[n])&&Me(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]})),t}),{})},Ve=function(e){return Object.keys(e).map((function(t){return e[t]}))},Fe=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},qe=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},He=function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i;return-1},Ge=function(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,r=void 0===n?"":n,s=e.range,a=void 0===s?"":s,o=e.indexRange,l=void 0===o?"":o,d={uri:r,resolvedUri:ke(i||"",r)};if(a||l){var h,u=(a||l).split("-"),c=Oe().BigInt?Oe().BigInt(u[0]):parseInt(u[0],10),p=Oe().BigInt?Oe().BigInt(u[1]):parseInt(u[1],10);c<Number.MAX_SAFE_INTEGER&&"bigint"==typeof c&&(c=Number(c)),p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),"bigint"==typeof(h="bigint"==typeof p||"bigint"==typeof c?Oe().BigInt(p)-Oe().BigInt(c)+Oe().BigInt(1):p-c+1)&&h<Number.MAX_SAFE_INTEGER&&(h=Number(h)),d.byterange={length:h,offset:c}}return d},Xe=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},je={static:function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,r=e.sourceDuration,s=e.periodDuration,a=Xe(e.endNumber),o=t/n;return"number"==typeof a?{start:0,end:a}:"number"==typeof s?{start:0,end:s/o}:{start:0,end:r/o}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,s=void 0===r?1:r,a=e.duration,o=e.periodStart,l=void 0===o?0:o,d=e.minimumUpdatePeriod,h=void 0===d?0:d,u=e.timeShiftBufferDepth,c=void 0===u?1/0:u,p=Xe(e.endNumber),g=(t+i)/1e3,f=n+l,m=g+h-f,v=Math.ceil(m*s/a),y=Math.floor((g-f-c)*s/a),b=Math.floor((g-f)*s/a);return{start:Math.max(0,y),end:"number"==typeof p?p:Math.min(v,b)}}},We=function(e){var t=e.type,i=e.duration,n=e.timescale,r=void 0===n?1:n,s=e.periodDuration,a=e.sourceDuration,o=je[t](e),l=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}(o.start,o.end).map(function(e){return function(t){var i=e.duration,n=e.timescale,r=void 0===n?1:n,s=e.periodStart,a=e.startNumber;return{number:(void 0===a?1:a)+t,duration:i/r,timeline:s,time:t*i}}}(e));if("static"===t){var d=l.length-1,h="number"==typeof s?s:a;l[d].duration=h-i/r*d}return l},ze=function(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,s=e.indexRange,a=void 0===s?"":s,o=e.periodStart,l=e.presentationTime,d=e.number,h=void 0===d?0:d,u=e.duration;if(!t)throw new Error("NO_BASE_URL");var c=Ge({baseUrl:t,source:n.sourceURL,range:n.range}),p=Ge({baseUrl:t,source:t,indexRange:a});if(p.map=c,u){var g=We(e);g.length&&(p.duration=g[0].duration,p.timeline=g[0].timeline)}else r&&(p.duration=r,p.timeline=o);return p.presentationTime=l||o,p.number=h,[p]},Ke=function(e,t,i){var n,r=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,d=t.timescale,h=t.references.filter((function(e){return 1!==e.referenceType})),u=[],c=e.endList?"static":"dynamic",p=e.sidx.timeline,g=p,f=e.mediaSequence||0;n="bigint"==typeof t.firstOffset?Oe().BigInt(l)+t.firstOffset:l+t.firstOffset;for(var m=0;m<h.length;m++){var v,y=t.references[m],b=y.referencedSize,S=y.subsegmentDuration;v="bigint"==typeof n?n+Oe().BigInt(b)-Oe().BigInt(1):n+b-1;var E=ze({baseUrl:i,timescale:d,timeline:a,periodStart:p,presentationTime:g,number:f,duration:S,sourceDuration:s,indexRange:n+"-"+v,type:c})[0];r&&(E.map=r),u.push(E),n+="bigint"==typeof n?Oe().BigInt(b):b,g+=S/d,f++}return e.segments=u,e},Ye=["AUDIO","SUBTITLES"],Qe=function(e){return(t=e,i=function(e){return e.timeline},Ve(t.reduce((function(e,t){return t.forEach((function(t){e[i(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,i},$e=function(e){var t,i,n=[];return t=e,i=function(e,t,i,r){n=n.concat(e.playlists||[])},Ye.forEach((function(e){for(var n in t.mediaGroups[e])for(var r in t.mediaGroups[e][n]){var s=t.mediaGroups[e][n][r];i(s)}})),n},Je=function(e){var t=e.playlist,i=e.mediaSequence;t.mediaSequence=i,t.segments.forEach((function(e,i){e.number=t.mediaSequence+i}))},Ze=function(e){return e&&e.uri+"-"+(i="bigint"==typeof(t=e.byterange).offset||"bigint"==typeof t.length?Oe().BigInt(t.offset)+Oe().BigInt(t.length)-Oe().BigInt(1):t.offset+t.length-1,t.offset+"-"+i);var t,i},et=function(e){return Ve(e.reduce((function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){return e.discontinuityStarts=(e.segments||[]).reduce((function(e,t,i){return t.discontinuity&&e.push(i),e}),[]),e}))},tt=function(e,t){var i=Ze(e.sidx),n=i&&t[i]&&t[i].sidx;return n&&Ke(e,n,e.sidx.resolvedUri),e},it=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e)e[i]=tt(e[i],t);return e},nt=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,s=e.discontinuityStarts,a={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:s,timelineStarts:i.timelineStarts,segments:n};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},rt=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},st=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},at=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},ot=function(e){return e?Object.keys(e).reduce((function(t,i){var n=e[i];return t.concat(n.playlists)}),[]):[]},lt=function(e){var t,i=e.dashPlaylists,n=e.locations,r=e.sidxMapping,s=void 0===r?{}:r,a=e.previousManifest;if(!i.length)return{};var o=i[0].attributes,l=o.sourceDuration,d=o.type,h=o.suggestedPresentationDelay,u=o.minimumUpdatePeriod,c=et(i.filter(rt)).map(nt),p=et(i.filter(st)),g=et(i.filter(at)),f=i.map((function(e){return e.attributes.captionServices})).filter(Boolean),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:l,playlists:it(c,s)};u>=0&&(m.minimumUpdatePeriod=1e3*u),n&&(m.locations=n),"dynamic"===d&&(m.suggestedPresentationDelay=h);var v,y,b,S,E,T,w,_=0===m.playlists.length,A=p.length?function(e,t,i){var n;void 0===t&&(t={}),void 0===i&&(i=!1);var r=e.reduce((function(e,r){var s=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"",o=r.attributes.label||"main";if(a&&!r.attributes.label){var l=s?" ("+s+")":"";o=""+r.attributes.lang+l}e[o]||(e[o]={language:a,autoselect:!0,default:"main"===s,playlists:[],uri:""});var d=tt(function(e,t){var i,n=e.attributes,r=e.segments,s=e.sidx,a=e.mediaSequence,o=e.discontinuitySequence,l=e.discontinuityStarts,d={attributes:(i={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:o,discontinuityStarts:l,timelineStarts:n.timelineStarts,mediaSequence:a,segments:r};return n.contentProtection&&(d.contentProtection=n.contentProtection),s&&(d.sidx=s),t&&(d.attributes.AUDIO="audio",d.attributes.SUBTITLES="subs"),d}(r,i),t);return e[o].playlists.push(d),void 0===n&&"main"===s&&((n=r).default=!0),e}),{});return n||(r[Object.keys(r)[0]].default=!0),r}(p,s,_):null,P=g.length?function(e,t){return void 0===t&&(t={}),e.reduce((function(e,i){var n=i.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),e[n].playlists.push(tt(function(e){var t,i=e.attributes,n=e.segments,r=e.mediaSequence,s=e.discontinuityStarts,a=e.discontinuitySequence;void 0===n&&(n=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var o=((t={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,t);return i.codecs&&(o.CODECS=i.codecs),{attributes:o,uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:s,discontinuitySequence:a,mediaSequence:r,segments:n}}(i),t)),e}),{})}(g,s):null,I=c.concat(ot(A),ot(P)),R=I.map((function(e){return e.timelineStarts}));return m.timelineStarts=Qe(R),v=I,y=m.timelineStarts,v.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=He(y,(function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),A&&(m.mediaGroups.AUDIO.audio=A),P&&(m.mediaGroups.SUBTITLES.subs=P),f.length&&(m.mediaGroups["CLOSED-CAPTIONS"].cc=f.reduce((function(e,t){return t?(t.forEach((function(t){var i=t.channel,n=t.language;e[n]={autoselect:!1,default:!1,instreamId:i,language:n},t.hasOwnProperty("aspectRatio")&&(e[n].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[n].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[n]["3D"]=t["3D"])})),e):e}),{})),a?(S=(b={oldManifest:a,newManifest:m}).oldManifest,E=b.newManifest,T=S.playlists.concat($e(S)),w=E.playlists.concat($e(E)),E.timelineStarts=Qe([S.timelineStarts,E.timelineStarts]),function(e){var t=e.oldPlaylists,i=e.timelineStarts;e.newPlaylists.forEach((function(e){e.discontinuitySequence=He(i,(function(t){return t.timeline===e.timeline}));var n=function(e,t){for(var i=0;i<e.length;i++)if(e[i].attributes.NAME===t)return e[i];return null}(t,e.attributes.NAME);if(n&&!e.sidx){var r=e.segments[0],s=He(n.segments,(function(e){return Math.abs(e.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===s)return Je({playlist:e,mediaSequence:n.mediaSequence+n.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!n.segments.length&&e.timeline>n.timeline||n.segments.length&&e.timeline>n.segments[n.segments.length-1].timeline)&&e.discontinuitySequence--);n.segments[s].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),Je({playlist:e,mediaSequence:n.segments[s].number})}}))}({oldPlaylists:T,newPlaylists:w,timelineStarts:E.timelineStarts}),E):m},dt=function(e,t,i){var n=e.NOW,r=e.clientOffset,s=e.availabilityStartTime,a=e.timescale,o=void 0===a?1:a,l=e.periodStart,d=void 0===l?0:l,h=e.minimumUpdatePeriod,u=(n+r)/1e3+(void 0===h?0:h)-(s+d);return Math.ceil((u*o-t)/i)},ht=function(e,t){for(var i=e.type,n=e.minimumUpdatePeriod,r=void 0===n?0:n,s=e.media,a=void 0===s?"":s,o=e.sourceDuration,l=e.timescale,d=void 0===l?1:l,h=e.startNumber,u=void 0===h?1:h,c=e.periodStart,p=[],g=-1,f=0;f<t.length;f++){var m=t[f],v=m.d,y=m.r||0,b=m.t||0;g<0&&(g=b),b&&b>g&&(g=b);var S=void 0;if(y<0){var E=f+1;S=E===t.length?"dynamic"===i&&r>0&&a.indexOf("$Number$")>0?dt(e,g,v):(o*d-g)/v:(t[E].t-g)/v}else S=y+1;for(var T=u+p.length+S,w=u+p.length;w<T;)p.push({number:w,duration:v/d,time:g,timeline:c}),g+=v,w++}return p},ut=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ct=function(e,t){return e.replace(ut,function(e){return function(t,i,n,r){if("$$"===t)return"$";if(void 0===e[i])return t;var s=""+e[i];return"RepresentationID"===i?s:(r=n?parseInt(r,10):1,s.length>=r?s:""+new Array(r-s.length+1).join("0")+s)}}(t))},pt=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,r=void 0===n?{sourceURL:"",range:""}:n,s=Ge({baseUrl:e.baseUrl,source:ct(r.sourceURL,i),range:r.range}),a=function(e,t){return e.duration||t?e.duration?We(e):ht(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return a.map((function(t){i.Number=t.number,i.Time=t.time;var n=ct(e.media||"",i),r=e.timescale||1,a=e.presentationTimeOffset||0,o=e.periodStart+(t.time-a)/r;return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:ke(e.baseUrl||"",n),map:s,number:t.number,presentationTime:o}}))},gt=function(e,t){var i=e.duration,n=e.segmentUrls,r=void 0===n?[]:n,s=e.periodStart;if(!i&&!t||i&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var a,o=r.map((function(t){return function(e,t){var i=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,s=Ge({baseUrl:i,source:r.sourceURL,range:r.range}),a=Ge({baseUrl:i,source:t.media,range:t.mediaRange});return a.map=s,a}(e,t)}));return i&&(a=We(e)),t&&(a=ht(e,t)),a.map((function(t,i){if(o[i]){var n=o[i],r=e.timescale||1,a=e.presentationTimeOffset||0;return n.timeline=t.timeline,n.duration=t.duration,n.number=t.number,n.presentationTime=s+(t.time-a)/r,n}})).filter((function(e){return e}))},ft=function(e){var t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=pt,t=Ue(n,r.template)):r.base?(i=ze,t=Ue(n,r.base)):r.list&&(i=gt,t=Ue(n,r.list));var s={attributes:n};if(!i)return s;var a=i(t,r.segmentTimeline);if(t.duration){var o=t,l=o.duration,d=o.timescale,h=void 0===d?1:d;t.duration=l/h}else a.length?t.duration=a.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return s.attributes=t,s.segments=a,r.base&&t.indexRange&&(s.sidx=a[0],s.segments=[]),s},mt=function(e){return e.map(ft)},vt=function(e,t){return qe(e.childNodes).filter((function(e){return e.tagName===t}))},yt=function(e){return e.textContent.trim()},bt=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(s||0)+3600*parseFloat(a||0)+60*parseFloat(o||0)+parseFloat(l||0)},St={mediaPresentationDuration:function(e){return bt(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return bt(e)},suggestedPresentationDelay:function(e){return bt(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return bt(e)},start:function(e){return bt(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?bt(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Et=function(e){return e&&e.attributes?qe(e.attributes).reduce((function(e,t){var i=St[t.name]||St.DEFAULT;return e[t.name]=i(t.value),e}),{}):{}},Tt={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},wt=function(e,t){return t.length?Fe(e.map((function(e){return t.map((function(t){return ke(e,yt(t))}))}))):e},_t=function(e){var t=vt(e,"SegmentTemplate")[0],i=vt(e,"SegmentList")[0],n=i&&vt(i,"SegmentURL").map((function(e){return Ue({tag:"SegmentURL"},Et(e))})),r=vt(e,"SegmentBase")[0],s=i||t,a=s&&vt(s,"SegmentTimeline")[0],o=i||r||t,l=o&&vt(o,"Initialization")[0],d=t&&Et(t);d&&l?d.initialization=l&&Et(l):d&&d.initialization&&(d.initialization={sourceURL:d.initialization});var h={template:d,segmentTimeline:a&&vt(a,"S").map((function(e){return Et(e)})),list:i&&Ue(Et(i),{segmentUrls:n,initialization:Et(l)}),base:r&&Ue(Et(r),{initialization:Et(l)})};return Object.keys(h).forEach((function(e){h[e]||delete h[e]})),h},At=function(e,t){return function(i,n){var r=wt(t,vt(i.node,"BaseURL")),s=Ue(e,{periodStart:i.attributes.start});"number"==typeof i.attributes.duration&&(s.periodDuration=i.attributes.duration);var a=vt(i.node,"AdaptationSet"),o=_t(i.node);return Fe(a.map(function(e,t,i){return function(n){var r,s=Et(n),a=wt(t,vt(n,"BaseURL")),o=vt(n,"Role")[0],l={role:Et(o)},d=Ue(e,s,l),h=vt(n,"Accessibility")[0],u="urn:scte:dash:cc:cea-608:2015"===(r=Et(h)).schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(e){var t,i;if(i=e,/^CC\d=/.test(e)){var n=e.split("=");t=n[0],i=n[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:i}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var i=e.split("="),n=i[0],r=i[1],s=void 0===r?"":r;t.channel=n,t.language=e,s.split(",").forEach((function(e){var i=e.split(":"),n=i[0],r=i[1];"lang"===n?t.language=r:"er"===n?t.easyReader=Number(r):"war"===n?t.aspectRatio=Number(r):"3D"===n&&(t["3D"]=Number(r))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;u&&(d=Ue(d,{captionServices:u}));var c=vt(n,"Label")[0];if(c&&c.childNodes.length){var p=c.childNodes[0].nodeValue.trim();d=Ue(d,{label:p})}var g=vt(n,"ContentProtection").reduce((function(e,t){var i=Et(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var n=Tt[i.schemeIdUri];if(n){e[n]={attributes:i};var r=vt(t,"cenc:pssh")[0];if(r){var s=yt(r);e[n].pssh=s&&function(e){for(var t,i=(t=e,Oe().atob?Oe().atob(t):Be.from(t,"base64").toString("binary")),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}(s)}}return e}),{});Object.keys(g).length&&(d=Ue(d,{contentProtection:g}));var f=_t(n),m=vt(n,"Representation"),v=Ue(i,f);return Fe(m.map(function(e,t,i){return function(n){var r=vt(n,"BaseURL"),s=wt(t,r),a=Ue(e,Et(n)),o=_t(n);return s.map((function(e){return{segmentInfo:Ue(i,o),attributes:Ue(a,{baseUrl:e})}}))}}(d,a,v)))}}(s,r,o)))}},Pt=function(e,t){void 0===t&&(t={});var i=t,n=i.manifestUri,r=void 0===n?"":n,s=i.NOW,a=void 0===s?Date.now():s,o=i.clientOffset,l=void 0===o?0:o,d=vt(e,"Period");if(!d.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var h=vt(e,"Location"),u=Et(e),c=wt([r],vt(e,"BaseURL"));u.type=u.type||"static",u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=a,u.clientOffset=l,h.length&&(u.locations=h.map(yt));var p=[];return d.forEach((function(e,t){var i=Et(e),n=p[t-1];i.start=function(e){var t=e.attributes,i=e.priorPeriodAttributes,n=e.mpdType;return"number"==typeof t.start?t.start:i&&"number"==typeof i.start&&"number"==typeof i.duration?i.start+i.duration:i||"static"!==n?null:0}({attributes:i,priorPeriodAttributes:n?n.attributes:null,mpdType:u.type}),p.push({node:e,attributes:i})})),{locations:u.locations,representationInfo:Fe(p.map(At(u,c)))}},It=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t,i,n=new xe.DOMParser;try{i=(t=n.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i},Rt="0.21.1",Ct=function(e,t){void 0===t&&(t={});var i=Pt(It(e),t),n=mt(i.representationInfo);return lt({dashPlaylists:n,locations:i.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},Nt=function(e){return function(e){var t=vt(e,"UTCTiming")[0];if(!t)return null;var i=Et(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i}(It(e))};function Dt(){var e=["9807840mRialm","../","targetDuration","1606162FrhDaH","attributes","bandwidth","playlists","resolvedUri","startsWith","replace","1626940ZUCnFa","uri","11HCbLKm","10OyrxVM","463458snMTIr","9002581OYtomN","1GKfANL","5616189iwwUoQ","36ACjgKV","segments","addSegment","parse","143604LMqGEs"];return(Dt=function(){return e})()}function Lt(e,t){var i=Dt();return(Lt=function(e,t){return i[e-=403]})(e,t)}!function(e){for(var t=Lt,i=e();;)try{if(940649==parseInt(t(414))/1*(-parseInt(t(424))/2)+parseInt(t(412))/3*(parseInt(t(416))/4)+parseInt(t(411))/5*(-parseInt(t(420))/6)+-parseInt(t(413))/7+parseInt(t(421))/8+parseInt(t(415))/9+-parseInt(t(408))/10*(parseInt(t(410))/11))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(Dt);class Ot{static parse(t,i,n,a){var o=Lt,l=i;try{var d=e[o(419)](l,{url:t})[o(404)];for(var h of d){var u=new Ae;u[o(403)]=h[o(425)].BANDWIDTH,u[o(409)]=h[o(405)],u[o(423)]=h[o(423)];var c=u[o(409)];for(var p of((!u.uri||""==u[o(409)])&&(c=h[o(425)]),n.addRendition(c,u),h[o(417)])){for(var g=p[o(409)];g[o(406)]("../");)g=g[o(407)](o(422),"");n[o(418)](c,p[o(405)],g)}}}catch(e){r.default.debug(s.BalancerTag,"Error parsing MPD manifest: ",e)}}}function kt(){var e=["download","Done ","includes","debug","createdAt","ifByteArrayToString","1519410MniqZD","search","Util","6hlvEPX","isMasterPlaylist","Problem slicing the array","isMedia","origRes","duration","function","announcedP2P","headers","onSuccess","cdnProvider","Fail","3RWDfuz","useP2P","size",".m3u8"," renditions -> ","initialEstimatedTime","resource","endsWith","floor","endTime","retries","8cRFtUP","retryBecauseNewHeaders","startTime","cachedSize","pathname","addParametersToUrl","byteLength","forceHttp","progressDownloadedBytes","finalUrl","url","lastEstimatedTime","route","11uujnXk","bandwidth","getRenditions","total","targetDuration","Range","getEntriesByType","_resource","Update P2P ID ","pathName","progressDownloadedBytesLastUpdate","arrayBuffer","failedOriginalCount","loaded","9822OECDle","p2pId","sliceByFirstSpecial","timeout","toJSON","406124EplFhR","95899quvxGI","activeP2PSendProcesses","realBodySize","1030WNLbNO","P2PManager","2419704OEpTJZ","now","triedP2P","random","hash","name","Parsed HLS manifest -> ","isManifest","params","getPerfLoadTime","verbose","uncompressedBytes","failed","segmentDuration","setContent","getNewUrl","BYTLELENGHT ","cdnName","round","data","triedCdns","504007EEeYMV","parse","trunc",".mpd","compressedBytes","instantBandwidth","Parsed DASH manifest -> ","downloadTimeMs","host","onProgress","3958236QPFjun","Success"];return(kt=function(){return e})()}var Bt=xt;function xt(e,t){var i=kt();return(xt=function(e,t){return i[e-=216]})(e,t)}!function(e){for(var t=xt,i=e();;)try{if(192943==parseInt(t(304))/1*(parseInt(t(248))/2)+-parseInt(t(260))/3*(-parseInt(t(303))/4)+-parseInt(t(307))/5*(parseInt(t(298))/6)+-parseInt(t(227))/7*(parseInt(t(271))/8)+-parseInt(t(309))/9+parseInt(t(245))/10+parseInt(t(284))/11*(parseInt(t(237))/12))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(kt);class Mt extends _{constructor(e,t,i,n,r,s,a){void 0===n&&(n={}),void 0===r&&(r=3),void 0===s&&(s=!1),void 0===a&&(a=!1);var o,l=xt;super(),this[l(293)]="",this.data=new ArrayBuffer(1),this.size=0,this[l(285)]=0,this[l(273)]=0,this.endTime=0,this[l(234)]=0,this[l(218)]=!1,this[l(301)]=!1,this[l(279)]=0,this[l(294)]=0,this[l(232)]=0,this[l(253)]=0,this[l(265)]=0,this[l(282)]=0,this.isManifest=!1,this[l(249)]=!1,this[l(251)]=!1,this[l(239)]=!0,this[l(306)]=0,this.readyForP2P=!0,this[l(255)]=!1,this[l(305)]=0,this[l(272)]=0,this[l(278)]=!1,this.peer=void 0,this[l(243)]=Date.now(),this[l(296)]=0,this[l(219)]=void 0;var d=new URL(t);this[l(281)]=t,this[l(280)]=t,this.origRes=t,this.host=d[l(235)],this[l(283)]=d[l(275)],this.params=d[l(246)],this[l(256)]=n,this[l(270)]=r,this[l(261)]=s,this[l(311)]=!1,this.cdnName="",this[l(258)]="",this[l(295)]=a,this.triedCdns=[],this[l(291)]=i,this[l(293)]=e,this.id=Math[l(268)](100*Math[l(312)]())+"-"+Date[l(310)]();var h=(null===(o=this.headers)||void 0===o?void 0:o[l(289)])||"";this[l(299)]=window.P2PManager?window[l(308)][l(247)].hash(this[l(293)]+h):""+this.pathName+h}updateP2PId(){var e,t=xt;if(window[t(308)]){var i=(null===(e=this[t(256)])||void 0===e?void 0:e[t(289)])||"";r.default[t(242)](s.BalancerTag,t(292)+this[t(293)]+i),this.p2pId=window[t(308)][t(247)][t(313)](this.pathName+i)}}[Bt(221)](e){var t=Bt,i=!1;this.isManifest?(this[t(316)]&&this[t(218)]||this[t(316)]&&e)&&(i=!0):i=!0;var n=i?this[t(280)]:this[t(281)];return this.params&&(n=n[t(241)]("?")?n+"&"+this[t(317)]:n+"?"+this[t(317)]),n}[Bt(276)](e){var t=Bt,i=e;return this[t(317)]&&i&&(i=i[t(241)]("?")?i+"&"+this[t(317)]:i+"?"+this[t(317)]),i}changeCDN(e,t,i){var n=Bt;if("ORIGINAL"!=i){var r=new URL(e);this[n(235)]=r[n(235)],this[n(283)]=r[n(275)],this[n(226)].push(t)}this[n(223)]=t,this[n(258)]=i}[Bt(220)](e){var t=Bt;this[t(225)]=e,this[t(262)]=e[t(277)],this.emit(a.yL[t(238)],{segment:this,data:e})}noContentObtained(){var e=Bt;this.emit(a.yL[e(259)],{segment:this})}[Bt(318)](e){var t,i=Bt;if("undefined"!=typeof performance&&typeof performance[i(290)]===i(254)){var n=performance.getEntriesByType(i(266));if(n&&n.length>0)for(var r of n){var s=r[i(302)]();if(null===(t=null==s?void 0:s[i(314)])||void 0===t?void 0:t[i(241)](e))return Math[i(224)](null==s?void 0:s[i(253)])}}return-1}[Bt(236)](e,t){var i=Bt;t[i(287)]>0&&(this[i(306)]=t[i(287)]),0==this[i(294)]&&(this[i(294)]=this[i(273)]);var n=Date[i(310)](),a=n-this.progressDownloadedBytesLastUpdate;if(this[i(269)]=Date[i(310)](),!(a<150)){0!=a&&(this.instantBandwidth=(t[i(297)]-this[i(279)])/((n-this.progressDownloadedBytesLastUpdate)/1e3)*8,this[i(294)]=n,t[i(297)]&&(this[i(279)]=t[i(297)]));var o=(n-this[i(273)])/(t[i(297)]/t.total);this[i(265)]=0==this.initialEstimatedTime?o:this[i(265)],this[i(282)]=o,this.duration>0&&0!=o&&1e3*this[i(253)]<o&&r.default[i(242)](s.BalancerTag,"High risk of buffer. "+this[i(252)]),r.default[i(216)](s.BalancerTag,i(240)+this[i(252)]+" Total time -> "+(Date.now()-this[i(273)]))}}[Bt(257)](e,t,i){void 0===i&&(i=!1);var n=Bt;if(this[n(269)]=Date[n(310)](),null==e||0==e.length)return!1;this.downloadTimeMs=this[n(269)]-this[n(273)],this[n(318)](this[n(283)]);var a=i?h[n(300)](this.url):this[n(281)],o=new URL(a)[n(275)];if(o.endsWith(n(263))){e=h[n(244)](e);var l=Ce[n(228)](this[n(281)],e,this._resource);this.isMasterPlaylist=l.isMasterPlaylist,r.default[n(242)](s.BalancerTag,n(315)+this[n(281)]+n(264)+this[n(291)][n(286)]()[n(262)]),null!=l[n(288)]&&(this[n(219)]=1e3*l[n(288)])}if(o[n(267)](n(230))){e=h[n(244)](e);var d={duration:void 0};Ot[n(228)](this[n(281)],e,this[n(291)],d),this[n(249)]=!0,r.default[n(242)](s.BalancerTag,n(233)+this[n(281)]+n(264)+this[n(291)][n(286)]()[n(262)]),null!=d[n(253)]&&(this[n(219)]=1e3*d[n(253)])}if(r.default[n(216)](s.BalancerTag,n(222)+e[n(277)]+" downloaded by p2p -> "+this[n(311)]),0!=e[n(277)])try{this.data=e.slice(0,e[n(277)]),this.size=this[n(234)]>5?this[n(225)][n(277)]:0,this[n(274)]=this.downloadTimeMs>5?0:this[n(225)][n(277)],this[n(285)]=Math[n(229)](this.downloadTimeMs>5?this.data.byteLength/(this[n(234)]/1e3):0),this[n(225)][n(277)]>0&&(this.realBodySize=this.data[n(277)]),this[n(232)]=0,this.progressDownloadedBytes=this[n(262)];var u=parseInt(t,10);!isNaN(u)&&u>0&&(this[n(231)]=u,this[n(217)]=this[n(225)][n(277)]||e[n(277)]||this[n(306)])}catch(e){r.default.debug(s.BalancerTag,n(250))}else this[n(225)][n(277)]!=this.realBodySize&&(this[n(225)]=new ArrayBuffer(1));return this[n(294)]=this[n(269)],!0}}function Ut(e,t){var i=qt();return(Ut=function(e,t){return i[e-=252]})(e,t)}var Vt=Ut;!function(e){for(var t=Ut,i=e();;)try{if(137885==parseInt(t(268))/1+-parseInt(t(266))/2*(-parseInt(t(253))/3)+parseInt(t(265))/4*(parseInt(t(291))/5)+parseInt(t(254))/6+-parseInt(t(258))/7*(-parseInt(t(270))/8)+parseInt(t(282))/9*(parseInt(t(286))/10)+parseInt(t(267))/11*(-parseInt(t(264))/12))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(qt);class Ft{constructor(){var e=Ut;this[e(277)]="",this.renditions=new Map,this[e(283)]="",this.fileName="",this[e(285)]=[],this[e(263)]=0,this[e(287)]=0,this[e(281)]=!1}[Vt(290)](){var e=Vt;this[e(281)]||this[e(263)]-this[e(287)]>1e5&&(this.cleaning=!0,this[e(259)](this.lastCleanPos,this[e(287)]+5e3),this[e(287)]=this[e(287)]+5e3,this[e(281)]=!1)}[Vt(261)](e,t,i){var n,r=Vt;this[r(263)]++,null===(n=this[r(280)][r(260)](e))||void 0===n||n[r(261)](t,i,this[r(263)])}[Vt(269)](){var e=Vt,t=0;for(var i of this.renditions[e(272)]())t+=i[e(262)]();return t}[Vt(259)](e,t){var i=Vt;for(var n of this[i(280)].values())for(var[r,s]of n[i(292)]())s.pos>=e&&s.pos<=t&&n[i(292)]().delete(r)}[Vt(284)](e,t){var i=Vt;this[i(280)][i(273)](e,t),this.updateAvailableBandwidths()}[Vt(275)](){return this.renditions}[Vt(252)](){var e=Vt,t=new Map;return this[e(280)][e(256)]((function(i,n){var r=e;i[r(278)]||t[r(273)](n,i)})),t}[Vt(257)](e){var t,i=Vt;return this[i(280)][i(256)]((function(n){var r=i;n[r(292)]()[r(256)]((function(i){var s=r;e[s(274)](i[s(289)])&&(t=n)}))})),t}[Vt(279)](){var e=Vt,t=new Array;this.renditions[e(256)]((function(i){var n=e;i[n(278)]||t.push(Number(i[n(288)]))})),t.sort((function(e,t){return e-t})),this.bandwidths=t,this[e(280)].forEach((t=>{var i=e;!t[i(278)]&&(t[i(255)]=this.getBandwidthsPos(t[i(288)]),t[i(255)]+1==this.bandwidths[i(276)]&&(t[i(271)]=!0))}))}getBandwidthsPos(e){var t=0,i=-1;return this[Vt(285)].forEach((function(n){e==n&&(i=t),t++})),i}}function qt(){var e=["addSegment","getSegmentsSize","pos","120ieZBVO","92132Dtjeoq","110syNhSA","733612jOTwhG","266193RMaJQr","getSize","97232HTzhNL","isMaxRendition","values","set","endsWith","getRenditions","length","masterUri","isAudio","updateAvailableBandwidths","renditions","cleaning","9yWHXcE","route","addRendition","bandwidths","199040MZcUzL","lastCleanPos","bandwidth","uri","clean","5uCKSpx","getSegments","getVideoRenditions","9366Pazeye","1141626SlIxwu","bandwidthPosition","forEach","getRendition","77IRIegi","delete","get"];return(qt=function(){return e})()}var Ht=Gt;function Gt(e,t){var i=Xt();return(Gt=function(e,t){return i[e-=454]})(e,t)}function Xt(){var e=["decision","next","cdnPriority","2319xLsSrA","now","replace","performHashmapCleanup","1137870fBbzcH","Empty response received from Balancer API","has","AS_ENABLED","582684kbxOIs","delete","setBalancerEnabled","size","done","fileName","Authorization","210krZQzA","_jwtToken","send","debug","forEach","route","Origin","getReportTimeout","LAST_USED_CDN","DECISION_FINISHED","__awaiter","parse","10374034akbpgK","wasSelectorCommunicationSuccessful","setActiveSwitchingOnLegacy","getIsEnabled","options","592076qLKREh","response","8QUHgNp","164727bMcYxw","getRouteAndFilename","_loader","GET","devHost","setReportTimeout","get","open","isUsingLegacy","start","BALANCER","then","messages","split","Error parsing Balancer API response: ","BalancerVariables","getInstance","diagnosticTool","unregisterCommonVariable","registerCommonVariable","-js","P2PLoader","value","_manifestMap","setVideoAnalyticsEnabled","shouldPerformDecision","qualityPriority","balancerEnabled"," in manifest hashmap","https://","status","verbose","code","timeout","isValidUrl","activeSwitching","setRequestHeader","318yLbHaC","adsAnalyticsEnabled","getCdnList","startMonitoring","formatParameters","getPluginVersion"," from manifest hashmap since older than ","slice","onload","origin","createUpdateTimer","Using development environment -> ","PROFILE_NAME","onSucessfullApiResponse","disable","Storing ","decisionReloadIntervalPerManifestMilliseconds"," for /decision requests","pathname","5rcvpLk","setSettings","onFailedApiResponse","API call failed with status code ","true","CDNLoader","Products","Empty response received","API call failed due to a network error.","2154082eTRNVl","includes","BUCKET","deleteOldestFromManifestMap"];return(Xt=function(){return e})()}!function(e){for(var t=Gt,i=e();;)try{if(210669==parseInt(t(490))/1*(-parseInt(t(455))/2)+parseInt(t(494))/3+-parseInt(t(522))/4*(parseInt(t(474))/5)+parseInt(t(498))/6+-parseInt(t(483))/7*(parseInt(t(524))/8)+parseInt(t(525))/9*(-parseInt(t(505))/10)+parseInt(t(517))/11)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(Xt);class jt{constructor(e,t,i){var n=Ht;this._manifestMap=new Map,this[n(527)]=e,this._jwtAuthType=t,this[n(506)]=i}loadBalancerData(e,i,n,o,l,d,u,c,p,g,f){return m=this,y=function*(){var m=Gt;if(this._loader[m(520)]()){if(!this[m(550)](i))return r.default[m(508)](s.BalancerTag,"Not performing decision since time between requests has not passed yet."),void this[m(465)](e,i,n,o,null!=l&&l,null!=d&&d,c,p,g,f);var v=Date[m(491)](),y=h[m(559)](i)?this[m(526)](i):{route:"",fileName:""};r.default[m(556)](s.BalancerTag,m(466)+d);var b=d?a.df[m(529)]:a.df.host;b=g||b,r.default[m(508)](s.BalancerTag,"Using "+b+m(472));var S=new XMLHttpRequest,E=b+"/"+e+"/"+(c?c+"/":"")+m(487);E=E[m(492)]("//","/"),E=m(554)+E;var T={resource:""+y[m(510)]+y[m(503)],live:""+n,extended:m(478),npawPluginInfo:"true",originCode:null!=p?p:"",v:t.default[m(460)]()[m(538)](m(545))[0],dynamicRules:null!=f?f:""},w=this;yield new Promise(((e,n)=>{var o=m;S[o(463)]=function(){var n,l,d,h,u,g,f,m,b,E,T,_=o;if(4===S.readyState){if(S[_(555)]>0&&(10===w[_(548)][_(501)]&&!w[_(548)][_(496)](i)&&w[_(486)](),w[_(493)](),w._manifestMap.set(i,Date.now()),r.default.verbose(s.BalancerTag,_(470)+i+_(553))),S[_(555)]>=200&&S[_(555)]<=300){var A=Date[_(491)]()-v;w._loader[_(479)][_(468)](A);try{if(S[_(523)]){w.options=JSON[_(516)](S[_(523)]),t.default[_(541)]()[_(544)](le.default[_(480)][_(535)],le.default.BalancerVariables[_(467)],c),t.default[_(541)]()[_(544)](le.default[_(480)][_(535)],le.default[_(540)][_(485)],p),w._loader.storage.setSettings(w.options),w[_(527)][_(546)]&&(w._loader[_(546)][_(475)](w[_(521)]),w[_(527)][_(546)][_(458)]()),w._loader[_(479)][_(475)](w[_(521)],y[_(510)]),w[_(527)][_(479)][_(458)]();var P=[a.m[_(489)],a.m[_(551)]][_(484)](w[_(521)][_(560)])&&w[_(527)][_(479)][_(457)]()[_(501)]>0;t.default.getInstance()[_(533)]()?t.default[_(541)]()[_(519)](P):t.default[_(541)]().registerCommonVariable(le.default.Products[_(535)],le.default[_(540)][_(497)],P),B.default.getInstance()[_(518)](!0),B.default[_(541)]()[_(500)](null===(l=null===(n=w[_(521)])||void 0===n?void 0:n[_(542)])||void 0===l?void 0:l[_(552)]),B.default.getInstance()[_(549)](null===(h=null===(d=w[_(521)])||void 0===d?void 0:d.diagnosticTool)||void 0===h?void 0:h.videoAnalyticsEnabled),B.default[_(541)]().setAdsAnalyticsEnabled(null===(g=null===(u=w[_(521)])||void 0===u?void 0:u[_(542)])||void 0===g?void 0:g[_(456)]),B.default.getInstance()[_(530)](null===(m=null===(f=w[_(521)])||void 0===f?void 0:f.diagnosticTool)||void 0===m?void 0:m[_(558)])}else r.default[_(508)](s.BalancerTag,_(495)),w[_(527)][_(546)][_(469)](),w[_(527)][_(479)].gotEmptyResponse(),B.default[_(541)]()[_(518)](!1,_(481)),t.default.getInstance()[_(544)](le.default[_(480)][_(535)],le.default.BalancerVariables[_(513)],_(511))}catch(e){r.default[_(508)](s.BalancerTag,_(539),e)}}else{var I=JSON[_(516)](S[_(523)]);B.default[_(541)]()[_(518)](!1,I[_(537)][0][_(557)]),t.default.getInstance().registerCommonVariable(le.default[_(480)].BALANCER,le.default.BalancerVariables.LAST_USED_CDN,_(511)),r.default.debug(s.BalancerTag,_(477)+S.status),w[_(527)][_(479)][_(476)]()}t.default[_(541)]().registerCommonVariable(le.default[_(480)][_(535)],le.default[_(540)][_(514)],!0);var R=B.default[_(541)]()[_(512)]();R!=B.default.defaultReportTimeout&&(null!==(T=null===(E=null===(b=w.options)||void 0===b?void 0:b[_(542)])||void 0===E?void 0:E[_(558)])&&void 0!==T?T:R)!=R&&(B.default[_(541)]().clearReportTimeout(),B.default[_(541)]()[_(534)]())}e()},S.onerror=function(){var t=o;w[t(527)][t(479)].onFailedApiResponse(),r.default[t(508)](s.BalancerTag,t(482)),e()},u?S[o(532)](o(528),E+h[o(459)](T),!1):S[o(532)](o(528),E+h[o(459)](T)),t.default.getInstance()[o(544)](le.default[o(480)][o(535)],le.default.BalancerVariables[o(514)],!1),t.default[o(541)]()[o(543)](le.default[o(480)][o(535)],le.default.BalancerVariables[o(467)]),t.default[o(541)]()[o(543)](le.default.Products[o(535)],le.default[o(540)].BUCKET),t.default[o(541)]()[o(543)](le.default[o(480)][o(535)],le.default.BalancerVariables.AS_ENABLED),r.default[o(556)](s.BalancerTag,"Performing decision request with URL "+E+h[o(459)](T)+" + (host: "+b+")"),w._jwtToken&&S[o(454)](o(504),w._jwtAuthType+" "+w[o(506)]),S[o(507)]()})),this.createUpdateTimer(e,i,n,o,null!=l&&l,null!=d&&d,c,p,g)}else t.default.getInstance().registerCommonVariable(le.default[m(480)][m(535)],le.default.BalancerVariables[m(514)],!0)},new((v=void 0)||(v=Promise))((function(e,t){function i(e){var i=Gt;try{r(y[i(488)](e))}catch(e){t(e)}}function n(e){try{r(y.throw(e))}catch(e){t(e)}}function r(t){var r,s=Gt;t[s(502)]?e(t[s(547)]):(r=t[s(547)],r instanceof v?r:new v((function(e){e(r)})))[s(536)](i,n)}r((y=y.apply(m,[])).next())}));var m,v,y}[Ht(465)](e,t,i,n,a,o,l,d,h,u){var c=Ht;n>0&&(r.default[c(556)](s.BalancerTag,"Creating setTimeout for decision request with resource "+t),setTimeout((()=>{var r,s=c;this.loadBalancerData(e,t,i,n,a,o,null!==(r=this[s(521)].signManifestUsingApi)&&void 0!==r&&r,l,d,h,u)}),1e3*n))}[Ht(526)](e){var t=Ht,i=new URL(e),n=i[t(464)]+i[t(473)],r=n.lastIndexOf("/")+1;return{route:n[t(462)](0,r),fileName:n[t(462)](r)}}[Ht(550)](e){var t,i=Ht;if(!this[i(548)][i(496)](e))return!0;var n=null!==(t=this._manifestMap[i(531)](e))&&void 0!==t?t:Date[i(491)]();return Date.now()-n>a.df[i(471)]}[Ht(493)](){var e=Ht;this._manifestMap[e(509)](((t,i)=>{var n=e;Date.now()-t>a.df[n(471)]&&(r.default[n(556)](s.BalancerTag,"Removing "+i+n(461)+a.df[n(471)]+"ms"),this._manifestMap.delete(i))}))}[Ht(486)](){var e,t=Ht,i=1/0;this[t(548)][t(509)](((t,n)=>{t<i&&(i=t,e=n)})),void 0!==e&&this[t(548)][t(499)](e)}}function Wt(e,t){var i=zt();return(Wt=function(e,t){return i[e-=379]})(e,t)}function zt(){var e=["9wfebmr","1091960RrslaF","then","progressDownloadedBytesLastUpdate","3448082iOSTHe","startTime","9055boEdPb","downloadTimeMs","throw","828735uuWiHQ","value","now","done","2PlscvM","7YASUmS","delay","502785dQeneg","769290rxxkLk","1354794XFKvHm","bandwidth","endTime","size","4OnpAZI"];return(zt=function(){return e})()}!function(e){for(var t=Wt,i=e();;)try{if(141094==parseInt(t(401))/1*(-parseInt(t(385))/2)+parseInt(t(381))/3*(-parseInt(t(394))/4)+parseInt(t(388))/5+parseInt(t(390))/6+-parseInt(t(386))/7*(parseInt(t(396))/8)+parseInt(t(395))/9*(-parseInt(t(389))/10)+parseInt(t(399))/11)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(zt);class Kt{limit(e,t){return i=this,r=function*(){var i=Wt,n=t[i(393)]/(t[i(379)]/1e3)*8;if(0!=e&&n>e){var r=1e3*t[i(393)]*8/e,s=(Date[i(383)](),t.startTime,r-t.downloadTimeMs);s>0&&(yield h[i(387)](s)),t.endTime=Date[i(383)](),t[i(379)]=t[i(392)]-t[i(400)],t[i(391)]=t[i(393)]/(t[i(379)]/1e3),t.instantBandwidth=0,t[i(398)]=t[i(392)]}},new((n=void 0)||(n=Promise))((function(e,t){function s(e){try{o(r.next(e))}catch(e){t(e)}}function a(e){var i=Wt;try{o(r[i(380)](e))}catch(e){t(e)}}function o(t){var i,r=Wt;t[r(384)]?e(t[r(382)]):(i=t.value,i instanceof n?i:new n((function(e){e(i)})))[r(397)](s,a)}o((r=r.apply(i,[])).next())}));var i,n,r}}function Yt(e,t){var i=Qt();return(Yt=function(e,t){return i[e-=477]})(e,t)}function Qt(){var e=["response_time_samples","max_throughput","switches","internal_switches_due_errors","min_response_bytes","http_5XX","throughput_samples","13900mEjLvu","max_network_latency","response_time","uncompressed_video_bytes","is_active","min_ping_time","network_latency","192544SScLDb","253604mLxWPL","errors","internal_is_banned","http_2XX","is_p2p","1503Ygefft","internal_switches_due_quality","http_1XX","16aVpgjY","35823bItKJx","response_bytes_samples","1749643RqMPzV","internal_unbanned","internal_unbanned_time","banned","downloaded_chunks","switches_due_connectivity","266235RzQXnx","is_banned","max_response_time","max_ping_time","http_3XX","8guiCFF","unbanned_time","http_4XX","video_downloaded_bytes","switches_due_errors","6euAiRo","4154205yLiEqM","min_throughput","compressed_video_bytes","internal_banned","max_bandwidth","internal_banned_time","provider","internal_provider","cache_hit_chunks","time","unbanned","response_bytes"];return(Qt=function(){return e})()}!function(e){for(var t=Yt,i=e();;)try{if(181810==-parseInt(t(477))/1+-parseInt(t(486))/2*(-parseInt(t(487))/3)+-parseInt(t(478))/4+parseInt(t(495))/5*(-parseInt(t(505))/6)+parseInt(t(489))/7*(parseInt(t(500))/8)+-parseInt(t(483))/9*(parseInt(t(525))/10)+parseInt(t(506))/11)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(Qt);class $t{constructor(e,t,i,n,r,s,a,o,l,d,h,u,c,p,g,f,m,v,y,b,S,E,T,w,_,A,P,I,R,C,N,D,L,O,k,B,x,M,U,V,F,q,H,G,X,j,W,z,K,Y,Q,$,J,Z,ee,te,ie,ne,re,se){var ae=Yt;this[ae(512)]=e,this[ae(513)]=t,this[ae(482)]=i,this.downloaded_bytes=r,this[ae(493)]=s,this[ae(517)]=b,this[ae(522)]=S,this.max_response_bytes=E,this[ae(488)]=T,this[ae(527)]=w,this.min_response_time=_,this[ae(497)]=A,this[ae(518)]=P,this[ae(531)]=I,this.min_network_latency=R,this[ae(526)]=C,this.network_latency_samples=N,this.throughput=D,this[ae(507)]=L,this[ae(519)]=O,this[ae(524)]=k,this[ae(479)]=a,this[ae(485)]=B,this[ae(481)]=x,this[ae(499)]=M,this[ae(502)]=U,this[ae(523)]=V,this[ae(501)]=F,this.banned_time=q,this[ae(508)]=G,this[ae(528)]=H,this[ae(520)]=X,this[ae(494)]=j,this[ae(504)]=W,this.switches_due_quality=z,this[ae(515)]=o,this[ae(510)]=l,this.min_bandwidth=d,this[ae(492)]=Y,this[ae(516)]=Q,this.avg_ping_time=h,this[ae(530)]=u,this[ae(498)]=c,this[ae(496)]=K,this[ae(529)]=n,this.resource=p,this[ae(527)]=w,this[ae(514)]=g,this.cache_miss_chunks=f,this[ae(503)]=m,this.video_downloaded_chunks=v,this.video_time=y,this[ae(480)]=$,this[ae(509)]=J,this[ae(490)]=Z,this.internal_switches=ee,this[ae(484)]=te,this.internal_switches_due_connectivity=ie,this[ae(521)]=ne,this[ae(511)]=re,this[ae(491)]=se}}function Jt(){var e=["response_time_samples","peer_discovery_time","response_bytes_samples","min_network_latency","throughput","other_errors","video_downloaded_bytes","peers_available","3681170GicMRO","throughput_samples","2sHRJuY","490147SSnEuh","active_peers","4405872TApJci","uploaded_bytes","timeout_errors","659309HiRiiK","downloaded_bytes","2378184sdzCkY","18OnPRPu","response_time","time","late_uploaded_bytes","max_response_time","min_response_time","max_ping_time","avg_ping_time","is_p2p","network_latency","min_bandwidth","12987351oFvxfk","max_peers_parallel_used","network_latency_samples","min_response_bytes","response_bytes","511845NjMOdM","resource","max_throughput","peer_connection_time","late_uploaded_chunks","video_downloaded_chunks","max_network_latency","video_time","downloaded_chunks","errors","max_peers_available","peers_used","internal_provider","min_ping_time","min_peers_parallel_used"];return(Jt=function(){return e})()}function Zt(e,t){var i=Jt();return(Zt=function(e,t){return i[e-=198]})(e,t)}!function(e){for(var t=Zt,i=e();;)try{if(372416==-parseInt(t(242))/1+-parseInt(t(241))/2*(parseInt(t(216))/3)+parseInt(t(199))/4+-parseInt(t(239))/5+parseInt(t(200))/6*(parseInt(t(247))/7)+-parseInt(t(244))/8+parseInt(t(211))/9)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(Jt);class ei{constructor(e,t,i,n,r,s,a,o,l,d,h,u,c,p,g,f,m,v,y,b,S,E,T,w,_,A,P,I,R,C,N,D,L,O,k,B,x,M,U,V,F,q,H,G,X,j,W,z,K,Y,Q,$){var J=Zt;this.provider=e,this[J(228)]=t,this[J(208)]=i,this[J(198)]=n,this[J(224)]=r,this[J(225)]=s,this[J(202)]=a,this.max_bandwidth=o,this[J(210)]=l,this[J(207)]=d,this[J(229)]=h,this[J(206)]=u,this[J(217)]=c,this[J(237)]=p,this[J(221)]=g,this[J(223)]=f,this[J(245)]=m,this.uploaded_chunks=v,this.upload_time=y,this[J(220)]=b,this[J(203)]=S,this.late_downloaded_bytes=E,this.missed_downloaded_chunks=T,this[J(246)]=w,this[J(236)]=_,this[J(243)]=A,this.peers=P,this[J(215)]=I,this[J(214)]=R,this.max_response_bytes=C,this[J(233)]=N,this[J(201)]=D,this[J(205)]=L,this[J(204)]=O,this[J(231)]=k,this[J(209)]=B,this[J(234)]=x,this[J(222)]=M,this[J(213)]=U,this[J(235)]=V,this.min_throughput=F,this[J(218)]=q,this[J(240)]=H,this[J(238)]=G,this[J(226)]=X,this.min_peers_available=j,this[J(227)]=W,this.peers_parallel_used=z,this[J(212)]=K,this[J(230)]=Y,this[J(232)]=Q,this[J(219)]=$}}function ti(e,t){var i=ni();return(ti=function(e,t){return i[e-=279]})(e,t)}!function(e){for(var t=ti,i=e();;)try{if(439165==-parseInt(t(290))/1+parseInt(t(284))/2*(parseInt(t(293))/3)+-parseInt(t(283))/4+parseInt(t(288))/5*(-parseInt(t(298))/6)+-parseInt(t(286))/7+parseInt(t(289))/8+parseInt(t(291))/9*(parseInt(t(300))/10))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(ni);class ii{constructor(e,t,i,n,r,s,a,o,l,d,h,u,c,p,g,f){var m=ti;this[m(285)]=e,this[m(281)]=t,this[m(294)]=i,this.apiCallsAvgResponseTime=n,this[m(282)]=r,this.bucket=s,this[m(279)]=a,this[m(280)]=o,this[m(299)]=l,this[m(292)]=d,this[m(297)]=h,this.bolinaAvailable=u,this.activeSwitchingPriority=c,this[m(296)]=p,this[m(287)]=g,this[m(295)]=f}}function ni(){var e=["announcedCdns","priorityCdn","p2pAvailable","24KznHMf","forceDecision","64550TldyrF","isLive","videoId","apiCallResponses","apiCallsMaxResponseTime","1611216MHqOzi","585934iDHbZy","apiCallErrors","5013694rnCEcX","chunkDuration","316685JmnEpk","1702536DhEpEt","753370ksPSyE","2871GrQIXs","requestPlatform","3VRMTFV","apiCallsMinResponseTime"];return(ni=function(){return e})()}function ri(){var e=["minPeersAvailable","http_1XX","maxPeersAvailable","maxApiCallResponseTime","codavelBanCount","getSegmentDuration","lastReportedCodavelSwitchesDueToQuality","downloadChunksVideo","some","codavelSwitchesDueToQuality","codavelSwitchesDueToConnectivity","P2P","maxThroughput","error","bolinaAvailable","Plugin","samplesNetworkLatency","internal_provider","setTriedSendingBalancerStats","resource","CDN","MAX_SAFE_INTEGER","GET","http_5XX","discardedUploadedBytes","lateUploadedChunks","pushPeriodicDataFromCallback","minPingTime","reportRequest","isCodavel","maxNetworkLatency","compressedBytes","set","get","started","undefined","cacheHit","AnalyticsVariables","takeMax","BALANCER_TRAFFIC","lastReportedCodavelBanTime","BALANCER","downloadedSegments","p2pAvailable","getOptions","active","minNetworkLatency","920858VHeNOo","6wDmdTQ","chunkDuration","minApiCallResponseTime","discardedUploadedChunks","http5xxResponses","profileName","lastCdnStats","minThroughput","lastReportedCodavelSwitches","http_3XX","report","sumNetworkLatency","wasStartSent","otherErrors","VIDEO_ANALYTICS","sumVideoBytes","sumResponseTime","uncompressedBytes","12555036oBGEIf","avgPingTime","downloadMillisVideo","http_4XX","bannedCount","_instance","timeoutErrors","getCommonVariable","bucket","getFastDataSessionToken","minResponseTime","trunc","maxPingTime","downloadedChunks","http1xxResponses","videoTime","total","isUsingLegacy","http_2XX","bannedTime","switchesDueToQuality","minBandwidth","samplesResponseBytes","addNQSRequest","totalFail","downloadedBytes","provider","verbose","sumResponseBytes","getCdnList","uploadedChunks","CDNLoader","Products","1560535FqIOdy","unbannedTime","peersUsed","maxPeersParallelUsed","forceDecision","peersAvailable","1160vpnGdn","getPluginVersion","lowestPingTime","switches","errors","apiCallErrors","lastReportedCodavelUnbanCount","apply","takeIf","codavelUnbanTime","name","millis","-js","split","discardedDownloadedBytes","failedRequests","totalFailures","getCdnCacheHits","714441OouYzY","minPeersParallelUsed","activePeers","lastReportedCodavelSwitchesDueToConnectivity","size","getFastDataService","startsWith","lastP2pStats","codavelSwitchesDueToErrors","done","apiCallsMinResponseTime","host","avgApiCallResponseTime","videoId","then","getIsLive","minResponseBytes","from","stopped","apiCallsAvgResponseTime","values","maxResponseTime","forEach","isLive","highestSegmentBandwidth","maxResponseBytes","uuid","uploadedBytes","getPingTime","stringify","peerConnectionTime","__awaiter","announcedCdns","1985192pSdRlD","http3xxResponses","totalPeers","resetOnPing","lastReportedCodavelBanCount","sumThroughput","uploadedTime","getStats","BalancerVariables","timeout","getTime","getViewCode","lastReportedCodavelUnbanTime","lateDownloadedBytes","Consumer","BalancerPing: ","keys","http2xxResponses","switchesDueToErrors","apiCallResponses","peersParallelUsed","downloadBytesVideo","priorityCdn","cacheMiss","banned","updateCodavelBanTimes","registerCommonVariable","30720qRwDOd","getReportInterval","getInstance","isEnabled","codavelSwitches","throw","clone","868mSJYuF","samplesResponseTime","peerDiscoveryTime","samplesThroughput","updateData","downloadedChunksVideo","downloadedBytesVideo","codavelUnbanCount","codavelBanTime","CODAVEL","sumVideoTime","http4xxResponses","P2PLoader","downloadMillis","missedDownloadedChunks","switchesDueToConnectivity","getForceDecision","activeSwitchingPriority","token","unbannedCount","updatePeerMetrics","accountCode","getCdnCacheMisses","lastReportedCodavelSwitchesDueToErrors","unBannedCount","maxBandwidth","processedApiCall","absent","takeMin","lowestSegmentBandwidth","loader"];return(ri=function(){return e})()}var si=ai;function ai(e,t){var i=ri();return(ai=function(e,t){return i[e-=424]})(e,t)}!function(e){for(var t=ai,i=e();;)try{if(315617==-parseInt(t(471))/1+-parseInt(t(556))/2+parseInt(t(632))/3+-parseInt(t(444))/4+-parseInt(t(608))/5*(parseInt(t(557))/6)+parseInt(t(478))/7*(-parseInt(t(614))/8)+parseInt(t(575))/9)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(ri);class oi{static[si(473)](e){var t=si;return null==this[t(580)]&&null!=e?this[t(580)]=new oi(e):null!=e&&null!=this._instance&&(null==e?void 0:e[t(437)])!=this[t(580)][t(508)][t(437)]&&(this[t(580)].report(),this[t(580)]=new oi(e)),this._instance}constructor(e){var t=si;this[t(543)]=!1,this.stopped=!1,this[t(563)]=new Map,this.lastP2pStats=new Map,this.host="",this[t(496)]="",this[t(499)]="",this.profileName="",this[t(528)]="",this[t(549)]=void 0,this[t(456)]=void 0,this[t(448)]=void 0,this[t(620)]=void 0,this[t(565)]=void 0,this[t(515)]=void 0,this.lastReportedCodavelSwitchesDueToErrors=void 0,this.lastReportedCodavelSwitchesDueToConnectivity=void 0,this[t(508)]=e}[si(482)](e,i,n,r,o){var l,d,h,u;return d=this,u=function*(){var d=ai;if(this[d(643)]=e,this[d(496)]=i,this[d(499)]=n,this.profileName=null!=r?r:"",this[d(528)]=o,!(t.default[d(473)]()[d(592)]()&&this[d(496)][d(638)](d(544))||this.started)){var h=a.xC[d(529)];t.default[d(473)]()[d(535)](t.default[d(473)]()[d(553)]().offline?le.default[d(458)].BLACK_HOLE:le.default.Consumer.NQS,h,h,1e3*this.loader[d(472)](),null!==(l=t.default[d(473)]()[d(582)](le.default[d(607)][d(571)],le.default[d(546)].METHOD_OPTION))&&void 0!==l?l:s.Method[d(531)],(()=>{var e=d;if(t.default[e(473)]()[e(569)]())return B.default[e(473)]()[e(527)](!0),oi[e(473)]()[e(567)]()}),(()=>{var e=d;B.default.getInstance()[e(598)](h)})),this[d(543)]=!0}},new((h=void 0)||(h=Promise))((function(e,t){function i(e){try{r(u.next(e))}catch(e){t(e)}}function n(e){var i=ai;try{r(u[i(476)](e))}catch(e){t(e)}}function r(t){var r,s=ai;t[s(641)]?e(t.value):(r=t.value,r instanceof h?r:new h((function(e){e(r)})))[s(425)](i,n)}r((u=u[ai(621)](d,[])).next())}))}[si(567)](){var e=si;try{if(!this[e(429)]){var i,n=this[e(508)][e(606)][e(604)](),a=Array[e(428)](n[e(431)]()).every((e=>!e.usedOrProbed)),o=new Map;i=a?new Map:new Map(n);var l=0,d=0;this[e(508)].CDNLoader[e(469)](),this[e(508)][e(490)][e(498)]();var h=!1;if(i[e(433)]((t=>{var i=e;t.updateAvailability();var n=t[i(477)](),r=this.lastCdnStats[i(542)](t[i(624)]);l+=n[i(572)]||0,d+=n[i(488)]||0;var s={downloadedBytesVideo:n.downloadedBytesVideo,downloadedChunksVideo:n[i(483)],videoTime:n[i(577)],downloadedBytes:n.downloadedBytes,downloadedChunks:n.downloadedChunks,sumResponseBytes:n[i(603)],minResponseBytes:n[i(427)],maxResponseBytes:n[i(436)],samplesResponseBytes:n.samplesResponseBytes,sumResponseTime:n[i(573)],minResponseTime:n.minResponseTime,maxResponseTime:n[i(432)],samplesResponseTime:n[i(479)],sumNetworkLatency:n[i(568)],minNetworkLatency:n[i(555)],maxNetworkLatency:n[i(539)],samplesNetworkLatency:n[i(525)],sumThroughput:n[i(449)],minThroughput:n[i(564)],maxThroughput:n[i(521)],samplesThroughput:n.samplesThroughput,totalFailures:n.totalFail,http_1XX:n[i(589)],http_2XX:n.http2xxResponses,http_3XX:n[i(445)],http_4XX:n[i(489)],http_5XX:n.http5xxResponses,unbannedTime:n.unbannedTime,bannedTime:n.bannedTime,compressedBytes:n.compressedBytes,uncompressedBytes:n.uncompressedBytes,switches:n.switches,switchesDueToConnectivity:n[i(493)],switchesDueToErrors:n.switchesDueToErrors,switchesDueToQuality:n[i(595)],millis:n[i(491)],bannedCount:n.bannedCount,unbannedCount:n.unBannedCount,avgPingTime:n[i(576)],minPingTime:n[i(616)]===Number[i(530)]?0:n.lowestPingTime,maxPingTime:n.highestPingTime,cacheHit:n[i(631)](),cacheMiss:n[i(500)](),minBandwidth:n[i(507)]===Number.MAX_SAFE_INTEGER?0:n[i(507)],maxBandwidth:n.highestSegmentBandwidth};r&&(s[i(484)]-=r[i(484)],s.downloadedChunksVideo-=r[i(483)],s[i(590)]-=r[i(577)],s[i(600)]-=r[i(600)],s[i(588)]-=r[i(588)],s[i(630)]-=r[i(599)],null!=s[i(510)]&&null!=r[i(589)]&&(s[i(510)]-=r[i(589)]),null!=s.http_2XX&&null!=r.http2xxResponses&&(s[i(593)]-=r[i(461)]),null!=s[i(566)]&&null!=r.http3xxResponses&&(s.http_3XX-=r[i(445)]),null!=s.http_4XX&&null!=r[i(489)]&&(s.http_4XX-=r[i(489)]),null!=s[i(532)]&&null!=r[i(561)]&&(s[i(532)]-=r[i(561)]),null!=s[i(540)]&&null!=r[i(540)]&&(s.compressedBytes-=r[i(540)]),null!=s[i(574)]&&null!=r[i(574)]&&(s[i(574)]-=r[i(574)]),null!=s.switches&&null!=r[i(617)]&&(s.switches-=r[i(617)]),null!=s[i(493)]&&null!=r[i(493)]&&(s[i(493)]-=r[i(493)]),null!=s[i(462)]&&null!=r[i(462)]&&(s[i(462)]-=r[i(462)]),null!=s[i(595)]&&null!=r[i(595)]&&(s[i(595)]-=r.switchesDueToQuality),s[i(625)]-=r.downloadMillis,s.bannedCount-=r[i(579)],s[i(497)]-=r[i(502)],s[i(576)]-=r.avgPingTime,s[i(536)]=0==s[i(536)]?s[i(536)]:s.minPingTime-r.lowestPingTime,s[i(587)]=0==s[i(587)]?s[i(587)]:s[i(587)]-r.highestPingTime,s[i(545)]-=r[i(631)](),s[i(467)]-=r.getCdnCacheMisses(),s.minBandwidth=0==s[i(596)]?s[i(596)]:s[i(596)]-r[i(507)],s[i(503)]=0==s[i(503)]?s.maxBandwidth:s[i(503)]-r[i(435)]);var a=t.isCodavel()?i(487):t[i(601)];if(t[i(538)]())if(h){var u=new $t(a,t.internal_provider,!1,t[i(554)],this[i(622)](s[i(600)],(e=>0!=e)),this[i(622)](s[i(588)],(e=>0!=e)),this[i(622)](s[i(630)],(e=>0!=e)),this[i(622)](s[i(625)],(e=>0!=e)),this[i(622)](s.maxBandwidth,(e=>0!=e)),this.takeIf(s[i(596)],(e=>0!=e)),this[i(622)](s.avgPingTime,(e=>0!=e)),this[i(622)](s.minPingTime,(e=>0!=e)),this.takeIf(s[i(587)],(e=>0!=e)),this[i(528)],this[i(622)](s[i(545)],(e=>0!=e)),this[i(622)](s[i(467)],(e=>0!=e)),this[i(622)](s[i(484)],(e=>0!=e)),this[i(622)](s[i(483)],(e=>0!=e)),this.takeIf(s[i(590)],(e=>0!=e)),s[i(603)],this[i(506)](s.minResponseBytes),this.takeMax(s[i(436)]),s[i(597)],s[i(573)],this[i(506)](s.minResponseTime),this.takeMax(s[i(432)]),s[i(479)],s[i(568)],this[i(506)](s[i(555)]),this[i(547)](s[i(539)]),s.samplesNetworkLatency,s[i(449)],this[i(506)](s[i(564)]),this[i(547)](s.maxThroughput),s.samplesThroughput,this[i(622)](s[i(510)],(e=>0!=e)),this[i(622)](s[i(593)],(e=>0!=e)),this[i(622)](s[i(566)],(e=>0!=e)),this[i(622)](s.http_4XX,(e=>0!=e)),this[i(622)](s[i(532)],(e=>0!=e)),void 0,void 0,this[i(622)](s.uncompressedBytes,(e=>0!=e)),this.takeIf(s[i(540)],(e=>0!=e)),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.banned,this[i(622)](s[i(579)],(e=>0!=e)),this[i(622)](s.unbannedCount,(e=>0!=e)),this[i(622)](s.switches,(e=>0!=e)),this[i(622)](s[i(493)],(e=>0!=e)),this.takeIf(s[i(462)],(e=>0!=e)),this.takeIf(s.switchesDueToQuality,(e=>0!=e)),s.bannedTime,s[i(609)]);o[i(541)](t[i(624)],u),this[i(563)][i(541)](t[i(624)],n)}else{var c=0;null!=this[i(508)].CDNLoader[i(513)]&&(c=null!=this[i(448)]?this[i(508)][i(606)].codavelBanCount-this.lastReportedCodavelBanCount:this[i(508)][i(606)][i(513)]);var p=0;null!=this[i(508)][i(606)][i(485)]&&(p=null!=this[i(620)]?this[i(508)][i(606)].codavelUnbanCount-this.lastReportedCodavelUnbanCount:this[i(508)][i(606)][i(485)]);var g=0;null!=this[i(508)].CDNLoader.codavelBanTime&&(g=null!=this[i(549)]?this[i(508)].CDNLoader[i(486)]-this.lastReportedCodavelBanTime:this.loader[i(606)][i(486)]);var f=0;null!=this[i(508)].CDNLoader[i(623)]&&(f=null!=this[i(456)]?this[i(508)][i(606)][i(623)]-this[i(456)]:this[i(508)].CDNLoader[i(623)]);var m=0;null!=this[i(508)][i(606)][i(475)]&&(m=null!=this[i(565)]?this[i(508)][i(606)][i(475)]-this[i(565)]:this[i(508)].CDNLoader[i(475)]);var v=0;null!=this[i(508)].CDNLoader[i(518)]&&(v=null!=this[i(515)]?this[i(508)][i(606)][i(518)]-this.lastReportedCodavelSwitchesDueToQuality:this[i(508)][i(606)].codavelSwitchesDueToQuality);var y=0;null!=this[i(508)][i(606)][i(519)]&&(y=null!=this[i(635)]?this.loader[i(606)][i(519)]-this.lastReportedCodavelSwitchesDueToConnectivity:this[i(508)][i(606)][i(519)]);var b=0;null!=this[i(508)][i(606)][i(640)]&&(b=null!=this[i(501)]?this[i(508)][i(606)].codavelSwitchesDueToErrors-this.lastReportedCodavelSwitchesDueToErrors:this[i(508)].CDNLoader.codavelSwitchesDueToErrors);var S=new $t(a,t[i(526)],!1,t.active,this[i(622)](s[i(600)],(e=>0!=e)),this[i(622)](s[i(588)],(e=>0!=e)),this[i(622)](s[i(630)],(e=>0!=e)),this[i(622)](s.millis,(e=>0!=e)),this.takeIf(s.maxBandwidth,(e=>0!=e)),this[i(622)](s[i(596)],(e=>0!=e)),this[i(622)](s.avgPingTime,(e=>0!=e)),this.takeIf(s[i(536)],(e=>0!=e)),this[i(622)](s.maxPingTime,(e=>0!=e)),this[i(528)],this[i(622)](s[i(545)],(e=>0!=e)),this.takeIf(s[i(467)],(e=>0!=e)),this.takeIf(s[i(484)],(e=>0!=e)),this[i(622)](s[i(483)],(e=>0!=e)),this.takeIf(s[i(590)],(e=>0!=e)),s[i(603)],this[i(506)](s[i(427)]),this[i(547)](s[i(436)]),s.samplesResponseBytes,s.sumResponseTime,this[i(506)](s[i(585)]),this[i(547)](s[i(432)]),s[i(479)],s[i(568)],this.takeMin(s.minNetworkLatency),this.takeMax(s[i(539)]),s[i(525)],s[i(449)],this[i(506)](s.minThroughput),this.takeMax(s[i(521)]),s[i(481)],this[i(622)](s[i(510)],(e=>0!=e)),this[i(622)](s[i(593)],(e=>0!=e)),this[i(622)](s[i(566)],(e=>0!=e)),this[i(622)](s[i(578)],(e=>0!=e)),this.takeIf(s[i(532)],(e=>0!=e)),f,g,this[i(622)](s[i(574)],(e=>0!=e)),this[i(622)](s[i(540)],(e=>0!=e)),this.takeIf(m,(e=>0!=e)),this[i(622)](y,(e=>0!=e)),this.takeIf(b,(e=>0!=e)),this[i(622)](v,(e=>0!=e)),this.loader[i(606)].codavelAllBanned,this[i(622)](c,(e=>0!=e)),this.takeIf(p,(e=>0!=e)),t.banned,this[i(622)](s.bannedCount,(e=>0!=e)),this[i(622)](s[i(497)],(e=>0!=e)),this[i(622)](s[i(617)],(e=>0!=e)),this.takeIf(s[i(493)],(e=>0!=e)),this[i(622)](s[i(462)],(e=>0!=e)),this[i(622)](s[i(595)],(e=>0!=e)),s.bannedTime,s[i(609)]);o.set(t[i(624)],S),this[i(563)][i(541)](t.name,n),h=!0}else{var E=new $t(a,t[i(526)],!1,t[i(554)],this.takeIf(s[i(600)],(e=>0!=e)),this[i(622)](s.downloadedChunks,(e=>0!=e)),this[i(622)](s[i(630)],(e=>0!=e)),this[i(622)](s[i(625)],(e=>0!=e)),this[i(622)](s.maxBandwidth,(e=>0!=e)),this[i(622)](s[i(596)],(e=>0!=e)),this[i(622)](s[i(576)],(e=>0!=e)),this[i(622)](s[i(536)],(e=>0!=e)),this[i(622)](s[i(587)],(e=>0!=e)),this.resource,this.takeIf(s[i(545)],(e=>0!=e)),this[i(622)](s[i(467)],(e=>0!=e)),this[i(622)](s[i(484)],(e=>0!=e)),this.takeIf(s[i(483)],(e=>0!=e)),this.takeIf(s[i(590)],(e=>0!=e)),s.sumResponseBytes,this[i(506)](s[i(427)]),this[i(547)](s[i(436)]),s[i(597)],s[i(573)],this[i(506)](s[i(585)]),this[i(547)](s.maxResponseTime),s[i(479)],s[i(568)],this[i(506)](s[i(555)]),this.takeMax(s.maxNetworkLatency),s[i(525)],s.sumThroughput,this[i(506)](s[i(564)]),this[i(547)](s[i(521)]),s[i(481)],this.takeIf(s[i(510)],(e=>0!=e)),this[i(622)](s[i(593)],(e=>0!=e)),this[i(622)](s[i(566)],(e=>0!=e)),this.takeIf(s[i(578)],(e=>0!=e)),this[i(622)](s[i(532)],(e=>0!=e)),s[i(609)],s[i(594)],this[i(622)](s[i(574)],(e=>0!=e)),this[i(622)](s.compressedBytes,(e=>0!=e)),this.takeIf(s[i(617)],(e=>0!=e)),this[i(622)](s[i(493)],(e=>0!=e)),this[i(622)](s.switchesDueToErrors,(e=>0!=e)),this[i(622)](s[i(595)],(e=>0!=e)),t[i(468)],this[i(622)](s[i(579)],(e=>0!=e)),this.takeIf(s[i(497)],(e=>0!=e)));o.set(t.name,E),this.lastCdnStats[i(541)](t[i(624)],n)}})),this[e(508)].P2PLoader[e(474)]()){var u=this[e(508)][e(490)][e(451)](),c=this[e(639)][e(542)]("P2P");l+=u[e(572)]||0,d+=u[e(488)]||0;var p={downloadedBytes:u[e(600)],downloadedChunks:u[e(551)],errors:u[e(629)].total,millis:u.downloadMillis,maxBandwidth:u[e(503)],minBandwidth:u.minBandwidth===Number[e(530)]?0:u.minBandwidth,avgPingTime:u[e(576)],minPingTime:u.minPingTime===Number[e(530)]?0:u.minPingTime,maxPingTime:u[e(587)],downloadMillisVideo:u[e(577)],downloadBytesVideo:u[e(465)],downloadChunksVideo:u[e(516)],uploadedBytes:u[e(438)],uploadedChunks:u[e(605)],uploadedTime:u[e(450)],lateUploadedChunks:u.discardedUploadedChunks,lateUploadedBytes:u[e(533)],lateDownloadedBytes:u[e(628)],missedDownloadedChunks:u[e(629)][e(505)],timeoutErrors:u.failedRequests[e(453)],otherErrors:u[e(629)][e(522)],activePeers:u[e(634)],totalPeers:u[e(446)],sumResponseBytes:u[e(603)],minResponseBytes:u[e(427)],maxResponseBytes:u[e(436)],samplesResponseBytes:u.samplesResponseBytes,sumResponseTime:u.sumResponseTime,minResponseTime:u[e(585)],maxResponseTime:u.maxResponseTime,samplesResponseTime:u[e(479)],sumNetworkLatency:u[e(568)],minNetworkLatency:u.minNetworkLatency,maxNetworkLatency:u.maxNetworkLatency,samplesNetworkLatency:u[e(525)],sumThroughput:u.sumThroughput,minThroughput:u[e(564)],maxThroughput:u.maxThroughput,samplesThroughput:u.samplesThroughput,peersAvailable:u[e(613)],minPeersAvailable:u[e(509)],maxPeersAvailable:u.maxPeersAvailable,peersUsed:u.peersUsed,peersParallelUsed:u[e(464)],minPeersParallelUsed:u.minPeersParallelUsed,maxPeersParallelUsed:u[e(611)],peerDiscoveryTime:u.peerDiscoveryTime,peerConnectionTime:u[e(441)]};c&&(p.downloadedBytes-=c[e(600)],p.downloadedChunks-=c.downloadedSegments,p[e(618)]-=c[e(629)][e(591)],p[e(625)]-=c[e(491)],p[e(503)]=0==p.maxBandwidth?p[e(503)]:p[e(503)]-c[e(503)],p[e(596)]=0==p[e(596)]?p[e(596)]:p.minBandwidth-c[e(596)],p[e(576)]-=c[e(576)],p.minPingTime=0==p[e(536)]?p.minPingTime:p.minPingTime-c[e(536)],p[e(587)]=0==p[e(587)]?p.maxPingTime:p[e(587)]-c[e(587)],p[e(536)]-=c[e(536)],p.maxPingTime-=c[e(587)],p.downloadMillisVideo-=c.downloadMillisVideo,p[e(465)]-=c.downloadBytesVideo,p[e(516)]-=c[e(516)],p[e(438)]-=c.uploadedBytes,p[e(605)]-=c[e(605)],p[e(450)]-=c.uploadedTime,p[e(534)]-=c[e(560)],p.lateUploadedBytes-=c.discardedUploadedBytes,p[e(457)]-=c[e(628)],p[e(492)]-=c[e(629)].absent,p[e(581)]-=c[e(629)].timeout,p[e(570)]-=c.failedRequests[e(522)],p.activePeers-=c.activePeers,p[e(446)]-=c[e(446)],null!=p[e(613)]&&null!=c[e(613)]&&(p.peersAvailable-=c[e(613)]),null!=p[e(610)]&&null!=c.peersUsed&&(p.peersUsed-=c[e(610)]),null!=p[e(464)]&&null!=c.peersParallelUsed&&(p.peersParallelUsed-=c.peersParallelUsed),null!=p[e(480)]&&null!=c.peerDiscoveryTime&&(p[e(480)]-=c.peerDiscoveryTime),null!=p[e(441)]&&null!=c[e(441)]&&(p[e(441)]-=c[e(441)]));var g=new ei(e(520),e(520),!0,this[e(622)](p[e(600)],(e=>0!=e)),this[e(622)](p[e(588)],(e=>0!=e)),this.takeIf(p.errors,(e=>0!=e)),this[e(622)](p[e(625)],(e=>0!=e)),this[e(622)](p[e(503)],(e=>0!=e)),this.takeIf(p[e(596)],(e=>0!=e)),this.takeIf(p[e(576)],(e=>0!=e)),this[e(622)](p.minPingTime,(e=>0!=e)),this[e(622)](p[e(587)],(e=>0!=e)),this[e(528)],this.takeIf(p[e(465)],(e=>0!=e)),this.takeIf(p[e(516)],(e=>0!=e)),this[e(622)](p[e(577)],(e=>0!=e)),this[e(622)](p[e(438)],(e=>0!=e)),this[e(622)](p[e(605)],(e=>0!=e)),this[e(622)](p[e(450)],(e=>0!=e)),this[e(622)](p[e(534)],(e=>0!=e)),this[e(622)](p.lateUploadedBytes,(e=>0!=e)),this[e(622)](p[e(457)],(e=>0!=e)),this[e(622)](p[e(492)],(e=>0!=e)),this[e(622)](p.timeoutErrors,(e=>0!=e)),this[e(622)](p[e(570)],(e=>0!=e)),this[e(622)](p[e(634)],(e=>0!=e)),this[e(622)](p[e(446)],(e=>0!=e)),p.sumResponseBytes,p[e(427)],p.maxResponseBytes,p[e(597)],p[e(573)],p[e(585)],p[e(432)],p.samplesResponseTime,p[e(568)],p[e(555)],p.maxNetworkLatency,p[e(525)],p.sumThroughput,p.minThroughput,p[e(521)],p[e(481)],this[e(622)](p[e(613)],(e=>0!=e)),this[e(547)](p[e(511)]),this[e(506)](p[e(509)]),this[e(622)](p[e(610)],(e=>0!=e)),this.takeIf(p.peersParallelUsed,(e=>0!=e)),this[e(547)](p[e(611)]),this.takeMin(p[e(633)]),this[e(622)](p.peerDiscoveryTime,(e=>0!=e)),this[e(622)](p[e(441)],(e=>0!=e)));o.set(e(520),g),this[e(639)].set(e(520),u)}var f={};o[e(433)](((e,t)=>{f[t]=e}));var m,v=d>0?8*l*1e3/d:0;if(t.default[e(473)]()[e(470)](le.default[e(607)][e(550)],le.default.BalancerVariables[e(548)],l),t.default[e(473)]()[e(470)](le.default.Products[e(550)],le.default[e(452)].BALANCER_BITRATE,v),this.loader.CDNLoader[e(504)]&&(m=new ii(this[e(508)][e(606)][e(619)],this[e(508)][e(606)][e(463)],void 0!==this[e(508)][e(606)][e(559)]?Math[e(586)](this[e(508)][e(606)][e(559)]):void 0,void 0!==this.loader[e(606)][e(644)]?Math[e(586)](this[e(508)][e(606)][e(644)]):void 0,void 0!==this[e(508)][e(606)][e(512)]?Math[e(586)](this[e(508)][e(606)][e(512)]):void 0,this[e(508)].CDNLoader.getBucket(),this[e(508)][e(606)][e(426)](),this[e(496)],this[e(508)][e(606)][e(494)](),e(524),this[e(508)].CDNLoader[e(552)],this[e(508)][e(606)][e(523)],this[e(508)][e(606)].activeSwitchingPriority,this[e(508)][e(606)][e(466)],this[e(508)][e(606)][e(514)](),this[e(508)].CDNLoader[e(443)])),i.forEach((e=>{e.resetOnPing()})),this[e(508)][e(490)].isEnabled()&&this[e(508)][e(490)][e(447)](),this[e(508)][e(606)][e(447)](),r.default[e(602)](s.BalancerTag,e(459)+JSON[e(440)](f)),o[e(636)]>0)return this[e(537)](this[e(496)],this.accountCode,this[e(562)],this.resource,JSON[e(440)](f),m)}}catch(e){}}hasValuesChanged(e){var t=si;return Object[t(460)](e)[t(517)]((t=>0!=e[t]))}[si(622)](e,t){return void 0!==e&&t(e)?e:void 0}takeMin(e){return void 0!==e?e:Number[si(530)]}[si(547)](e){return void 0!==e?e:Number.MIN_SAFE_INTEGER}reportRequest(e,i,n,r,s,a){var o=si;if(""!=s&&"{}"!=s)return null!=a?{timemark:(new Date)[o(454)](),code:t.default.getInstance().isUsingLegacy()?t.default[o(473)]()[o(455)]():e,sessionRoot:t.default.getInstance()[o(584)](),v:t.default.getPluginVersion()[o(627)](o(626))[0],pluginVersion:t.default.getPluginVersion(),pingTime:t.default[o(473)]()[o(637)]()[o(439)](),token:e,accountCode:i,profileName:n,data:s,api_errors:a[o(619)],api_responses:a[o(463)],api_min_response_time:a[o(642)],api_avg_response_time:a[o(430)],api_max_response_time:a.apiCallsAvgResponseTime,bucket:a[o(583)],is_live:a[o(434)],video_id:a[o(424)],force_decision:a[o(612)],request_platform:a.requestPlatform,p2p_available:a[o(552)],bolina_available:a[o(523)],active_switching_priority:a[o(495)],priority_cdn:a[o(466)],chunk_duration:a[o(558)],announced_cdns:a[o(443)]}:{timemark:(new Date)[o(454)](),code:t.default[o(473)]()[o(592)]()?t.default[o(473)]().getViewCode():e,sessionRoot:t.default[o(473)]()[o(584)](),v:t.default[o(615)]().split(o(626))[0],pingTime:t.default[o(473)]()[o(637)]()[o(439)](),token:e,accountCode:i,profileName:n,data:s}}}var li,di={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},hi=new Uint8Array(16);function ui(){if(!li&&!(li="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return li(hi)}for(var ci=[],pi=0;pi<256;++pi)ci.push((pi+256).toString(16).slice(1));var gi=function(e,t,i){if(di.randomUUID&&!t&&!e)return di.randomUUID();var n=(e=e||{}).random||(e.rng||ui)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var r=0;r<16;++r)t[i+r]=n[r];return t}return function(e,t){return void 0===t&&(t=0),ci[e[t+0]]+ci[e[t+1]]+ci[e[t+2]]+ci[e[t+3]]+"-"+ci[e[t+4]]+ci[e[t+5]]+"-"+ci[e[t+6]]+ci[e[t+7]]+"-"+ci[e[t+8]]+ci[e[t+9]]+"-"+ci[e[t+10]]+ci[e[t+11]]+ci[e[t+12]]+ci[e[t+13]]+ci[e[t+14]]+ci[e[t+15]]}(n)},fi=mi;function mi(e,t){var i=vi();return(mi=function(e,t){return i[e-=226]})(e,t)}function vi(){var e=["onProcessSegmentFail","4AbErul","updateProgressStats","getRendition","done","downloadMillis","options","currentRenditionPos","profileName","resource","requestReadTimeout","AnalyticsVariables","P2P","5502546GlQlNw","onProcessSegmentSuccess","updateUrl","__awaiter","loadStartEM","disable","newDownloadedSegment","Success","debug","updateCDNStatsOnSuccess","bandwidth","isEnabled","getInstance","readyStateChangeEM","jwtToken","isMedia","loadCDNBalancerData","useP2P","segmentsMap","error","91828CHuKUn","status","toString","realBodySize","timeBetweenBurstsMilliseconds","headers","reportTime","isAudio","url","100gnKbxz","isManifest","2314103IsVFdo","5491565zeYqSq","bandwidthPosition","downloadedBytes","CDNLoader","VIDEO_ANALYTICS","apply","Products","now","onAbort","enable","clean","delete","64611NVxfvz","getSegment","isLive","17YjTlob","storage","getStats"," -> ","_accountCode","byteLength","signManifestUsingApi"," isAudio ","getReportInterval","timeout","Fail","enableCDN will be deprecated use setActive instead.","enableCDN","push","off","getCommonVariable","P2PLoader","toLowerCase","triedP2P","setActive","targetDuration","size","getResponseHeader","loadEndEM","cdnName","download","processSegment","_resource","failed"," for ","8793267aPsMEC","updateTime","_balancerBusinessObject","trunc","getFastDataSessionToken","hasOwnProperty","downloadedSegments","downloadAvgBw","progressEM","getVideoRenditions","SEGMENT FAILED WITH STATUS ","setMaxBandwidth","apiHost","P2P PATH FOR ID ","balanceManifests","data","VIEW_CODE","response","camelToSnake","errorEM","abort","uuid","set","length","_options","1112IvUtHR","then","verbose","host","timeBetweenHeads","getIsEnabled","storeSegment","value","throw","dynamicRules","request","startTime","forceDecisionCall","setMaxBandwith","stringify","allowSpecialDelimitersInUrl","isDev","Request was canceled due a timeout -> ","bucketName","pathname","d1.npaw.com","statsReportBusinessObject","statusCode","Segment request failed, no more retries ","_segments","retries","updateData","totalDownloadedBytes","setManifestResource","cdns","href","updateCDNStatsOnFailure","readTimeoutMilliseconds","2572242kzifIX","route","_$1","Detected rendition -> ","total","loadEM","totalBandwidth"];return(vi=function(){return e})()}!function(e){for(var t=mi,i=e();;)try{if(704436==-parseInt(t(240))/1*(parseInt(t(368))/2)+-parseInt(t(328))/3+-parseInt(t(336))/4*(parseInt(t(380))/5)+-parseInt(t(348))/6+parseInt(t(270))/7+-parseInt(t(295))/8*(-parseInt(t(237))/9)+parseInt(t(377))/10*(parseInt(t(379))/11))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(vi);class yi{constructor(e,t,i){var n=fi;this._segments=new Map,this[n(366)]=new Map,this[n(359)]=!0,this[n(244)]=e,this._options=t,this[n(267)]=new Ft,this[n(241)]=new me(this),this[n(282)]=i,this._options[n(299)]&&this[n(294)][n(299)]>=1e3&&(a.wc[n(372)]=this._options[n(299)]),this.P2PLoader=new $(this[n(244)],t,this.storage),this[n(228)]=new ce(t,this._resource,this[n(256)],this[n(282)]),this[n(316)]=oi[n(360)](this),re.getInstance(this),z[n(360)](this.P2PLoader),this[n(291)]=gi();var r=new jt(this,null==t?void 0:t.jwtAuthType,null==t?void 0:t[n(362)]);this[n(272)]=r,(t[n(307)]||t[n(246)])&&this.loadCDNBalancerData(!0)}[fi(248)](){var e=fi;return!this[e(294)][e(374)]||this[e(294)][e(374)]<1?5:this[e(294)].reportTime}camelToSnake(e){var t=fi,i={};for(var n in e)e[t(275)](n)&&(i[n.replace(/([A-Z])/g,t(330))[t(257)]()]=e[n]);return i}[fi(364)](e){var t,i,n,r,s,a,o,l,d,h,u=fi,c=this[u(294)].dynamicRules?JSON[u(309)](this[u(288)](this._options[u(304)])):"";null!=e&&e&&this._balancerBusinessObject.loadBalancerData(this[u(244)],"/",null!==(t=this._options[u(239)])&&void 0!==t&&t,null!==(i=this._options[u(271)])&&void 0!==i?i:0,null!==(n=this._options[u(356)])&&void 0!==n&&n,null!==(r=this[u(294)].isDev)&&void 0!==r&&r,null!==(s=this[u(294)].signManifestUsingApi)&&void 0!==s&&s,this[u(294)][u(343)],this[u(294)][u(313)],this[u(294)].host,c),this[u(294)][u(344)]&&""!=this[u(294)][u(344)]&&this._balancerBusinessObject.loadBalancerData(this[u(244)],this[u(294)].resource,null!==(a=this[u(294)][u(239)])&&void 0!==a&&a,null!==(o=this[u(294)][u(271)])&&void 0!==o?o:0,null!==(l=this[u(294)][u(356)])&&void 0!==l&&l,null!==(d=this[u(294)][u(311)])&&void 0!==d&&d,null!==(h=this._options[u(246)])&&void 0!==h&&h,this._options[u(343)],this._options.bucketName,this[u(294)][u(298)],c)}[fi(266)](e,i,n,o,l,d,u){void 0===l&&(l=a._C[fi(320)]),void 0===d&&(d=!1);var c=fi,p=h[c(363)](e[c(314)]),g=!p&&h.isManifest(e[c(314)],this._options.allowSpecialDelimitersInUrl),f=this[c(256)][c(359)]()&&p;r.default[c(297)](s.BalancerTag,c(283)+e[c(314)]);var m=new Mt(e[c(314)],e[c(325)],this[c(267)],o,l,f,d);if(m[c(265)]=i,m[c(373)]=o,this[c(319)].set(m.id,m),!g){var v=this[c(267)][c(338)](e[c(314)]);null!=v&&(r.default[c(297)](s.BalancerTag,c(331)+v[c(358)]+" "+(null==v?void 0:v.bandwidthPosition)+c(247)+v[c(375)]+c(269)+e),m.duration=v[c(260)],m.rendition=v,!v[c(375)]&&(this[c(228)].currentRenditionBandwidth=v[c(358)],this.CDNLoader[c(342)]=v[c(226)]+1,this[c(228)].renditionCount=this._resource[c(279)]()[c(261)]))}this[c(267)]&&this[c(267)][c(235)]();var y=t.default[c(360)]()[c(255)](le.default[c(231)][c(229)],le.default[c(346)][c(286)]),b=t.default[c(360)]()[c(274)]()+(y?"_"+y:"");!b&&(b=this.uuid),this[c(316)][c(321)](c(315),b,this[c(244)],this[c(294)][c(343)],e[c(370)]()),m[c(378)]=g,m[c(363)]=p,i&&(m.on(a.yL.Success,(e=>{return t=this,r=function*(){this[c(349)](m),n[0](m)},new((i=void 0)||(i=Promise))((function(e,n){function s(e){try{o(r.next(e))}catch(e){n(e)}}function a(e){var t=mi;try{o(r[t(303)](e))}catch(e){n(e)}}function o(t){var n,r=mi;t[r(339)]?e(t[r(302)]):(n=t[r(302)],n instanceof i?n:new i((function(e){e(n)})))[r(296)](s,a)}o((r=r[mi(230)](t,[])).next())}));var t,i,r})),m.on(a.yL[c(250)],(e=>{var t=c;this[t(335)](m,!0),0==m[t(320)]&&n[t(293)]>1&&n[1](),r.default[t(367)](s.BalancerTag,t(318)+m[t(329)])})));var S=this[c(228)][c(350)](m);return m[c(378)]&&this[c(294)][c(284)]&&(m.url=null!=S?S:m[c(376)]),S!==c(347)?this[c(228)].getActiveRequests()[c(292)](m.id,m):(m[c(264)]=c(347),m.cdnProvider=c(347),this.P2PLoader[c(305)](m,void 0)),m[c(306)]=Date[c(232)](),m}[fi(335)](e,t){var i=fi,n=e[i(264)];e.failed=!0,this[i(228)][i(326)](n,e),e[i(258)]&&1==e[i(365)]&&(e[i(365)]=!1,this[i(228)][i(350)](e))}[fi(349)](e){var t=fi;re[t(360)]()[t(354)](e),z[t(360)]()[t(354)](e),e.off(a.yL[t(355)]),e[t(254)](a.yL.Fail);var i=this[t(228)].getMaxBandwidth(e[t(264)]);i>0&&(new Kt).limit(i,e),this.CDNLoader[t(357)](e),this.CDNLoader.removeActiveSegment(e),this[t(256)][t(359)]()&&e[t(363)]&&!this[t(256)][t(238)](e)&&this[t(256)].storeSegment(e),this._segments[t(236)](e.id)}[fi(252)](e,t){var i=fi;return r.default.warn(s.BalancerTag,i(251)),this[i(259)](e,t)}[fi(259)](e,t){var i=fi;return e===i(347)?(t?this.P2PLoader[i(234)]():this[i(256)].disable(),!0):this[i(228)].changeStatusCDN(e,t)}[fi(308)](e,t){var i=fi;return e!==i(347)&&(this[i(228)][i(281)](e,t)||!1)}[fi(233)](e,t){var i=fi;t&&!t[i(268)]&&t.timeout&&(r.default[i(356)](s.BalancerTag,i(312)+t.url),this[i(335)](t,!1))}[fi(333)](e,t,i){}[fi(352)](e,t,i){var n=fi;null!=t&&i[n(332)]>0&&this[n(256)][n(359)]()&&t[n(363)]&&!this[n(256)][n(238)](t)&&e[n(287)]&&e.response[n(245)]&&e[n(287)][n(245)]>0&&(t[n(285)]=e.response,t[n(371)]=i[n(332)],this[n(256)][n(301)](t))}[fi(278)](e,t,i){var n=fi;null!=t&&(this[n(256)][n(359)]()&&t[n(363)]&&!this.P2PLoader[n(238)](t)&&e[n(287)]&&e[n(287)].byteLength&&e.response[n(245)]>0&&(r.default[n(356)](s.BalancerTag,"the status is -> "+e[n(369)]),t[n(285)]=e[n(287)],i.total>0&&(t[n(371)]=i[n(332)]),this.P2PLoader[n(301)](t)),t.onProgress(e,i),this.CDNLoader[n(337)]())}[fi(361)](e,t,i){var n=fi;switch(e.readyState){case 2:t&&!t.requestReadTimeout&&(t.requestReadTimeout=setTimeout((()=>this[n(249)](e,t)),a._C[n(327)]));break;case 4:if(null!=t){if(clearTimeout(t[n(345)]),delete t[n(345)],t[n(317)]=e[n(369)],e[n(369)]>=200&&e[n(369)]<400){var o=t.onSuccess(e[n(287)],e[n(262)]("Content-Length")||"0",i[n(341)][n(310)]);return t[n(378)]&&i[n(323)](t.url),o?this[n(349)](t):this.onProcessSegmentFail(t,!1),!0}return r.default[n(356)](s.BalancerTag,n(280)+e[n(369)]+n(243)+t.id),this.onProcessSegmentFail(t,!1),!1}}return!0}[fi(249)](e,t){var i=fi;t[i(249)]=!0,e[i(290)]()}[fi(263)](e,t,i){}[fi(289)](e,t,i){}[fi(242)](){var e=fi,t=this.CDNLoader[e(242)](),i=this[e(256)][e(242)](),n=!1,r=0;return i&&this[e(256)]&&this.CDNLoader[e(242)]()[e(322)]>0&&(n=!0,r=8*i[e(227)]/(i[e(340)]/1e3)),this[e(256)].isEnabled()&&(t[e(324)][e(253)]({downloadedBytes:i[e(227)]||0,downloadedChunks:i[e(276)]||0,bandwidth:Math[e(273)](r||0),instantBandwidth:Math.trunc(0),lastInstantBandwidth:Math.trunc(0),peakBandwidth:Math[e(273)](0),failures:0,totalFailures:0,retries:0,downloadTime:i[e(340)],provider:e(347),profileName:e(347),isActive:this[e(256)][e(359)](),ptb:0,usedOnce:n,hugeChunks:0,firstHugeChunkSize:0,lastChunksLapse:0,maxBandwidth:0,banned:!1,lastBandwidth:0,scoringBandwidth:0}),t[e(334)]=t[e(334)]+(i[e(277)]||0),t.totalDownloadedBytes=t[e(322)]+(i[e(227)]||0)),t}[fi(234)](){this[fi(359)]=!0}[fi(353)](){this[fi(359)]=!1}[fi(300)](){return this[fi(359)]}}var bi=Ei;function Si(){var e=["notice","isAsync","isBitmovin","CDNLoader","media","response","verbose","P2P Error on event load start","processSegment","isManifest","resource","P2P/SMB Traffic ","next","params","value"," segmnet p2p id -> "," ip: ","updateUrl","open","length","resetP2PConnection","apiHost","balancer","gnsnpaw.com","method"," original -> ","sliceByFirstSpecial","retryBecauseNewHeaders","50456HLcHuJ","Sending join to tracker due to new manifest","onreadystatechange","isMedia","getIp","getPeersAhead","getUploadedChunks","3666852AoelIN","STREBOOS"," peer version: ","timeouts","P2P2 Download done -> ","set"," last length -> ","6BjHwez","blob"," TIME: ","P2P TIMEOUTERROR BY ME: ","isEnabled","XHR-not-intercepted -> ","realBodySize","options","getId","now","startsWith","arraybuffer","progress","lastDecisionTimestamp","elapsedTime","pathname","toString","send","getUploadRequests","P2P","P2P TIMEOUTERROR BY NO DATA ME:","allowSpecialDelimitersInUrl","responseType","setInterceptedRequests","loader","map","forceHttp","join"," peer version ","signManifestUsingApi","loadInterceptor","simpleRequest","segment","getStats","5kPGbFF","getResponseHeader","buffer","defineProperty","isSubtitles","data","DONE","responseHeader","getInstance","Destroying CDN Balancer","addEventListener"," TIMEOUTS ","uploaded: (MB/#/%) ","manifest","includes","overrideMimeType","loadStartEM","debug","P2P DISPATCH LOAD ","addInterceptor","getIsEnabled","shift","responseURL","enable","downloadedChunks","1707016uuloiU","search","1031504fYtQWz","interceptors","slice","updateP2PId","components","isDev","P2P Error on event ready state change","getLoader","byteLength","P2P DISPATCH LOAD START","&rnpaw=","request","connectTimeoutMilliseconds","MB(CDN/SB/P2P) ","status"," UniqPeers: ","provider","935546sSlrnc","getSegment","HTTP for -> ","2491371auHuie","origRes","FORCE","p2pId","getAccountCode","_accountCode","setResourceInfo","isAudio","setRequestHeader","getUploadedUniqPeers","then","undefined","call","split","readyState","headers","STREBOPX","cdns","progressEM","Fetching segment via P2P for -> ","body","useTheoplayer","balanceManifests","P2P READY FOR ","destroy","defaultChunkDownloadTimeout","error","toFixed","host","getUploadedBytes","Range","kb ","loadCDNBalancerData","stopMonitor","Fetching segment via CDN for -> ","loadstart","disable","segmentsMap","balanceAudio","prototype","__awaiter","abort","balanceSubtitles","loadend","dispatchEvent","P2PLoader","setManifestResource"," PEER ID -> ","readystatechange","getNewUrl","P2P TIMEOUTERROR ","?rnpaw="," peer id: ","size","ms id:","onAbort","getRecommendedManifest","getPeersNothing","getPeers","getVersion","url","statusText","requestHeader","ifByteArrayToString","getBitmovinSendHttpRequest","GET","apply","delete","Error on request ","getAllResponseHeaders","timeout","peer","isTheoplayer","allResponseHeader","downloadedBytes","1974057QYpzLe","P2P Error on event load end","load","openAndSend","ur: "," downloaded through P2P. Size: ","timeToFirstByte"];return(Si=function(){return e})()}function Ei(e,t){var i=Si();return(Ei=function(e,t){return i[e-=480]})(e,t)}!function(e){for(var t=Ei,i=e();;)try{if(373539==parseInt(t(661))/1+parseInt(t(548))/2+parseInt(t(626))/3+parseInt(t(529))/4*(-parseInt(t(504))/5)+parseInt(t(675))/6*(-parseInt(t(668))/7)+-parseInt(t(531))/8+parseInt(t(551))/9)break;i.push(i.shift())}catch(e){i.push(i.shift())}}(Si);class Ti extends _{constructor(e,t){var i,n=bi;if(super(),this.isEnabled=!0,this[n(576)]=0,this[n(635)]=!1,this[n(623)]=!1,this[n(483)]=0,this[n(654)]=n(656),this._accountCode=e,this[n(682)]=new S,this[n(494)]=new yi(this[n(556)],this[n(682)],this[n(654)]),this[n(532)]=new v(this),t&&typeof(null===(i=t[n(535)])||void 0===i?void 0:i[n(655)])!==n(562)&&!t[n(535)].balancer)return this[n(679)]=!1,this[n(494)].disable(),void this[n(494)][n(596)][n(587)]();var o=this;this[n(511)]=XMLHttpRequest.prototype.getResponseHeader,XMLHttpRequest[n(590)][n(505)]=function(e){return o[n(511)].call(this,e)},this.allResponseHeader=XMLHttpRequest[n(590)][n(620)],XMLHttpRequest.prototype[n(620)]=function(){var e=n;return o[e(624)][e(563)](this)},this[n(592)]=XMLHttpRequest.prototype[n(592)],XMLHttpRequest.prototype[n(592)]=function(){var e=n,t=this[e(502)];o[e(538)]()[e(606)](this,t),o[e(592)][e(563)](this)},this[n(519)]=XMLHttpRequest[n(590)][n(519)],XMLHttpRequest[n(590)][n(519)]=function(e){var t=n;o[t(519)][t(563)](this,e)},this[n(613)]=XMLHttpRequest.prototype[n(559)],XMLHttpRequest[n(590)][n(559)]=function(e,t){for(var i=n,r=this.segment,s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];r&&(r[i(566)][e]=t,r[i(660)]=0==r[i(660)]?1:r.retryBecauseNewHeaders),o.requestHeader[i(563)](this,e,t,...a)},this[n(487)]=XMLHttpRequest[n(590)][n(487)],XMLHttpRequest[n(590)].send=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var l,d,h,u,c,p,g,f,m,v,y,b,S,E,T;return S=this,T=function*(){var t=Ei;(!this[t(621)]||this[t(621)]>a._C[t(543)])&&this[t(634)]&&(this[t(621)]=a._C[t(543)]);var n=this[t(502)];if(o[t(679)]&&n&&!n[t(642)]||n&&(null!==(l=o.options[t(573)])&&void 0!==l&&l||null!==(d=o[t(682)].signManifestUsingApi)&&void 0!==d&&d)){if(1==n[t(660)])return n[t(660)]=2,n[t(534)](),void o[t(629)](this,n);try{var S=o.getLoader()[t(503)]()[t(568)],E=0,T=0,w=0,_=0,A=0,P=0,I=(null===(h=o[t(538)]())||void 0===h?void 0:h[t(596)][t(580)]())||0,R=(null===(u=o[t(538)]())||void 0===u?void 0:u[t(596)][t(667)]())||0;I=I/1024/1024;for(var C=0;C<S[t(652)];C++)S[C].provider===t(489)?(T+=S[C][t(625)],_+=S[C][t(528)]):S[C][t(547)]===t(669)||S[C][t(547)]===t(567)?(A+=S[C][t(625)],P+=S[C][t(528)]):(E+=S[C][t(625)],w+=S[C][t(528)]);var N=null===(c=o[t(538)]())||void 0===c?void 0:c.P2PLoader[t(488)](),D=null===(p=o.getLoader())||void 0===p?void 0:p.P2PLoader.getUploadRequestsFailed(),L=null===(g=o[t(538)]())||void 0===g?void 0:g[t(596)][t(560)](),O=0,k=0,B=0;try{O=T/(T+E+A)*100,k=A/(T+E+A)*100,B=I/((T+E+A)/1024/1024)*100}catch(e){}var x=o[t(538)]()[t(596)][t(609)]().size||0,M=" ("+o.getLoader()[t(596)].getPeersBehind()+"/"+o[t(538)]()[t(596)][t(608)]()+"/"+o.getLoader()[t(596)][t(666)]()+") ";r.default[t(639)](s.BalancerTag,t(644)+O[t(578)](2)+"% "+k[t(578)](2)+"%\n"+t(544)+(E/1024/1024).toFixed(2)+"/"+(A/1024/1024).toFixed(2)+"/"+(T/1024/1024).toFixed(2)+"\nsegments-> ("+w+"/"+P+"/"+_+")\npeers: "+x+M+"\n"+t(516)+I[t(578)](2)+"/"+R+"/"+B[t(578)](2)+"\n"+t(630)+N+"|"+D+t(546)+L)}catch(e){}var U=Date[t(684)]();n.updateP2PId();var V=o[t(494)][t(596)][t(549)](n);if(n.cdnName!==t(489)||n[t(496)])r.default[t(639)](s.BalancerTag,(n[t(496)]?t(553):"")+t(550)+n[t(552)]),o[t(538)]()[t(636)].getActiveRequests()[t(673)](n.id,n),r.default[t(633)](s.BalancerTag,t(585)+n.origRes),o.send[t(563)](this,e,...i);else{var F=!1;r.default[t(633)](s.BalancerTag,t(570)+n.origRes),n[t(496)]=!0,n.useP2P=!1;for(var q=null==V?void 0:V[t(509)],H=V&&(null==V?void 0:V[t(509)][t(539)])>0&&(null==q?void 0:q[t(539)])===(null==V?void 0:V.realBodySize)&&(null==V?void 0:V[t(681)])&&(null==V?void 0:V[t(681)])>0,G=0;!H;)yield new Promise((e=>setTimeout(e,20))),V=o[t(494)][t(596)][t(549)](n),G=(null==(q=null==V?void 0:V.data)?void 0:q[t(539)])||0,H=V&&(null==V?void 0:V.realBodySize)>0&&(null==V?void 0:V[t(509)][t(539)])>0&&(null==q?void 0:q[t(539)])===(null==V?void 0:V[t(681)])&&null!=(null==V?void 0:V.realBodySize),Date[t(684)]()-U>a.LI[t(621)]?(H=!0,q=void 0,F=!0,r.default.verbose(s.BalancerTag,t(678)+o[t(494)][t(596)][t(683)]()+t(677)+(Date[t(684)]()-U)+t(603)+n.peer.id+t(670)+n.peer[t(610)]()+t(649)+n[t(622)].getIp()+" "+G/((null==V?void 0:V[t(681)])||1)*100+"%")):Date.now()-U>2e3&&(null==V||null==V[t(509)]||G<20)&&(H=!0,q=void 0,F=!0,r.default[t(639)](s.BalancerTag,t(490)+o[t(494)][t(596)][t(683)]()+" "+(Date.now()-U>2e3)+t(603)+n[t(622)].id+t(670)+n.peer[t(610)]()+t(649)+n[t(622)][t(665)]()+t(674)+G));if(q&&(q=q[t(533)](0,q[t(539)])),F&&(n[t(622)]&&(n[t(622)][t(671)]=n.peer[t(671)]+1),r.default[t(639)](s.BalancerTag,t(601)+n.origRes+" "+n.id+" "+(null===(f=null==V?void 0:V.data)||void 0===f?void 0:f[t(539)])+" "+(null==V?void 0:V[t(681)])+t(598)+(null===(m=n[t(622)])||void 0===m?void 0:m.id)+t(515)+n.peer[t(671)])),r.default[t(639)](s.BalancerTag,t(574)+n.origRes+" "+(null==q?void 0:q[t(539)])+" "+(null==V?void 0:V[t(681)])+" peer id -> "+n[t(622)].id+t(648)+n[t(554)]),V=o[t(494)][t(596)][t(549)](n),q&&(null===(v=null==V?void 0:V.data)||void 0===v?void 0:v[t(539)])==(null==V?void 0:V[t(681)])&&null!=(null==V?void 0:V[t(681)])&&(null==V?void 0:V[t(681)])>0){r.default[t(633)](s.BalancerTag,n[t(552)]+t(631)+((null===(y=null==V?void 0:V.data)||void 0===y?void 0:y[t(539)])/1048576)[t(578)](2)+"MB"),q instanceof Uint8Array&&(q=q[t(506)]);var X=new CustomEvent(t(599)),j=new CustomEvent(t(594)),W=new CustomEvent(t(628)),z=new CustomEvent(t(586));Object.defineProperty(this,t(638),{writable:!0}),Object.defineProperty(this,t(545),{writable:!0}),Object[t(507)](this,t(612),{writable:!0}),Object[t(507)](this,"readyState",{writable:!0}),Object.defineProperty(this,"byteLength",{writable:!0}),Object[t(507)](this,t(526),{writable:!0}),Object.defineProperty(this,t(492),{writable:!0}),this[t(539)]=q[t(539)],this[t(638)]=q,this[t(545)]=200,this[t(612)]="OK",this[t(565)]=XMLHttpRequest[t(510)],this[t(526)]=n[t(552)],this[t(492)]="arraybuffer",r.default[t(639)](s.BalancerTag,t(540));try{this[t(595)](z)}catch(e){r.default.verbose(s.BalancerTag,t(640))}yield new Promise((e=>setTimeout(e,6))),r.default[t(639)](s.BalancerTag,"P2P DISPATCH READY STATE");try{this[t(595)](X)}catch(e){r.default[t(639)](s.BalancerTag,t(537))}r.default[t(639)](s.BalancerTag,t(522));try{this[t(595)](W)}catch(e){r.default[t(639)](s.BalancerTag,"P2P Error on event load event")}r.default[t(639)](s.BalancerTag,"P2P DISPATCH LOAD END");try{this[t(595)](j)}catch(e){r.default[t(639)](s.BalancerTag,t(627))}r.default[t(639)](s.BalancerTag,t(672)+(Date[t(684)]()-U)+t(605)+n[t(554)]+" size -> "+q[t(539)]/1024+t(582)+n.origRes+t(498)+n[t(622)].getVersion()+" ip: "+n.peer[t(665)]())}else r.default[t(639)](s.BalancerTag,"P2P Failure Update url on problems with p2p "+(Date[t(684)]()-U)+"ms timeout: "+a.LI.timeout+" byte length-> "+(null===(b=null==V?void 0:V[t(509)])||void 0===b?void 0:b[t(539)])+" real size-> "+(null==V?void 0:V[t(681)])+t(658)+n[t(552)]),n[t(496)]=!0,o[t(538)]()[t(636)].getActiveRequests()[t(673)](n.id,n),o[t(538)]().CDNLoader[t(650)](n),o[t(629)](this,n)}}else o.send[t(563)](this,e,...i)},new((E=void 0)||(E=Promise))((function(e,t){var i=Ei;function n(e){var i=Ei;try{s(T[i(645)](e))}catch(e){t(e)}}function r(e){try{s(T.throw(e))}catch(e){t(e)}}function s(t){var i,s=Ei;t.done?e(t[s(647)]):(i=t[s(647)],i instanceof E?i:new E((function(e){e(i)})))[s(561)](n,r)}s((T=T[i(617)](S,[]))[i(645)]())}))},this[n(651)]=XMLHttpRequest[n(590)].open,XMLHttpRequest.prototype.open=function(e,t,i){void 0===i&&(i=!0);for(var a,l=n,d=arguments.length,u=new Array(d>3?d-3:0),c=3;c<d;c++)u[c-3]=arguments[c];if(this[l(634)]=i,!o.isEnabled)return o[l(651)][l(563)](this,e,t,i,...u);var p=t;"string"!=typeof t&&(p=t.toString());var g=p,f=g[l(564)]("?");g=h[l(659)](g,o.options[l(491)]);try{var m=new URL(g),v=h[l(642)](m[l(485)]),y=h[l(664)](m.pathname),b=h[l(558)](m.pathname),S=h[l(508)](m.pathname);if(null==this[l(502)]&&Object[l(507)](this,l(502),{writable:!0}),p[l(518)](l(541))||p[l(518)](l(602))){var E=new URL(p),T=E.searchParams;T[l(618)]("rnpaw"),E[l(530)]=T[l(486)](),t=E[l(486)]()}else if(e===l(616)&&(v||y||b&&o.options[l(589)]||S&&o[l(682)][l(593)])){var w;f[l(652)]>1&&(w=f[1]);var _=this.segment;null==_&&(_=o[l(501)](f[0],w,{})),null==this[l(502)]&&(this[l(502)]=_),this.addEventListener(l(628),(function(e){var t=l;o.getLoader()[t(520)](this,_,e)})),this[l(514)]("loadstart",(function(e){var t=l;o[t(538)]()[t(520)](this,_,e)}));var A=this[l(663)],P=e=>{var t=l;null==A||A[t(563)](this,e),o[t(538)]().readyStateChangeEM(this,_,o)};return o.isBitmovin||o[l(623)]?this.onreadystatechange=P:this[l(514)](l(599),P),this[l(514)](l(482),(function(e){var t=l;o[t(538)]()[t(569)](this,_,e)})),this[l(514)](l(594),(function(e){o[l(538)]().loadEndEM(this,_,e)})),this.addEventListener(l(577),(function(e){})),o[l(651)][l(563)](this,e,_[l(600)](null!==(a=o[l(682)][l(499)])&&void 0!==a&&a),i,...u)}}catch(e){r.default[l(521)](s.BalancerTag,"Could not parse URL "+g)}return r.default.debug(s.BalancerTag,l(680)+t),o[l(651)].call(this,e,t,i,...u)}}destroy(){var e=bi;r.default[e(521)](s.BalancerTag,e(513)),re[e(512)]()[e(584)](),this[e(494)].P2PLoader[e(575)](),this[e(679)]&&(XMLHttpRequest[e(590)].getResponseHeader=this.responseHeader,XMLHttpRequest.prototype.getAllResponseHeaders=this[e(624)],XMLHttpRequest[e(590)][e(592)]=this[e(592)],XMLHttpRequest[e(590)].overrideMimeType=this[e(519)],XMLHttpRequest[e(590)].setRequestHeader=this[e(613)],XMLHttpRequest[e(590)][e(487)]=this[e(487)],XMLHttpRequest.prototype.open=this.open),this[e(532)].removeInterceptors()}[bi(555)](){return this._accountCode}setOptions(e){var t,i=bi;for(var n in e)this[i(682)][n]=e[n];this.apiHost=(null!==(t=this[i(682)].host)&&void 0!==t?t:this[i(682)][i(536)])?a.df.devHost:a.df[i(579)],this[i(494)]=new yi(this._accountCode,this[i(682)],this.apiHost)}openAndSend(e,t){var i,n,a,o=bi;try{e[o(651)](o(616),t[o(600)](null!==(i=this[o(682)][o(499)])&&void 0!==i&&i)),(null===(n=t[o(566)])||void 0===n?void 0:n.Range)&&e[o(559)](o(581),t.headers[o(581)]),e.send()}catch(e){r.default.debug(s.BalancerTag,o(619)+t.getNewUrl(null!==(a=this[o(682)][o(499)])&&void 0!==a&&a))}}[bi(542)](e,t,i,n,r,s,a){this[bi(494)].processSegment(e,!0,i,n,r,s,a)}[bi(597)](e){var t=bi,i=Date[t(684)]()-this[t(483)];e&&(this[t(682)][t(643)]!==e||i>a.df.decisionCallWaitTime)&&(this.options[t(643)]=e,this[t(494)]&&this.loader[t(596)]&&this[t(494)][t(596)][t(679)]()&&(r.default[t(521)](s.BalancerTag,t(662)),this[t(494)][t(596)].sendJoin()),!this[t(494)]&&(this.loader=new yi(this[t(556)],this.options,this[t(654)])),this.loader[t(636)][t(557)](e),this[t(494)][t(583)](),this[t(483)]=Date[t(684)]())}[bi(538)](){return this[bi(494)]}[bi(523)](e,t){var i=bi;this.interceptors[i(500)](e,t)}[bi(607)](){var e=bi;return this[e(494)][e(636)][e(607)]()}[bi(572)](){this[bi(623)]=!0}[bi(615)](){var e=bi;return this[e(635)]=!0,function(t,i){var n=e;return typeof t===n(562)||!t[n(480)](n(637))&&!t[n(480)](n(517))?null:{getResponse:()=>new Promise((e=>{var t,n=Ei,r=Date.now(),s={request:i,url:i.url,headers:[],status:0,statusText:"",body:void 0},a=new XMLHttpRequest;for(var o in a[n(492)]=null!==(t=i[n(492)])&&void 0!==t?t:n(481),a[n(663)]=function(t){var i=n;if(2===a[i(565)])s[i(632)]=(Date.now()-r)/1e3;else if(4===a.readyState)if(s[i(545)]=a[i(545)],s.statusText=a[i(612)],s[i(484)]=(Date.now()-r)/1e3,a[i(545)]>=200&&a[i(545)]<400){a[i(492)]!==i(481)&&a.responseType!==i(676)?(s[i(571)]=h[i(614)](a.response),s[i(652)]=s[i(571)][i(652)]):(s[i(571)]=a.response,"arraybuffer"===a[i(492)]?s[i(652)]=s[i(571)][i(539)]:a[i(492)]===i(676)&&(s.length=s[i(571)][i(604)]));var o=a[i(620)]().trim()[i(564)](/[\r\n]+/)[i(495)]((e=>{var t=i,n=e[t(564)](": ");return{name:n[t(525)](),value:n[t(497)](": ")}}));s[i(566)]=o,e(s)}else e(s)},a[n(651)](i[n(657)],i[n(611)]),i.headers)a[n(559)](o,i[n(566)][o]);a[n(487)](null==i?void 0:i[n(571)])})),cancel(){},setProgressListener(){}}}}[bi(653)](){var e=bi;this[e(494)][e(596)][e(653)](),this[e(682)][e(643)]=void 0}[bi(501)](e,t,i){var n,r=bi;B.default[r(512)]()[r(493)](!0);var s=new URL(e),a=this[r(494)][r(641)](s,!1,[],i);a[r(646)]=t;var o=(null==i?void 0:i.Range)||"";return this[r(494)][r(588)][r(673)](a[r(600)](null!==(n=this[r(682)].signManifestUsingApi)&&void 0!==n&&n)+o,s.toString()),a}[bi(527)](){var e=bi;this[e(679)]=!0,this.loader[e(527)](),this[e(494)][e(596)][e(527)]()}[bi(587)](){var e=bi;this[e(679)]=!1,this[e(494)].disable(),this[e(494)][e(596)][e(587)]()}[bi(524)](){return this[bi(679)]}reload(e){var t=bi;null!=e&&(this[t(682)]=new S(e)),this[t(494)][t(596)][t(575)](),this[t(494)]=new yi(this._accountCode,this[t(682)],this[t(654)]),this[t(679)]=!0}}var wi=i(6014),_i=i.n(wi),Ai=i(2507),Pi=i.n(Ai),Ii=i(4954),Ri=i.n(Ii),Ci=i(3782),Ni=i.n(Ci),Di=i(7061),Li=i.n(Di),Oi=i(2071),ki=i.n(Oi);class Bi{constructor(e,t,i,n,r){this.method=s.Method.GET,this.service=e,this.params=t||{},this.body=i,this.onSuccessCallback=n,this.onFailCallback=r}getService(){return this.service}getMethod(){return this.method}setMethod(e){this.method=e}getParams(){return this.params}getOnSuccess(){return this.onSuccessCallback}getOnFail(){return this.onFailCallback}getParam(e){return this.params[e]}setParam(e,t){return this.params[e]=t,this}setParams(e){this.params=e}getBody(){return this.body}setBody(e){this.body=e}isPost(){return this.method===s.Method.POST}}var xi=i(108);class Mi{constructor(){this.readyToSend=!1,this.servicesToWait=[xi.A.Service.SESSION_START],this.onWillSendAnalyticsRequestListeners=[],this._requests=[],this._waitingForToken=[]}destroy(){this._requests=[],this._waitingForToken=[],this.readyToSend=!1}shouldSendStats(){return this.readyToSend}sendRequest(e){if(""!==t.default.getInstance().getFastDataSessionToken()){this._waitingForToken.forEach((e=>this.prepareParams(e))),this._requests.push(...this._waitingForToken),this._waitingForToken=[];var i=e.getParams(),n=e.getService(),r=this.onWillSendAnalyticsRequestListeners;for(var s of r)s(n,i);this.prepareParams(e),this._requests.push(e),this._processRequests()}else this._waitingForToken.push(e)}prepareParams(e){var i=e.getService();e.setParam("sessionId",e.getParam("sessionId")||t.default.getInstance().getFastDataSessionToken()),i==xi.A.Service.SESSION_START&&e.setParam("beatTime",e.getParam("beatTime")||t.default.getInstance().getFastDataService().getBeatTime())}buildRequest(e,t,i,n,r,a){i=i||s.Method.GET;var o=new Bi(e,t,n,r,a);return o.setMethod(i),o}_processRequests(){var e=this._requests;this._requests=[];for(var i=[];e.length;){var n=e.shift();if(-1!==this.servicesToWait.indexOf(n.getService())&&(this.readyToSend=!0),this.readyToSend)for(t.default.getInstance().pushData(t.default.getInstance().getOptions().offline?le.default.Consumer.BLACK_HOLE:le.default.Consumer.NQS,n.getService(),n.getMethod(),n.getParams(),n.getOnSuccess(),n.getOnFail());i.length;){var r=i.shift();t.default.getInstance().pushData(t.default.getInstance().getOptions().offline?le.default.Consumer.BLACK_HOLE:le.default.Consumer.NQS,r.getService(),r.getMethod(),r.getParams(),r.getOnSuccess(),r.getOnFail())}else i.push(n)}this._requests.push(...i)}}var Ui=i(9637),Vi=i.n(Ui),Fi=i(1577),qi=i(9835),Hi=i.n(qi),Gi=i(5804),Xi=i.n(Gi);class ji{constructor(e){this.options=e}getUsername(){return this.options["user.name"]}getPluginVersion(){return t.default.getPluginVersion()}getRequestNumber(){return Math.random()}getUserType(){return this.options["user.type"]}getAnonymousUser(){return this.options["user.anonymousId"]}getReferer(){var e=this.options.referer||"";return!e&&"undefined"!=typeof window&&window.location&&(e=window.location.href),e}getReferral(){var e=this.options.referral||"";return e||"undefined"==typeof document||(e=document.referrer),e}getPageName(){var e=this.options.title||"";return e||"undefined"==typeof document||(e=document.title),e}getLanguage(){return"undefined"!=typeof navigator?navigator.language:void 0}getScreenResolution(){var e;try{if(window&&window.screen){var t=window.devicePixelRatio||1;e=window.screen.width*t+"x"+window.screen.height*t}}catch(e){}return e}getDeviceInfo(){var e={};return this.getDeviceCode()&&(e.deviceCode=this.getDeviceCode()),this.getModel()&&(e.model=this.getModel()),this.getBrand()&&(e.brand=this.getBrand()),this.getDeviceType()&&(e.deviceType=this.getDeviceType()),this.getDeviceName()&&(e.deviceName=this.getDeviceName()),this.getOsName()&&(e.osName=this.getOsName()),this.getOsVersion()&&(e.osVersion=this.getOsVersion()),this.getBrowserName()&&(e.browserName=this.getBrowserName()),this.getBrowserVersion()&&(e.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(e.browserType=this.getBrowserType()),this.getBrowserEngine()&&(e.browserEngine=this.getBrowserEngine()),0!==Object.keys(e).length?e:void 0}getDeviceCode(){return this.options["device.code"]}getModel(){return this.options["device.model"]}getBrand(){return this.options["device.brand"]}getDeviceType(){return this.options["device.type"]}getDeviceName(){return this.options["device.name"]}getOsName(){return this.options["device.osName"]}getOsVersion(){return this.options["device.osVersion"]}getBrowserName(){return this.options["device.browserName"]}getBrowserVersion(){return this.options["device.browserVersion"]}getBrowserType(){return this.options["device.browserType"]}getBrowserEngine(){return this.options["device.browserEngine"]}getIsBlocked(){return this.options["ad.blockerDetected"]}isMethodPostEnabled(){return this.options.method&&this.options.method.toUpperCase()===Vi().POST}getDeviceUUID(){var e;return this.options["device.isAnonymous"]||(e=this.options["device.id"]||(new(Xi())).getKey()),e}getLibVersion(){return Hi()}getAppName(){return this.options["app.name"]}getAppReleaseVersion(){return this.options["app.releaseVersion"]}getIp(){return this.options["network.ip"]}getIsp(){return this.options["network.isp"]}getConnectionType(){return this.options["network.connectionType"]}getEDID(){var e=this.options["device.EDID"];return e?e.toString():void 0}getObfuscateIp(){return this.options["user.obfuscateIp"]}getPrivacyProtocol(){var e=this.options["user.privacyProtocol"];return"string"==typeof e&&(e=e.toLowerCase()),"optin"===e||"optout"===e?e:void 0}getCustomDimensions(){var e=this.options["content.customDimensions"];return"object"==typeof e?e:void 0}getExtraparam1(){return this.options["content.customDimension.1"]}getExtraparam2(){return this.options["content.customDimension.2"]}getExtraparam3(){return this.options["content.customDimension.3"]}getExtraparam4(){return this.options["content.customDimension.4"]}getExtraparam5(){return this.options["content.customDimension.5"]}getExtraparam6(){return this.options["content.customDimension.6"]}getExtraparam7(){return this.options["content.customDimension.7"]}getExtraparam8(){return this.options["content.customDimension.8"]}getExtraparam9(){return this.options["content.customDimension.9"]}getExtraparam10(){return this.options["content.customDimension.10"]}getExtraparam11(){return this.options["content.customDimension.11"]}getExtraparam12(){return this.options["content.customDimension.12"]}getExtraparam13(){return this.options["content.customDimension.13"]}getExtraparam14(){return this.options["content.customDimension.14"]}getExtraparam15(){return this.options["content.customDimension.15"]}getExtraparam16(){return this.options["content.customDimension.16"]}getExtraparam17(){return this.options["content.customDimension.17"]}getExtraparam18(){return this.options["content.customDimension.18"]}getExtraparam19(){return this.options["content.customDimension.19"]}getExtraparam20(){return this.options["content.customDimension.20"]}isParseManifest(){return this.options["parse.manifest"]}isParseCdnNode(){return this.options["parse.cdnNode"]}isCdnSwitch(){return this.options["parse.cdnSwitchHeader"]}getParseCdnNodeList(){return this.options["parse.cdnNode.list"]}getParseCdnNodeNameHeader(){return this.options["parse.cdnNameHeader"]}getParseNodeHeader(){return this.options["parse.cdnNodeHeader"]}canOverwriteAdapters(){return Fi.default.parseBoolean(this.options["adapters.overwrite"])}getAdaptersProperties(){return this.options["adapters.properties"]}isAppAnalyticsAutoBegin(){return Fi.default.parseBoolean(this.options["check.appAnalytics.autoBegin"])}isAppAnalyticsEnabled(){return Fi.default.parseBoolean(this.options["check.appAnalytics.enabled"])}isVideoAnalyticsEnabled(){return Fi.default.parseBoolean(this.options["check.videoAnalytics.enabled"])}isRefreshLMAConfigurationEnabled(){return Fi.default.parseBoolean(this.options["lma.refresh.configuration.enabled"])}isPluginLogsEnabled(){return Fi.default.parseBoolean(this.options["debug.pluginLogs.enabled"])}isPlayerLogsEnabled(){return Fi.default.parseBoolean(this.options["debug.playerLogs.enabled"])}refreshLMAConfigurationSeconds(){return this.options["lma.refresh.configuration.seconds"]}getPlayheadMonitorEnabled(){return this.options["playhead.monitor"]}getReadyStateMonitorEnabled(){return this.options["readyState.monitor"]}}class Wi{constructor(e){this.options=new(Li()),this.core=t.default.getInstance(),this.coreStorage=this.core.getCoreStorage(),this.analyticsRequestHandler=new Mi,this.accountCode=e,this.requestBuilder=new(ki()),this._beat=new(Ri())(this._sendBeat.bind(this),3e4),this.sessionExpire=this.coreStorage.getSessionExpire()||18e4,this.appAnalyticsStarted=!1,this.appAnalyticsStopped=!1,this._lastNavigation={page:"",route:""},this._registeredProperties=null}destroy(){this._beat.stop(),this.analyticsRequestHandler.destroy()}setOptions(e){this.options=e}getOptions(){return this.options}begin(e){void 0===e&&(e={}),this.core.isUsingLegacy()||(this.appAnalyticsStarted||(this._logBeginEvent(e),this._registeredProperties=this.coreStorage.getAppAnalyticsRegisteredProperties()),this.fireSessionStart(e))}newSession(e,t){void 0===t&&(t={}),this.core.isUsingLegacy()||(this._logFireNewSessionListener(null!=e?e:{},t),(this.appAnalyticsStarted||this.appAnalyticsStopped)&&this.endSession(),e&&this.setOptions(e),this.begin(t))}endSession(e){void 0===e&&(e={}),this.core.isUsingLegacy()||this.appAnalyticsStarted&&this.fireSessionStop(e)}_setLastActive(){this._firstActive||(this._firstActive=this.getFirstActive()),this.coreStorage.setLastActive((new Date).getTime().toString())}getAccountCode(){return this.accountCode}getFirstActive(){return this.coreStorage.getLastActive()||0}getIsDataExpired(){var e=(new Date).getTime();return!this.coreStorage.isEnabled()||!this.coreStorage.getStoredData()||this.getFirstActive()<e-this.sessionExpire}fireSessionStart(e){void 0===e&&(e={}),this.core.isUsingLegacy()||(this._logFireSessionStartEvent(e),this.appAnalyticsStopped&&(this.core.refreshSessionToken(),this.appAnalyticsStopped=!1),this.appAnalyticsStarted||(this.coreStorage.setAppAnalyticsStarted(!0),this.appAnalyticsStarted=!0,this._processSessionStart(this._getParamsJson(e,null,null,!0,!0)),this._setLastActive()))}fireSessionStop(e){void 0===e&&(e={}),this.core.isUsingLegacy()||(this._logFireSessionStopEvent(e),this.appAnalyticsStarted&&(this.appAnalyticsStopped=!0,this.appAnalyticsStarted=!1,this.coreStorage.removeAppAnalyticsStarted(),this._processSessionStop(e),this.coreStorage.removeStoredData(),this.coreStorage.removeSession(),this.coreStorage.removeLastActive(),this.core.refreshSessionToken()))}fireNav(e){void 0===e&&(e={}),this.core.isUsingLegacy()||(this._logFireNavListener(e),this.isActive()&&(this.appAnalyticsStarted=!0,this._processNavigation(this._getParamsJson(e,null,null,!0))))}fireEvent(e,t,i,n){if(void 0===e&&(e=""),void 0===t&&(t={}),void 0===i&&(i={}),void 0===n&&(n={}),!this.core.isUsingLegacy()&&(this._logFireEventListener(e),this.appAnalyticsStarted)){var r=this._getParamsJson(t,i,e);Pi().assign(r.params,n||{}),this._processCustomEvent(r),this._setLastActive()}}register(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._registeredProperties={dimensions:e,values:t},this.coreStorage.setAppAnalyticsRegisteredProperties(JSON.stringify(this._registeredProperties))}registerOnce(e,t){this._registeredProperties||this.register(e,t)}unregister(){this._registeredProperties=null,this.coreStorage.removeAppAnalyticsRegisteredProperties()}_getParamsJson(e,t,i,n,r){var s={};if(i&&(s.name=i),s.dimensions=e||{},s.values=t||{},this._registeredProperties){for(var a in this._registeredProperties.dimensions)s.dimensions[a]=this._registeredProperties.dimensions[a];for(var o in this._registeredProperties.values)s.values[o]=this._registeredProperties.values[o]}var l={params:s};return n&&(l.params.dimensions.page&&(l.params.page=l.params.dimensions.page,delete l.params.dimensions.page),l.params.dimensions.route&&(l.params.route=l.params.dimensions.route,delete l.params.dimensions.route),r||delete l.params.dimensions,delete l.params.values),l}isActive(){if(this.core.isUsingLegacy())return!1;if(this.appAnalyticsStarted||this.coreStorage.getAppAnalyticsStarted())return!0;var e=(new Date).getTime();return this.coreStorage.getLastActive()+this.sessionExpire>e}_sendAppAnalytics(e,t){if(!this.core.isUsingLegacy()&&null!==(t=this.requestBuilder.buildParams(t,e,[this,new ji(this.options)]))&&this.options.enabled){var i=new Bi(e,t);this.isMethodPostEnabled()&&i.setMethod(s.Method.POST),this.analyticsRequestHandler.prepareParams(i),this.analyticsRequestHandler.sendRequest(i)}}addOnWillSendRequestListener(e){var t;null===(t=this.analyticsRequestHandler)||void 0===t||t.onWillSendAnalyticsRequestListeners.push(e)}removeOnWillSendRequestListener(e){var t;this.analyticsRequestHandler&&(this.analyticsRequestHandler.onWillSendAnalyticsRequestListeners=null===(t=this.analyticsRequestHandler)||void 0===t?void 0:t.onWillSendAnalyticsRequestListeners.filter((t=>t!==e)))}_processNavigation(e){e=this._parseInternalParams(e),this._checkDifferentNavigation(e)?(this._sendAppAnalytics(Ni().Service.NAV,e),this._beat.isRunning||this._beat.start(),r.default.notice(s.AppAnalyticsTag,"["+this.core.getFastDataSessionToken()+"] "+Ni().Service.NAV+" "+e.route),this._lastNavigation.page=e.page,this._lastNavigation.route=e.route):r.default.warn(s.AppAnalyticsTag,"Same navigation detected and ignored for Page and Route")}_processSessionStart(e){e=this._parseInternalParams(e),this._sendAppAnalytics(Ni().Service.SESSION_START,e),this._beat.isRunning||this._beat.start(),r.default.notice(s.AppAnalyticsTag,"["+this.core.getFastDataSessionToken()+"] "+Ni().Service.SESSION_START+" "+e.route)}_processSessionStop(e){e=this._parseInternalParams(e),this._sendAppAnalytics(Ni().Service.SESSION_STOP,e),this._beat.isRunning&&this._beat.stop(),r.default.notice(s.AppAnalyticsTag,"["+this.core.getFastDataSessionToken()+"] "+Ni().Service.SESSION_STOP+" "+e.route)}_processCustomEvent(e){e=this._parseInternalParams(e),this._sendAppAnalytics(Ni().Service.EVENT,e),r.default.notice(s.AppAnalyticsTag,"["+this.core.getFastDataSessionToken()+"] "+Ni().Service.EVENT+" "+e.name)}_parseInternalParams(e){return e&&(e.params||e)||{}}_sendBeat(e){var t={diffTime:e};this._sendAppAnalytics(Ni().Service.BEAT,t),this&&this._setLastActive(),r.default.verbose(s.AppAnalyticsTag,Ni().Service.BEAT)}_checkDifferentNavigation(e){e=e||{};var t=this._lastNavigation&&e.route===this._lastNavigation.route,i=this._lastNavigation&&e.page===this._lastNavigation.page;return!t||!i}getSessionMetrics(){return Pi().getMetricsFrom(this.options["session.metrics"])}isPlayerLogsEnabled(){return r.default.debug(s.AppAnalyticsTag,"isPlayerLogsEnabled: "+this.options["debug.playerLogs.enabled"]),Pi().parseBoolean(this.options["debug.playerLogs.enabled"])}isPluginLogsEnabled(){return r.default.debug(s.AppAnalyticsTag,"isPluginLogsEnabled: "+this.options["debug.pluginLogs.enabled"]),Pi().parseBoolean(this.options["debug.pluginLogs.enabled"])}isMethodPostEnabled(){return this.options.method&&this.options.method.toUpperCase()===Ui.POST}_sendPluginLogs(e,t,i){if(!this.core.isUsingLegacy()&&this.isPluginLogsEnabled()){try{if(i&&i.logType&&i.logAction){var n=this.core.getFastDataSessionToken();r.default.notice(s.AppAnalyticsTag,n.length?"["+n+"] ":i.logType+": Action "+i.logAction)}}catch(e){}if(i.timemark=(new Date).getTime(),null!==(i=this.requestBuilder.buildParams(i,t))&&this.options.enabled){var a=new Bi(t,i);this.isMethodPostEnabled()&&a.setMethod(s.Method.POST),this.analyticsRequestHandler.prepareParams(a),this.analyticsRequestHandler.sendRequest(a)}}}_logBeginEvent(e){var t={logs:{data:e},logAction:"beginSession",logType:"pluginMethod"};this._sendPluginLogs(Ni().WillSendLog.WILL_SEND_LOG_INFINITY_BEGIN,Ni().Service.APP_ANALYTICS_PLUGIN_LOGS,t)}_logFireSessionStartEvent(e){var t={logs:{data:e},logAction:"startSession",logType:"pluginMethod"};this._sendPluginLogs(Ni().WillSendLog.WILL_SEND_LOG_INFINITY_START,Ni().Service.APP_ANALYTICS_PLUGIN_LOGS,t)}_logFireSessionStopEvent(e){var t={logs:{data:e},logAction:"stopSession",logType:"pluginMethod"};this._sendPluginLogs(Ni().WillSendLog.WILL_SEND_LOG_INFINITY_START,Ni().Service.APP_ANALYTICS_PLUGIN_LOGS,t)}_logFireEventListener(e){var t={logs:{data:e},logAction:"eventSession",logType:"pluginMethod"};this._sendPluginLogs(Ni().WillSendLog.WILL_SEND_LOG_INFINITY_EVENT,Ni().Service.APP_ANALYTICS_PLUGIN_LOGS,t)}_logFireNavListener(e){var t={logs:{data:e},logAction:"nav",logType:"pluginMethod"};this._sendPluginLogs(Ni().WillSendLog.WILL_SEND_LOG_INFINITY_NAV,Ni().Service.APP_ANALYTICS_PLUGIN_LOGS,t)}_logFireNewSessionListener(e,t){var i={logs:{data:e,params:t},logAction:"newSession",logType:"pluginMethod"};this._sendPluginLogs(Ni().WillSendLog.WILL_SEND_LOG_INFINITY_NAV,Ni().Service.APP_ANALYTICS_PLUGIN_LOGS,i)}}var zi=i(2602);i.g.LogLevel=r.LogLevel,i.g.NpawPluginOptions=zi.A;class Ki{constructor(e,i){this.core=t.default.getInstance(e,i,!0),this.cdnBalancer=new Ti(e,i),this.appAnalytics=new Wi(e),this.videoAnalytics=new(_i().Plugin)(this.appAnalytics),this.diagnostic=B.default.getInstance(!0),this.diagnostic.start(this)}destroy(){this.cdnBalancer.destroy(),this.videoAnalytics.videos.getVideoKeys().forEach((e=>{var t,i;void 0!==this.videoAnalytics&&(null===(t=this.videoAnalytics.getAdapter(e))||void 0===t||t.fireStop(),null===(i=this.videoAnalytics.getAdsAdapter(e))||void 0===i||i.fireStop())})),this.videoAnalytics.destroy(),this.appAnalytics.destroy(),this.diagnostic.destroy(),this.core.destroy()}setLogLevel(e){r.default.setLogLevel(e)}setBalancerOptions(e){this.cdnBalancer.setOptions(e)}setManifestResource(e){this.cdnBalancer.setManifestResource(e)}addInterceptor(e,t){this.cdnBalancer.addInterceptor(e,t)}getBitmovinSendHttpRequest(){return this.cdnBalancer.getBitmovinSendHttpRequest()}getRecommendedManifest(){return this.cdnBalancer.getRecommendedManifest()}isBalancerEnabled(){return this.cdnBalancer.getIsEnabled()}registerAdapter(e,t,i,n,r){this.core.isUsingLegacy()||this.registerAdapterInModule(!1,e,t,i,n,r)}registerAdapterFromClass(e,t,i,n,a){void 0!==t&&"function"==typeof t?this.registerAdapterFromClassInModule(!1,e,new t,i,n,a):r.default.error(s.AnalyticsTag,"Adapter is not valid")}registerAdapterFromString(e,t,i,n,a){void 0!==t&&"string"==typeof t?(this.videoAnalytics.registerAdapter(e,t,i,n),null==a||a()):r.default.error(s.AnalyticsTag,"The provided adapter is not from a valid type")}registerDefaultAdapter(e,t){this.core.isUsingLegacy()||this.videoAnalytics.registerAdapter(void 0,"{}",t,e)}removeAdapter(e){this.core.isUsingLegacy()||(e&&this.videoAnalytics.videos.existsVideo(e)&&this.getAdapter(e)&&this.getAdapter(e).fireStop&&this.getAdapter(e).fireStop(),this.videoAnalytics.removeAdapter(e))}getAdapter(e){return this.videoAnalytics.getAdapter(e)}getAdsAdapter(e){return void 0!==this.videoAnalytics?this.videoAnalytics.getAdsAdapter(e):void 0}registerAdsAdapter(e,t,i,n,r){this.core.isUsingLegacy()||this.registerAdapterInModule(!0,e,t,i,n,r)}registerAdsAdapterFromClass(e,t,i,n,a){void 0!==t&&"function"==typeof t?this.registerAdapterFromClassInModule(!0,e,new t,i,n,a):r.default.error(s.AnalyticsTag,"Adapter is not valid")}registerAdsAdapterFromString(e,t,i,n,a){void 0!==t&&"string"==typeof t?(this.videoAnalytics.registerAdsAdapter(e,t,i,n),null==a||a()):r.default.error(s.AnalyticsTag,"The provided adapter is not from a valid type")}updateAdsAdapter(e,t){t=null!=t?t:"default",void 0!==e&&""!=e?this.videoAnalytics.updateAdsAdapter(e,t):r.default.debug(s.AnalyticsTag,"Invalid ads adapter name")}registerDefaultAdsAdapter(e,t){this.core.isUsingLegacy()||this.videoAnalytics.registerAdsAdapter(void 0,"{}",t,e)}removeAdsAdapter(e){this.core.isUsingLegacy()||this.videoAnalytics.removeAdsAdapter(e)}setAnalyticsOptions(e){this.core.isUsingLegacy()||(this.videoAnalytics.setOptions(e),this.appAnalytics.setOptions(this.videoAnalytics.options),this.core.setOptions(this.videoAnalytics.options),this.diagnostic.setOptions(this.videoAnalytics.options))}setVideoOptions(e,t){e?this.videoAnalytics.setVideoOptions(e,null!=t?t:"default"):r.default.debug(s.AnalyticsTag,"Provided options object is not valid")}updateMetrics(e,t){e?this.videoAnalytics.updateCustomMetrics(e,null!=t?t:"default"):r.default.debug(s.AnalyticsTag,"Provided metrics object is not valid")}fireOfflineEvents(){this.core.isUsingLegacy()||(this.videoAnalytics.videos.getVideoKeys().length>0?r.default.notice(s.AnalyticsTag,"Unable to send offline events because there's at least one adapter registered"):this.core.sendOfflineEvents())}registerAdapterFromClassInModule(e,t,i,n,r,s){e?this.videoAnalytics.registerAdsAdapter(t,i,n,r):this.videoAnalytics.registerAdapter(t,i,n,r),null==s||s()}registerAdapterInModule(e,t,i,n,s,a){if(0===i.length&&r.default.error("Adapter URL can't be empty!"),"undefined"!=typeof fetch)fetch(i).then((e=>e.json())).then((i=>{var r=JSON.stringify(i);e?this.videoAnalytics.registerAdsAdapter(t,r,n,s):this.videoAnalytics.registerAdapter(t,r,n,s),null==a||a()}));else{var o=new XMLHttpRequest;o.addEventListener("readystatechange",(()=>{if(4===o.readyState&&o.status>=200&&o.status<400){var i=o.response;e?this.videoAnalytics.registerAdsAdapter(t,i,n,s):this.videoAnalytics.registerAdapter(t,i,n,s),null==a||a()}})),o.open("GET",i),o.send()}}}})(),n.default})()));var Ii=I(Pi.exports),Ri={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new r(n,s||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),o.prototype.eventNames=function(){var e,n,r=[];if(0===this._eventsCount)return r;for(n in e=this._events)t.call(e,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,a=new Array(s);r<s;r++)a[r]=n[r].fn;return a},o.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,r,s,a){var o=i?i+e:e;if(!this._events[o])return!1;var l,d,h=this._events[o],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,r),!0;case 5:return h.fn.call(h.context,t,n,r,s),!0;case 6:return h.fn.call(h.context,t,n,r,s,a),!0}for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];h.fn.apply(h.context,l)}else{var c,p=h.length;for(d=0;d<p;d++)switch(h[d].once&&this.removeListener(e,h[d].fn,void 0,!0),u){case 1:h[d].fn.call(h[d].context);break;case 2:h[d].fn.call(h[d].context,t);break;case 3:h[d].fn.call(h[d].context,t,n);break;case 4:h[d].fn.call(h[d].context,t,n,r);break;default:if(!l)for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];h[d].fn.apply(h[d].context,l)}}return!0},o.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,n,r){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,d=[],h=o.length;l<h;l++)(o[l].fn!==t||r&&!o[l].once||n&&o[l].context!==n)&&d.push(o[l]);d.length?this._events[s]=1===d.length?d[0]:d:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o}(Ri);var Ci,Ni,Di,Li,Oi,ki,Bi,xi,Mi,Ui,Vi=I(Ri.exports),Fi=1024,qi=150,Hi=8192,Gi=150,Xi=1024,ji=32768,Wi=150,zi=128,Ki=150,Yi=(e,t)=>e.substring(0,t);function Qi(e){var t={},i=0;if(void 0!==e)for(var n of Object.keys(e)){var r=e[n];if(void 0!==r){var s=Yi(n,qi);s in t&&(s=""+Yi(s,qi-3)+nn(i++)),t[s]=Yi(en(r),Hi)}}return t}function $i(e){var t={};if(void 0!==e)for(var i of Object.keys(e)){var n=e[i];void 0!==n&&(t[i]=Yi(n,Fi))}return t}function Ji(e,t){var i,n="object"==typeof e&&null!==e?tn(e):{message:""+e},r=en(n.stack),s=Yi(r,ji),a=s.length===r.length,o={typeName:Yi(en(null!=(i=n.name)?i:"Error"),Wi),message:Yi("message"in n?en(n.message):""+n,Xi),stack:s,hasFullStack:a,parsedStack:[]};if(void 0!==t){var l=t[t.length-1];void 0===l.id&&(l.id=t.length),o.outerId=l.id}var d=null!=t?t:[];return d.push(o),"cause"in n&&Ji(n.cause,d),d}function Zi(){return(new Date).toISOString()}function en(e){if("object"!=typeof e||null===e)return""+e;var t=tn(e);return JSON.stringify(t)}function tn(e){var t,i={};for(var n of Object.getOwnPropertyNames(e).concat(["name","message","stack","msExtendedCode","cause"]).filter((e=>!/^(\d+|[A-Z_]+)$/.exec(e))).filter((t=>void 0!==e[t])))"object"==typeof e[n]&&null!==e[n]?i[n]=tn(e[n]):i[n]=e[n];return"object"==typeof(t=e)&&null!==t&&void 0===t.name&&1===t.MEDIA_ERR_ABORTED&&"number"==typeof t.code&&(i.name="MediaError"),i}function nn(e){var t="00"+e;return t.substring(t.length-3)}var rn={applicationId:"ai.application.applicationId",applicationVersion:"ai.application.ver",userAgent:"ai.user.userAgent",userAnonymousUserAcquisitionDate:"ai.user.anonUserAcquisitionDate",userAuthenticatedUserAcquisitionDate:"ai.user.authUserAcquisitionDate"};function sn(e){var t=rn[e];if(void 0!==t)return t;var i=e.split(/([A-Z]+$)|([A-Z]+)([A-Z])|([A-Z])/).filter((e=>void 0!==e));return i[1]="."+i[1].toLowerCase(),"ai."+i.join("")}function an(e){if(void 0!==e){var t={};for(var i of Object.keys(e))t[sn(i)]=e[i];return t}}var on=le("AppInsights"),ln=class{constructor(e,t){if(this.batch=[],this.maxBatchInterval=1e3,this.maxBatchSize=100,this.samplingPercentage=100,this.sampledIn=!0,Yi(e,zi)!==e)throw new Error("Bad instrumentation key. Too long.");this.iKey=e,void 0!==(null==t?void 0:t.maxBatchInterval)&&(this.maxBatchInterval=t.maxBatchInterval),void 0!==(null==t?void 0:t.maxBatchSize)&&(this.maxBatchSize=t.maxBatchSize),void 0!==(null==t?void 0:t.samplingPercentage)&&t.samplingPercentage<100&&t.samplingPercentage>=0&&(this.samplingPercentage=t.samplingPercentage,this.sampledIn=100*Math.random()<t.samplingPercentage)}trackEvent(e,t,i){var n={ver:1,name:"Microsoft.ApplicationInsights."+this.eventNameKey+".Event",data:{baseType:"EventData",baseData:{ver:2,name:Yi(e,Gi),properties:Qi(t)}},iKey:this.iKey,sampleRate:this.samplingPercentage,tags:$i(an(i)),time:Zi()};this.queueEvent(n)}trackException(e,t,i,n){var r={ver:1,name:"Microsoft.ApplicationInsights."+this.eventNameKey+".Exception",data:{baseType:"ExceptionData",baseData:{ver:2,exceptions:Ji(e),severityLevel:null!=t?t:3,properties:Qi(i)}},iKey:this.iKey,sampleRate:this.samplingPercentage,tags:$i(an(n)),time:Zi()};this.queueEvent(r)}trackMetric(e,i,n,r){var s="number"==typeof i?{name:Yi(e,Ki),kind:0,value:i}:t({name:Yi(e,Ki),kind:1},i),a={ver:1,name:"Microsoft.ApplicationInsights."+this.eventNameKey+".Metric",data:{baseType:"MetricData",baseData:{ver:2,metrics:[s],properties:Qi(n)}},iKey:this.iKey,sampleRate:100,tags:$i(an(r)),time:Zi()};this.queueEvent(a)}flush(){if(0!==this.batch.length){var e=this.batch;this.batch=[],this.sendReport(e).catch((t=>{on.error("Failed to send "+e.length+" events:",t)}))}}get eventNameKey(){return this.iKey.replace(/-/g,"")}queueEvent(e){(100===e.sampleRate||this.sampledIn)&&(this.batch.push(e),this.batch.length>=this.maxBatchSize?this.flush():(void 0!==this.batchTimeout&&clearTimeout(this.batchTimeout),this.batchTimeout=setTimeout((()=>this.flush()),this.maxBatchInterval)))}async sendReport(e){var t=await fetch("https://dc.services.visualstudio.com/v2/track",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Unexpected response code: "+t.status)}};function dn(e){var t=new ct;return t.addDestroyables([vt(window,"beforeunload",(()=>{t.destroy(),e()})),vt(window,"pagehide",(()=>{t.destroy(),e()}))]),t}var hn=le("AppTracker"),un=class extends ct{constructor(e,t,i){super(),this.appInsights=e,this.applicationName=t,this.customData=i,this.baseFixedTags={deviceId:"browser",deviceType:"Browser",sessionId:Yt(),userId:pn()},this.baseDynamicTags=()=>({operationName:window.location.pathname}),this.addEventListener("destroy",(()=>{this.customData=void 0})),this.addDestroyable(dn((()=>this.appInsights.flush())))}updateFixedProperties(e){void 0===this.customData?this.customData={fixedProperties:e}:void 0===this.customData.fixedProperties?this.customData.fixedProperties=e:Object.assign(this.customData.fixedProperties,e)}trackEvent(e,t){var i=this.collectProperties(t),n=this.collectTags();hn.debug("Sending event:",e,i,n),this.appInsights.trackEvent(e,i,n)}trackMetric(e,t,i){var n=this.collectProperties(i),r=this.collectTags();hn.debug("Sending metric:",e,t,n,r),this.appInsights.trackMetric(e,t,n,r)}trackException(e,t,i){var n=this.collectProperties(i),r=this.collectTags(),s=t?3:2;hn.debug("Sending exception:",e,s,n,r),this.appInsights.trackException(e,s,n,r)}trackQoSEvent(e){var t="nativePlayerQos",i=this.collectTags(),n=this.collectProperties(e);delete n.playback,delete n.mediaInfo,delete n.displayModes,n.properties.applicationName=n.applicationName,n.properties.applicationVersion=n.applicationVersion,hn.debug("Sending event:",t,n,i),this.appInsights.trackEvent(t,n,i)}flush(){this.appInsights.flush()}collectProperties(e){var i,n;return cn(t({applicationName:this.applicationName},null==(i=this.customData)?void 0:i.fixedProperties,null==(n=this.customData)||null==n.dynamicProperties?void 0:n.dynamicProperties(),e))}collectTags(){var e,i,n=t({},this.baseFixedTags,this.baseDynamicTags(),null==(e=this.customData)?void 0:e.fixedTags,null==(i=this.customData)||null==i.dynamicTags?void 0:i.dynamicTags());return void 0===n.userId&&(n.userId=n.sessionId),cn(n)}};function cn(e){return Object.keys(e).reduce(((t,i)=>{var n=e[i];return void 0!==n&&(t[i]=n),t}),{})}function pn(){var e="nrk.player.anonymousUser";try{var t=window.localStorage.getItem(e);return null===t&&(t=Yt(),window.localStorage.setItem(e,t)),t}catch(e){return void hn.log("Failed to store/retrieve anonymous user id:",e)}}var gn=class{constructor(e,t,i){this.playbackStartTime=0,this.finalized=!1,this.programId=e,this.playbackStartTime=t,this.trackingCallback=i}reportPlaybackProgress(e,t){this.finalized||(this.playbackStartTime=e,this.trackingCallback({playbackStartTime:e,timePlayed:t,programId:this.programId}))}finalizeProgressReporting(e){e&&(this.trackingCallback({playbackStartTime:this.playbackStartTime,timePlayed:e,programId:this.programId}),this.finalized=!0)}};var fn=class{constructor(){this.playedRanges=[],this.playedRangesSum=0,this.totalPlayingTimeListeners=[]}timeStarted(e){void 0===this.startPosition&&(this.startPosition=e)}timeStopped(e){if(void 0!==this.startPosition){var t=this.startPosition;if(e>t){var i={start:t,end:e},n=e-t;this.playedRanges.push(i),this.playedRangesSum+=n,this.checkTimeListeners(this.playedRangesSum)}this.startPosition=void 0,this.currentPosition=void 0}}timeUpdate(e){if(void 0!==this.startPosition&&e>=this.startPosition){this.currentPosition=e;var t=this.playedRangesSum+e-this.startPosition;this.checkTimeListeners(t)}}onceTotalPlayingTime(e,t,i){void 0===i&&(i=this);var n=this.getTotalPlayingTime();e<=n?t.call(i,n):(this.totalPlayingTimeListeners.push({time:e,handler:t,context:i}),this.totalPlayingTimeListeners.sort(((e,t)=>e.time-t.time)))}getTotalPlayingTime(){return void 0!==this.startPosition&&void 0!==this.currentPosition?this.playedRangesSum+this.currentPosition-this.startPosition:this.playedRangesSum}getDurationOfMediaPlayed(e){var t=[...this.playedRanges];return void 0!==this.startPosition&&void 0!==this.currentPosition&&t.push({start:this.startPosition,end:this.currentPosition}),function(e){return e.reduce(((e,t)=>e+t.end-t.start),0)}(function(e){if(0===e.length)return[];e.sort(((e,t)=>e.start-t.start));for(var t=[e[0]],i=0,n=1;n<e.length;++n){var r=e[n];r.start>t[i].end?(t.push(r),i++):r.end>t[i].end&&(t[i].end=r.end)}return t}(function(e,t){if(!t)return e;for(var i=[],n=0;n<e.length;++n){var r=e[n];r.end>t.start&&r.start<t.end&&i.push({start:Math.max(t.start,r.start),end:Math.min(t.end,r.end)})}return i}(t,e)))}destroy(){this.totalPlayingTimeListeners=[],this.playedRanges=[]}checkTimeListeners(e){for(;this.totalPlayingTimeListeners.length>0&&this.totalPlayingTimeListeners[0].time<=e;){var t=this.totalPlayingTimeListeners.shift();null==t||t.handler.call(t.context,e)}}},mn=[{hostname:"^[^.]*\\bsmart-tv\\b[^.]*\\.nrk\\.no$",data:{name:"NRK TV Smart TV",options:{applicationInsights:{samplingPercentage:10}}}},{hostname:"^[^.]*\\btv\\b[^.]*\\.nrk\\.no$",data:{name:"NRK TV",options:{applicationInsights:{samplingPercentage:10}}}},{hostname:"^[^.]*\\bradio\\b[^.]*\\.nrk\\.no$",data:{name:"NRK Radio",options:{applicationInsights:{samplingPercentage:10}}}},{hostname:"^[^.]*\\btv\\b[^.]*\\.nrksuper\\.no$",data:{name:"NRK Super TV"}},{hostname:"^(.+\\.)?nrksuper\\.no$",data:{name:"NRK Super"}},{hostname:"^(.+\\.)?p3\\.no$",data:{name:"NRK P3"}},{hostname:"^(.+\\.)?nrkbeta\\.no$",data:{name:"NRK beta"}},{hostname:"^(.+\\.)?yr\\.no$",data:{name:"Yr"}},{hostname:"\\b(ark|felles\\.ds|preview|fil|kubeint|snutt|kurator)\\.nrk\\.no$",data:{environment:"internal"}},{hostname:"^static\\.nrk\\.no$",pathname:"^/dev/",data:{environment:"dev"}},{hostname:"(www|static)\\.nrk\\.no$",pathname:"^(/embed/.*|.*/video-embed(\\.html)?)$",data:{isVideoEmbed:!0}},{hostname:"\\.nrk\\.no$",data:{name:"NRK.no",options:{applicationInsights:{samplingPercentage:1}}}},{hostname:"^localhost$",data:{environment:"test"}},{hostname:"\\.nrk\\.cloud$",data:{environment:"test"}},{hostname:"^[A-Za-z0-9]+$",data:{environment:"internal"}},{hostname:"^160\\.6[78]\\.\\d+\\.\\d+$",data:{environment:"internal"}},{hostname:"^\\d+\\.\\d+\\.\\d+\\.\\d+$",data:{environment:"test"}},{hostname:"^nrkno\\.github\\.io$",data:{environment:"test"}}],vn="embed-test",yn=class{constructor(e){var{parentURL:t=document.referrer,localLocation:i=window.location,hasParent:n=window.top!==window.self}=e||{};if(this.hasParent=n,this.localSite=this.detectSite(i)||{},this.parentSite={},n&&t){var r=this.parseURL(t);r&&(this.parentSite=this.detectSite(r))}}get isEmbedded(){return!(!this.hasParent||!this.localSite.isVideoEmbed)}get environment(){return this.parentSite.environment?this.parentSite.environment:this.localSite.environment?this.localSite.environment:!this.hasParent&&this.localSite.isVideoEmbed?vn:void 0}get isProduction(){return!this.environment}get name(){var e=this.parentSite.name||this.localSite.name;return e&&this.isProduction?e:this.parentSite.location&&this.parentSite.location.hostname?this.parentSite.location.hostname:this.isEmbedded?"N/A":this.localSite.location&&this.localSite.location.hostname?this.localSite.location.hostname:"N/A"}get fullName(){var e=[];return this.environment&&(this.parentSite.configuredEnvironment||this.localSite.configuredEnvironment||this.environment===vn)&&e.push(this.environment),this.isEmbedded&&e.push("embed"),e.length>0?this.name+" ("+e.join(", ")+")":this.name}get options(){return this.parentSite.options||this.localSite.options||{}}parseURL(e){return new URL(e)}detectSite(e){var t={location:e},{hostname:i,pathname:n}=e,r=this.matchSite(i,n);if(r)if(Object.assign(t,r),t.environment)t.configuredEnvironment=!0;else{var s=this.matchEnvironment(i);s&&(t.environment=s,t.options=void 0)}return t}matchSite(e,t){var i=mn.find((i=>new RegExp(i.hostname).test(e)&&(!i.pathname||new RegExp(i.pathname).test(t))));return i?i.data:void 0}matchEnvironment(e){var t=/\b(dev|preprod|nonprod|stage|test)\b/.exec(e);return t?t[1]:void 0}};var bn=class{constructor(e){this.appTracker=e}log(e,t,i){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];if("Metric"!==e){if("AppTracker"!==e&&"AppInsights"!==e&&t===ae.Error){if(i instanceof Et||r.some((e=>e instanceof Et)))return;this.appTracker.trackEvent("log-error",{namespace:e,message:""+i,log:[i,...r]})}}else this.appTracker.trackMetric(i,r[0])}},Sn=[bt.PLAYBACK_STOPPED_DECODE_ERROR,bt.PLAYBACK_STOPPED_NETWORK_ERROR,bt.NO_PLAYBACK_NETWORK_ERROR,bt.NO_PLAYBACK_DECODE_ERROR,bt.UNKNOWN_ERROR,bt.UNSUPPORTED_FORMAT_ERROR];var En,Tn=le("NPAWTracker");function wn(e){e&&(En=new Ii(e,{components:{balancer:!1}}),Tn.log("Reporting start (manifest loading started)"),En.registerDefaultAdapter(),En.getAdapter().fireStart())}function _n(e,t){var i=new ct,n={"content.id":t.mediaId,"content.channel":t.channelId,"content.playbackType":t.assetType,"content.tvShow":t.seriesName,"content.title":t.title,"content.cdn":t.cdn,"content.customDimension.1":t.clientName,"content.customDimension.2":t.correlationId};return En||(En=new Ii(t.accountCode,{components:{balancer:!1}})),En.setAnalyticsOptions(n),En.registerAdapterFromClass(e,class{getIsLive(){return this.player.isLiveStream()}getPlayerName(){return t.playerName}getPlayerVersion(){return t.playerVersion}getResource(){return this.player.getMediaInfo().url}getDuration(){return this.player.getMediaRange().end}getPlayhead(){return this.player.getCurrentTime()}getTitle(){var e;return null!=(e=t.title)?e:"title-placeholder"}getBitrate(){var e,t;return null!=(e=null==(t=this.player.getCurrentQuality())?void 0:t.bitrate)?e:0}getRendition(){var e,t,i,n=this.player.getCurrentQuality();return(null!=(e=null==n?void 0:n.width)?e:0)+"x"+(null!=(t=null==n?void 0:n.height)?t:0)+"@"+(null!=(i=null==n?void 0:n.bitrate)?i:0)+"fbps"}getFramesPerSecond(){var e,t;return null!=(e=null==(t=this.player.getCurrentQuality())?void 0:t.frameRate)?e:0}getVideoCodec(){var e,t=this.player.getCurrentQuality();return null!=t&&t.codecs&&null!=(e=t.codecs.split(",")[0])?e:""}getAudioCodec(){var e,t=this.player.getCurrentQuality();return null!=t&&t.codecs&&null!=(e=t.codecs.split(",")[1])?e:""}},n),function(e,t){e.once(_t.TimeRunningChange,(i=>{Tn.log("Reporting join (playback started)"),t.getAdapter().fireJoin(),e.on(_t.TimeRunningChange,(e=>{e.isTimeRunning?(Tn.log("Reporting resume"),t.getAdapter().fireResume()):(Tn.log("Reporting pause"),t.getAdapter().firePause())}))}))}(e,En),function(e,t){e.on(_t.PlayingChange,(e=>{e.pausedReason===wt.Ended&&(Tn.log("Reporting stop"),t.getAdapter().fireStop())}))}(e,En),function(e,t){e.on(_t.WaitingChange,(e=>{"starting"!==e.reason&&"rebuffering"!==e.reason&&(e.isWaiting?(Tn.log("Reporting seekBegin"),t.getAdapter().fireSeekBegin(void 0,!0)):(Tn.log("Reporting seekEnd"),t.getAdapter().fireSeekEnd())),"rebuffering"===e.reason&&(e.isWaiting?(Tn.log("Reporting bufferBegin"),t.getAdapter().fireBufferBegin(void 0,!0)):(Tn.log("Reporting bufferEnd"),t.getAdapter().fireBufferEnd()))}))}(e,En),function(e,t){e.on(_t.Broken,(e=>{e.error&&(Tn.log("Got broken event, reporting error fatal = "+e.error.fatal),t.getAdapter().fireError(e.error.name,e.error.message,void 0,void 0,e.error.type,e.error.fatal))}))}(e,En),function(e,t){e.on(_t.SessionClosed,(()=>{Tn.log("Reporting stop (session closed)"),t.getAdapter().fireStop(),t.destroy()}))}(e,En),function(e,t){t.addDestroyable(dn((()=>{Tn.log("Reporting stop (before unload)"),e.getAdapter().fireStop(),e.destroy()})))}(En,i),i}var An=(Ci=r("session"),Ni=r("tracker"),Di=r("playbackStartTime"),Li=r("progressTimeout"),Oi=r("trackingEnabled"),ki=r("reportingInterval"),Bi=r("notBefore"),xi=r("clearTimeout"),Mi=r("sendProgressUpdate"),Ui=r("registerEventListeners"),class extends ct{constructor(e,t,i){super(),Object.defineProperty(this,Ui,{value:In}),Object.defineProperty(this,xi,{value:Pn}),Object.defineProperty(this,Ci,{writable:!0,value:void 0}),Object.defineProperty(this,Ni,{writable:!0,value:void 0}),Object.defineProperty(this,Di,{writable:!0,value:void 0}),Object.defineProperty(this,Li,{writable:!0,value:void 0}),Object.defineProperty(this,Oi,{writable:!0,value:!1}),Object.defineProperty(this,ki,{writable:!0,value:3e4}),Object.defineProperty(this,Bi,{writable:!0,value:120}),Object.defineProperty(this,Mi,{writable:!0,value:()=>{s(this,xi)[xi](),s(this,ki)[ki]>0&&(s(this,Li)[Li]=mt(s(this,Mi)[Mi],s(this,ki)[ki]),this.addDestroyable(s(this,Li)[Li])),s(this,Oi)[Oi]&&s(this,Ni)[Ni].reportPlaybackProgress(s(this,Di)[Di],s(this,Ci)[Ci].getCurrentTime())}}),s(this,Ci)[Ci]=e,s(this,Ni)[Ni]=t,s(this,Di)[Di]=i,s(this,Ui)[Ui]()}trackProgress(){s(this,Ni)[Ni].reportPlaybackProgress(s(this,Di)[Di],s(this,Ci)[Ci].getCurrentTime())}trackAsCompleted(){s(this,Ni)[Ni].finalizeProgressReporting(s(this,Ci)[Ci].getMediaRange().end)}});function Pn(){void 0!==s(this,Li)[Li]&&(s(this,Li)[Li].destroy(),s(this,Li)[Li]=void 0)}function In(){s(this,Ci)[Ci].once(_t.MediaRangeChange,(e=>{if(!s(this,Ci)[Ci].isLiveStream()){var t=s(this,Ci)[Ci].createTimeRangeEventTrack();t.addRange({start:s(this,Bi)[Bi],end:s(this,Ci)[Ci].getScrubberRange().end}),t.on("enter",(e=>{t.removeRange(e.range),s(this,Oi)[Oi]=!0,s(this,Mi)[Mi]()})),this.addDestroyable(dn((()=>{s(this,Oi)[Oi]&&s(this,Ni)[Ni].reportPlaybackProgress(s(this,Di)[Di],s(this,Ci)[Ci].getCurrentTime())})))}})),s(this,Ci)[Ci].on(_t.WaitingChange,(e=>{e.isWaiting||"seeking"!==e.reason||(s(this,Di)[Di]=s(this,Ci)[Ci].getCurrentTime())})),s(this,Ci)[Ci].on(_t.TimeRunningChange,(e=>{s(this,Oi)[Oi]&&(s(this,xi)[xi](),e.isTimeRunning?(s(this,Li)[Li]=mt(s(this,Mi)[Mi],s(this,ki)[ki]),this.addDestroyable(s(this,Li)[Li])):s(this,Ni)[Ni].reportPlaybackProgress(s(this,Di)[Di],s(this,Ci)[Ci].getCurrentTime()))})),s(this,Ci)[Ci].on(_t.Broken,(()=>{s(this,xi)[xi](),s(this,Oi)[Oi]&&s(this,Ni)[Ni].reportPlaybackProgress(s(this,Di)[Di],s(this,Ci)[Ci].getCurrentTime())}))}var Rn=class{constructor(e,t,i){this.config=t,this.client=new e(t.springStreamSite||"test"),this.playerAdapter=i,this.programId=""!==t.springStreamProgramId?t.springStreamProgramId:void 0}start(){this.stream||(this.stream=this.client.track("nrk",this.createDescription(),this.createAdapter()))}stop(){this.stream&&(this.stream.stop(),this.stream=void 0)}updateProgramId(e){this.programId!==e&&(this.programId=e,this.stream&&(this.stop(),this.start()))}get libraryVersion(){return this.client.version}createAdapter(){return{getMeta:()=>({pl:this.playerAdapter.getPlayerName(),plv:this.playerAdapter.getPlayerVersion(),sx:window.screen.width,sy:window.screen.height}),getDuration:()=>this.playerAdapter.isLive()?0:Math.round(this.playerAdapter.getDuration()),getPosition:()=>this.playerAdapter.isLive()?this.playerAdapter.getCurrentLiveTime():this.playerAdapter.getCurrentTime()}}createDescription(){var e,t;return{stream:this.config.springStreamStream,ct:this.config.springStreamContentType,cq:null!=(e=null==(t=this.programId)?void 0:t.toUpperCase())?e:this.playerAdapter.getChannelId()}}},Cn=le("EPGEvents"),Nn=class extends Vi{constructor(e){super(),this.updating=!1,this.session=e,this.session.on(_t.TimeRunningChange,this.handleTimeRunningChange,this),this.changeTrack=e.createTimeRangeEventTrack(),this.changeTrack.on("enter",this.handleProgramChange,this),this.changeTrack.on("exit",this.handleProgramChange,this),this.imminentTrack=e.createTimeRangeEventTrack(),this.imminentTrack.on("enter",this.handleProgramStartImminent,this),this.entries=[]}getCurrentEntry(){return void 0!==this.currentEPGIndex?this.entries[this.currentEPGIndex]:void 0}getEntryByTime(e){if(0!==this.entries.length)for(var t of this.entries)if(t.actualStart.utc<=e.utc&&t.actualEnd.utc>=e.utc)return t}async updateEPG(e){var t=this.session.getMediaRange();0===t.start&&0===t.end&&(Cn.log("Waiting for media range."),await new Promise((e=>this.session.once(_t.MediaRangeChange,(()=>e())))),t=this.session.getMediaRange()),Cn.log("Updating EPG data."),this.updating=!0,this.changeTrack.removeAllRanges(),this.imminentTrack.removeAllRanges(),this.entries=e;for(var i=0;i<e.length-1;++i){var n=Math.floor(e[i].actualEnd.utc);if(Math.floor(e[i+1].actualStart.utc)-n>0){var r={actualStart:new et(e[i].actualEnd.utc,e[i].actualEnd.tzOffset),actualEnd:new et(e[i+1].actualStart.utc,e[i+1].actualStart.tzOffset)};e.splice(i+1,0,r)}}if(0===e.length){var s=Ln(0);e.push({actualStart:new et(s[0].getTime(),s[0].getTimezoneOffset()),actualEnd:new et(s[1].getTime(),s[1].getTimezoneOffset())});var a=Ln(1);e.push({actualStart:new et(a[0].getTime(),a[0].getTimezoneOffset()),actualEnd:new et(a[1].getTime(),a[1].getTimezoneOffset())})}for(var o=0;o<e.length;++o){var l=e[o],d=this.session.liveTimeToPosition(l.actualEnd.toDateObject());if(d>t.start){var h=this.session.liveTimeToPosition(l.actualStart.toDateObject());this.changeTrack.addRange({start:h,end:d},o),this.imminentTrack.addRange({start:h-180,end:h},o)}}this.updating=!1,this.emit("epgupdated",e),Cn.log("EPG update done.")}destroy(){void 0!==this.programExitTimeout&&(clearTimeout(this.programExitTimeout),this.programExitTimeout=void 0),this.changeTrack.destroy(),this.imminentTrack.destroy(),this.removeAllListeners()}handleTimeRunningChange(e){if(e.isTimeRunning&&void 0!==this.pausedEPGIndex){var t=-1===this.pausedEPGIndex?void 0:this.pausedEPGIndex;this.pausedEPGIndex=void 0,this.currentEPGIndex!==t&&this.changeProgram(t)}}handleProgramChange(e){void 0!==this.programExitTimeout&&(clearTimeout(this.programExitTimeout),this.programExitTimeout=void 0);var t=e.range.data;"enter"===e.type&&this.updating&&t===this.currentEPGIndex?Cn.debug("Got "+e.type+" "+t+". Ignoring due to data update."):this.session.isTimeRunning()?"enter"===e.type?(Cn.debug("Got "+e.type+" "+t+". Changing to "+t+"."),this.changeProgram(t)):this.currentEPGIndex===t?(Cn.debug("Got "+e.type+" "+t+". Changing to no program unless immediate enter."),this.changeProgram(void 0)):Cn.debug("Got "+e.type+" "+t+". Ignoring due to late exit."):"enter"===e.type?(Cn.debug("Got "+e.type+" "+t+". Changing to "+t+" when time starts."),this.pausedEPGIndex=t,this.emit("programstartimminent",this.entries[t],0)):void 0===this.pausedEPGIndex&&this.currentEPGIndex===t?(Cn.debug("Got "+e.type+" "+t+". Changing to no program when time starts."),this.pausedEPGIndex=-1):this.pausedEPGIndex===t?(Cn.debug("Got "+e.type+" "+t+". Clearing next program."),this.pausedEPGIndex=void 0):Cn.debug("Got "+e.type+" "+t+". Ignoring due to late exit.")}handleProgramStartImminent(e){var t=e.range.data,i=e.range.end,n=this.session.getCurrentTime();this.emit("programstartimminent",this.entries[t],Math.max(0,i-n))}changeProgram(e){if(void 0!==e){this.currentEPGIndex=e;var t=this.getCurrentEntry();Cn.log("Program changed: "+(Dn(t)?t.programId:"unknown")+" - "+(Dn(t)?t.heading:"unknown")),this.emit("programchange",t)}else this.programExitTimeout=setTimeout((()=>{this.currentEPGIndex=void 0,Cn.log("Program changed: No program."),this.emit("programchange")}),100)}};function Dn(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"programId")}function Ln(e){var t=new Date(new Date);return t.setDate(t.getDate()+e),[new Date(t.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,0))]}var On=e=>e<10?"0"+e:e,kn=class e{constructor(e,t){this.utc=e,this.tzOffset=t}static parse(t){var i=/^\/Date\((\d+)(?:([+-]\d{2})(\d{2}))?\)\/$/.exec(t);if(i){var n=parseInt(i[1],10),r=i.length>2?60*parseInt(i[2],10)+parseInt(i[3],10):0;return new e(n,r)}throw new Error("Unknown format: "+t)}toModernPSAPIFormat(){var e=new Date(this.utc+60*this.tzOffset*1e3);return[e.getUTCFullYear(),"-",On(e.getUTCMonth()+1),"-",On(e.getUTCDate()),"T",On(e.getUTCHours()),":",On(e.getUTCMinutes()),":",On(e.getUTCSeconds()),this.tzOffset<0?"-":"+",On(Math.floor(this.tzOffset/60)),":",On(this.tzOffset%60)].join("")}toCompactLocalDate(){var e=new Date(this.utc+60*this.tzOffset*1e3);return[e.getUTCFullYear(),On(e.getUTCMonth()+1),On(e.getUTCDate())].join("")}toDateObject(){return new Date(this.utc)}},Bn=le("SnowplowTracker"),xn="unknown";function Mn(e,t,i,n,r){var s,a=new ct,o=void 0,l=!1,d=!1,h=!1,u=0,c=-1,p=i.mediaId,g=()=>{void 0!==s&&(s.destroy(),s=void 0)};return a.addDestroyable(vt(document,"player.playNextEpisode",(()=>{if(!l&&h){var t=T(e,o);Bn.info("event 'complete' on playNextEpisode "+u+" "+t),(0===t||t<u)&&(t=u),l=b(u,t,Un(e))}}),{once:!0})),e.once(_t.TimeRunningChange,(()=>{u=T(e,o),e.isLiveStream()||(v(p,{kind:i.contentKind,channelId:i.channelId,source:i.contentSource}),Bn.debug("event 'start' for ODM "+u),t.sendStartEvent(u,!1),h=!0,t.setMediaAutoplay(!1),m()),e.isLiveStream()&&f()&&function(){v(p,{kind:i.contentKind,channelId:i.channelId,source:i.contentSource});var n=Math.floor(e.getCurrentTime());Bn.debug("event 'start' for live2vod "+p+" "+n),t.sendStartEvent(u,!1),h=!0,m(),u=n,t.setMediaAutoplay(!1)}(),e.on(_t.PlayingChange,(n=>{if(!n.isPlaying&&"ended"===n.pausedReason&&!l){var s=T(e,o);Bn.debug("event 'complete' on ended "+u+" "+s),l=b(u,s,Un(e))}e.isLiveStream()?f()?function(i){var n=T(e,o);i.isPlaying&&(Bn.debug("event 'start' on PlayingChange:play (live2vod) "+n),t.sendStartEvent(n,Un(e)),m(),u=n)}(n):function(n){var s=T(e,o),a=null==r?void 0:r.getEntryByTime((l=e,new kn(l.getCurrentTimeLive().getTime(),(new Date).getTimezoneOffset())));var l;h||v(Vn(o),{kind:i.contentKind,channelId:i.channelId,source:i.contentSource});n.isPlaying?Vn(a)===Vn(o)&&(Bn.debug("event 'start' on PlayingChange:play (live) "+s),t.sendStartEvent(s,Un(e)),m(),u=s):Vn(a)!==Vn(o)&&(u=s)}(n):function(i){if(i.isPlaying){var n=T(e,o);Bn.debug("event 'start' on PlayingChange:play (ODM) "+n),t.sendStartEvent(n,Un(e)),m(),u=n}}(n)})),e.on(_t.TimeRunningChange,(i=>{var n=e.isPlaying(),r=e.getPausedReason();e.isLiveStream()?f()?function(i,n,r){if(i.isTimeRunning&&n)c=-1,u=T(e,o);else if(!i.isTimeRunning&&!r){var s=w(i.time,e,o);if(Bn.debug("event 'progress' on TimeRunningChange:pause (live2vod) "+u+" "+s),u>s)return void E("progress",u,s,e.getCurrentTime(),"TimeRunningChange:pause (live2vod)");t.sendProgressEvent(u,s,Un(e)),m(),c=s,u=T(e,o)}}(i,n,r):function(i,n,r){if(i.isTimeRunning&&n)c=-1,u=T(e,o);else if(!i.isTimeRunning&&!r){var s=w(i.time,e,o);if(Bn.debug("event 'progress' on TimeRunningChange:pause (live) "+u+" "+s),u>s)return void E("progress",u,s,e.getCurrentTime(),"TimeRunningChange:pause (live)");t.sendProgressEvent(u,s,Un(e)),m(),c=s,u=T(e,o)}}(i,n,r):function(i,n,r){if(i.isTimeRunning&&n)u=T(e,o);else if(!i.isTimeRunning&&!r){var s=w(i.time,e,o);if(u>s)return Bn.debug("event 'progress' on TimeRunningChange:pause (ODM) "+u+" "+u),t.sendProgressEvent(u,u,Un(e)),0!==s&&(u=s),void m();l||(Bn.debug("event 'progress' on TimeRunningChange:pause (ODM) "+u+" "+s),t.sendProgressEvent(u,s,Un(e)),m(),u=T(e,o))}}(i,n,r)}))})),null==r||r.on("programchange",(n=>{var r;if(!(!n||e.isLiveStream()&&f())){var s=o,a=T(e,o=n);(null==(r=o)||null==(r=r.actualEnd)?void 0:r.utc)<e.getCurrentTimeLive().getTime()||(h?e.isTimeRunning()&&-1===c?function(n,r,s){var a=0===T(e,n)?u:T(e,n);h&&(Bn.debug("event 'complete' on epg change "+Vn(n)+" -> "+Vn(r)+"  "+u+" "+a),b(u,a,Un(e)));v(Vn(r),{kind:i.contentKind,channelId:i.channelId,source:i.contentSource}),Bn.debug("event 'start' on epg change "+Vn(r)+" "+s),t.sendStartEvent(s,Un(e)),m(),u=s,h||(h=!0)}(s,n,a):e.isTimeRunning()&&function(n,r,s){S(c,c,"epg change "+Vn(n),Un(e)),m(),c=-1,v(Vn(r),{kind:i.contentKind,channelId:i.channelId,source:i.contentSource}),Bn.debug("event 'start' on epg change "+Vn(r)+" "+s),t.sendStartEvent(s,Un(e)),u=s}(s,n,a):function(n,r){v(Vn(n),{kind:i.contentKind,channelId:i.channelId,source:i.contentSource}),Bn.debug("initial 'start' event on epg change "+Vn(n)+" "+r),t.sendStartEvent(r,Un(e)),m(),h=!0,u=r,t.setMediaAutoplay(!1)}(n,a))}})),e.on(_t.SessionClosed,(()=>{var t=T(e,o);if(!l&&!d){if(!e.isTimeRunning()&&u>t)return void(d=S(t,t,"session close",Un(e)));if(e.isTimeRunning()&&u>t&&0===t)return void(d=S(u,u,"session close",Un(e)));if(u>t)return E("exit",u,t,e.getCurrentTime(),"session close");d=S(u,t,"session close",Un(e))}g()})),a.addDestroyable(dn((()=>{if(!l&&!d){var t=T(e,o);if(!e.isTimeRunning()&&u>t)return void S(t,t,"unload",Un(e));if(e.isTimeRunning()&&u>t&&0===t)return void S(u,u,"unload",Un(e));if(u>t)return E("exit",u,t,e.getCurrentTime(),"unload");S(u,t,"unload",Un(e))}g()}))),a;function f(){return!r||0===r.entries.length}function m(){g(),s=mt(y,174e4)}function v(e,n){e&&e!==xn?t.setMedia(e,{kind:null==n?void 0:n.kind,source:null==n?void 0:n.source,channelId:null==n?void 0:n.channelId}):t.setUnknownMedia(i.channelId)}function y(){var i=T(e,o);return!e.isTimeRunning()&&u>i?(Bn.debug("event 'progress' periodic interval (custom) "+i+" "+i),t.sendProgressEvent(i,i,Un(e)),u=i,void m()):u>i?E("progress",u,i,e.getCurrentTime(),"periodic"):(Bn.debug("event 'progress' on periodic interval "+u+" "+i),t.sendProgressEvent(u,i,Un(e)),u=i,void m())}function b(e,i,n){return t.sendCompleteEvent(e,i,n),!0}function S(i,n,r,s){return!!h&&(i>n?E("exit",i,n,e.getCurrentTime(),"exit"):(Bn.debug("event 'exit' on "+r+" "+i+" "+n),t.sendExitEvent(i,n,s),!0))}function E(e,t,i,r,s){var a,o=new Error("Invalid end time");return null==(a=n.appTracker)||a.trackException(o,!1,{id:p,eventName:e,startTime:t,endTime:i,stack:o.stack,context:s,currentTime:r,at:(new Date).toString()}),!1}function T(e,t){return e.isLiveStream()?t?(i=e.getCurrentTimeLive(),n=t.actualStart,Math.max(0,Math.floor((i.getTime()-n.utc)/1e3))):Math.max(0,Math.floor(e.liveTimeToPosition(e.getCurrentTimeLive()))):Math.max(0,Math.floor(e.getCurrentTime()));var i,n}function w(e,t,i){return t.isLiveStream()?i?function(e,t,i){return Math.max(0,Math.floor((t.positionToLiveTime(e).getTime()-i.utc)/1e3))}(e,t,i.actualStart):0===e?Math.max(0,Math.floor(t.liveTimeToPosition(t.getCurrentTimeLive()))):Math.max(0,Math.floor(e)):Math.max(0,Math.floor(e))}}function Un(e){return e.isLiveStream()}function Vn(e){return e&&tt(e)?e.programId:xn}var Fn,qn,Hn=le("PlayerTracker"),Gn="player-core",Xn=class{constructor(e,t,i){this.playerInfo=e,this.snowplowBundle=i;var n,{aiDiagnosticsId:r,scoresLibrary:s,parentURL:a}=t;if(this.site=new yn(a?{parentURL:a}:void 0),this.parentURL=a,this.aiDiagnosticsId=r,this.scoresLibrary=s,this.disableAppInsights=t.disableAppInsights,!this.disableAppInsights){var o,l={stage:"f4cf2c52-4917-43bd-b257-d82b0a681e18",prod:"ff70c9d2-d463-4e98-acb2-b1862bbddde1"};if(void 0===Fn&&(Hn.log("Creating shared Application Insights instance for site:",this.site.fullName),Fn=new ln(this.site.isProduction?l.prod:l.stage,{})),void 0===qn)Hn.log("Creating shared Application Insights tracker."),qn=new un(Fn,e.name,{fixedProperties:{applicationVersion:e.version,applicationFamily:null!=(o=e.family)?o:Gn,hostname:window.location.hostname,site:this.site.fullName,parentURL:a,diagnosticsId:r,team:t.teamName,service:t.serviceName}}),Hn.log("Creating shared AppInsightsLogHandler."),n=new bn(qn),oe.push(n);this.appTracker=qn}}trackSession(e,i,n,r){var s,a=Yt(),o=new ct,l=function(e){var t=new fn;return e.on(_t.TimeRunningChange,(e=>{e.isTimeRunning?t.timeStarted(e.time):t.timeStopped(e.time)})),e.on(_t.TimeUpdate,(e=>{t.timeUpdate(e)})),t}(e),d={playedTimeCollector:l};if(o.addDestroyable(l),e.on(_t.SessionClosed,(()=>o.destroy())),n.npaw&&n.npaw.accountCode&&(Hn.log("Tracking session with NPAW on account "+n.npaw.accountCode+"."),o.addDestroyable(_n(e,n.npaw))),this.snowplowBundle&&n.snowplow&&n.snowplow.appId&&n.snowplow.endpointURL&&(Hn.log("Tracking session with Snowplow.",n.snowplow),d.snowplowTracker=new pi(this.snowplowBundle,{collectorUrl:n.snowplow.endpointURL,appId:n.snowplow.appId,appVersion:this.playerInfo.version,appBuild:this.playerInfo.build,environment:this.site.isProduction?"prod":this.site.environment,serviceId:n.snowplow.serviceId,platform:n.snowplow.platform,disableLocalStorage:!0,disableWebContext:!0,plugins:[new Ti]}),o.addDestroyable(Mn(e,d.snowplowTracker,{mediaId:n.snowplow.mediaId,contentKind:n.snowplow.contentKind,contentSource:n.snowplow.contentSource,autoplay:n.snowplow.autoplay,channelId:n.snowplow.channelId,startTime:n.snowplow.startTime,startTimeLive:n.snowplow.startTimeLive},d,r))),n.progress){Hn.log("Tracking session with PSAPI progress tracker.");var h=new gn(n.progress.programId,n.progress.playbackStartTime,n.progress.trackingCallback);d.progressTracker=new An(e,h,n.progress.playbackStartTime),o.addDestroyable(d.progressTracker)}if(n.scores&&n.scores.config&&this.scoresLibrary){var u,c,p,g;Hn.log("Tracking session with TNS Scores.");var f="channel"===(null==(u=i.metadata)||null==(u=u.availability.live)?void 0:u.type)?null!=(c=null==(p=i.manifest)?void 0:p.id)?c:null==(g=i.metadata)?void 0:g.id:void 0,m=function(e,t,i,n){var r=function(e,t){return{getPlayerName:()=>t.playerName,getPlayerVersion:()=>t.playerVersion,getChannelId:()=>t.channelId,isLive:()=>e.isLiveStream(),getDuration:()=>e.getMediaRange().end,getCurrentTime:()=>e.getCurrentTime(),getCurrentLiveTime:()=>e.getCurrentTimeLive().getTime()/1e3}}(e,i),s=new Rn(t,i.config,r),a=dn((()=>s.stop()));return e.on(_t.Broken,(()=>s.stop())),e.on(_t.SessionClosed,(()=>s.stop())),null==n||n.on("programchange",(e=>{Dn(e)&&s.updateProgramId(null==e?void 0:e.programId)})),e.on(_t.PlayingChange,(e=>{e.isPlaying?void 0!==e.type&&s.start():e.pausedReason===wt.Ended&&s.stop()})),e.isPlaying()&&s.start(),{destroyable:a,libraryVersion:s.libraryVersion}}(e,this.scoresLibrary,{playerName:this.playerInfo.name,playerVersion:this.playerInfo.version,config:n.scores.config,channelId:f},r);s=m.libraryVersion,o.addDestroyable(m.destroyable)}if(!this.disableAppInsights){var v,y,b,S;Hn.log("Tracking session with App Insights.");var E=new un(Fn,this.playerInfo.name,{fixedProperties:{applicationVersion:this.playerInfo.version,applicationFamily:null!=(v=this.playerInfo.family)?v:Gn,hostname:window.location.hostname,site:this.site.fullName,parentURL:this.parentURL,trackingSession:a,diagnosticsId:this.aiDiagnosticsId,team:null==(y=n.appInsights)?void 0:y.teamName,service:null==(b=n.appInsights)?void 0:b.serviceName,versions:{PlayerCore:At,SpringStreams:null!=(S=s)?S:"none"}},dynamicProperties:()=>{var t=e.getCurrentTimeLive(),i=void 0!==t?t.getTime()/1e3:e.getCurrentTime();return{mediaInfo:e.getMediaInfo(),adapterInfo:e.getAdapterInfo(),documentHidden:"webkitHidden"in document?document.webkitHidden:document.hidden,documentReadyState:document.readyState,playback:{time:i,position:e.getCurrentTime(),quality:e.getCurrentQuality(),rate:e.getPlaybackRate(),state:e.getState(),waitingReason:e.getWaitingReason(),pausedReason:e.getPausedReason(),mediaRange:e.getMediaRange()},displayModes:{pip:e.getPiPState(),fullscreen:e.getFullscreenState(),airPlay:e.getAirPlayState()}}},fixedTags:{sessionId:a}});if(d.appTracker=E,o.addDestroyable(function(e,t){var i,n=new ct,r="player-core";return e.once(_t.MediaInfoLoaded,(()=>{t.trackEvent(r+"-media-info-loaded")})),e.on(_t.PlayingChange,(e=>{e.pausedReason===wt.AutoplayBlocked?t.trackEvent(r+"-autoplay-blocked"):void 0!==e.type&&t.trackEvent(r+"-"+e.type)})),e.once(_t.TimeRunningChange,(e=>{e.isTimeRunning&&t.trackEvent(r+"-playing")})),e.on(_t.WaitingChange,(e=>{if(e.isWaiting)void 0!==i&&i.stillWaitingTimeout.destroy(),i={reason:e.reason,startTime:Date.now(),stillWaitingTimeout:mt((()=>{var i=r+"-duration-"+e.reason+"-20s";t.trackEvent(i,{duration:2e4})}),2e4)},n.addDestroyable(i.stillWaitingTimeout);else{var s,a;if((null==(s=i)?void 0:s.reason)!==e.reason)return null==(a=i)||a.stillWaitingTimeout.destroy(),void(i=void 0);var o=Date.now()-i.startTime,l=r+"-duration-"+i.reason;i.stillWaitingTimeout.destroy(),i=void 0,t.trackEvent(l,{duration:o})}})),n.addDestroyables([vt(document,"visibilitychange",(()=>{var e;null==(e=i)||e.stillWaitingTimeout.destroy(),i=void 0})),vt(document,"webkitvisibilitychange",(()=>{var e;null==(e=i)||e.stillWaitingTimeout.destroy(),i=void 0})),dn((()=>{if(void 0!==i){var e;null==(e=i)||e.stillWaitingTimeout.destroy();var n=Date.now()-i.startTime;t.trackEvent(r+"-duration-"+i.reason+"-exit",{duration:n})}}))]),e.on(_t.Broken,(e=>{var i=e.error;t.trackEvent(r+"-broken",{error:i}),i&&t.trackException(i,i.fatal,{cause:i.getCauseAsString()})})),e.once(_t.SessionClosed,(()=>{t.flush()})),n}(e,E)),o.addDestroyable(E),n.metadata){var T;Hn.log("Tracking playback errors.");var w=this.playerInfo;!function(e,t,i,n){t.on(_t.Broken,(r=>{var s,a=r.error;if(a&&(!n.retryEnabled||!Sn.includes(a.type)||n.retriedSession)){var o=t.getMediaInfo().url,l=new URL(o),d={[bt.PLAYBACK_STOPPED_DECODE_ERROR]:"media",[bt.PLAYBACK_STOPPED_NETWORK_ERROR]:"network",[bt.NO_PLAYBACK_NETWORK_ERROR]:"network",[bt.NO_PLAYBACK_DECODE_ERROR]:"media",[bt.UNKNOWN_ERROR]:"unknown",[bt.UNSUPPORTED_FORMAT_ERROR]:"media"}[a.type],h=t.isLiveStream();e.trackEvent("nativePlayerError",{Properties:Object.assign({mediaUrlHost:l.host,mediaUrlPath:l.pathname,mediaUrlQuery:l.search,playerTime:""+Math.floor(h?t.getCurrentTimeLive().getTime()/1e3:t.getCurrentTime()),playerIsRunningInBackground:"n/a",errorCategory:d,errorType:a.type,errorCode:"n/a",errorDescription:a.message,underlyingErrorType:null!=(s=a.causeSummary)?s:"n/a",underlyingErrorCode:"n/a",underlyingErrorDescription:a.getCauseAsString()},i)})}}))}(E,e,t({platform:null!=(T=w.platform)?T:"web",applicationName:w.name,applicationVersion:w.version},n.metadata),n.errors?n.errors:{retryEnabled:!1,retriedSession:!1})}}return d}};function jn(e){return le(e)}var Wn=1e4;class zn extends h{constructor(e,t){if(super(),this.entries=[],this._logger=jn("EPGState"),this._reloadInterval=Wn,this._player=e,!this._player.psapiClient)throw new Error("EPGState needs player.psapiClient to exist.");t?this.activeSession=t:(this._logger.log("Starting date-based EPG loop."),this.updateEPGLoop(this._player.psapiClient,Wn).catch((t=>{var i=ge(t);"AbortError"===i.name?this._logger.log("Date-based EPG updates aborted."):(this._logger.warn("Updating date-based EPG failed (no recovery).",t),e.panic(i))})))}set activeSession(e){if(!e)throw new Error("EPGEvents needs player.activeSession to exist.");if(this._activeSession=e,this._events=new Nn(this._activeSession),!this._player.psapiClient)throw new Error("EPGState needs player.psapiClient to exist.");this._logger.log("Starting event-based EPG loop."),this._player.psapiClient.abort(),this.updateEPGLoop(this._player.psapiClient,9e5).catch((e=>{var t=ge(e);"AbortError"===t.name?this._logger.log("Event-based EPG updates aborted."):(this._logger.warn("Updating event-based EPG failed (no recovery).",e),this._player.panic(t))}))}get events(){return this._events}async updateEPGEntries(e){var t;(this.entries=e,this._events)&&await(null==(t=this._events)?void 0:t.updateEPG(e))}get currentProgram(){var e,t=null==(e=this.events)?void 0:e.getCurrentEntry();return tt(t)?t:0!==this.entries.filter(tt).length?this.entries.filter(tt).find((e=>e.isCurrentlyLive)):void 0}destroy(){var e;super.destroy(),null==(e=this._events)||e.destroy()}async updateEPGLoop(t,i){void 0===i&&(i=Wn),this._reloadInterval=i;var n,r=!1,s=!1;try{for(var a,o=function(t){var i,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(i=t[n]))return i.call(t);if(r&&null!=(i=t[r]))return new e(i.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(t.loadEPG(i));r=!(a=await o.next()).done;r=!1){var l=a.value;if(this._reloadInterval!==i)break;this._logger.log(0===l.length?"No EPG available.":"Updating EPG events."),await this.updateEPGEntries(l)}}catch(e){s=!0,n=e}finally{try{r&&null!=o.return&&await o.return()}finally{if(s)throw n}}this._logger.log("EPG iterator ended.")}}function Kn(e){return class extends e{static get reactiveProperties(){return t({},super.reactiveProperties,{dimensions:Object})}constructor(){super(...arguments),this.dimensions={height:0,width:0},this._resizeObserver=void 0}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this._initResizeObserver()}disconnectedCallback(){this._resizeObserver&&this._resizeObserver.disconnect(),super.disconnectedCallback&&super.disconnectedCallback()}_initResizeObserver(){if(void 0===window.ResizeObserver)throw Error("ResizeObserver not supported on this platform");this._resizeObserver=new ResizeObserver((e=>{for(var t of e){var i=t.contentBoxSize?t.contentBoxSize[0]:void 0;this.dimensions=i?{height:i.blockSize,width:i.inlineSize}:{height:t.contentRect.height,width:t.contentRect.width}}})),this._resizeObserver.observe(this)}}}class Yn{constructor(e,t){var i;void 0===t&&(t={}),(this._host=e).addController(this),this.value=!1,this._onChanged=null!=(i=t.onChanged)?i:()=>e.requestUpdate(),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}hostConnected(){this._host.addEventListener("focus",this._onFocus,!0),this._host.addEventListener("blur",this._onBlur,!0)}_onFocus(e){this.value||(this.value=!0,this._onChanged.call(this._host))}_onBlur(e){this._host.contains(e.relatedTarget)||(this.value=!1,this._onChanged.call(this._host))}hostDisconnected(){this._host.removeEventListener("focus",this._onFocus,!0),this._host.removeEventListener("blur",this._onBlur,!0)}}function Qn(e,t){void 0===t&&(t="player");for(var i=e;i&&i!==document.body;){if(i.getAttribute("type")===t)return i;i=i.parentElement}throw Error("no parent <xx-"+t+'> element found. Ensure that "element" is a child of a <xx-'+t+">, and that <xx-"+t+'> has a type="'+t+'" attribute')}function $n(e){for(var t=e;t&&t!==document.body;){if((t.hasAttribute("action")||"action"in t)&&"form"!==t.tagName&&!t.hasAttribute("disabled"))return t;t=t.parentElement}}function Jn(e){var t,i,n=$n(e.target);if(!n)return[void 0,void 0];var r=n.getAttribute("action")||n.action,s=null!=(t=null==(i=n.getAttribute("action:events"))?void 0:i.split(/,\s?/g))?t:n.actionEvents;return s&&!s.includes(e.type)?[void 0,void 0]:[r,n.value]}function Zn(e,t){var i="touches"in t?t.changedTouches[0].clientX:t.clientX,{left:n,width:r}=e.getBoundingClientRect(),s=(i-n)/r;return Math.min(1,Math.max(0,s))}function er(e){var t=getComputedStyle(e);return t.fontSize&&/\d+(\.\d+)?px/.test(t.fontSize)?parseFloat(t.fontSize):0}var tr="ElementPanic";function ir(e){return class extends e{panic(e){this.dispatchEvent(new CustomEvent(tr,{bubbles:!0,cancelable:!0,detail:e}))}}}function nr(e){window.performance.mark(e)}var rr=!1;if("undefined"!=typeof window)try{var sr=Object.defineProperty({},"passive",{get:()=>(rr=!0,!0)});window.addEventListener("testPassive",null,sr),window.removeEventListener("testPassive",null,sr)}catch(e){}function ar(){return/Apple/.test(window.navigator.vendor)}function or(){return/Trident/.test(window.navigator.userAgent)}function lr(){return e=window.MSStream,/iPhone|iPod/.test(window.navigator.userAgent)&&!e||/Windows Phone/.test(window.navigator.userAgent)||/android/i.test(window.navigator.userAgent);var e}function dr(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function hr(){return rr}function ur(){return"undefined"!=typeof window&&"PointerEvent"in window?{enter:"pointerenter",down:"pointerdown",leave:"pointerleave",move:"pointermove",over:"pointerover",out:"pointerout",up:"pointerup"}:{enter:"mouseenter",down:cr()?"touchstart":"mousedown",leave:"mouseleave",move:cr()?"touchmove":"mousemove",over:"mouseover",out:"mouseout",up:cr()?"touchend":"mouseup"}}function cr(){return"undefined"!=typeof window&&"ontouchstart"in window}function pr(e){return 0===e.length?"":void 0!==e[0].uri?e.map((e=>{var{uri:t,width:i}=e;return t+" "+i+"w"})).join(", "):e.map((e=>{var{url:t,pixelWidth:i}=e;return t+" "+i+"w"})).join(", ")}var gr=["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"];function fr(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var mr={hour:["time","r"],minute:["minutt","er"],second:["sekund","er"]};function vr(e){if(wr(e))return e;if(e instanceof Date)return{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),ms:e.getMilliseconds()};if("number"==typeof e){e=Math.abs(e);var t=(i=e,n=3,r=Math.pow(10,n),Math.round(i*r)/r);return{hours:Math.floor(e/3600),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60),ms:Number(t.toString().split(".")[1])}}return"string"==typeof e?ye.parse(e):{hours:0,minutes:0,seconds:0,ms:0};var i,n,r}function yr(e){wr(e)||(e=vr(e));var{hours:t=0,minutes:i=0,seconds:n=0}=e,r=_r(i)+":"+_r(n);return t>0?_r(t)+":"+r:r}function br(e){e=vr(e);var{hours:t=0,minutes:i=0,seconds:n=0}=e;return t||i||n?[Tr("hour",t),Tr("minute",i),!t&&Tr("second",n)].filter(Boolean).join(" og "):"0 sekunder"}function Sr(e,t){var i;return fr(e,t)?""+Er(e):Math.abs(t.getTime()-e.getTime())/1e3/60/60/24<5?gr[e.getDay()]+" "+Er(e):"function"!=typeof(i=e).getHours?"":(i.getDate()<10?"0"+i.getDate():i.getDate())+"."+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"."+i.getFullYear()+", "+Er(i)}function Er(e){return"function"!=typeof e.getHours?"":(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())}function Tr(e,t){if(0!==t){var[i,n]=mr[e];return t+" "+i+(1!==t?n:"")}}function wr(e){return null!=e&&"object"==typeof e&&("hours"in e||"minutes"in e||"seconds"in e)}function _r(e){return e<10?"0"+e:String(e)}var Ar="nrkLockActiveIcon",Pr="nrkMediaPlayFailIcon",Ir="nrkMediaTilgjengelighetGeoblocked",Rr="none";function Cr(e,t){var i,n,r,s,a=e.preplay.poster.images,o=function(e){var{live:t,onDemand:i}=e.availability||{},n={available:"playable"===e.playability,to:new Date,from:new Date};t&&t.transmissionInterval&&(n.from=new Date(t.transmissionInterval.from),n.to=new Date(t.transmissionInterval.to),n.isOngoing=t.isOngoing,n.type=t.type);i&&(n.from=new Date(i.from),n.to=new Date(i.to));if(e.nonPlayable){var r,s;n.reason=e.nonPlayable.reason,n.endUserMessage=e.nonPlayable.endUserMessage,n.endUserMessageSupplement=null!=(r=e.nonPlayable.endUserMessageSupplement)?r:"",n.endUserActionLabel=null==(s=e.nonPlayable.userAction)?void 0:s.label,n.endUserIconName=function(e){if("ProgramRightsHasNotStarted"===e||"ProgramRightsHasExpired"===e||"ProgramUnavailable"===e||"ChannelUnavailable"===e)return Pr;if("ProgramExceedsProfileRestrictions"===e||"ChannelExceedsProfileRestrictions"===e)return Ar;if("ProgramIsGeoblocked"===e||"ChannelIsGeoblocked"===e||"ProgramAvailableWithNorwegianResidentClaim"===e||"ChannelAvailableWithNorwegianResidentClaim"===e)return Ir;return}(e.nonPlayable.messageType),n.messageType=e.nonPlayable.messageType,n.helpUrl=e.nonPlayable.helpUrl}return n.isPending=!!n.from&&Date.now()<n.from.getTime(),n}(e),l=a.map((e=>({uri:e.url,width:e.pixelWidth}))),d=pr(a),h=e._embedded.manifests?e._embedded.manifests.map((e=>({id:e.id,label:e.availabilityLabel,type:e._links.self.name}))):[],u=e._embedded.manifestSubtitles?e._embedded.manifestSubtitles.map((e=>({id:e.id,availabilityLabel:e.availabilityLabel,href:e._links.self.href,type:e._links.self.name}))):[],c=[].concat(h,u)||[],p=function(e){if(!e._embedded.next)return;var t=e._embedded.next._links.self.href,i=t.substring(t.lastIndexOf("/")+1);return"nrk:program:"+i}(e);return{availability:o,description:e.preplay.description,duration:e.duration?ye.toSeconds(ye.parse(e.duration)):0,heading:e.preplay.titles.title,id:e.id,isLive:"live"===e.streamingMode,isLive2Vod:null!=(i=e.availability.live&&"transmission"===e.availability.live.type&&e.availability.live.isOngoing)&&i,isChannel:"channel"===(null==(n=e.availability.live)?void 0:n.type),legalAge:e.legalAge,startTime:t,poster:l,posterSrcset:d,nextSrc:p,subheading:e.preplay.titles.subtitle,standaloneProgram:!e._links.series&&"channel"!==(null==(r=e.availability.live)?void 0:r.type),interactionPoints:e.interactionPoints,indexPoints:(s=e.preplay.indexPoints,s.map((e=>{var t,i;return{heading:e.title,startPoint:(i=e.startPoint,wr(i)||(i=vr(i)),ye.toSeconds(i)),webImages:null==(t=e.thumbnails)?void 0:t.map((e=>({uri:e.url,width:e.pixelWidth})))}}))),manifests:c,accessibilityVersions:h,manifestSubtitles:u}}var Nr=t({},_t,{EPGChange:"player.EPGChange",IndexpointsUpdated:"player.IndexpointsUpdated",PlayerError:"player.error",PlayNextEpisode:"player.playNextEpisode",TrackProgress:"player.trackProgress",TrackQoS:"player.trackQoS",EcommerceConsumeStart:"player.ecommerceConsumeStart",EcommerceConsumeComplete:"player.ecommerceConsumeComplete",PlaybackFinished:"player.playbackFinished",SessionInitBegun:"player.sessionInitBegun",StreamChange:"player.streamChange",ShowChapters:"player.showChapters",ShowSettings:"player.showSettings",ShowStartupDialog:"player.showStartupDialog",ShowRecommendationsForProgram:"player.showRecommendationsForProgram",DismissRecommendationsForProgramCountdown:"player.dismissRecommendationsForProgramCountdown",TrackRecommendationsForProgram:"player.trackRecommendationsForProgram",LogInToSaveProgress:"player.logInToSaveProgress",ConfirmNorwegianResidency:"player.confirmNorwegianResidency"});function Dr(e,t){return function(e,t){return e.type===t}(e,t)}var Lr=jn("SubtitleState");class Or extends h{constructor(e,t,i){super(),this.isShowing=!1,this.activeCues=[],this.subtitles=[],this._session=e,this.nativeDisplayEnabled=e.isSubtitlesDisplayed(),this._init(t),e.on(_t.SubtitlesCueUpdate,this._onSubtitlesCueUpdate,this),e.on(_t.SubtitlesChange,this._onSubtitlesChange,this),e.on(_t.SubtitlesDisplayChange,this._onSubtitlesDisplayChange,this),0===e.getAvailableSubtitles().length?(e.once(_t.SubtitlesChange,(()=>this._applyPreferredSubtitle(i))),dr()&&e.once(_t.HasSubtitlesChange,(()=>this._applyPreferredSubtitle(i)))):this._applyPreferredSubtitle(i)}clearAllCues(){this.activeCues=[]}toggleVisibility(){if(this._session)if(this.isShowing)this.isShowing=!1,this._session.selectNoSubtitles();else{var e=this._session.getAvailableSubtitles(),t=e.find((e=>e.flags.isDefault));void 0===t&&(t=e.find((e=>e.flags.isCaptions))),void 0===t&&(t=e.find((e=>e.flags.isAutoSelectable))),void 0===t?(this._session.selectNoSubtitles({byUser:!1}),this.isShowing=!1):(this._session.selectSubtitles(t,{byUser:!1}),this.isShowing=!0)}}destroy(){super.destroy(),this._session=void 0}async _init(e){var t,i=this._session.getAvailableSubtitles();if(e){var n;if(0===(null==(n=i)?void 0:n.length)&&this._session.canAddSubtitles()&&void 0!==window.tizen&&await async function(e,t){var i=t.playable.subtitles.map((e=>{var t="mix"===e.type,i=e.defaultOn;return{src:e.webVtt,label:e.label,language:e.language,flags:{isCaptions:t,isDefault:i}}}));Lr.debug("Adding external subtitles:",i);try{await e.addSubtitles(i)}catch(e){Lr.error(e)}}(this._session,e),!this._session)return;i=this._session.getAvailableSubtitles()}this.activeLabel=null==(t=this._session.getActiveSubtitles())?void 0:t.label,this.isShowing=void 0!==this.activeLabel,this.subtitles=i}_applyPreferredSubtitle(e){if(Lr.log("Applying user subtitle preference:",void 0===e?"no preference/default":e),e===Rr)this._session.selectNoSubtitles({byUser:!1});else if(void 0!==e)this._session.selectSubtitles(e);else{var t=this._session.getAvailableSubtitles().find((e=>e.flags.isDefault));void 0!==t?this._session.selectSubtitles(t,{byUser:!1}):this._session.selectNoSubtitles({byUser:!1})}}_onSubtitlesCueUpdate(e){this.activeCues=e.activeCues.filter((e=>""!==e.text.trim()))}_onSubtitlesChange(e){var t,i;this.subtitles&&0!==this.subtitles.length||(this.subtitles=this._session.getAvailableSubtitles()),this.activeLabel=null!=(t=null==(i=e.active)?void 0:i.label)?t:Rr,this.isShowing=this.activeLabel!==Rr}_onSubtitlesDisplayChange(e){this.nativeDisplayEnabled=e.displayed}}var kr=(e=>(e.EnterFullscreen="player.enterFullscreen",e.ExitFullscreen="player.exitFullscreen",e.EnterPip="player.enterPip",e.ExitPip="player.exitPip",e.EnterAirPlay="player.enterAirPlay",e.Play="player.play",e.PlayFromStarttime="player.playFromStarttime",e.Pause="player.pause",e.TogglePlay="player.togglePlay",e.ToggleSubtitles="player.toggleSubtitles",e.Mute="player.mute",e.Unmute="player.unmute",e.ToggleMute="player.toggleMute",e.SetPoster="player.setPoster",e.SetVolume="player.setVolume",e.SeekTo="player.seekTo",e.SeekToLive="player.seekToLive",e.SeekToRelativeTime="player.seekToRelativeTime",e.SeekToPosition="player.seekToPosition",e.Speak="player.speak",e.StopPlayNextCountdown="player.stopPlayNextCountdown",e.PlayNextEpisode="player.playNextEpisode",e.SelectStream="player.selectStream",e.SkipToPoint="player.skipToPoint",e.ShowOverlayMenu="player.showOverlayMenu",e.HideOverlayMenu="player.hideOverlayMenu",e.ShowSettings="player.showSettings",e.ShowChapters="player.showChapters",e.SelectSubtitles="player.selectSubtitles",e.ShowRecommendationsForProgram="player.showRecommendationsForProgram",e.DismissRecommendationsForProgramCountdown="player.dismissRecommendationsForProgramCountdown",e.LogInToSaveProgress="player.logInToSaveProgress",e))(kr||{}),Br=(e=>(e.MISSING_SOURCE="MISSING_SOURCE",e.SOURCE_NOT_SUPPORTED="SOURCE_NOT_SUPPORTED",e))(Br||{}),xr=t({},bt,We,ze,Br);class Mr extends Error{constructor(e,t,i,n){super(i.message),Object.setPrototypeOf(this,Mr.prototype),this.type=e,this.fatal=t,this.cause=i,this.name="PlayerError",this.sessionInfo=n}}var Ur,Vr=r("findStartTimes");class Fr extends(Kn(function(e){return class extends e{static get reactiveProperties(){return t({},super.reactiveProperties,{focusVisible:Boolean})}constructor(){super(),this.focusVisible=!1,this._onKeydown=this._onKeydown.bind(this),this._onPointerdown=this._onPointerdown.bind(this)}connectedCallback(){document.addEventListener("keydown",this._onKeydown,!0),super.connectedCallback&&super.connectedCallback()}_onKeydown(e){9!==e.which||this.focusVisible||(this.focusVisible=!0,this.classList.add("focus-visible"),document.addEventListener("mousedown",this._onPointerdown,!0),document.addEventListener("pointerdown",this._onPointerdown,!0),document.addEventListener("touchstart",this._onPointerdown,!0))}_onPointerdown(e){this.focusVisible=!1,this.classList.remove("focus-visible"),this._removePointerHandlers()}_removePointerHandlers(){document.removeEventListener("mousedown",this._onPointerdown,!0),document.removeEventListener("pointerdown",this._onPointerdown,!0),document.removeEventListener("touchstart",this._onPointerdown,!0)}disconnectedCallback(){this._removePointerHandlers(),document.removeEventListener("keydown",this._onKeydown,!0),super.disconnectedCallback&&super.disconnectedCallback()}}}(function(e){return class extends e{constructor(){super(...arguments),this.isAudioOnly=!1,this.isCurrentTimeLive=!0,this.isCurrentTimeLiveCutOffTime=15,this.isEnded=!1,this.isLive=!1,this.isPlaying=!1,this.isRealtime=!1,this.isSeeking=!1,this.isStarted=!1,this.isTimeRunning=!1,this.isWaiting=!1,this.muted=!1,this.playbackRate=1,this.seekableStep=1,this.volume=1}static get reactiveAttributes(){return t({},super.reactiveAttributes,{muted:Boolean})}static get reactiveProperties(){return t({},super.reactiveProperties,{activeSession:Object,airPlayState:Object,currentLiveProgramTitle:String,fullscreenState:Object,isCurrentTimeLive:Boolean,isAudioOnly:Boolean,isEnded:Boolean,isLive:Boolean,isPlaying:Boolean,isRealtime:Boolean,isSeeking:Boolean,isStarted:Boolean,isTimeRunning:Boolean,isWaiting:Boolean,manifest:Object,pipState:Object,playbackRate:Number,seekableStep:Number,subtitleState:h,volume:Number})}updating(e,t){super.updating(e,t);["isPlaying","isRealtime","isSeeking","isWaiting"].includes(e)&&this._updateCurrentTimeIsLive()}_observePlaybackSession(e){this.activeSession=e,this.airPlayState=e.getAirPlayState(),this.fullscreenState=e.getFullscreenState(),this.pipState=e.getPiPState(),this.isPlaying=e.isPlaying(),this.isSeeking=e.getWaitingReason()===Tt.Seeking,this.isWaiting=e.isWaiting()&&e.getWaitingReason()!==Tt.Seeking,e.on(_t.Broken,this._onBroken,this),e.on(_t.FullscreenStateChange,this._onFullscreenStateChange,this),e.on(_t.LiveStreamEnded,this._onLiveStreamEnded,this),e.on(_t.MediaInfoLoaded,this._onMediaInfoLoaded,this),e.on(_t.MediaRangeChange,this._onMediaRangeChange,this),e.on(_t.MutedChange,this._onMutedChange,this),e.on(_t.PiPStateChange,this._onPipStateChange,this),e.on(_t.PlayingChange,this._onPlayingChange,this),e.on(_t.RateChange,this._onRateChange,this),e.on(_t.AirPlayStateChange,this._onAirPlayStateChange,this),e.once(_t.ScrubberUpdate,this._onScrubberUpdate,this),e.on(_t.TimeRunningChange,this._onTimeRunningChange,this),e.on(_t.VolumeChange,this._onVolumeChange,this),e.on(_t.WaitingChange,this._onWaitingChange,this),this.addEventListener(Nr.EPGChange,this._onEPGChange)}_unobservePlaybackSession(e){var t;e&&(this.activeSession=void 0,this.isAudioOnly=!1,this.isCurrentTimeLive=!1,this.isEnded=!1,this.isLive=!1,this.isPlaying=!1,this.isRealtime=!1,this.isSeeking=!1,this.isStarted=!1,this.isTimeRunning=!1,this.isWaiting=!1,this.seekableStep=1,null==(t=this.subtitleState)||t.destroy(),this.subtitleState=void 0,this.error=void 0,this.removeEventListener(Nr.EPGChange,this._onEPGChange),window.removeEventListener("beforeunload",this._onWindowUnload))}_onEPGChange(e){var t=e;this.currentLiveProgramTitle=t.detail?t.detail.title:void 0}_onBroken(e){"panic"in this&&"function"==typeof this.panic?this.panic(e.error):this.error=e.error}_onFullscreenStateChange(e){this.fullscreenState=e.state,this.fullscreenState.isActive?window.addEventListener("beforeunload",this._onWindowUnload):window.removeEventListener("beforeunload",this._onWindowUnload)}_onLiveStreamEnded(){this.isRealtime=!1}_onMediaInfoLoaded(e){var t,i,n,r;this.isAudioOnly=null!=(t=e.isAudioOnly)?t:this.isAudioOnly,this.isLive=null!=(i=null==(n=this.activeSession)?void 0:n.isLiveStream())&&i,this.isRealtime=this.isLive&&!(null!=(r=this.activeSession)&&r.isLiveStreamEnded()),this.activeSession&&(this.subtitleState=new Or(this.activeSession,this.manifest,this.preferredSubtitle))}_onScrubberUpdate(){this.isStarted=!0}_onMediaRangeChange(e){this.seekableStep=Math.round(Math.max(1,.02*(e.end-e.start)))}_onMutedChange(e){this.muted=e}_onPipStateChange(e){this.pipState=e.state}_onPlayingChange(e){this.isPlaying=e.isPlaying,this.isEnded=e.pausedReason===wt.Ended,this.isEnded&&(this.isStarted=!1,this.activeSession&&this.activeSession.once(_t.ScrubberUpdate,this._onScrubberUpdate,this))}_onRateChange(e){this.playbackRate=e}_onAirPlayStateChange(e){this.airPlayState=e.state}_onTimeRunningChange(e){this.isTimeRunning=e.isTimeRunning,this.isEnded=!1}_onVolumeChange(e){this.volume=e}_onWaitingChange(e){e.reason===Tt.Seeking&&(this.isSeeking=e.isWaiting),this.isWaiting=e.isWaiting}_onWindowUnload(e){null==document.exitFullscreen||document.exitFullscreen().catch((e=>{}))}_updateCurrentTimeIsLive(){if(this.activeSession)if(this.isRealtime&&this.isPlaying){var e=this.activeSession.getScrubberRange().end,t=5*Math.max(e/100,1),i=this.activeSession.getCurrentTime(),n=Math.min(this.isCurrentTimeLiveCutOffTime,t);this.isCurrentTimeLive=e-i<n}else this.isCurrentTimeLive=!1}}}(function(e){return class extends e{constructor(){super(...arguments),this._propertyChangeObservers={}}shadowProperties(e,t){var i=this.constructor,n=i.reactiveAttributes,r=i.reactiveProperties;for(var s of(Array.isArray(e)||(e=[e]),e)){var[a,o=a]=s.split(":");if(r.attributes&&!(a in n)&&r.properties&&!(a in r))throw Error(a+" is not a reactive property and cannot be shadowed");a in this._propertyChangeObservers||(this._propertyChangeObservers[a]=new Map),this._propertyChangeObservers[a].set(t,o),t[o]=this[a]}return()=>{for(var i of e){var n=i.split(":")[0];this._propertyChangeObservers[n].delete(t)}}}updating(e,t){var i=e.split(".")[0],n=i!==e;if(i in this._propertyChangeObservers)for(var[r,s]of this._propertyChangeObservers[i])n&&r[i]===this[i]||(r[s]=this[i]);super.updating(e,t)}}}(function(e){return class extends e{constructor(){super(...arguments),this.panicLogger=jn("PlayerPanic")}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.addEventListener(tr,this.onPanic)}onPanic(e){var t=e.detail;e.preventDefault(),this.panicLogger.error(t),this.handlePanic(t)}handlePanic(e){}disconnectedCallback(){this.removeEventListener(tr,this.onPanic),super.disconnectedCallback&&super.disconnectedCallback()}}}(ir(w))))))){static get reactiveAttributes(){return t({},super.reactiveAttributes,{blockedContentAge:Number,autoplay:Boolean,features:Array,loop:Boolean,preferredManifest:String,preferredSubtitle:String,preferredBandwidth:String,src:String,psapiOrigin:String,psapiRecommendationsOrigin:String,startTime:(e,t)=>{t&&"undefined"!==t.toString()&&(isNaN(Number(t))?e.startTimeLive=new Date(t):e.startTimeOndemand=Number(t))},cdnOverride:String,snowplowAppId:String,snowplowUrl:String,snowplowServiceId:String,npawAccountCode:String,volume:Number})}static get reactiveProperties(){return t({},super.reactiveProperties,{epgState:h,interactionPointState:Object,metadata:Object,poster:String,resolvedSrc:String,resolvedType:String,speak:String,focusWithin:Boolean,subtitlesHidden:Boolean,startTimeOndemand:Number,startTimeLive:Date,user:Object,isLive2Vod:Boolean})}constructor(){super(),Object.defineProperty(this,Vr,{value:qr}),this.poster="",this.startupSkipPointDelay=0,this.speak="",this.autoplay=!1,this.features=[],this.focusWithin=!1,this.preferredManifest=void 0,this.preferredSubtitle=void 0,this.snowplowServiceId="n/a",this.snowplowPlatform="web",this.snowplowUrl="",this.npawAccountCode="",this.appInsightsTeamName="n/a",this.appInsightsServiceName="n/a",this.isAwaitingPlaybackStart=!1,this.isBinging=!1,this.isSuspended=!1,this.psapiOrigin="https://psapi.nrk.no",this.psapiRecommendationsOrigin="https://anbefaling-psapi.nrk.no",this.playerName="",this.playerVersionNumber="n/a",this.playerFamily="player-core",this.loop=!1,this.src="",this.subtitlesHidden=!1,this.lazyLoadMetadata=!1,this.retryEnabled=!1,this.retryAttempted=!1,this.isLive2Vod=!1,this.cdnUrl="",this._speakClearTimeoutId=0,this._countdownIntervalId=0,this.logger=jn("Player"),this.recommendNextInteractionPointHandler=this.recommendNextInteractionPointHandler.bind(this),this.skipToInteractionPointHandler=this.skipToInteractionPointHandler.bind(this),this.nextUpInteractionPointHandler=this.nextUpInteractionPointHandler.bind(this),this.getAuthToken=this.getAuthToken.bind(this),this.focusWithinController=new Yn(this,{onChanged:()=>{this.focusWithin=this.focusWithinController.value,this.classList.toggle("focus-within",this.focusWithin)}})}connectedCallback(){super.connectedCallback(),this.addEventListener("change",this),this.addEventListener("click",this),this.addEventListener("input",this)}readyCallback(){if(!this.src){var e=function(e){for(var{src:t,type:i}of Array.from(e.querySelectorAll("source")))if(e.canPlayType({type:i}))return{src:t,type:i}}(this);if(e){var{src:t,type:i}=e;this.resolvedType=i,this.src=t}}lr()&&this.classList.add("mobile")}disconnectedCallback(){var e;super.disconnectedCallback(),this.destroySession(),null==(e=this.psapiClient)||e.abort(),this.psapiClient=void 0,this.removeEventListener("click",this),this.removeEventListener("input",this),this.removeEventListener("change",this)}updating(e,t){var i;if(super.updating(e,t),"volume"===e)null==(i=this.activeSession)||i.setVolume(this.volume);else if("muted"===e){var n;null==(n=this.activeSession)||n[this.muted?"mute":"unmute"]()}else if("activeSession"===e){var r;null==(r=this.activeSession)||r.setVolume(this.volume)}else if("metadata"===e&&this.metadata){var s;if(this.isLive2Vod=this.metadata.isLive2Vod,this.isLive=null!=(s=this.metadata.isLive)&&s,void 0!==this.preferredManifest){var a,o,l=null==(a=this.metadata)||null==(a=a.manifests)?void 0:a.find((e=>e.type===this.preferredManifest)),d=null==(o=this.metadata)||null==(o=o.manifests)?void 0:o.find((e=>"default"===e.type));l&&!this.src.endsWith(l.id)?(this.src=Hr(this.metadata.isChannel,l),this.pendingMetadataPlayable=void 0):!l&&d&&(this.src=Hr(this.metadata.isChannel,d),this.pendingMetadataPlayable=void 0)}}else if("manifest"===e&&this.manifest&&"playable"in this.manifest){var h=function(e){var t=e.playable.assets;if(t&&t.length>0){var i=t[0];return{src:i.url,type:i.mimeType}}}(this.manifest);h&&(this.resolvedSrc=h.src,this.resolvedType=h.type)}else if("preferredManifest"===e){var u;if(void 0!==t)this.manifest=void 0,this.metadata=void 0,null==(u=this.psapiClient)||u.abort(),this.psapiClient=void 0,this.resolvedSrc=void 0,this.isSuspended=!1,this.savedPlaybackState?this.startTimeOndemand=this.savedPlaybackState.startTime:this.startTimeOndemand=void 0,this.stop(),dt.isSupported(this.src)?(this.psapiClient=this.initPsapiClient(),this.lazyLoadMetadata||this.loadMetadata()):this.resolvedSrc=this.src}else if("src"===e){var c;if(void 0!==t)this.manifest=void 0,this.metadata=void 0,null==(c=this.psapiClient)||c.abort(),this.psapiClient=void 0,this.resolvedSrc=void 0,this.isSuspended=!1,this.savedPlaybackState?this.startTimeOndemand=this.savedPlaybackState.startTime:this.startTimeOndemand=void 0,this.stop();this.src&&"undefined"!==this.src&&(dt.isSupported(this.src)?(this.psapiClient=this.initPsapiClient(),this.lazyLoadMetadata||this.loadMetadata()):this.resolvedSrc=this.src)}else if("isRealtime"===e)this.isRealtime?this.classList.add("realtime"):this.classList.remove("realtime");else if("isLive"===e)this.isLive?this.classList.add("live"):this.classList.remove("live");else if("isEnded"===e&&this.isEnded)this.startTimeOndemand=void 0;else if("playbackRate"===e){var p;null==(p=this.activeSession)||p.setPlaybackRate(this.playbackRate)}else"dimensions"===e&&this.dimensions&&this.adjustFontSize()}async retryPlayback(e){var t,i,n,r;(this.retryAttempted=!0,this.logger.debug("Attempting retry loading media after error of type "+e.type),this.isLive)?this.startTimeLive=null==(n=this.activeSession)?void 0:n.getCurrentTimeLive():this.startTimeOndemand=null==(r=this.activeSession)?void 0:r.getCurrentTime();await(null==(t=this.activeSession)?void 0:t.close()),this.activeSession=void 0,this.manifest=void 0,this.cdnUrl=null!=(i=this.resolvedSrc)?i:"empty-url",this.resolvedSrc=void 0,this.isPlaying=!1,await this.play()}initPsapiClient(){var e,t,i,n={origin:this.psapiOrigin,playerFamily:this.playerFamily,enableEeaPortability:!0},r={origin:this.psapiRecommendationsOrigin};null!=(e=this.user)&&e.id&&(n.authTokenFunction=this.getAuthToken,n.contentGroup=null==(i=this.user)?void 0:i.contentGroup);return n.ageRestriction=null==(t=this.user)?void 0:t.ageRestriction,this.cdnOverride&&(n.cdnOverride=this.cdnOverride),this.preferredBandwidth&&(n.preferredBandwidth=this.preferredBandwidth),this.pendingMetadataPlayable=void 0,this.pendingMetadataResponse=void 0,new dt(this.src,this.playerName,{playback:n,recommendations:r})}updated(e){var t;super.updated(e);var i=e.has("src"),n=this.src&&"undefined"!==this.src,r=(void 0!==this.activeSession||this.isAwaitingPlaybackStart)&&e.has("hidden")&&this.hidden,s=e.has("hidden")&&!this.hidden&&!i&&n,a=i&&n&&(!0===e.get("isPlaying")||(null==(t=this.savedPlaybackState)?void 0:t.isPlaying)||this.autoplay);i&&(this.interactionPointState=void 0),r?this.suspend():s?this.resume():a&&this.play(),e.has("isStarted")&&this.isStarted&&nr("playback-startup-time-end"),e.has("isPlaying")&&this.isPlaying&&(this.savedPlaybackState=void 0)}handleEvent(e){var t,i,n,r,s;if(!e.defaultPrevented){var[a,o]=Jn(e);if(a)switch(a){case kr.EnterFullscreen:e.preventDefault(),null==(t=this.activeSession)||t.enterFullscreen();break;case kr.ExitFullscreen:e.preventDefault(),null==(i=this.activeSession)||i.exitFullscreen();break;case kr.EnterPip:var l;if(e.preventDefault(),this.hideSubtitles(!0),dr())null==(l=this.activeSession)||l.displaySubtitles(!0);null==(n=this.activeSession)||n.enterPiP();break;case kr.ExitPip:var d;if(e.preventDefault(),dr())null==(d=this.activeSession)||d.displaySubtitles(!1);this.hideSubtitles(!1),null==(r=this.activeSession)||r.exitPiP();break;case kr.EnterAirPlay:e.preventDefault(),null==(s=this.activeSession)||s.enterAirPlay();break;case kr.Play:e.preventDefault(),this.play();break;case kr.Pause:e.preventDefault(),this.pause();break;case kr.TogglePlay:e.preventDefault(),this.togglePlay();break;case kr.Mute:e.preventDefault(),this.muted=!0;break;case kr.Unmute:e.preventDefault(),this.muted=!1;break;case kr.StopPlayNextCountdown:case kr.DismissRecommendationsForProgramCountdown:this.interactionPointState=void 0,window.clearInterval(this._countdownIntervalId);break;case kr.PlayNextEpisode:this.abortInteractionPoint(),this.playNext();break;case kr.ToggleSubtitles:var h;e.preventDefault(),null==(h=this.subtitleState)||h.toggleVisibility();break;case kr.ToggleMute:e.preventDefault(),this.toggleMute();break;case kr.SelectStream:var u;if(o!==this.src)this.savedPlaybackState={startTime:null==(u=this.activeSession)?void 0:u.getCurrentTime()},this.src=o,this.dispatchEvent(new CustomEvent(Nr.StreamChange,{bubbles:!0,cancelable:!0,detail:{type:this.preferredManifestType}}));break;case kr.SetPoster:e.preventDefault(),o&&(this.poster=o);break;case kr.SetVolume:if(e.preventDefault(),void 0!==o){var c="string"==typeof o?parseFloat(o):o;this.volume=Math.min(Math.max(c/100,0),1),this.muted=0===this.volume}break;case kr.SeekTo:e.preventDefault(),this.interactionPointState=void 0,void 0!==o&&this.seekTo(o);break;case kr.SeekToLive:var p;e.preventDefault(),null==(p=this.activeSession)||p.seekToLive();break;case kr.SeekToRelativeTime:e.preventDefault(),void 0!==o&&this.seekToRelativeTime(o);break;case kr.SeekToPosition:e.preventDefault(),void 0!==o&&this.seekToPosition(o);break;case kr.SkipToPoint:this.seekTo(o);break;case kr.Speak:e.preventDefault(),o&&(this.speak=o,clearTimeout(this._speakClearTimeoutId),this._speakClearTimeoutId=window.setTimeout((()=>{this.speak=""}),2e3));break;case kr.LogInToSaveProgress:e.preventDefault(),this.pause(),this.dispatchEvent(new CustomEvent(Nr.LogInToSaveProgress,{bubbles:!0,cancelable:!0}))}}}get currentTime(){var e,t;return null!=(e=null==(t=this.activeSession)?void 0:t.getCurrentTime())?e:0}hideSubtitles(e){this.subtitlesHidden=e}preload(e){var t;return null==(t=this.activeSession)?void 0:t.preload(e)}async initPlayback(){if(this.isSuspended)return this.resume();if(this.isWaiting=!this.player||!this.activeSession,!this.player)try{await this.initPlayerCoreInstance()}catch(e){return this.isWaiting=!1,void this.panic(e)}}async loadPlaybackData(){dt.isSupported(this.src)&&await this.loadMetadata(),!this.metadata||this.metadata.availability.available?this.resolvedSrc||(await this.loadManifest(this.preferredManifestType),this.dispatchEvent(new CustomEvent(Nr.SessionInitBegun,{})),nr("playback-startup-time-start")):this.stop()}async createPlaybackSession(){this.resolvedSrc&&await this.createSession(),this.isAwaitingPlaybackStart=!1}async startSessionPlayback(){if(this.activeSession)try{await this.activeSession.play()}catch(e){this.isWaiting=!1,"AutoplayError"!==ge(e).name&&this.panic(e)}}async play(){if(!this.isAwaitingPlaybackStart){if(await this.initPlayback(),!this.activeSession&&(this.isAwaitingPlaybackStart=!0,this.unlockAudioVideoElement(),await this.loadPlaybackData(),await this.createPlaybackSession(),!this.activeSession||this.isSuspended))return this.isWaiting=!1,void this.stop();this.startSessionPlayback()}}pause(){var e;null!=(e=this.activeSession)&&e.isPlaying()&&this.activeSession.pause()}togglePlay(){if(!this.activeSession||!this.activeSession.isPlaying())return this.play();this.pause()}async suspend(e){return this.isSuspended=!0,this.activeSession&&(this.savedPlaybackState={isPlaying:this.isEnded||this.isPlaying||e,startTime:this.isStarted?this.currentTime:this.startTimeOndemand}),this.stop()}async resume(){if(this.isSuspended=!1,this.savedPlaybackState){var e=this.savedPlaybackState;this.startTimeOndemand=e.startTime,this.savedPlaybackState=void 0,await this.play(),e.isPlaying||(this.pause(),this.isStarted=!0)}else this.play()}stop(){var e;return this.isAwaitingPlaybackStart=!1,null==(e=this.psapiClient)||e.abort(),this.destroySession()}toggleMute(){this.muted&&0===this.volume?(this.volume=.1,this.muted=!1):this.muted=!this.muted}resetPlaybackRate(){var e;null==(e=this.activeSession)||e.resetPlaybackRate()}seekTo(e){this.activeSession&&(this.isSeeking=!0,"string"==typeof e&&(e=parseFloat(e)),this.activeSession.seekTo(e))}seekToDate(e){this.activeSession&&(this.isSeeking=!0,this.seekTo(this.activeSession.liveTimeToPosition(e)))}seekToRelativeTime(e){this.activeSession&&(this.isSeeking=!0,"string"==typeof e&&(e=parseFloat(e)),this.activeSession.seekToRelativeTime(e))}seekToPosition(e){if(this.activeSession){this.isSeeking=!0,"string"==typeof e&&(e=parseFloat(e));var t=this.activeSession.getSeekableRange(),i=e*(t.end-t.start)+t.start;this.activeSession.seekTo(i)}}emit(e,t){this.dispatchEvent(new CustomEvent(e,{bubbles:!1,detail:t}))}recommendNextInteractionPointHandler(e){var i=e.range.data?t({},e.range.data):null;if("enter"===e.type){if(!i)return void this.dispatchEvent(new CustomEvent(Nr.TrackRecommendationsForProgram,{bubbles:!0,detail:{type:"noContent"}}));if(!this.features.includes("recommendations_a_b_test"))return void this.dispatchEvent(new CustomEvent(Nr.TrackRecommendationsForProgram,{bubbles:!0,detail:{type:"notEligible"}}));this.interactionPointState={type:"recommendNext",point:i},this._countdownIntervalId=window.setInterval((()=>{var e;if("recommendNext"===(null==(e=this.interactionPointState)?void 0:e.type)){var i=this.interactionPointState.point,n=i.countdownDuration;this.interactionPointState=t({},this.interactionPointState,{point:t({},i,{countdownDuration:n&&Number.isInteger(n)&&n>0?n-1:void 0})}),0===this.interactionPointState.point.countdownDuration&&window.clearInterval(this._countdownIntervalId)}}),1e3)}else if("exit"===e.type){var n;if("recommendNext"!==(null==(n=this.interactionPointState)?void 0:n.type))return;this.interactionPointState=void 0}}skipToInteractionPointHandler(e){var t=e.range.data;"enter"===e.type?this.interactionPointState={type:"skipTo",point:t}:"exit"===e.type&&(this.interactionPointState=void 0,this.isBinging=!1)}nextUpInteractionPointHandler(e){var i=e.range.data;if("enter"===e.type)this.isBinging=!0,this.interactionPointState={type:"nextUp",point:i},this._countdownIntervalId=window.setInterval((()=>{var e;if("nextUp"===(null==(e=this.interactionPointState)?void 0:e.type)){var i=this.interactionPointState.point,n=i.countdownDuration;this.interactionPointState=t({},this.interactionPointState,{point:t({},i,{countdownDuration:n&&Number.isInteger(n)&&n>0?n-1:void 0})}),0===this.interactionPointState.point.countdownDuration&&window.clearInterval(this._countdownIntervalId)}}),1e3);else if("exit"===e.type){var n;if("nextUp"!==(null==(n=this.interactionPointState)?void 0:n.type))return;if(this.interactionPointState.point.countdownDuration)return this.abortInteractionPoint(),this.playNext();this.interactionPointState.point.manualExtension&&this.currentTime<e.range.start&&(this.interactionPointState=void 0,this.isBinging=!1)}}get updateComplete(){return new Promise((e=>{super.updateComplete.then((()=>this.pendingMetadataResponse)).then((()=>{e(this.isUpdatePending)}))}))}_onMediaInfoLoaded(e){super._onMediaInfoLoaded(e),this.addEventsForInteractionPoints()}handlePanic(e){super.handlePanic(e),this.suspend()}canPlayType(e){throw Error('PlayerElement subclass must implement "canPlayType()" method based on required PlayerCore adapters')}playerVersion(){return this.playerName+"@"+this.playerVersionNumber+" (player-elements@14.0.12/player-core@"+At+")"}abortInteractionPoint(){var e;"recommendNext"===(null==(e=this.interactionPointState)?void 0:e.type)&&this.dispatchEvent(new Event(Nr.DismissRecommendationsForProgramCountdown,{bubbles:!0})),this.interactionPointState=void 0,window.clearInterval(this._countdownIntervalId)}resetNextUpCountdown(){var e;"nextUp"===(null==(e=this.interactionPointState)?void 0:e.type)&&(this.interactionPointState.point.countdownDuration=this.interactionPointState.point.originalCountdownDuration)}abortNextUpCountdown(){var e;"nextUp"===(null==(e=this.interactionPointState)?void 0:e.type)&&(window.clearInterval(this._countdownIntervalId),this.interactionPointState.point.countdownDuration=void 0,this.interactionPointState.point.displayValue="Neste",this.interactionPointState.point.manualExtension=!0,this.isBinging=!1)}abortRecommendNextCountdown(){var e;"recommendNext"===(null==(e=this.interactionPointState)?void 0:e.type)&&(window.clearInterval(this._countdownIntervalId),this.interactionPointState.point.countdownDuration=void 0,this.interactionPointState.point.manualExtension=!0)}async initPlayerCoreInstance(){throw Error('PlayerElement subclass must implement "initPlayerCoreInstance()" method')}async createSession(){var e;if(await this.destroySession(),!this.resolvedSrc)return this.panic(new Mr(xr.MISSING_SOURCE,!0,new Error("Avspilling feilet på grunn av manglende mediakilde")));var t=null!=(e=this.resolvedType?{type:this.resolvedType}:J(this.resolvedSrc))?e:{type:"video/mp4"};if(!this.canPlayType(t))return this.panic(new Mr(xr.SOURCE_NOT_SUPPORTED,!0,new Error("Avspilling av mediainnholdet er ikke støttet på denne enheten"),{mediaId:this.src,mediaUrl:this.resolvedSrc}));try{var[i,n]=s(this,Vr)[Vr](),r={mute:this.muted,startTime:i,startTimeLive:n,videoPoster:this.poster,preferredManifest:this.preferredManifest},a=this.src!==this.resolvedSrc?this.src:void 0,o=await this.player.createPlaybackSession({id:a,url:this.resolvedSrc,mediaType:t},r);this.activeSession!==o&&this._observePlaybackSession(o)}catch(e){this.panic(e)}}destroySession(){if(this.activeSession){var e,t=this.activeSession;return this._unobservePlaybackSession(t),null==(e=this.epgState)||e.destroy(),this.epgState=void 0,t.close()}return Promise.resolve()}async loadMetadata(e){if(void 0===e&&(e=!0),this.psapiClient){if(!this.metadata){if(this.pendingMetadataPlayable)return this.pendingMetadataPlayable;var t,i=this.psapiClient.loadMetadata({throwNonPlayableError:e});this.pendingMetadataPlayable=new Promise((e=>t=e));var n=()=>{this.pendingMetadataResponse=i.next().then((e=>{this.pendingMetadataResponse=void 0,e.done?(t(),this.pendingMetadataPlayable=void 0):(this.metadata=Cr(e.value,this.startTimeOndemand),n())})).catch((e=>{this.pendingMetadataPlayable=void 0,this.pendingMetadataResponse=void 0,"AbortError"!==ge(e).name&&this.panic(e)}))};return n(),this.pendingMetadataPlayable}}else this.panic(Error("Unable to load metadata for invalid PSAPI media reference: "+this.src))}async loadManifest(e){if(this.psapiClient){this.pendingMetadataPlayable&&await this.pendingMetadataPlayable;try{var t=await this.psapiClient.updateManifest(e);this.manifest=function(e){if(e.playable){var t,i=null!=(t=e.playable.thumbnail2D)?t:void 0;return{href:e._links.self.href,statistics:e.statistics,playable:e.playable,thumbnail2D:i,gcOrigin:!e.playable.assets[0].url.match("playlist.m3u8")}}}(t.data)}catch(e){"AbortError"!==ge(e).name&&this.panic(e)}}else this.panic(Error("Unable to load manifest for invalid PSAPI media reference: "+this.src))}unlockAudioVideoElement(){var e=this.querySelector("video,audio");e&&function(e){he.has(e)?de.log("Element already unlocked."):e.currentSrc?de.log("Element has source. No need to unlock."):e.querySelector("track")?de.log("Element has tracks but no source. Not touching."):(he.set(e,!0),de.log("Calling load on media element to unlock it."),e.load())}(e)}selectDefaultSubtitles(){var e,t,i,n,r=(null!=(e=null==(t=this.activeSession)?void 0:t.getAvailableSubtitles())?e:[]).find((e=>e.flags.isDefault));void 0!==r?null==(i=this.activeSession)||i.selectSubtitles(r):null==(n=this.activeSession)||n.selectNoSubtitles()}adjustFontSize(){this.style.setProperty("--player-base-font-size",this.getRemFontSize())}getRemFontSize(){return(this.dimensions.width<500?1.9:1.25)*this.baseFontSize()/er(document.documentElement)+"rem"}baseFontSize(){var e=er(document.documentElement)/800;return Math.min(this.dimensions.width,this.dimensions.height*(1/.5625))*e}get preferredManifestType(){var e,t=null==(e=this.metadata)||null==(e=e.manifests)?void 0:e.find((e=>e.type===this.preferredManifest));return t?t.type:this.src.match(/TOLK/)?"tegntolk":this.src.match(/SYNS/)?"synstolk":"default"}addEventsForInteractionPoints(){var e;if(null!=(e=this.metadata)&&null!=(e=e.interactionPoints)&&e.seekToPoints&&this.activeSession){var t,i,n,r=this.activeSession.createTimeRangeEventTrack();for(var s of this.metadata.interactionPoints.seekToPoints){this.logger.log("adding TimeRangeEvent for seekToPoint",s);var a=0===s.startTime?this.startupSkipPointDelay:s.startTime,o=null==r?void 0:r.addRange({start:a,end:s.endTime},{type:"seekTo",displayValue:s.displayValue,seekToTime:s.seekToTime,visible:!0,autoskipInBingeMode:s.autoSkipInBingeMode});null==o||o.on("enter",this.skipToInteractionPointHandler),null==o||o.on("exit",this.skipToInteractionPointHandler)}if(null!=(t=this.metadata)&&null!=(t=t.interactionPoints)&&t.nextUpPoint&&this.metadata.nextSrc){var l=this.metadata.interactionPoints.nextUpPoint;this.logger.info("adding TimeRangeEvent for nextUpPoint",l);var d=null==r?void 0:r.addRange({start:l.startTime,end:this.metadata.duration},{type:"nextUp",displayValue:"Neste om",visible:!0,startTime:l.startTime,countdownDuration:l.countDownDuration,originalCountdownDuration:l.countDownDuration});null==d||d.on("enter",this.nextUpInteractionPointHandler),null==d||d.on("exit",this.nextUpInteractionPointHandler)}if(this.features.includes("tv_smart_tizen_player_show_recommendations")&&null!=(i=this.metadata)&&null!=(i=i.interactionPoints)&&i.recommendNextPoint&&(null==(n=this.metadata)||!n.interactionPoints.nextUpPoint)){var h,u=this.metadata.interactionPoints.recommendNextPoint;this.logger.info("adding TimeRangeEvent for recommendNextPoint",u);var c=this.metadata;null==(h=this.psapiClient)||h.loadRecommendationsForProgram().then((e=>{var t=e.data,i=t&&t.recommendations.length>0?{heading:"Se noe mer?",subHeading:"Forslag vises om",images:t.recommendations.map((e=>e.images.mainKeyArt.map((e=>({uri:e.url,width:e.width}))))),countdownDuration:4,recommendationsForProgram:t,manualExtension:!1}:null,n=null==r?void 0:r.addRange({start:u.startTime,end:c.duration+10},i);null==n||n.on("enter",this.recommendNextInteractionPointHandler),null==n||n.on("exit",this.recommendNextInteractionPointHandler),null==i||i.images.map((e=>{!function(e){var t=document.createElement("link");t.rel="preload",t.as="image",t.imageSrcset=pr(e),document.head.insertAdjacentElement("beforeend",t)}(e)}))})).catch((e=>{this.logger.error("Failed to load recommendations:",e)}))}}}playNext(){var e,t;null!=(e=this.metadata)&&e.nextSrc&&(this.dispatchEvent(new CustomEvent(Nr.PlayNextEpisode,{bubbles:!0,cancelable:!0,detail:{src:null==(t=this.metadata)?void 0:t.nextSrc}})),this.interactionPointState=void 0,this.isBinging=!0)}getAuthToken(){var e;return null!=(e=this.user)&&e.id?this.user.getAuthToken().then((e=>Promise.resolve(e))).catch((e=>Promise.resolve(void 0))):Promise.resolve(void 0)}fakeError(e,t){void 0===t&&(t=!1),this.dispatchEvent(new CustomEvent(Nr.PlayerError,{bubbles:!0,cancelable:!0,detail:new Mr(e,t,e?new Error("FakeError "+e):new Error("fakeError(errorType: string | PlayerErrorTypes, fatal = false)\nThrow an error out of the player to any listening context. Error types can be:\n- "+Object.keys(xr).join("\n- ")+"\n"))}))}}function qr(){var e,t=this.startTimeOndemand,i=this.startTimeLive;return i&&(t=void 0),null!=(e=this.metadata)&&e.isChannel&&!i&&(t=void 0),[t,i]}function Hr(e,t){return"nrk:"+(e?"channel":"program")+":"+t.id}function Gr(e,t){customElements.get(e)||customElements.define(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Xr=globalThis,jr=Xr.trustedTypes,Wr=jr?jr.createPolicy("lit-html",{createHTML:e=>e}):void 0,zr="$lit$",Kr="lit$"+String(Math.random()).slice(9)+"$",Yr="?"+Kr,Qr="<"+Yr+">",$r=document,Jr=function(e){return void 0===e&&(e=""),$r.createComment(e)},Zr=e=>null===e||"object"!=typeof e&&"function"!=typeof e,es=Array.isArray,ts=e=>es(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),is="[ \t\n\f\r]",ns=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,rs=/-->/g,ss=/>/g,as=new RegExp(">|"+is+"(?:([^\\s\"'>=/]+)("+is+"*="+is+"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),os=/'/g,ls=/"/g,ds=/^(?:script|style|textarea|title)$/i,hs=(e=>function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return{_$litType$:e,strings:t,values:n}})(1),us=Symbol.for("lit-noChange"),cs=Symbol.for("lit-nothing"),ps=new WeakMap,gs=$r.createTreeWalker($r,129,null,!1),fs=(e,t)=>{for(var i,n=e.length-1,r=[],s=2===t?"<svg>":"",a=ns,o=0;o<n;o++){for(var l=e[o],d=-1,h=void 0,u=0,c=void 0;u<l.length&&(a.lastIndex=u,null!==(c=a.exec(l)));){var p;u=a.lastIndex,a===ns?"!--"===c[1]?a=rs:void 0!==c[1]?a=ss:void 0!==c[2]?(ds.test(c[2])&&(i=new RegExp("</"+c[2],"g")),a=as):void 0!==c[3]&&(a=as):a===as?">"===c[0]?(a=null!=(p=i)?p:ns,d=-1):void 0===c[1]?d=-2:(d=a.lastIndex-c[2].length,h=c[1],a=void 0===c[3]?as:'"'===c[3]?ls:os):a===ls||a===os?a=as:a===rs||a===ss?a=ns:(a=as,i=void 0)}var g=a===as&&e[o+1].startsWith("/>")?" ":"";s+=a===ns?l+Qr:d>=0?(r.push(h),l.slice(0,d)+zr+l.slice(d)+Kr+g):l+Kr+(-2===d?(r.push(void 0),o):g)}var f=s+(e[n]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw")){throw new Error("invalid template strings array")}return[void 0!==Wr?Wr.createHTML(f):f,r]};class ms{constructor(e,t){var{strings:i,_$litType$:n}=e;this.parts=[];var r,s=0,a=0,o=i.length-1,l=this.parts,[d,h]=fs(i,n);if(this.el=ms.createElement(d,t),gs.currentNode=this.el.content,2===n){var u=this.el.content,c=u.firstChild;c.remove(),u.append(...c.childNodes)}for(;null!==(r=gs.nextNode())&&l.length<o;){if(1===r.nodeType){if(r.hasAttributes()){var p=[];for(var g of r.getAttributeNames())if(g.endsWith(zr)||g.startsWith(Kr)){var f=h[a++];if(p.push(g),void 0!==f){var m=r.getAttribute(f.toLowerCase()+zr).split(Kr),v=/([.?@])?(.*)/.exec(f);l.push({type:1,index:s,name:v[2],strings:m,ctor:"."===v[1]?Es:"?"===v[1]?ws:"@"===v[1]?_s:Ss})}else l.push({type:6,index:s})}for(var y of p)r.removeAttribute(y)}if(ds.test(r.tagName)){var b=r.textContent.split(Kr),S=b.length-1;if(S>0){r.textContent=jr?jr.emptyScript:"";for(var E=0;E<S;E++)r.append(b[E],Jr()),gs.nextNode(),l.push({type:2,index:++s});r.append(b[S],Jr())}}}else if(8===r.nodeType)if(r.data===Yr)l.push({type:2,index:s});else for(var T=-1;-1!==(T=r.data.indexOf(Kr,T+1));)l.push({type:7,index:s}),T+=Kr.length-1;s++}}static createElement(e,t){var i=$r.createElement("template");return i.innerHTML=e,i}}function vs(e,t,i,n){var r,s,a,o,l,d;if(void 0===i&&(i=e),t===us)return t;var h=void 0!==n?null===(a=i.__directives)||void 0===a?void 0:a[n]:i.__directive,u=Zr(t)?void 0:t._$litDirective$;return(null==(r=h)?void 0:r.constructor)!==u&&(null===(o=null==(s=h)?void 0:s._$notifyDirectiveConnectionChanged)||void 0===o||o.call(h,!1),void 0===u?h=void 0:(h=new u(e))._$initialize(e,i,n),void 0!==n?(null!==(l=(d=i).__directives)&&void 0!==l?l:d.__directives=[])[n]=h:i.__directive=h),void 0!==h&&(t=vs(e,h._$resolve(e,t.values),h,n)),t}class ys{constructor(e,t){this._parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){var t,{el:{content:i},parts:n}=this._$template,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:$r).importNode(i,!0);gs.currentNode=r;for(var s=gs.nextNode(),a=0,o=0,l=n[0];void 0!==l;){var d;if(a===l.index){var h=void 0;2===l.type?h=new bs(s,s.nextSibling,this,e):1===l.type?h=new l.ctor(s,l.name,l.strings,this,e):6===l.type&&(h=new As(s,this,e)),this._parts.push(h),l=n[++o]}a!==(null==(d=l)?void 0:d.index)&&(s=gs.nextNode(),a++)}return r}_update(e){var t=0;for(var i of this._parts)void 0!==i&&(void 0!==i.strings?(i._$setValue(e,i,t),t+=i.strings.length-2):i._$setValue(e[t])),t++}}let bs=class e{constructor(e,t,i,n){var r;this.type=2,this._$committedValue=cs,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=i,this.options=n,this.__isConnected=null===(r=null==n?void 0:n.isConnected)||void 0===r||r}get _$isConnected(){var e,t;return null!==(t=null===(e=this._$parent)||void 0===e?void 0:e._$isConnected)&&void 0!==t?t:this.__isConnected}get parentNode(){var e=this._$startNode.parentNode,t=this._$parent;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t){void 0===t&&(t=this),e=vs(this,e,t),Zr(e)?e===cs||null==e||""===e?(this._$committedValue!==cs&&this._$clear(),this._$committedValue=cs):e!==this._$committedValue&&e!==us&&this._commitText(e):void 0!==e._$litType$?this._commitTemplateResult(e):void 0!==e.nodeType?this._commitNode(e):ts(e)?this._commitIterable(e):this._commitText(e)}_insert(e,t){return void 0===t&&(t=this._$endNode),this._$startNode.parentNode.insertBefore(e,t)}_commitNode(e){this._$committedValue!==e&&(this._$clear(),this._$committedValue=this._insert(e))}_commitText(e){this._$committedValue!==cs&&Zr(this._$committedValue)?this._$startNode.nextSibling.data=e:this._commitNode($r.createTextNode(e));this._$committedValue=e}_commitTemplateResult(e){var t,{values:i,_$litType$:n}=e,r="number"==typeof n?this._$getTemplate(e):(void 0===n.el&&(n.el=ms.createElement(n.h,this.options)),n);if((null===(t=this._$committedValue)||void 0===t?void 0:t._$template)===r)this._$committedValue._update(i);else{var s=new ys(r,this),a=s._clone(this.options);s._update(i),this._commitNode(a),this._$committedValue=s}}_$getTemplate(e){var t=ps.get(e.strings);return void 0===t&&ps.set(e.strings,t=new ms(e)),t}_commitIterable(t){es(this._$committedValue)||(this._$committedValue=[],this._$clear());var i,n=this._$committedValue,r=0;for(var s of t)r===n.length?n.push(i=new e(this._insert(Jr()),this._insert(Jr()),this,this.options)):i=n[r],i._$setValue(s),r++;r<n.length&&(this._$clear(i&&i._$endNode.nextSibling,r),n.length=r)}_$clear(e,t){var i;for(void 0===e&&(e=this._$startNode.nextSibling),null===(i=this._$notifyConnectionChanged)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$endNode;){var n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;void 0===this._$parent&&(this.__isConnected=e,null===(t=this._$notifyConnectionChanged)||void 0===t||t.call(this,e))}};class Ss{constructor(e,t,i,n,r){this.type=1,this._$committedValue=cs,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$committedValue=new Array(i.length-1).fill(new String),this.strings=i):this._$committedValue=cs}get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e,t,i,n){void 0===t&&(t=this);var r=this.strings,s=!1;if(void 0===r)e=vs(this,e,t,0),(s=!Zr(e)||e!==this._$committedValue&&e!==us)&&(this._$committedValue=e);else{var a,o,l=e;for(e=r[0],a=0;a<r.length-1;a++){var d;(o=vs(this,l[i+a],t,a))===us&&(o=this._$committedValue[a]),s||(s=!Zr(o)||o!==this._$committedValue[a]),o===cs?e=cs:e!==cs&&(e+=(null!=(d=o)?d:"")+r[a+1]),this._$committedValue[a]=o}}s&&!n&&this._commitValue(e)}_commitValue(e){e===cs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class Es extends Ss{constructor(){super(...arguments),this.type=3}_commitValue(e){this.element[this.name]=e===cs?void 0:e}}var Ts=jr?jr.emptyScript:"";class ws extends Ss{constructor(){super(...arguments),this.type=4}_commitValue(e){e&&e!==cs?this.element.setAttribute(this.name,Ts):this.element.removeAttribute(this.name)}}class _s extends Ss{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$setValue(e,t){var i;if(void 0===t&&(t=this),(e=null!==(i=vs(this,e,t,0))&&void 0!==i?i:cs)!==us){var n=this._$committedValue,r=e===cs&&n!==cs||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==cs&&(n===cs||r);r&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}}handleEvent(e){var t,i;"function"==typeof this._$committedValue?this._$committedValue.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$committedValue.handleEvent(e)}}class As{constructor(e,t,i){this.element=e,this.type=6,this._$disconnectableChildren=void 0,this._$parent=t,this.options=i}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){vs(this,e)}}var Ps={_boundAttributeSuffix:zr,_marker:Kr,_markerMatch:Yr,_HTML_RESULT:1,_getTemplateHtml:fs,_TemplateInstance:ys,_isIterable:ts,_resolveDirective:vs,_ChildPart:bs,_AttributePart:Ss,_BooleanAttributePart:ws,_EventPart:_s,_PropertyPart:Es,_ElementPart:As},Is=Xr.litHtmlPolyfillSupport;null!=Is&&Is(ms,bs),(null!==(Ur=Xr.litHtmlVersions)&&void 0!==Ur?Ur:Xr.litHtmlVersions=[]).push("2.6.1");var Rs=(e,t,i)=>{var n,r,s=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t,a=s._$litPart$;if(void 0===a){var o=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;s._$litPart$=a=new bs(t.insertBefore(Jr(),o),o,void 0,null!=i?i:{})}return a._$setValue(e),a},Cs=e=>null!=e?e:cs,Ns=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Ds=(e,t)=>void 0===t?void 0!==(null==e?void 0:e._$litType$):(null==e?void 0:e._$litType$)===t,Ls=e=>void 0===e.strings
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Os={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ks=e=>function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return{_$litDirective$:e,values:i}};class Bs{constructor(e){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(e,t,i){this.__part=e,this._$parent=t,this.__attributeIndex=i}_$resolve(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}var xs,Ms=Ps._ChildPart,Us={ChildPart:Ms,ElementPart:Ps._ElementPart,resolveDirective:Ps._resolveDirective,TemplateInstance:Ps._TemplateInstance,getPartCommittedValue:e=>e._$committedValue,setPartCommittedValue(e,t){e._$committedValue=t},templateInstanceAddPart(e,t){e._parts.push(t)},getTemplateInstanceTemplatePart:(e,t)=>e._$template.parts[t],setAttributePartValue(e,t,i,n){e._$setValue(t,e,i,n)},getChildPartTemplate:e=>Ms.prototype._$getTemplate(e),setChildPartEndNode(e,t){e._$endNode=t}},{ChildPart:Vs,ElementPart:Fs,resolveDirective:qs,TemplateInstance:Hs,getPartCommittedValue:Gs,setPartCommittedValue:Xs,templateInstanceAddPart:js,getTemplateInstanceTemplatePart:Ws,setAttributePartValue:zs,setChildPartEndNode:Ks,getChildPartTemplate:Ys}=Us,Qs=/^lit |^lit-child/,$s=/^lit-attr (\d+)/,Js="NIL";function Zs(e,t,i){var n;void 0===i&&(i={});var r=null!=(n=i.renderBefore)?n:t;if(void 0!==r._$litPart$)return Rs(e,t,i),r._$litPart$;var s=null,a=null;try{var o,l=null!=(o=i.renderBefore)?o:t.lastChild;[s,a]=function(e){var t=null,i=null,n=e;for(;null!=n;){if(8===n.nodeType){var r=n;if(null===t&&"/lit"===r.data)t=r;else if(r.data.startsWith("lit ")){i=r;break}}n=n.previousSibling}if(null===i||null===t)throw Error(Js);return[i,t]}(l);for(var d,h=!1,u=null,c=document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,(e=>{var t=e.data;return e===s?(h=!0,NodeFilter.FILTER_ACCEPT):h&&t.startsWith("lit ")?(h=!1,u=e.parentElement,NodeFilter.FILTER_SKIP):h||"/lit"!==t||e.parentElement!==u?e===a?(h=!1,NodeFilter.FILTER_ACCEPT):h?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:(h=!0,u=null,NodeFilter.FILTER_SKIP)})),p=void 0,g=void 0,f=[];null!==(d=c.nextNode());){var m=d.data;if(Qs.test(m)){if(0===f.length&&void 0!==p)throw Error("must be only one root part per container");g=ea(e,d,f,i),null!=p||(p=g)}else if(m.startsWith("lit-attr"))ta(d,f,i);else if(m.startsWith("/lit-child")){if(1===f.length&&g!==p)throw Error("internal error");g=ia(d,g,f)}}if(void 0===p)throw Error("there should be exactly one root part in a render container");return r._$litPart$=p,p}catch(n){if(n&&n.message!==Js&&console.error(n),null!==s&&null!==a){console.error("Hydration failed. Clearing nodes and performing clean render");for(var v=a;v&&v!==s;){var y=v.previousSibling;r.removeChild(v),v=y}r.removeChild(s)}return Rs(e,t,i)}}function ea(e,t,i,n){var r,s;if(0===i.length)r=new Vs(t,null,void 0,n);else{var a=i[i.length-1];if("template-instance"===a.type)r=new Vs(t,null,a.instance,n),js(a.instance,r),e=a.result.values[a.instancePartIndex++],a.templatePartIndex++;else{if("iterable"!==a.type)throw function(e,t,i){try{console.error("The following element was an unexpected primitive rendered to part on the client:\n\nParent element:",null==i?void 0:i.host,"\n\nElement rendered on server:",t.parentElement,"\n\nElement rendered on client:",e+"\n\n")}catch(e){console.error("Had trouble logging unexpected primitive error message")}}(e,t,n),Error("unexpected primitive rendered to part");r=new Vs(t,null,a.part,n);var o=a.iterator.next();if(o.done)throw e=void 0,a.done=!0,Error("shorter than expected iterable");e=o.value,Gs(a.part).push(r)}}if((e=qs(r,e))===us)i.push({part:r,type:"leaf"});else if(Ns(e))Xs(r,e),i.push({part:r,type:"leaf"});else if(Ds(e)){if(!t.data.includes(function(e){var t=2,i=new Uint32Array(t).fill(5381);for(var n of e)for(var r=0;r<n.length;r++)i[r%t]=33*i[r%t]^n.charCodeAt(r);return btoa(String.fromCharCode(...new Uint8Array(i.buffer)))}(e.strings)))throw function(e){try{var t=e.values,i=t.map(((e,t)=>t+1+") %c"+e.strings[0].trim()+"%c")).join("\n"),n=t.flatMap((()=>["color: red;",""]));console.error("The following elements got unexpected TemplateResult rendered to part: \n"+i,...n)}catch(e){console.error("Had trouble logging unexpected TemplateResult error message")}}
/**
 * @license
 * Some of this code is copied and modified from `lit-html/experimental-hydrate.js`
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/*! typestate - v1.0.6 - 2018-05-17
* https://github.com/eonarheim/TypeState
* Copyright (c) 2018 Erik Onarheim; Licensed BSD-2-Clause*/(e),Error("unexpected TemplateResult rendered to part");var l=Ys(e),d=new Hs(l,r);Xs(r,d),i.push({instance:d,instancePartIndex:0,part:r,result:e,templatePartIndex:0,type:"template-instance"})}else null==(s=e)||!Array.isArray(s)&&"function"!=typeof s[Symbol.iterator]?(Xs(r,null==e?"":e),i.push({part:r,type:"leaf"})):(Xs(r,[]),i.push({done:!1,iterator:e[Symbol.iterator](),part:r,type:"iterable",value:e}));return r}function ta(e,t,i){var n,r=null!=(n=e.previousElementSibling)?n:e.parentElement;if(null===r)throw Error("could not find node for attribute parts");var s=t[t.length-1];if("template-instance"!==s.type)throw Error("internal error");for(var a,o,{instance:l}=s,d=parseInt(null!=(a=null==(o=$s.exec(e.data))?void 0:o[1])?a:"0"),h=0;h<d;h++){var u=Ws(l,s.templatePartIndex);if(void 0===u||u.type!==Os.ATTRIBUTE&&u.type!==Os.ELEMENT)break;if(u.type===Os.ATTRIBUTE){var c=new u.ctor(r,u.name,u.strings,s.instance,i),p=Ls(c)?s.result.values[s.instancePartIndex]:s.result.values,g=!(c.type===Os.EVENT||c.type===Os.PROPERTY);zs(c,p,s.instancePartIndex,g),s.instancePartIndex+=u.strings.length-1,js(l,c)}else{var f=new Fs(r,s.instance,i);qs(f,s.result.values[s.instancePartIndex++]),js(l,f)}s.templatePartIndex++}r.removeAttribute("hydrate:defer")}function ia(e,t,i){if(void 0===t)throw Error("unbalanced part marker");Ks(t,e);var n=i.pop();if("iterable"===n.type&&!n.iterator.next().done)throw Error("longer than expected iterable");return i.length>0?i[i.length-1].part:void 0}Zs.setSanitizer=Rs.setSanitizer,Zs.createSanitizer=Rs.createSanitizer,function(e){var t=function(){function e(e){this.fsm=e}return e.prototype.to=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.toStates=e,this.fsm.addTransitions(this)},e.prototype.toAny=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);this.toStates=t,this.fsm.addTransitions(this)},e}();e.Transitions=t;var i=function(e,t,i){this.fsm=e,this.from=t,this.to=i};e.TransitionFunction=i;var n=function(){function e(e,t){void 0===t&&(t=!1),this._transitionFunctions=[],this._onCallbacks={},this._exitCallbacks={},this._enterCallbacks={},this._invalidTransitionCallback=null,this.currentState=e,this._startState=e,this._allowImplicitSelfTransition=t}return e.prototype.addTransitions=function(e){var t=this;e.fromStates.forEach((function(n){e.toStates.forEach((function(e){t._canGo(n,e)||t._transitionFunctions.push(new i(t,n,e))}))}))},e.prototype.on=function(e,t){var i=e.toString();return this._onCallbacks[i]||(this._onCallbacks[i]=[]),this._onCallbacks[i].push(t),this},e.prototype.onEnter=function(e,t){var i=e.toString();return this._enterCallbacks[i]||(this._enterCallbacks[i]=[]),this._enterCallbacks[i].push(t),this},e.prototype.onExit=function(e,t){var i=e.toString();return this._exitCallbacks[i]||(this._exitCallbacks[i]=[]),this._exitCallbacks[i].push(t),this},e.prototype.onInvalidTransition=function(e){return this._invalidTransitionCallback||(this._invalidTransitionCallback=e),this},e.prototype.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];var n=new t(this);return n.fromStates=e,n},e.prototype.fromAny=function(e){var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(e[n]);var r=new t(this);return r.fromStates=i,r},e.prototype._validTransition=function(e,t){return this._transitionFunctions.some((function(i){return i.from===e&&i.to===t}))},e.prototype._canGo=function(e,t){return this._allowImplicitSelfTransition&&e===t||this._validTransition(e,t)},e.prototype.canGo=function(e){return this._canGo(this.currentState,e)},e.prototype.go=function(e,t){if(this.canGo(e))this._transitionTo(e,t);else if(!this._invalidTransitionCallback||!this._invalidTransitionCallback(this.currentState,e))throw new Error("Error no transition function exists from state "+this.currentState.toString()+" to "+e.toString())},e.prototype.onTransition=function(e,t){},e.prototype.reset=function(){this.currentState=this._startState},e.prototype.is=function(e){return this.currentState===e},e.prototype._transitionTo=function(e,t){var i=this;this._exitCallbacks[this.currentState.toString()]||(this._exitCallbacks[this.currentState.toString()]=[]),this._enterCallbacks[e.toString()]||(this._enterCallbacks[e.toString()]=[]),this._onCallbacks[e.toString()]||(this._onCallbacks[e.toString()]=[]);var n=this._exitCallbacks[this.currentState.toString()].reduce((function(t,n){return t&&n.call(i,e)}),!0),r=this._enterCallbacks[e.toString()].reduce((function(e,n){return e&&n.call(i,i.currentState,t)}),!0);if(n&&r){var s=this.currentState;this.currentState=e,this._onCallbacks[this.currentState.toString()].forEach((function(e){e.call(i,s,t)})),this.onTransition(s,e)}},e}();e.FiniteStateMachine=n}(xs||(xs={}));var na=xs,ra='<svg viewBox="0 0 24 24" class="nrk-check" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" d="M19.7072 7.70731L9.30492 18.1095l-4.88195-5.6331 1.51138-1.3098 3.4752 4.0098L18.293 6.29309l1.4142 1.41422z"/></svg>',sa='<svg viewBox="0 0 24 24" class="nrk-chevron-right" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" d="M10.88 4l5.6 8-5.6 8H9l5.6-8L9 4h1.88z"/></svg>',aa='<svg viewBox="0 0 24 24" class="nrk-close" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12 10.5858l6.2929-6.29289 1.4142 1.41421L13.4142 12l6.2929 6.2929-1.4142 1.4142L12 13.4142l-6.29288 6.2929-1.41421-1.4142L10.5858 12 4.29291 5.70712l1.41421-1.41421L12 10.5858z"/></svg>',oa='<svg viewBox="0 0 24 24" class="nrk-fullscreen--active" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M16.4142 9.00001l6.7929-6.79289L21.7929.792908 15 7.5858V1.00001h-2V11h10V9.00001h-6.5858zM9.00001 16.4142V23H11V13H1.00001v2H7.5858L.792908 21.7929l1.414212 1.4142 6.79289-6.7929z"/></svg>',la='<svg viewBox="0 0 24 24" class="nrk-fullscreen" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12 4h6.5858l-5.2929 5.29289 1.4142 1.41421L20 5.41423V12h2V2H12v2zM4 18.5858l5.29288-5.2929 1.41422 1.4142L5.4142 20H12v2H2V12h2v6.5858z"/></svg>',da='<svg viewBox="0 0 24 24" class="nrk-link" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10.59 9.17L3.5 16.24l4.25 4.25 2.83-2.83L12 19.07l-4.24 4.24-7.07-7.07 9.9-9.9 4.24 4.25L13.4 12 10.6 9.17zm5.65-5.66l-2.83 2.83L12 4.93 16.24.69l7.07 7.07-9.9 9.9-4.24-4.25L10.6 12l2.82 2.83 7.08-7.07-4.25-4.25z"/></svg>',ha='<svg viewBox="0 0 24 24" class="nrk-media-direkte-animated--active" width="1.500em" height="1.500em" fill="#FF7461" aria-hidden="true" focusable="false"><path d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12Z" opacity=".5"/><path d="M12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z"/></svg>',ua='<svg viewBox="0 0 24 24" class="nrk-media-pause" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10 3H3v18h7V3zm11 0h-7v18h7V3z"/></svg>',ca='<svg viewBox="0 0 24 24" class="nrk-media-picture-in-picture--active" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M10 11v10h13V11H10zm11 8h-9v-6h9v6z"/><path fill="currentColor" d="M3 17V5h18v4h2V3H1v16h7v-2H3z"/></svg>',pa='<svg viewBox="0 0 24 24" class="nrk-media-picture-in-picture" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10 11v10h13V11H10zm11 8h-9v-6h9v6z"/><path fill="currentColor" opacity=".5" d="M3 17V5h18v4h2V3H1v16h7v-2H3z"/></svg>',ga='<svg viewBox="0 0 24 24" class="nrk-media-play" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" d="M6 2h8l5.5 10L14 22H6l5.5-10L6 2z"/></svg>',fa='<svg viewBox="0 0 24 24" class="nrk-media-subtitles--active" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M1 3h22v17H1V3zm4 13h9v-2H5v2zm14 0h-3v-2h3v2z"/><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M8.03806 19l1.78201.908-1.57541 3.0919H6.00001L8.03806 19z"/></svg>',ma='<svg viewBox="0 0 24 24" class="nrk-media-subtitles" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M1 3h22v17H9.77318l-1.52852 2.9999H6.00001L7.52853 20H1V3zm2 2v13h18V5H3zm11 11H5v-2h9v2zm2 0h3v-2h-3v2z"/></svg>',va='<svg viewBox="0 0 24 24" class="nrk-media-volume--1" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M7.53163 17l4.99997 6H15V1h-2.4684L7.53163 7H1v10h6.53163zM3 9h5.46838L13 3.56205V20.438L8.46838 15H3V9zm16 0v6h-2V9h2z"/></svg>',ya='<svg viewBox="0 0 24 24" class="nrk-media-volume--2" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12.5316 23l-4.99997-6H1V7h6.53163l4.99997-6H15v22h-2.4684zM8.46838 9H3v6h5.46838L13 20.438V3.56205L8.46838 9zM19 15V9h-2v6h2zm4-8v10h-2V7h2z"/></svg>',ba='<svg viewBox="0 0 24 24" class="nrk-media-volume--3" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12.5316 23l-4.99997-6H1V7h6.53163l4.99997-6H15v22h-2.4684zM8.46838 9H3v6h5.46838L13 20.438V3.56205L8.46838 9zM19 17V7h-2v10h2zm4-13v16h-2V4h2z"/></svg>',Sa='<svg viewBox="0 0 24 24" class="nrk-media-volume--muted" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M7.53163 17l4.99997 6H15V1h-2.4684L7.53163 7H1v10h6.53163zM3 9h5.46838L13 3.56205V20.438L8.46838 15H3V9zm18.9 3L24 9.9l-1.4-1.4-2.1 2.1-2.1-2.1L17 9.9l2.1 2.1-2.1 2.1 1.4 1.4 2.1-2.1 2.1 2.1 1.4-1.4-2.1-2.1z"/></svg>',Ea='<svg viewBox="0 0 24 24" class="nrk-open-in-new" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M19 19H5V5h4V3H3v18h18v-6h-2v4zm0-12.58576V11h2V3h-8v2h4.5858L7.58582 15h2.82838L19 6.41424z"/></svg>',Ta='<svg viewBox="0 0 24 24" class="nrk-reload" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12.5205 0h-2.4413L7.27924 4l2.79996 4h2.4413l-2.0999-2.99998h1.5793c3.866 0 7 3.13401 7 6.99998 0 3.866-3.134 7-7 7-3.86595 0-6.99996-3.134-6.99996-7 0-1.5987.53509-3.07132 1.43737-4.25011L5.20157 6.10223C3.83091 7.68111 2.99994 9.74415 2.99994 12c0 4.9706 4.02944 9 8.99996 9 4.9706 0 9-4.0294 9-9 0-4.97054-4.0294-8.99998-9-8.99998h-1.5794L12.5205 0z"/></svg>',wa='<svg viewBox="0 0 24 24" class="nrk-some-share" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20.6023 9l-4.9-7H13.43l4.2 6H12c-3.86599 0-7 3.134-7 7v7.2929l2-2V15c0-2.7614 2.23858-5 5-5h5.63l-4.2 6h2.2723l4.9-7z"/></svg>';class _a extends w{constructor(){super(...arguments),this.duration=0,this.simple=!1,this.manualOverrides={srcset:!1,heading:!1,subheading:!1}}static get reactiveAttributes(){return{heading:String,simple:Boolean,src:String,srcset:String,subheading:String,hidden:Boolean}}static get reactiveProperties(){return{availability:Object,dimensions:(e,t)=>{e.srcsetConditions&&(e.src=e.matchSrcset(e.srcsetConditions))},duration:Number,isLive:Boolean,isTimeRunning:(e,t)=>{t&&(e.hidden=!0)},legalAgeText:String,metadata:(e,t)=>{t&&e.copyMetadata(t)},muted:Boolean,startTime:Number,srcset:String,videoSrc:(e,t)=>{e.player.isBinging||(e.hidden=!1)}}}readyCallback(){this.player=Qn(this),this._unshadowProperties=this.player.shadowProperties(["dimensions","isTimeRunning","metadata","muted","src:videoSrc"],this),this.isBootstrapped||(this.manualOverrides={srcset:void 0!==this.srcset,heading:void 0!==this.heading,subheading:void 0!==this.subheading})}updating(e,t){super.updating(e,t),"srcset"===e&&this.srcset&&(this.srcsetConditions=function(e){var t=[];for(var i of e.trim().split(/\s*,\s*/g)){var[n,r="0w"]=i.split(" "),s=r.slice(-1),a=Number(r.slice(0,-1));t.push({type:s,url:n,value:a})}return t.sort(((e,t)=>e.value-t.value))}(this.srcset),this.src=this.matchSrcset(this.srcsetConditions))}updated(e){super.updated(e),this.isConnected&&this.src&&e.has("src")&&(this.player.poster=this.src)}disconnectedCallback(){var e;null==(e=this._unshadowProperties)||e.call(this),this.player=null,super.disconnectedCallback()}copyMetadata(e){var t,i=null==(t=e.legalAge)?void 0:t.body;this.duration=e.duration,this.isLive=e.isLive,this.availability=e.availability,this.startTime=e.startTime,i&&"rating"in i&&(this.legalAgeText=i.rating.displayValue,this.legalDisplayAge=i.rating.displayAge),!this.manualOverrides.srcset&&e.posterSrcset&&(this.srcset=e.posterSrcset),!this.manualOverrides.subheading&&e.subheading&&(this.subheading=e.subheading),!this.manualOverrides.heading&&e.heading&&(this.heading=e.heading)}get accessibleDescription(){var e=[],t=!this.isLive&&br(this.duration);return this.isLive&&e.push("Direkte nå"),this.heading&&e.push("Spill av "+this.heading),this.legalAgeText&&e.push(this.legalAgeText),t&&e.push("Varigheten er "+t),e.length>0?e.join(". ")+".":""}matchSrcset(e){var t,{width:i}=this.getBoundingClientRect();return null!=(t=function(e){var{srcsetConditions:t,elementWidth:i,devicePixelRatio:n=1}=e;if(t&&0!==t.length){for(var{type:r,url:s,value:a}of t)if(("x"===r?i*n-i*a:i-a)<=0)return s;return t[t.length-1].url}}({srcsetConditions:e,devicePixelRatio:window.devicePixelRatio,elementWidth:i}))?t:this.src}}class Aa extends Bs{constructor(e){if(super(e),this._value=cs,e.type!==Os.CHILD)throw new Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===cs||null==e)return this._templateResult=void 0,this._value=e;if(e===us)return e;if("string"!=typeof e)throw new Error(this.constructor.directiveName+"() called with a non-string value");if(e===this._value)return this._templateResult;this._value=e;var t=[e];return t.raw=t,this._templateResult={_$litType$:this.constructor.resultType,strings:t,values:[]}}}Aa.directiveName="unsafeHTML",Aa.resultType=1;var Pa,Ia,Ra,Ca,Na,Da,La,Oa,ka,Ba,xa,Ma,Ua,Va,Fa,qa,Ha,Ga,Xa=ks(Aa);function ja(e){var t="onLoginReady";void 0===window[t]&&(window[t]=function(){(window[t].q=window[t].q||[]).push(arguments)}),function(e){if(document.querySelector('script[src="'+e+'"]'))return;var t=document.createElement("script");t.async=!0,t.src=e,document.head.appendChild(t)}("/logginn.js"),window[t](e)}function Wa(e){return new Promise((t=>{setTimeout(t,e)}))}function za(e){var{attemptPlay:t,attemptPause:i,pauseIntersection:n,disableAutopause:r,playIntersection:s,initialState:a}=e,o=new na.FiniteStateMachine(a);o.from("AwaitingIntersection").to("Playing","Paused","ManualPlaying"),o.from("Playing").to("Paused","ManualPause"),o.from("ManualPlaying").to("ManualPause"),!1===r&&o.from("ManualPlaying").to("Paused"),o.from("ManualPause").to("ManualPlaying"),o.from("Paused").to("AwaitingIntersection","ManualPlaying");var{playGuard:l,pauseGuard:d}=function(e){var{pauseIntersection:t,playIntersection:i}=e;return{pauseGuard:Ka.bind(null,t),playGuard:Ya.bind(null,i)}}({playIntersection:s,pauseIntersection:n});o.onEnter("Playing",l),o.onEnter("Paused",d);var h=Promise.resolve();o.on("Playing",(async()=>{await Wa(250),o.is("Playing")?h=t():o.is("Paused")&&o.go("AwaitingIntersection")}));return o.on("Paused",(async()=>{try{await h}catch(e){}finally{await i()}})),o}function Ka(e,t,i){var{isIntersecting:n=!1,intersectionRatio:r=0}=void 0===i?{}:i;return!n||e>=r}function Ya(e,t,i){var{isIntersecting:n=!0,intersectionRatio:r=1}=void 0===i?{}:i;return n&&e<=r}async function Qa(){customElements.get("nrkno-kilkaya-tracker")||(await new Promise((e=>{if(!$a())return function(e){var t;if($a())e();else{var i=window,n=null!=(t=null==i?void 0:i.nrkno_player__kilkayaResolvers)?t:void 0;if(n)n.push(e);else{i.nrkno_player__kilkayaResolvers=[e];var r=void 0;Object.defineProperty(window,"kilkaya",{get:()=>r,set(e){r=e;var t=i.nrkno_player__kilkayaResolvers;for(var n of null!=t?t:[])n();i.nrkno_player__kilkayaResolvers=void 0}})}}}(e);e()})),Gr("nrkno-kilkaya-tracker",await async function(){return(await window.nrknoStaticLoaders_v1.dynamicImport("./nrkno-kilkaya-tracking-element.mjs","https://static.nrk.no/nrkno-player/2.28.0/")).KilkayaTrackingElement}()))}function $a(){var e,t,i=null!=(e=null==(t=globalThis.window)?void 0:t.kilkaya)?e:void 0;if(i&&"object"==typeof i)return i}var Ja=t({},kr,{DialogHide:"player.dialogHide",DialogShow:"player.dialogShow"});function Za(e,t){if(e)return hs(Ia||(Ia=i(['\n      <h2 class="nrkno-player-poster__heading">\n        ','\n        <div class="heading-container"><span class="heading-text">',"</span></div>\n      </h2>\n    "])),function(e){var t,n=null!=(t=null==e?void 0:e.length)?t:-1;if(n>0)return hs(Ra||(Ra=i(['<div class="subheading-container"><small class="subheading-text">',"</small></div>"])),e)}(t),e)}var eo=class extends _a{updated(e){super.updated(e),this.isConnected&&(this.manualOverrides.subheading=!0,Zs(this.render(),this,{host:this}))}render(){return hs(Ca||(Ca=i(["\n      "," ",'\n      <button\n        class="nrkno-player-poster__button full"\n        action="','"\n        ?disabled="','"\n        type="play-button"\n        aria-label="','"\n      >\n        <div aria-hidden="true">\n          ','\n          <div class="absolute top right flex">'," ",'</div>\n          <div class="absolute bottom left right">\n            '," ","\n          </div>\n          ","\n        </div>\n      </button>\n    "])),function(e){if(e)return hs(Pa||(Pa=i(['<img class="full" alt src="','" />'])),e)}(this.src),this.renderLiveOrPendingBadge(),Ja.Play,this.availability&&!this.availability.available,this.accessibleDescription,this.renderVolumeStatus(),this.renderAge(),this.renderDuration(),this.renderPlayButton(),Za(this.heading,this.subheading),this.renderMessage())}renderMessage(){if(this.availability&&!this.availability.available&&!this.availability.isPending)return hs(Na||(Na=i(['\n      <div class="nrkno-player-poster__message absolute top right bottom left">\n        <p class="nrkno-player-poster__message-inner">',"</p>\n      </div>\n    "])),this.availability.endUserMessage)}renderPlayButton(){var e=this.availability;if(!(void 0!==e&&!1===e.available)){var t=this.isLive?"":"nrkno-player-button--start-time-indicator",n=100/this.duration*(this.startTime||0),r=n?"--startAtDegrees: "+3.6*n+"deg;":void 0;return hs(Da||(Da=i([' <div\n      class="nrkno-player-poster__icon-play nrkno-player-button-big nrkno-player-focus-ring--outside relative center-content ','"\n      style="','"\n    >\n      <span class="sr-only">Spill av</span>\n      ',"\n    </div>"])),t,Cs(r),Xa(ga))}}renderDuration(){if(!this.isLive&&this.duration)return hs(La||(La=i([' <time class="nrkno-player-poster__pill">',"</time> "])),yr(this.duration))}renderAge(){var e=this.legalDisplayAge;if(!this.isLive&&"string"==typeof e)return hs(Oa||(Oa=i(['<p class="nrkno-player-poster__pill nrkno-player-poster__age">',"</p> "])),e)}renderVolumeStatus(){if(this.muted)return hs(ka||(ka=i([' <div class="nrkno-player-poster__pill nrkno-player-poster__muted absolute top left">\n      '," Spiller "," lyd\n    </div>"])),Xa(this.muted?Sa:ya),this.muted?"uten":"med")}renderLiveOrPendingBadge(){var e,t,n=!(null!=(e=this.availability)&&e.available)&&(null==(t=this.availability)?void 0:t.isPending);if(this.isLive||n){var r=this.availability,s=this.isLive?"Direkte":"Kommer";if(null==r||!r.available){var a,o,l=new Date,d=new Date(null!=(a=null==r?void 0:r.from)?a:0),h=new Date(null!=(o=null==r?void 0:r.to)?o:0),u=l.getTime()<d.getTime();u&&fr(d,l)?s+=" kl. "+Er(d):u?s+=" "+Sr(d,l):l.getTime()>h.getTime()&&(s="Sending avsluttet "+Sr(h,l))}return hs(Ba||(Ba=i(['\n      <div\n        class="nrkno-player-poster-live-badge absolute top right ','"\n      >\n        ',"\n      </div>\n    "])),n?"nrkno-player-poster-live-badge--pending":"",s)}}};async function to(){var e=await io();if(e)return e.accessToken}function io(){return Promise.race([new Promise((e=>{ja((t=>{e(t)}))})),no()])}async function no(){return await Wa(5e3),!1}var ro=["activeDialog","activeSession","handledError","isLive","isRealtime","isWaiting","metadata","muted","posterData","src","speak"],so=class extends(function(e){return class extends e{static get reactiveProperties(){return t({},super.reactiveProperties,{intersectionEntry:Object,isIntersecting:Boolean})}constructor(){super(...arguments),this.intersectionEntry=void 0,this.intersectionThreshold=[0],this.isIntersecting=!1,this._intersectionObserver}connectedCallback(){if(A){var e=this.getAttribute("intersectionthreshold");null!==e&&(this.intersectionThreshold=JSON.parse(e)),this._intersectionObserver=this._getIntersectionObserver(this.intersectionThreshold),this._intersectionObserver&&(this._intersectionObserver.observe(this),this._intersectionObserver.count++),null==super.connectedCallback||super.connectedCallback()}else super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this._intersectionObserver&&(this._intersectionObserver.unobserve(this),--this._intersectionObserver.count<=0&&(this._intersectionObserver.disconnect(),_.delete(this.intersectionThreshold)),this._intersectionObserver=void 0)}_getIntersectionObserver(e){for(var[t,i]of _.entries())if(a(e,t))return this.intersectionThreshold=t,i;var n={threshold:e},r=this._createIntersectionObserver(n);return _.set(e,r),r}_createIntersectionObserver(e){var t=new IntersectionObserver(((e,t)=>{for(var i of e){var n=i.target;n.intersectionEntry=i,n.isIntersecting=i.isIntersecting}}),e);return t.count=0,t}}}(Fr)){constructor(){var e,t,i,n;super(...arguments),this.didLazyAutoplay=!1,this.disableKilkaya=!1,this.lazyAutoplay=!1,this.muteHadInteraction=!1,this.disableAutopause=!1,this.playerName="nrkno-player",this.playerVersionNumber="6.5.0",this.appInsightsTeamName="nrkno-teamet",this.appInsightsServiceName="nrk.no",this.buffering="default",this.stopBuffering=(e=()=>{this.activeSession&&this.activeSession.close()},t=5e3,(n=()=>{clearTimeout(i),i=setTimeout((()=>{e(),n.hasRun=!0}),t)}).hasRun=!1,n.cancel=()=>{clearTimeout(i)},n.reset=()=>{clearTimeout(i),n.hasRun=!1},n),this.shareOrigin="https://www.nrk.no/video",this.disableSharing=!1,this.playChangeWithUserInteraction=!1,this.snowplowUrl="",this.snowplowAppId="no.nrk.web.nrknoplayer",this.snowplowServiceId=W.Nrkno}static get reactiveAttributes(){return t({},super.reactiveAttributes,{disableAutopause:Boolean,lazyAutoplay:Boolean,disableKilkaya:Boolean,buffering:String,recommendedOrigin:String,shareOrigin:String,disableSharing:Boolean})}static get reactiveProperties(){return t({},super.reactiveProperties,{activeDialog:String,handledError:Object,posterData:Object,didLazyAutoplay:Boolean})}static whenDefinedCallback(){Gr("nrkno-player-poster",eo)}readyCallback(){super.readyCallback(),this.innerHTML="";var e,t=this.getAttribute(".posterData");t&&(this.posterData=JSON.parse(t),null!=(e=this.posterData)&&e.src&&(this.lazyLoadMetadata=!0));this.addEventListener(Nr.PlayingChange,this);var[i=0,n=0]=this.intersectionThreshold||[];this.autoPlaybackState=za({initialState:"Paused",playIntersection:i,pauseIntersection:n,disableAutopause:this.disableAutopause,attemptPlay:()=>{if(!this.isAnotherPlayerPlaying())return this.play(!1)},attemptPause:()=>this.pause(!1)})}disconnectedCallback(){this.removeEventListener(Nr.PlayingChange,this),super.disconnectedCallback()}firstUpdated(e){super.firstUpdated(e),this.user||async function(){var e=await io();if(e)return{id:e.subject,getAuthToken:to,shouldUseChildIcons:!1}}().then((e=>{this.user=e})),!1===this.disableKilkaya&&Qa()}updating(e,t){var i;if("isIntersecting"===e&&this.isIntersecting&&this.lazyLoadMetadata&&this.loadMetadata(),"activeDialog"===e)void 0!==this.activeDialog&&this.isPlaying&&(null==(i=this.activeSession)||i.pause());else if("activeSession"===e&&this.activeSession){var n;null!=(n=this.metadata)&&n.isChannel&&(this.epgState=new zn(this,this.activeSession))}else if("isPlaying"===e)this.isPlaying?this.activeDialog=void 0:void 0===t||void 0!==this.activeDialog||this.isLive||(this.activeDialog=this.renderRecommended()?"recommend":"no-recommend");else if("handledError"===e)this.handledError?this.activeDialog="error":this.activeDialog=void 0;else if("dimensions"===e&&this.dimensions){var r=Math.min(1e3,Math.max(400,this.dimensions.width/this.dimensions.height*400)),s="player-size--"+(this.dimensions.width<r?"small":"large");this.classList.remove("player-size--small","player-size--large"),this.classList.add(s)}else if("lazyAutoplay"===e){var a=this.autoPlaybackState;this.lazyAutoplay&&a.is("Paused")?(this.muted=!0,a.go("AwaitingIntersection")):a.is("AwaitingIntersection")&&a.go("Paused")}else if("isAudioOnly"===e){var o=this.querySelector("video");o&&(this.isAudioOnly?o.classList.add("nrkno-player-audio-only"):o.classList.remove("nrkno-player-audio-only"))}else if("metadata"===e&&this.metadata&&this.metadata.id){var l=this.shareOrigin;l.endsWith("/")&&(l=l.slice(0,-1));var d=this.metadata.id;d.startsWith("/")&&(d=d.slice(1));var h=l+"/"+d;try{this.checkEndpointAvailability(h).then((e=>{e||(this.disableSharing=!0)}))}catch(e){this.disableSharing=!0}}super.updating(e,t)}updated(e){var t,i;if(super.updated(e),this.isConnected)for(var n of(this.isBootstrapped&&e.has("src")&&void 0!==e.get("src")&&(this.posterData=void 0),e.has("isPlaying")&&(i=this.autoPlaybackState,this.isPlaying?i.canGo("ManualPlaying")&&i.go("ManualPlaying"):i.canGo("ManualPause")&&i.go("ManualPause")),!e.has("intersectionEntry")||!this.intersectionEntry||null!=(t=this.pipState)&&t.isActive||function(e,t){e.canGo("Playing")?e.go("Playing",t):e.canGo("Paused")&&e.go("Paused",t)}(this.autoPlaybackState,this.intersectionEntry),e.has("muted")&&this.isStarted&&!this.muteHadInteraction&&(this.muteHadInteraction=!0),ro))if(!this.isBootstrapped||e.has(n))return Zs(this.render(),this,{host:this})}onSubtitleToggle(){if(window&&window.localStorage){var e=window.localStorage.getItem("nrkno-player_subtitles");if(!e)return void window.localStorage.setItem("nrkno-player_subtitles","off");"off"===e&&window.localStorage.setItem("nrkno-player_subtitles","on"),"on"===e&&window.localStorage.setItem("nrkno-player_subtitles","off")}}async checkEndpointAvailability(e){var t=!1;try{200===(await fetch(e,{method:"HEAD"})).status&&(t=!0)}catch(e){console.error("Error making HEAD request:",e)}return t}handleEvent(e){if(!e.defaultPrevented){if(Dr(e,Nr.PlayingChange))return this.dispatchEvent((t="nrknoplayer.playchange",i={withUserInteraction:this.playChangeWithUserInteraction,change:e.detail},new CustomEvent(t,{bubbles:!0,detail:i}))),void(this.playChangeWithUserInteraction=!1);var t,i,[n,r]=Jn(e);if(n)switch(n){case Ja.DialogHide:void 0!==this.activeDialog&&(e.preventDefault(),this.activeDialog=void 0);break;case Ja.DialogShow:e.preventDefault(),this.activeDialog=r;break;case Ja.SetVolume:super.handleEvent(e),this.muted=0===this.volume;break;case Ja.ToggleSubtitles:this.onSubtitleToggle(),super.handleEvent(e);break;default:super.handleEvent(e)}else super.handleEvent(e)}}render(){return hs(Ma||(Ma=i(['\n      <video aria-hidden="true"></video>\n      <span class="visually-hidden" aria-live="polite">','</span>\n      <nrkno-player-keyboard></nrkno-player-keyboard>\n      <nrkno-player-tracker\n        snowplowappid="','"\n        snowplowurl="','"\n        snowplowplatform="','"\n        autoplay="','"\n      ></nrkno-player-tracker>\n      <nrkno-kilkaya-tracker></nrkno-kilkaya-tracker>\n      <nrkno-player-subtitles class="-subtitles nrkno-player-subtitle" type="subtitles"></nrkno-player-subtitles>\n      ','\n      <nrkno-player-controls\n        data-focus-container\n        class="-controls full"\n        type="controls"\n        .visibility=',"\n        .activeDialog=",'\n        ?hidden="','"\n      ></nrkno-player-controls>\n      '," "," "," ","\n      "," ","\n    "])),this.speak,this.snowplowAppId,this.snowplowUrl?this.snowplowUrl:"https://data.nrk.no",this.snowplowPlatform,this.autoplay,this.renderUnmute(),this.visibleControllerItems(),this.activeDialog,void 0===this.activeSession,this.renderPoster(),this.renderError(),(e=!this.isWaiting,hs(xa||(xa=i(['\n    <div class="nrkno-player-spinner center" ?hidden="','">\n      <div class="nrkno-player-spinner__icon">',"</div>\n    </div>\n  "])),e,Xa('<svg viewBox="0 0 24 24" class="nrk-spinner" width="1.500em" height="1.500em"  aria-hidden="true" focusable="false"><path fill="currentColor" d="M23 11.9999s0 .0001 0 0C23 18.0751 18.0751 23 12 23 5.92487 23 1 18.0751 1 12 1 5.92487 5.92487 1 12 1v2c-4.97056 0-9 4.02944-9 9 0 4.9706 4.02944 9 9 9 4.9706 0 9-4.0294 9-9l2-.0001z"/></svg>'))),this.renderRecommended(),this.renderShare(),this.renderAutoplayHeading());var e}async play(e){var t,i;void 0===e&&(e=!0),this.playChangeWithUserInteraction=e,this.stopBuffering.hasRun&&await this.createSession(),this.stopBuffering.reset();try{await super.play()}catch(e){}var n=null!=(t=null==(i=this.activeSession)?void 0:i.isPlaying())&&t;n&&(!e&&(this.didLazyAutoplay=n))}async pause(e){return void 0===e&&(e=!0),this.playChangeWithUserInteraction=e,"conservative"===this.buffering&&this.isLive&&this.stopBuffering(),super.pause()}toggleMute(){this.volume?this.muted=!this.muted:(this.muted=!1,this.volume=1)}handlePanic(e){this.handledError=e}loadMetadata(){return super.loadMetadata(!1)}canPlayType(e){return(ar()?[te,se]:[se,te]).some((t=>t(e)))}async initPlayerCoreInstance(){if(!this.player){var e=new Promise((e=>K(e))),{HlsJsAdapter:t,NativeAdapter:i,PlayerCore:n,ConfiguredAdapter:r,defineElements:s}=await window.nrknoStaticLoaders_v1.dynamicImport("./nrkno-player-dependencies.mjs","https://static.nrk.no/nrkno-player/2.28.0/"),a=Promise.race([e,Wa(250)]);await a,s();var o=new r(i),l=new r(t,(()=>window.nrknoStaticLoaders_v1.dynamicImport("hls.js","https://static.nrk.no/nrkno-player/2.28.0/")),{immediateQualityJumps:!0,forwardBufferLength:{maxSeconds:30}}),d=ar()?[o,l]:[l,o];this.player=new n(this,d,{mediaElementOptions:{crossOrigin:"anonymous"},displaySubtitles:!1})}}isAnotherPlayerPlaying(){var e=Array.from(document.getElementsByTagName(this.tagName));for(var t of e){var i=this!==t,n=t.isPlaying||t.isWaiting;if(i&&n)return!0}return!1}renderPoster(){var e,t=null!=(e=this.posterData)?e:{},n=t.subheading,r="";return"string"==typeof n?r=n:!0===n&&(r=void 0),hs(Ua||(Ua=i(['\n      <nrkno-player-poster\n        class="-poster full"\n        type="poster"\n        ?hidden="','"\n        src="','"\n        srcset="','"\n        heading="','"\n        subheading="','"\n      >\n      </nrkno-player-poster>\n    '])),void 0!==this.handledError||this.isStarted,Cs(t.src),Cs(t.srcset),Cs(t.heading),Cs(r))}renderError(){return hs(Va||(Va=i(['\n      <nrkno-player-errormessage\n        class="nrkno-player-errormessage full"\n        .error="','"\n        ?hidden="','"\n      ></nrkno-player-errormessage>\n    '])),this.handledError,"error"!==this.activeDialog)}renderRecommended(){if(this.recommendedOrigin)return hs(Fa||(Fa=i(['\n      <nrkno-player-recommended\n        data-focus-container\n        data-focus-strategy="initial"\n        class="nrkno-player-recommended full"\n        ?hidden="','"\n      ></nrkno-player-recommended>\n    '])),"recommend"!==this.activeDialog||this.isWaiting)}renderShare(){if(this.shareOrigin&&!this.disableSharing)return hs(qa||(qa=i(['\n      <nrkno-player-share\n        data-focus-container\n        data-focus-strategy="initial"\n        class="nrkno-player-share full"\n        ?hidden="','"\n      ></nrkno-player-share>\n    '])),"share"!==this.activeDialog||this.isWaiting)}renderAutoplayHeading(){var e,t,n,r,s=null!=(e=null!=(t=null==(n=this.posterData)?void 0:n.heading)?t:null==(r=this.metadata)?void 0:r.heading)?e:"";if(this.didLazyAutoplay&&s)return hs(Ha||(Ha=i(['\n      <h2 class="nrkno-player-autoplay absolute top left">\n        <span class="nrkno-player-autoplay__heading">',"</span>\n      </h2>\n    "])),s)}renderUnmute(){if(this.muted&&!this.muteHadInteraction&&!this.activeDialog)return hs(Ga||(Ga=i(['<nrkno-player-volume\n      class="-volume nrkno-player-controls__mute absolute"\n      simple\n    ></nrkno-player-volume>'])))}visibleControllerItems(){var e={disabled:[],hidden:[]};return this.disableSharing&&(e.disabled=[...e.disabled,"Share"],e.hidden=[...e.hidden,"Share"]),this.activeDialog&&("no-recommend"===this.activeDialog?e.hidden=[...e.hidden,"Live"]:e.hidden=[...e.hidden,"Scrubber","Live"]),e}};window.customElements.get("nrkno-player")||window.customElements.define("nrkno-player",so);export{i as $,pe as A,Et as B,_t as C,Kn as D,vt as E,Yn as F,mt as G,ut as H,se as I,ft as J,yt as K,Q as L,J as M,ze as N,$ as O,bt as P,te as Q,w as R,us as S,na as T,ee as U,Z as V,Gr as W,K as X,Zs as Y,hs as Z,t as _,We as a,Xa as a0,lr as a1,Sa as a2,va as a3,ya as a4,ba as a5,ua as a6,Ta as a7,ga as a8,oa as a9,la as aa,fa as ab,ma as ac,ha as ad,ca as ae,pa as af,wa as ag,xr as ah,je as ai,aa as aj,Cs as ak,sa as al,br as am,ra as an,da as ao,Ea as ap,ir as aq,h as b,Xn as c,Nr as d,Dr as e,wt as f,le as g,Qn as h,wn as i,s as j,kr as k,r as l,$n as m,ur as n,yr as o,or as p,Zn as q,ks as r,hr as s,Bs as t,Os as u,jn as v,I as w,P as x,ge as y,ct as z};
