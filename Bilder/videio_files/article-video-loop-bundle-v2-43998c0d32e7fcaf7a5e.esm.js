(()=>{var e={584:(e,t,n)=>{var i=n(146),r=n(473),s=n(48),o=0,a=4,l=36,c=Math.pow(l,a);function u(){return r((s()*c|0).toString(l),a)}function d(){return o=o<c?o:0,++o-1}function h(){return"c"+(new Date).getTime().toString(l)+r(d().toString(l),a)+i()+(u()+u())}h.slug=function(){var e=(new Date).getTime().toString(36),t=d().toString(36).slice(-4),n=i().slice(0,1)+i().slice(-1),r=u().slice(-2);return e.slice(-2)+t+n+r},h.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},h.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},h.fingerprint=i,e.exports=h},146:(e,t,n)=>{var i=n(473),r="object"==typeof window?window:self,s=Object.keys(r).length,o=i(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+s.toString(36),4);e.exports=function(){return o}},48:e=>{var t,n="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(n){var i=Math.pow(2,32)-1;t=function(){return Math.abs(n.getRandomValues(new Uint32Array(1))[0]/i)}}else t=Math.random;e.exports=t},473:e=>{e.exports=function(e,t){var n="000000000"+e;return n.substr(n.length-t)}},363:(e,t,n)=>{e.exports=n(282)},282:e=>{e.exports.getElementTag=function(e,t){return e+(t?`-v${t.split(".")[0]}`:"")}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}(()=>{"use strict";var e=n(363);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,n||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}function r(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a={rootMargin:"0px 0px 0px 0px",threshold:[0,.5,1],root:null};class l{constructor(e,t,n){r(this,"intersections",void 0),r(this,"elements",void 0),this.elements=e.slice(0),this.intersections=e.map((e=>({target:e,isIntersecting:!1,ratio:null}))),this.intersectionObserver=new IntersectionObserver((n=>{var i=this.intersections.slice(0);n.forEach((t=>{var n=e.indexOf(t.target);i.splice(n,1,{target:t.target,isIntersecting:t.isIntersecting,ratio:t.intersectionRatio})})),this.intersections=i,t(this.intersections)}),o(o({},a),n)),e.forEach((e=>this.intersectionObserver.observe(e)))}disconnect(){this.elements.forEach((e=>this.intersectionObserver.unobserve(e))),this.intersectionObserver.disconnect()}}var c,u;c="undefined"==typeof window?{}:window.Element.prototype,u=c.matches||c.msMatchesSelector||c.webkitMatchesSelector,c.closest;function d(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="prevent_recursive_dispatch_maximum_callstack".concat(t);if(e[r])return!0;e[r]=!0,"function"==typeof window.CustomEvent?n=new window.CustomEvent(t,{bubbles:!0,cancelable:!0,detail:i}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i);var s=e.dispatchEvent(n);return e[r]=null,s}var h="data-state",p="data-viewport-position",v="disable-forced-attributes",b="is-paused",g="autoplay-blocked",m=4,y=e=>!!e.offsetParent;class f extends HTMLElement{constructor(){super(...arguments),r(this,"_disconnecting",!1),r(this,"_visibleVideoElement",void 0),r(this,"_handlePlayChange",(e=>{"play"===e.type&&d(this,"dh-basis-autoplay-succeeded"),e.target===this._visibleVideoElement&&(this.isPaused=this._visibleVideoElement.paused)})),r(this,"_updatePlayState",(()=>{this._visibleVideoElement&&(this._shouldPlay()?this._playVideo():this._pauseVideo())})),r(this,"_handleResize",(()=>{this._updateVisibleVideoElement()}))}static get observedAttributes(){return[h,v,p]}connectedCallback(){this._setVideoAttributes(),this._setEventListeners(),this._updateVisibleVideoElement()}disconnectedCallback(){this._disconnecting=!0,this._removeEventListeners()}attributeChangedCallback(e,t,n){e!==h&&e!==p||t!==n&&(this._updateVisibleVideoElement(),this._updatePlayState(),e===p&&"IN-VIEWPORT"===n&&this._preload())}_setEventListeners(){window.addEventListener("resize",this._handleResize),this.videoElements.forEach((e=>{e.addEventListener("pause",this._handlePlayChange),e.addEventListener("play",this._handlePlayChange),e.addEventListener("canplaythrough",this._updatePlayState)}))}_removeEventListeners(){window.removeEventListener("resize",this._handleResize),this.videoElements.forEach((e=>{e.removeEventListener("pause",this._handlePlayChange),e.removeEventListener("play",this._handlePlayChange),e.removeEventListener("canplaythrough",this._updatePlayState)}))}_updateVisibleVideoElement(){requestAnimationFrame((()=>{var e=this.videoElements.find(y);e!==this._visibleVideoElement&&(this._pauseVideo(),this._visibleVideoElement=e,this._shouldPreload()&&this._preload(),this._updatePlayState())}))}_setVideoAttributes(){this.disableForcedAttributes||this.videoElements.forEach((e=>{e.setAttribute("playsInline",""),e.setAttribute("loop",""),e.setAttribute("disableRemotePlayback",""),e.setAttribute("x-webkit-airplay","deny")}))}_shouldPlay(){var e;return(null===(e=this._visibleVideoElement)||void 0===e?void 0:e.readyState)>=m&&"ACTIVE"===this.state&&"IN-VIEWPORT"===this.viewportPosition}_shouldPreload(){return"IN-VIEWPORT"===this.viewportPosition}_preload(){var e,t;(null===(e=this._visibleVideoElement)||void 0===e?void 0:e.readyState)<m&&(null===(t=this._visibleVideoElement)||void 0===t||t.load())}_playVideo(){d(this,"dh-basis-autoplay-attempted");var e="undefined"!=typeof window&&!!window.matchMedia&&window.matchMedia("(prefers-reduced-motion)").matches,t=this._visibleVideoElement;!t.paused||e||this.autoplayBlocked||(t.play()||Promise.resolve()).catch((e=>{console.error(e),this.autoplayBlocked=!0}))}_pauseVideo(){var e=this._visibleVideoElement;e&&!e.paused&&e.pause()}get videoElements(){return e=this.querySelectorAll("video"),[].slice.call(e);var e}get disableForcedAttributes(){return this.hasAttribute(v)}get state(){return this.getAttribute(h)}set state(e){this.setAttribute(h,e)}get isPaused(){return this.getAttribute(b)}set isPaused(e){e?this.setAttribute(b,""):this.removeAttribute(b)}get autoplayBlocked(){return this.hasAttribute(g)||!1}set autoplayBlocked(e){var t,n,i;n=g,i=e,(t=this)&&((void 0!==i?i:t.hasAttribute(n))?t.setAttribute(n,""):t.removeAttribute(n))}get viewportPosition(){return this.getAttribute(p)}set viewportPosition(e){this.setAttribute(p,e)}}n(584),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var E="https://static.nrk.no/nrkno-snowplow",w="1",k="nrknoOnTrackerReady-"+w;function P(e){void 0===globalThis[k]&&(globalThis[k]=function(e){globalThis[k].q.push(e)},globalThis[k].q=[]),function(e){if(document.querySelector('script[src="'+e+'"]'))return;var t=document.createElement("script");t.async=!0,t.src=e,document.head.appendChild(t)}(E+"/major/"+w+"/nrkno-snowplow-entry.js"),globalThis[k](e)}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var O=(e=>(e.Entry="entry",e.Exit="exit",e))(O||{}),j=(e=>(e.BackstageEvent="iglu:no.nrk.innlogging/backstage-event/jsonschema/1-0-0",e.ClickEvent="iglu:no.nrk/click-event/jsonschema/1-0-0",e.FrontstageServerEvent="iglu:no.nrk.innlogging/frontstage-server-event/jsonschema/1-0-0",e.ImpressionEvent="iglu:no.nrk/impression-event/jsonschema/1-0-0",e.LoginRegisterFlowEvent="iglu:no.nrk.innlogging/login-register-flow-event/jsonschema/1-0-0",e.PlaybackEvent="iglu:no.nrk/playback-event/jsonschema/1-0-0",e.ProfilePageEvent="iglu:no.nrk.innlogging/profile-page-event/jsonschema/1-0-0",e.RadioEvent="iglu:no.nrk.radio/radio-event/jsonschema/1-0-0",e.SearchEvent="iglu:no.nrk/search-event/jsonschema/1-0-0",e.StepEvent="iglu:no.nrk.dh/step-event/jsonschema/1-0-0",e.TimeSpentEvent="iglu:no.nrk/time-spent-event/jsonschema/1-0-0",e.ViewportEvent="iglu:no.nrk.dh/viewport-event/jsonschema/1-0-0",e))(j||{}),_=(e=>(e.ClientID="iglu:no.nrk.innlogging/client-id/jsonschema/1-0-0",e.Content="iglu:no.nrk/content/jsonschema/1-0-1",e.Experiment="iglu:no.nrk/experiment/jsonschema/1-0-0",e.Link="iglu:no.nrk/link/jsonschema/2-0-0",e.NrkSession="iglu:no.nrk/nrk-session/jsonschema/1-0-0",e.NrkUser="iglu:no.nrk/nrk-user/jsonschema/1-0-0",e.Plug="iglu:no.nrk/plug/jsonschema/3-0-0",e.PreviousWebPage="iglu:no.nrk/previous-web-page/jsonschema/1-0-0",e.RegistrationContext="iglu:no.nrk.innlogging/registration-context/jsonschema/1-0-0",e.SearchResult="iglu:no.nrk/search-result/jsonschema/1-0-1",e.Service="iglu:no.nrk/service/jsonschema/2-0-0",e.Application="iglu:com.snowplowanalytics.mobile/application/jsonschema/1-0-0",e))(_||{});const S="no.nrk.dh";function V(e,{environment:t,contentContext:n}){let i,r=!1;const s=function(e="development"){return"production"===e?"https://data.nrk.no":"https://no-nrk-prod1.mini.snplow.net"}(t),o=[],a=["service","user"],l=e=>{r?e(i):o.push(e)};return P((t=>{i=t;const{NrknoUtils:l}=t;if(l.newTracker(e,S,s),n){const t=`${e}-${n.id}`;a.push(t),l.context.set(t,_.Content,{source:n.source,id:n.id})}var c,u;(c=l.trackers.whenReady("main-tracker"),u=1e3,Promise.race([c.then((()=>!0)),new Promise((e=>{setTimeout((()=>{e(!1)}),u)}))])).then((e=>{for(r=!0,!1===e&&console.warn("nrkno tracker not available");o.length;){o.pop()(i)}})).catch(console.error)})),{trackSelfDescribingEvent:t=>l((({NrknoUtils:n,Snowplow:i})=>i.trackSelfDescribingEvent({event:t,context:n.context.collect(a)},[e]))),trackStructuredEvent:t=>l((({NrknoUtils:n,Snowplow:i})=>{i.trackStructEvent({...t,context:n.context.collect(a)},[e])}))}}function x(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var A=0;function T(e){return"__private_"+A+++"_"+e}const I=(0,e.getElementTag)("levende-stillbilde","2.8.4");const C="data-viewport-position";var L=T("entryObserver"),R=T("exitObserver"),D=T("logStatus"),M=T("createTracker"),N=T("startViewportLogger"),W=T("stopViewportLogger"),F=T("logPlayAttempted"),U=T("logPlaySucceeded");class q extends HTMLElement{constructor(...e){super(...e),Object.defineProperty(this,W,{value:$}),Object.defineProperty(this,N,{value:B}),Object.defineProperty(this,M,{value:z}),this.name=I,Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:{playAttempted:!1,playSucceeded:!1}}),Object.defineProperty(this,F,{writable:!0,value:()=>{x(this,D)[D].playAttempted||(x(this,D)[D].playAttempted=!0)}}),Object.defineProperty(this,U,{writable:!0,value:()=>{x(this,D)[D].playSucceeded||(x(this,D)[D].playSucceeded=!0)}})}connectedCallback(){this.render(),this.addEventListener("dh-basis-autoplay-attempted",x(this,F)[F]),this.addEventListener("dh-basis-autoplay-succeeded",x(this,U)[U]),x(this,M)[M](),x(this,N)[N]()}disconnectedCallback(){null==super.disconnectedCallback||super.disconnectedCallback(),this.removeEventListener("dh-basis-autoplay-attempted",x(this,F)[F]),this.removeEventListener("dh-basis-autoplay-succeeded",x(this,U)[U]),x(this,W)[W]()}render(){try{e="dh-lvs-basis-levende-stillbilde",t=f,void 0===customElements.get(e)&&customElements.define(e,t);const n=this.querySelector(".dh-video-wrapper");new l([n],(e=>{const t=e[0],i=n.getAttribute(C);t.isIntersecting&&"OUT-OF-VIEWPORT"===i&&n.setAttribute(C,"IN-VIEWPORT"),t.isIntersecting||"IN-VIEWPORT"!==i||n.setAttribute(C,"OUT-OF-VIEWPORT")}))}catch(n){console.error(`Error while rendering ${I}`,n)}var e,t}}function z(){this.tracker=V("dh-levende-stillbilde",{environment:"production",contentContext:{source:"pp",id:this.dataset.selfId}})}function B(){x(this,L)[L]=new IntersectionObserver((e=>{var t;null!=(t=e[0])&&t.isIntersecting&&(x(this,L)[L].disconnect(),x(this,R)[R].observe(this),this.tracker.trackSelfDescribingEvent({schema:j.ViewportEvent,data:{kind:O.Entry}}))}),{}),x(this,R)[R]=new IntersectionObserver((e=>{var t;null!=(t=e[0])&&t.isIntersecting&&(x(this,R)[R].disconnect(),this.tracker.trackSelfDescribingEvent({schema:j.ViewportEvent,data:{kind:O.Exit}}))}),{threshold:[1],rootMargin:"99000px 0px -100% 0px"}),x(this,L)[L].observe(this)}function $(){var e,t;null==(e=x(this,L)[L])||e.disconnect(),null==(t=x(this,R)[R])||t.disconnect()}customElements.get(I)||customElements.define(I,q)})()})();
//# sourceMappingURL=article-video-loop-bundle-v2-43998c0d32e7fcaf7a5e.esm.js.map